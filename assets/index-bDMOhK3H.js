var gP=t=>{throw TypeError(t)};var J0=(t,e,n)=>e.has(t)||gP("Cannot "+n);var z=(t,e,n)=>(J0(t,e,"read from private field"),n?n.call(t):e.get(t)),Le=(t,e,n)=>e.has(t)?gP("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),we=(t,e,n,r)=>(J0(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ln=(t,e,n)=>(J0(t,e,"access private method"),n);var um=(t,e,n,r)=>({set _(s){we(t,e,s,n)},get _(){return z(t,e,r)}});function nD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var yP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ST(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Yz(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var rD={exports:{}},Yv={},sD={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lp=Symbol.for("react.element"),Xz=Symbol.for("react.portal"),Jz=Symbol.for("react.fragment"),Zz=Symbol.for("react.strict_mode"),eG=Symbol.for("react.profiler"),tG=Symbol.for("react.provider"),nG=Symbol.for("react.context"),rG=Symbol.for("react.forward_ref"),sG=Symbol.for("react.suspense"),iG=Symbol.for("react.memo"),oG=Symbol.for("react.lazy"),vP=Symbol.iterator;function aG(t){return t===null||typeof t!="object"?null:(t=vP&&t[vP]||t["@@iterator"],typeof t=="function"?t:null)}var iD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oD=Object.assign,aD={};function Ku(t,e,n){this.props=t,this.context=e,this.refs=aD,this.updater=n||iD}Ku.prototype.isReactComponent={};Ku.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ku.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lD(){}lD.prototype=Ku.prototype;function CT(t,e,n){this.props=t,this.context=e,this.refs=aD,this.updater=n||iD}var IT=CT.prototype=new lD;IT.constructor=CT;oD(IT,Ku.prototype);IT.isPureReactComponent=!0;var _P=Array.isArray,cD=Object.prototype.hasOwnProperty,PT={current:null},uD={key:!0,ref:!0,__self:!0,__source:!0};function dD(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)cD.call(e,r)&&!uD.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:lp,type:t,key:i,ref:o,props:s,_owner:PT.current}}function lG(t,e){return{$$typeof:lp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function RT(t){return typeof t=="object"&&t!==null&&t.$$typeof===lp}function cG(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xP=/\/+/g;function Z0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?cG(""+t.key):e.toString(36)}function Tg(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case lp:case Xz:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Z0(o,0):r,_P(s)?(n="",t!=null&&(n=t.replace(xP,"$&/")+"/"),Tg(s,e,n,"",function(u){return u})):s!=null&&(RT(s)&&(s=lG(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(xP,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",_P(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Z0(i,a);o+=Tg(i,e,n,l,s)}else if(l=aG(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Z0(i,a++),o+=Tg(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function dm(t,e,n){if(t==null)return t;var r=[],s=0;return Tg(t,r,"","",function(i){return e.call(n,i,s++)}),r}function uG(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var kn={current:null},Sg={transition:null},dG={ReactCurrentDispatcher:kn,ReactCurrentBatchConfig:Sg,ReactCurrentOwner:PT};function hD(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:dm,forEach:function(t,e,n){dm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return dm(t,function(){e++}),e},toArray:function(t){return dm(t,function(e){return e})||[]},only:function(t){if(!RT(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=Ku;Ie.Fragment=Jz;Ie.Profiler=eG;Ie.PureComponent=CT;Ie.StrictMode=Zz;Ie.Suspense=sG;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dG;Ie.act=hD;Ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=oD({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=PT.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)cD.call(e,l)&&!uD.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:lp,type:t.type,key:s,ref:i,props:r,_owner:o}};Ie.createContext=function(t){return t={$$typeof:nG,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tG,_context:t},t.Consumer=t};Ie.createElement=dD;Ie.createFactory=function(t){var e=dD.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:rG,render:t}};Ie.isValidElement=RT;Ie.lazy=function(t){return{$$typeof:oG,_payload:{_status:-1,_result:t},_init:uG}};Ie.memo=function(t,e){return{$$typeof:iG,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=Sg.transition;Sg.transition={};try{t()}finally{Sg.transition=e}};Ie.unstable_act=hD;Ie.useCallback=function(t,e){return kn.current.useCallback(t,e)};Ie.useContext=function(t){return kn.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return kn.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return kn.current.useEffect(t,e)};Ie.useId=function(){return kn.current.useId()};Ie.useImperativeHandle=function(t,e,n){return kn.current.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return kn.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return kn.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return kn.current.useMemo(t,e)};Ie.useReducer=function(t,e,n){return kn.current.useReducer(t,e,n)};Ie.useRef=function(t){return kn.current.useRef(t)};Ie.useState=function(t){return kn.current.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return kn.current.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return kn.current.useTransition()};Ie.version="18.3.1";sD.exports=Ie;var g=sD.exports;const H=ST(g),fD=nD({__proto__:null,default:H},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hG=g,fG=Symbol.for("react.element"),pG=Symbol.for("react.fragment"),mG=Object.prototype.hasOwnProperty,gG=hG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yG={key:!0,ref:!0,__self:!0,__source:!0};function pD(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)mG.call(e,r)&&!yG.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:fG,type:t,key:i,ref:o,props:s,_owner:gG.current}}Yv.Fragment=pG;Yv.jsx=pD;Yv.jsxs=pD;rD.exports=Yv;var c=rD.exports,mD={exports:{}},fr={},gD={exports:{}},yD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,V){var W=$.length;$.push(V);e:for(;0<W;){var fe=W-1>>>1,re=$[fe];if(0<s(re,V))$[fe]=V,$[W]=re,W=fe;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var V=$[0],W=$.pop();if(W!==V){$[0]=W;e:for(var fe=0,re=$.length,pe=re>>>1;fe<pe;){var Ee=2*(fe+1)-1,Be=$[Ee],at=Ee+1,xe=$[at];if(0>s(Be,W))at<re&&0>s(xe,Be)?($[fe]=xe,$[at]=W,fe=at):($[fe]=Be,$[Ee]=W,fe=Ee);else if(at<re&&0>s(xe,W))$[fe]=xe,$[at]=W,fe=at;else break e}}return V}function s($,V){var W=$.sortIndex-V.sortIndex;return W!==0?W:$.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,p=3,m=!1,y=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var V=n(u);V!==null;){if(V.callback===null)r(u);else if(V.startTime<=$)r(u),V.sortIndex=V.expirationTime,e(l,V);else break;V=n(u)}}function I($){if(_=!1,w($),!y)if(n(l)!==null)y=!0,Y(k);else{var V=n(u);V!==null&&ee(I,V.startTime-$)}}function k($,V){y=!1,_&&(_=!1,x(S),S=-1),m=!0;var W=p;try{for(w(V),h=n(l);h!==null&&(!(h.expirationTime>V)||$&&!O());){var fe=h.callback;if(typeof fe=="function"){h.callback=null,p=h.priorityLevel;var re=fe(h.expirationTime<=V);V=t.unstable_now(),typeof re=="function"?h.callback=re:h===n(l)&&r(l),w(V)}else r(l);h=n(l)}if(h!==null)var pe=!0;else{var Ee=n(u);Ee!==null&&ee(I,Ee.startTime-V),pe=!1}return pe}finally{h=null,p=W,m=!1}}var M=!1,C=null,S=-1,P=5,R=-1;function O(){return!(t.unstable_now()-R<P)}function D(){if(C!==null){var $=t.unstable_now();R=$;var V=!0;try{V=C(!0,$)}finally{V?N():(M=!1,C=null)}}else M=!1}var N;if(typeof E=="function")N=function(){E(D)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,de=Z.port2;Z.port1.onmessage=D,N=function(){de.postMessage(null)}}else N=function(){b(D,0)};function Y($){C=$,M||(M=!0,N())}function ee($,V){S=b(function(){$(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,Y(k))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var W=p;p=V;try{return $()}finally{p=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,V){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var W=p;p=$;try{return V()}finally{p=W}},t.unstable_scheduleCallback=function($,V,W){var fe=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?fe+W:fe):W=fe,$){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=W+re,$={id:d++,callback:V,priorityLevel:$,startTime:W,expirationTime:re,sortIndex:-1},W>fe?($.sortIndex=W,e(u,$),n(l)===null&&$===n(u)&&(_?(x(S),S=-1):_=!0,ee(I,W-fe))):($.sortIndex=re,e(l,$),y||m||(y=!0,Y(k))),$},t.unstable_shouldYield=O,t.unstable_wrapCallback=function($){var V=p;return function(){var W=p;p=V;try{return $.apply(this,arguments)}finally{p=W}}}})(yD);gD.exports=yD;var vG=gD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _G=g,ur=vG;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vD=new Set,uf={};function Pl(t,e){pu(t,e),pu(t+"Capture",e)}function pu(t,e){for(uf[t]=e,t=0;t<e.length;t++)vD.add(e[t])}var di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qw=Object.prototype.hasOwnProperty,xG=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wP={},bP={};function wG(t){return Qw.call(bP,t)?!0:Qw.call(wP,t)?!1:xG.test(t)?bP[t]=!0:(wP[t]=!0,!1)}function bG(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function EG(t,e,n,r){if(e===null||typeof e>"u"||bG(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function On(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var sn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){sn[t]=new On(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];sn[e]=new On(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){sn[t]=new On(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){sn[t]=new On(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){sn[t]=new On(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){sn[t]=new On(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){sn[t]=new On(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){sn[t]=new On(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){sn[t]=new On(t,5,!1,t.toLowerCase(),null,!1,!1)});var AT=/[\-:]([a-z])/g;function NT(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(AT,NT);sn[e]=new On(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(AT,NT);sn[e]=new On(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(AT,NT);sn[e]=new On(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){sn[t]=new On(t,1,!1,t.toLowerCase(),null,!1,!1)});sn.xlinkHref=new On("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){sn[t]=new On(t,1,!1,t.toLowerCase(),null,!0,!0)});function kT(t,e,n,r){var s=sn.hasOwnProperty(e)?sn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(EG(e,n,s,r)&&(n=null),r||s===null?wG(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ei=_G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hm=Symbol.for("react.element"),Tc=Symbol.for("react.portal"),Sc=Symbol.for("react.fragment"),OT=Symbol.for("react.strict_mode"),Yw=Symbol.for("react.profiler"),_D=Symbol.for("react.provider"),xD=Symbol.for("react.context"),DT=Symbol.for("react.forward_ref"),Xw=Symbol.for("react.suspense"),Jw=Symbol.for("react.suspense_list"),jT=Symbol.for("react.memo"),Ji=Symbol.for("react.lazy"),wD=Symbol.for("react.offscreen"),EP=Symbol.iterator;function Nd(t){return t===null||typeof t!="object"?null:(t=EP&&t[EP]||t["@@iterator"],typeof t=="function"?t:null)}var gt=Object.assign,ex;function _h(t){if(ex===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ex=e&&e[1]||""}return`
`+ex+t}var tx=!1;function nx(t,e){if(!t||tx)return"";tx=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{tx=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_h(t):""}function TG(t){switch(t.tag){case 5:return _h(t.type);case 16:return _h("Lazy");case 13:return _h("Suspense");case 19:return _h("SuspenseList");case 0:case 2:case 15:return t=nx(t.type,!1),t;case 11:return t=nx(t.type.render,!1),t;case 1:return t=nx(t.type,!0),t;default:return""}}function Zw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Sc:return"Fragment";case Tc:return"Portal";case Yw:return"Profiler";case OT:return"StrictMode";case Xw:return"Suspense";case Jw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xD:return(t.displayName||"Context")+".Consumer";case _D:return(t._context.displayName||"Context")+".Provider";case DT:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jT:return e=t.displayName||null,e!==null?e:Zw(t.type)||"Memo";case Ji:e=t._payload,t=t._init;try{return Zw(t(e))}catch{}}return null}function SG(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zw(e);case 8:return e===OT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Lo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bD(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CG(t){var e=bD(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fm(t){t._valueTracker||(t._valueTracker=CG(t))}function ED(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bD(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function my(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function eb(t,e){var n=e.checked;return gt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function TP(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Lo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function TD(t,e){e=e.checked,e!=null&&kT(t,"checked",e,!1)}function tb(t,e){TD(t,e);var n=Lo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?nb(t,e.type,n):e.hasOwnProperty("defaultValue")&&nb(t,e.type,Lo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function SP(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function nb(t,e,n){(e!=="number"||my(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xh=Array.isArray;function Vc(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Lo(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function rb(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return gt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function CP(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(xh(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Lo(n)}}function SD(t,e){var n=Lo(e.value),r=Lo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function IP(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function CD(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sb(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?CD(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var pm,ID=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(pm=pm||document.createElement("div"),pm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=pm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function df(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Dh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IG=["Webkit","ms","Moz","O"];Object.keys(Dh).forEach(function(t){IG.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Dh[e]=Dh[t]})});function PD(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Dh.hasOwnProperty(t)&&Dh[t]?(""+e).trim():e+"px"}function RD(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=PD(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var PG=gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ib(t,e){if(e){if(PG[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function ob(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ab=null;function MT(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lb=null,Uc=null,$c=null;function PP(t){if(t=dp(t)){if(typeof lb!="function")throw Error(q(280));var e=t.stateNode;e&&(e=t_(e),lb(t.stateNode,t.type,e))}}function AD(t){Uc?$c?$c.push(t):$c=[t]:Uc=t}function ND(){if(Uc){var t=Uc,e=$c;if($c=Uc=null,PP(t),e)for(t=0;t<e.length;t++)PP(e[t])}}function kD(t,e){return t(e)}function OD(){}var rx=!1;function DD(t,e,n){if(rx)return t(e,n);rx=!0;try{return kD(t,e,n)}finally{rx=!1,(Uc!==null||$c!==null)&&(OD(),ND())}}function hf(t,e){var n=t.stateNode;if(n===null)return null;var r=t_(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var cb=!1;if(di)try{var kd={};Object.defineProperty(kd,"passive",{get:function(){cb=!0}}),window.addEventListener("test",kd,kd),window.removeEventListener("test",kd,kd)}catch{cb=!1}function RG(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var jh=!1,gy=null,yy=!1,ub=null,AG={onError:function(t){jh=!0,gy=t}};function NG(t,e,n,r,s,i,o,a,l){jh=!1,gy=null,RG.apply(AG,arguments)}function kG(t,e,n,r,s,i,o,a,l){if(NG.apply(this,arguments),jh){if(jh){var u=gy;jh=!1,gy=null}else throw Error(q(198));yy||(yy=!0,ub=u)}}function Rl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function jD(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function RP(t){if(Rl(t)!==t)throw Error(q(188))}function OG(t){var e=t.alternate;if(!e){if(e=Rl(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return RP(s),t;if(i===r)return RP(s),e;i=i.sibling}throw Error(q(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function MD(t){return t=OG(t),t!==null?LD(t):null}function LD(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=LD(t);if(e!==null)return e;t=t.sibling}return null}var FD=ur.unstable_scheduleCallback,AP=ur.unstable_cancelCallback,DG=ur.unstable_shouldYield,jG=ur.unstable_requestPaint,Ct=ur.unstable_now,MG=ur.unstable_getCurrentPriorityLevel,LT=ur.unstable_ImmediatePriority,VD=ur.unstable_UserBlockingPriority,vy=ur.unstable_NormalPriority,LG=ur.unstable_LowPriority,UD=ur.unstable_IdlePriority,Xv=null,Cs=null;function FG(t){if(Cs&&typeof Cs.onCommitFiberRoot=="function")try{Cs.onCommitFiberRoot(Xv,t,void 0,(t.current.flags&128)===128)}catch{}}var Jr=Math.clz32?Math.clz32:$G,VG=Math.log,UG=Math.LN2;function $G(t){return t>>>=0,t===0?32:31-(VG(t)/UG|0)|0}var mm=64,gm=4194304;function wh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function _y(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=wh(a):(i&=o,i!==0&&(r=wh(i)))}else o=n&~s,o!==0?r=wh(o):i!==0&&(r=wh(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Jr(e),s=1<<n,r|=t[n],e&=~s;return r}function BG(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zG(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Jr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=BG(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function db(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $D(){var t=mm;return mm<<=1,!(mm&4194240)&&(mm=64),t}function sx(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function cp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Jr(e),t[e]=n}function GG(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Jr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function FT(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Jr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var qe=0;function BD(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zD,VT,GD,qD,WD,hb=!1,ym=[],vo=null,_o=null,xo=null,ff=new Map,pf=new Map,to=[],qG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function NP(t,e){switch(t){case"focusin":case"focusout":vo=null;break;case"dragenter":case"dragleave":_o=null;break;case"mouseover":case"mouseout":xo=null;break;case"pointerover":case"pointerout":ff.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pf.delete(e.pointerId)}}function Od(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=dp(e),e!==null&&VT(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function WG(t,e,n,r,s){switch(e){case"focusin":return vo=Od(vo,t,e,n,r,s),!0;case"dragenter":return _o=Od(_o,t,e,n,r,s),!0;case"mouseover":return xo=Od(xo,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ff.set(i,Od(ff.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,pf.set(i,Od(pf.get(i)||null,t,e,n,r,s)),!0}return!1}function HD(t){var e=Da(t.target);if(e!==null){var n=Rl(e);if(n!==null){if(e=n.tag,e===13){if(e=jD(n),e!==null){t.blockedOn=e,WD(t.priority,function(){GD(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fb(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ab=r,n.target.dispatchEvent(r),ab=null}else return e=dp(n),e!==null&&VT(e),t.blockedOn=n,!1;e.shift()}return!0}function kP(t,e,n){Cg(t)&&n.delete(e)}function HG(){hb=!1,vo!==null&&Cg(vo)&&(vo=null),_o!==null&&Cg(_o)&&(_o=null),xo!==null&&Cg(xo)&&(xo=null),ff.forEach(kP),pf.forEach(kP)}function Dd(t,e){t.blockedOn===e&&(t.blockedOn=null,hb||(hb=!0,ur.unstable_scheduleCallback(ur.unstable_NormalPriority,HG)))}function mf(t){function e(s){return Dd(s,t)}if(0<ym.length){Dd(ym[0],t);for(var n=1;n<ym.length;n++){var r=ym[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vo!==null&&Dd(vo,t),_o!==null&&Dd(_o,t),xo!==null&&Dd(xo,t),ff.forEach(e),pf.forEach(e),n=0;n<to.length;n++)r=to[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<to.length&&(n=to[0],n.blockedOn===null);)HD(n),n.blockedOn===null&&to.shift()}var Bc=Ei.ReactCurrentBatchConfig,xy=!0;function KG(t,e,n,r){var s=qe,i=Bc.transition;Bc.transition=null;try{qe=1,UT(t,e,n,r)}finally{qe=s,Bc.transition=i}}function QG(t,e,n,r){var s=qe,i=Bc.transition;Bc.transition=null;try{qe=4,UT(t,e,n,r)}finally{qe=s,Bc.transition=i}}function UT(t,e,n,r){if(xy){var s=fb(t,e,n,r);if(s===null)px(t,e,r,wy,n),NP(t,r);else if(WG(s,t,e,n,r))r.stopPropagation();else if(NP(t,r),e&4&&-1<qG.indexOf(t)){for(;s!==null;){var i=dp(s);if(i!==null&&zD(i),i=fb(t,e,n,r),i===null&&px(t,e,r,wy,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else px(t,e,r,null,n)}}var wy=null;function fb(t,e,n,r){if(wy=null,t=MT(r),t=Da(t),t!==null)if(e=Rl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=jD(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wy=t,null}function KD(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MG()){case LT:return 1;case VD:return 4;case vy:case LG:return 16;case UD:return 536870912;default:return 16}default:return 16}}var fo=null,$T=null,Ig=null;function QD(){if(Ig)return Ig;var t,e=$T,n=e.length,r,s="value"in fo?fo.value:fo.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ig=s.slice(t,1<r?1-r:void 0)}function Pg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function vm(){return!0}function OP(){return!1}function pr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?vm:OP,this.isPropagationStopped=OP,this}return gt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vm)},persist:function(){},isPersistent:vm}),e}var Qu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},BT=pr(Qu),up=gt({},Qu,{view:0,detail:0}),YG=pr(up),ix,ox,jd,Jv=gt({},up,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zT,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==jd&&(jd&&t.type==="mousemove"?(ix=t.screenX-jd.screenX,ox=t.screenY-jd.screenY):ox=ix=0,jd=t),ix)},movementY:function(t){return"movementY"in t?t.movementY:ox}}),DP=pr(Jv),XG=gt({},Jv,{dataTransfer:0}),JG=pr(XG),ZG=gt({},up,{relatedTarget:0}),ax=pr(ZG),e9=gt({},Qu,{animationName:0,elapsedTime:0,pseudoElement:0}),t9=pr(e9),n9=gt({},Qu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),r9=pr(n9),s9=gt({},Qu,{data:0}),jP=pr(s9),i9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},a9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function l9(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=a9[t])?!!e[t]:!1}function zT(){return l9}var c9=gt({},up,{key:function(t){if(t.key){var e=i9[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?o9[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zT,charCode:function(t){return t.type==="keypress"?Pg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),u9=pr(c9),d9=gt({},Jv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),MP=pr(d9),h9=gt({},up,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zT}),f9=pr(h9),p9=gt({},Qu,{propertyName:0,elapsedTime:0,pseudoElement:0}),m9=pr(p9),g9=gt({},Jv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),y9=pr(g9),v9=[9,13,27,32],GT=di&&"CompositionEvent"in window,Mh=null;di&&"documentMode"in document&&(Mh=document.documentMode);var _9=di&&"TextEvent"in window&&!Mh,YD=di&&(!GT||Mh&&8<Mh&&11>=Mh),LP=" ",FP=!1;function XD(t,e){switch(t){case"keyup":return v9.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JD(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Cc=!1;function x9(t,e){switch(t){case"compositionend":return JD(e);case"keypress":return e.which!==32?null:(FP=!0,LP);case"textInput":return t=e.data,t===LP&&FP?null:t;default:return null}}function w9(t,e){if(Cc)return t==="compositionend"||!GT&&XD(t,e)?(t=QD(),Ig=$T=fo=null,Cc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return YD&&e.locale!=="ko"?null:e.data;default:return null}}var b9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function VP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!b9[t.type]:e==="textarea"}function ZD(t,e,n,r){AD(r),e=by(e,"onChange"),0<e.length&&(n=new BT("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Lh=null,gf=null;function E9(t){uj(t,0)}function Zv(t){var e=Rc(t);if(ED(e))return t}function T9(t,e){if(t==="change")return e}var ej=!1;if(di){var lx;if(di){var cx="oninput"in document;if(!cx){var UP=document.createElement("div");UP.setAttribute("oninput","return;"),cx=typeof UP.oninput=="function"}lx=cx}else lx=!1;ej=lx&&(!document.documentMode||9<document.documentMode)}function $P(){Lh&&(Lh.detachEvent("onpropertychange",tj),gf=Lh=null)}function tj(t){if(t.propertyName==="value"&&Zv(gf)){var e=[];ZD(e,gf,t,MT(t)),DD(E9,e)}}function S9(t,e,n){t==="focusin"?($P(),Lh=e,gf=n,Lh.attachEvent("onpropertychange",tj)):t==="focusout"&&$P()}function C9(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zv(gf)}function I9(t,e){if(t==="click")return Zv(e)}function P9(t,e){if(t==="input"||t==="change")return Zv(e)}function R9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ns=typeof Object.is=="function"?Object.is:R9;function yf(t,e){if(ns(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Qw.call(e,s)||!ns(t[s],e[s]))return!1}return!0}function BP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zP(t,e){var n=BP(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=BP(n)}}function nj(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?nj(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rj(){for(var t=window,e=my();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=my(t.document)}return e}function qT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function A9(t){var e=rj(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&nj(n.ownerDocument.documentElement,n)){if(r!==null&&qT(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=zP(n,i);var o=zP(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var N9=di&&"documentMode"in document&&11>=document.documentMode,Ic=null,pb=null,Fh=null,mb=!1;function GP(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mb||Ic==null||Ic!==my(r)||(r=Ic,"selectionStart"in r&&qT(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fh&&yf(Fh,r)||(Fh=r,r=by(pb,"onSelect"),0<r.length&&(e=new BT("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ic)))}function _m(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Pc={animationend:_m("Animation","AnimationEnd"),animationiteration:_m("Animation","AnimationIteration"),animationstart:_m("Animation","AnimationStart"),transitionend:_m("Transition","TransitionEnd")},ux={},sj={};di&&(sj=document.createElement("div").style,"AnimationEvent"in window||(delete Pc.animationend.animation,delete Pc.animationiteration.animation,delete Pc.animationstart.animation),"TransitionEvent"in window||delete Pc.transitionend.transition);function e_(t){if(ux[t])return ux[t];if(!Pc[t])return t;var e=Pc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sj)return ux[t]=e[n];return t}var ij=e_("animationend"),oj=e_("animationiteration"),aj=e_("animationstart"),lj=e_("transitionend"),cj=new Map,qP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ko(t,e){cj.set(t,e),Pl(e,[t])}for(var dx=0;dx<qP.length;dx++){var hx=qP[dx],k9=hx.toLowerCase(),O9=hx[0].toUpperCase()+hx.slice(1);Ko(k9,"on"+O9)}Ko(ij,"onAnimationEnd");Ko(oj,"onAnimationIteration");Ko(aj,"onAnimationStart");Ko("dblclick","onDoubleClick");Ko("focusin","onFocus");Ko("focusout","onBlur");Ko(lj,"onTransitionEnd");pu("onMouseEnter",["mouseout","mouseover"]);pu("onMouseLeave",["mouseout","mouseover"]);pu("onPointerEnter",["pointerout","pointerover"]);pu("onPointerLeave",["pointerout","pointerover"]);Pl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D9=new Set("cancel close invalid load scroll toggle".split(" ").concat(bh));function WP(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,kG(r,e,void 0,t),t.currentTarget=null}function uj(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;WP(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;WP(s,a,u),i=l}}}if(yy)throw t=ub,yy=!1,ub=null,t}function nt(t,e){var n=e[xb];n===void 0&&(n=e[xb]=new Set);var r=t+"__bubble";n.has(r)||(dj(e,t,2,!1),n.add(r))}function fx(t,e,n){var r=0;e&&(r|=4),dj(n,t,r,e)}var xm="_reactListening"+Math.random().toString(36).slice(2);function vf(t){if(!t[xm]){t[xm]=!0,vD.forEach(function(n){n!=="selectionchange"&&(D9.has(n)||fx(n,!1,t),fx(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xm]||(e[xm]=!0,fx("selectionchange",!1,e))}}function dj(t,e,n,r){switch(KD(e)){case 1:var s=KG;break;case 4:s=QG;break;default:s=UT}n=s.bind(null,e,n,t),s=void 0,!cb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function px(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Da(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}DD(function(){var u=i,d=MT(n),h=[];e:{var p=cj.get(t);if(p!==void 0){var m=BT,y=t;switch(t){case"keypress":if(Pg(n)===0)break e;case"keydown":case"keyup":m=u9;break;case"focusin":y="focus",m=ax;break;case"focusout":y="blur",m=ax;break;case"beforeblur":case"afterblur":m=ax;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=DP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=JG;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=f9;break;case ij:case oj:case aj:m=t9;break;case lj:m=m9;break;case"scroll":m=YG;break;case"wheel":m=y9;break;case"copy":case"cut":case"paste":m=r9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=MP}var _=(e&4)!==0,b=!_&&t==="scroll",x=_?p!==null?p+"Capture":null:p;_=[];for(var E=u,w;E!==null;){w=E;var I=w.stateNode;if(w.tag===5&&I!==null&&(w=I,x!==null&&(I=hf(E,x),I!=null&&_.push(_f(E,I,w)))),b)break;E=E.return}0<_.length&&(p=new m(p,y,null,n,d),h.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==ab&&(y=n.relatedTarget||n.fromElement)&&(Da(y)||y[hi]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=u,y=y?Da(y):null,y!==null&&(b=Rl(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(_=DP,I="onMouseLeave",x="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(_=MP,I="onPointerLeave",x="onPointerEnter",E="pointer"),b=m==null?p:Rc(m),w=y==null?p:Rc(y),p=new _(I,E+"leave",m,n,d),p.target=b,p.relatedTarget=w,I=null,Da(d)===u&&(_=new _(x,E+"enter",y,n,d),_.target=w,_.relatedTarget=b,I=_),b=I,m&&y)t:{for(_=m,x=y,E=0,w=_;w;w=Ql(w))E++;for(w=0,I=x;I;I=Ql(I))w++;for(;0<E-w;)_=Ql(_),E--;for(;0<w-E;)x=Ql(x),w--;for(;E--;){if(_===x||x!==null&&_===x.alternate)break t;_=Ql(_),x=Ql(x)}_=null}else _=null;m!==null&&HP(h,p,m,_,!1),y!==null&&b!==null&&HP(h,b,y,_,!0)}}e:{if(p=u?Rc(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var k=T9;else if(VP(p))if(ej)k=P9;else{k=C9;var M=S9}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(k=I9);if(k&&(k=k(t,u))){ZD(h,k,n,d);break e}M&&M(t,p,u),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&nb(p,"number",p.value)}switch(M=u?Rc(u):window,t){case"focusin":(VP(M)||M.contentEditable==="true")&&(Ic=M,pb=u,Fh=null);break;case"focusout":Fh=pb=Ic=null;break;case"mousedown":mb=!0;break;case"contextmenu":case"mouseup":case"dragend":mb=!1,GP(h,n,d);break;case"selectionchange":if(N9)break;case"keydown":case"keyup":GP(h,n,d)}var C;if(GT)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Cc?XD(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(YD&&n.locale!=="ko"&&(Cc||S!=="onCompositionStart"?S==="onCompositionEnd"&&Cc&&(C=QD()):(fo=d,$T="value"in fo?fo.value:fo.textContent,Cc=!0)),M=by(u,S),0<M.length&&(S=new jP(S,t,null,n,d),h.push({event:S,listeners:M}),C?S.data=C:(C=JD(n),C!==null&&(S.data=C)))),(C=_9?x9(t,n):w9(t,n))&&(u=by(u,"onBeforeInput"),0<u.length&&(d=new jP("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=C))}uj(h,e)})}function _f(t,e,n){return{instance:t,listener:e,currentTarget:n}}function by(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=hf(t,n),i!=null&&r.unshift(_f(t,i,s)),i=hf(t,e),i!=null&&r.push(_f(t,i,s))),t=t.return}return r}function Ql(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function HP(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=hf(n,i),l!=null&&o.unshift(_f(n,l,a))):s||(l=hf(n,i),l!=null&&o.push(_f(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var j9=/\r\n?/g,M9=/\u0000|\uFFFD/g;function KP(t){return(typeof t=="string"?t:""+t).replace(j9,`
`).replace(M9,"")}function wm(t,e,n){if(e=KP(e),KP(t)!==e&&n)throw Error(q(425))}function Ey(){}var gb=null,yb=null;function vb(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _b=typeof setTimeout=="function"?setTimeout:void 0,L9=typeof clearTimeout=="function"?clearTimeout:void 0,QP=typeof Promise=="function"?Promise:void 0,F9=typeof queueMicrotask=="function"?queueMicrotask:typeof QP<"u"?function(t){return QP.resolve(null).then(t).catch(V9)}:_b;function V9(t){setTimeout(function(){throw t})}function mx(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),mf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);mf(e)}function wo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function YP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yu=Math.random().toString(36).slice(2),ws="__reactFiber$"+Yu,xf="__reactProps$"+Yu,hi="__reactContainer$"+Yu,xb="__reactEvents$"+Yu,U9="__reactListeners$"+Yu,$9="__reactHandles$"+Yu;function Da(t){var e=t[ws];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hi]||n[ws]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=YP(t);t!==null;){if(n=t[ws])return n;t=YP(t)}return e}t=n,n=t.parentNode}return null}function dp(t){return t=t[ws]||t[hi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Rc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function t_(t){return t[xf]||null}var wb=[],Ac=-1;function Qo(t){return{current:t}}function it(t){0>Ac||(t.current=wb[Ac],wb[Ac]=null,Ac--)}function Ze(t,e){Ac++,wb[Ac]=t.current,t.current=e}var Fo={},bn=Qo(Fo),Wn=Qo(!1),Ja=Fo;function mu(t,e){var n=t.type.contextTypes;if(!n)return Fo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Hn(t){return t=t.childContextTypes,t!=null}function Ty(){it(Wn),it(bn)}function XP(t,e,n){if(bn.current!==Fo)throw Error(q(168));Ze(bn,e),Ze(Wn,n)}function hj(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(q(108,SG(t)||"Unknown",s));return gt({},n,r)}function Sy(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fo,Ja=bn.current,Ze(bn,t),Ze(Wn,Wn.current),!0}function JP(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=hj(t,e,Ja),r.__reactInternalMemoizedMergedChildContext=t,it(Wn),it(bn),Ze(bn,t)):it(Wn),Ze(Wn,n)}var Qs=null,n_=!1,gx=!1;function fj(t){Qs===null?Qs=[t]:Qs.push(t)}function B9(t){n_=!0,fj(t)}function Yo(){if(!gx&&Qs!==null){gx=!0;var t=0,e=qe;try{var n=Qs;for(qe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qs=null,n_=!1}catch(s){throw Qs!==null&&(Qs=Qs.slice(t+1)),FD(LT,Yo),s}finally{qe=e,gx=!1}}return null}var Nc=[],kc=0,Cy=null,Iy=0,xr=[],wr=0,Za=null,Zs=1,ei="";function Ea(t,e){Nc[kc++]=Iy,Nc[kc++]=Cy,Cy=t,Iy=e}function pj(t,e,n){xr[wr++]=Zs,xr[wr++]=ei,xr[wr++]=Za,Za=t;var r=Zs;t=ei;var s=32-Jr(r)-1;r&=~(1<<s),n+=1;var i=32-Jr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Zs=1<<32-Jr(e)+s|n<<s|r,ei=i+t}else Zs=1<<i|n<<s|r,ei=t}function WT(t){t.return!==null&&(Ea(t,1),pj(t,1,0))}function HT(t){for(;t===Cy;)Cy=Nc[--kc],Nc[kc]=null,Iy=Nc[--kc],Nc[kc]=null;for(;t===Za;)Za=xr[--wr],xr[wr]=null,ei=xr[--wr],xr[wr]=null,Zs=xr[--wr],xr[wr]=null}var ir=null,rr=null,ut=!1,Kr=null;function mj(t,e){var n=br(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ZP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ir=t,rr=wo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ir=t,rr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Za!==null?{id:Zs,overflow:ei}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=br(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ir=t,rr=null,!0):!1;default:return!1}}function bb(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Eb(t){if(ut){var e=rr;if(e){var n=e;if(!ZP(t,e)){if(bb(t))throw Error(q(418));e=wo(n.nextSibling);var r=ir;e&&ZP(t,e)?mj(r,n):(t.flags=t.flags&-4097|2,ut=!1,ir=t)}}else{if(bb(t))throw Error(q(418));t.flags=t.flags&-4097|2,ut=!1,ir=t}}}function eR(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ir=t}function bm(t){if(t!==ir)return!1;if(!ut)return eR(t),ut=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vb(t.type,t.memoizedProps)),e&&(e=rr)){if(bb(t))throw gj(),Error(q(418));for(;e;)mj(t,e),e=wo(e.nextSibling)}if(eR(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rr=wo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rr=null}}else rr=ir?wo(t.stateNode.nextSibling):null;return!0}function gj(){for(var t=rr;t;)t=wo(t.nextSibling)}function gu(){rr=ir=null,ut=!1}function KT(t){Kr===null?Kr=[t]:Kr.push(t)}var z9=Ei.ReactCurrentBatchConfig;function Md(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function Em(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function tR(t){var e=t._init;return e(t._payload)}function yj(t){function e(x,E){if(t){var w=x.deletions;w===null?(x.deletions=[E],x.flags|=16):w.push(E)}}function n(x,E){if(!t)return null;for(;E!==null;)e(x,E),E=E.sibling;return null}function r(x,E){for(x=new Map;E!==null;)E.key!==null?x.set(E.key,E):x.set(E.index,E),E=E.sibling;return x}function s(x,E){return x=So(x,E),x.index=0,x.sibling=null,x}function i(x,E,w){return x.index=w,t?(w=x.alternate,w!==null?(w=w.index,w<E?(x.flags|=2,E):w):(x.flags|=2,E)):(x.flags|=1048576,E)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,E,w,I){return E===null||E.tag!==6?(E=Ex(w,x.mode,I),E.return=x,E):(E=s(E,w),E.return=x,E)}function l(x,E,w,I){var k=w.type;return k===Sc?d(x,E,w.props.children,I,w.key):E!==null&&(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ji&&tR(k)===E.type)?(I=s(E,w.props),I.ref=Md(x,E,w),I.return=x,I):(I=jg(w.type,w.key,w.props,null,x.mode,I),I.ref=Md(x,E,w),I.return=x,I)}function u(x,E,w,I){return E===null||E.tag!==4||E.stateNode.containerInfo!==w.containerInfo||E.stateNode.implementation!==w.implementation?(E=Tx(w,x.mode,I),E.return=x,E):(E=s(E,w.children||[]),E.return=x,E)}function d(x,E,w,I,k){return E===null||E.tag!==7?(E=Ha(w,x.mode,I,k),E.return=x,E):(E=s(E,w),E.return=x,E)}function h(x,E,w){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Ex(""+E,x.mode,w),E.return=x,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case hm:return w=jg(E.type,E.key,E.props,null,x.mode,w),w.ref=Md(x,null,E),w.return=x,w;case Tc:return E=Tx(E,x.mode,w),E.return=x,E;case Ji:var I=E._init;return h(x,I(E._payload),w)}if(xh(E)||Nd(E))return E=Ha(E,x.mode,w,null),E.return=x,E;Em(x,E)}return null}function p(x,E,w,I){var k=E!==null?E.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return k!==null?null:a(x,E,""+w,I);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case hm:return w.key===k?l(x,E,w,I):null;case Tc:return w.key===k?u(x,E,w,I):null;case Ji:return k=w._init,p(x,E,k(w._payload),I)}if(xh(w)||Nd(w))return k!==null?null:d(x,E,w,I,null);Em(x,w)}return null}function m(x,E,w,I,k){if(typeof I=="string"&&I!==""||typeof I=="number")return x=x.get(w)||null,a(E,x,""+I,k);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case hm:return x=x.get(I.key===null?w:I.key)||null,l(E,x,I,k);case Tc:return x=x.get(I.key===null?w:I.key)||null,u(E,x,I,k);case Ji:var M=I._init;return m(x,E,w,M(I._payload),k)}if(xh(I)||Nd(I))return x=x.get(w)||null,d(E,x,I,k,null);Em(E,I)}return null}function y(x,E,w,I){for(var k=null,M=null,C=E,S=E=0,P=null;C!==null&&S<w.length;S++){C.index>S?(P=C,C=null):P=C.sibling;var R=p(x,C,w[S],I);if(R===null){C===null&&(C=P);break}t&&C&&R.alternate===null&&e(x,C),E=i(R,E,S),M===null?k=R:M.sibling=R,M=R,C=P}if(S===w.length)return n(x,C),ut&&Ea(x,S),k;if(C===null){for(;S<w.length;S++)C=h(x,w[S],I),C!==null&&(E=i(C,E,S),M===null?k=C:M.sibling=C,M=C);return ut&&Ea(x,S),k}for(C=r(x,C);S<w.length;S++)P=m(C,x,S,w[S],I),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?S:P.key),E=i(P,E,S),M===null?k=P:M.sibling=P,M=P);return t&&C.forEach(function(O){return e(x,O)}),ut&&Ea(x,S),k}function _(x,E,w,I){var k=Nd(w);if(typeof k!="function")throw Error(q(150));if(w=k.call(w),w==null)throw Error(q(151));for(var M=k=null,C=E,S=E=0,P=null,R=w.next();C!==null&&!R.done;S++,R=w.next()){C.index>S?(P=C,C=null):P=C.sibling;var O=p(x,C,R.value,I);if(O===null){C===null&&(C=P);break}t&&C&&O.alternate===null&&e(x,C),E=i(O,E,S),M===null?k=O:M.sibling=O,M=O,C=P}if(R.done)return n(x,C),ut&&Ea(x,S),k;if(C===null){for(;!R.done;S++,R=w.next())R=h(x,R.value,I),R!==null&&(E=i(R,E,S),M===null?k=R:M.sibling=R,M=R);return ut&&Ea(x,S),k}for(C=r(x,C);!R.done;S++,R=w.next())R=m(C,x,S,R.value,I),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?S:R.key),E=i(R,E,S),M===null?k=R:M.sibling=R,M=R);return t&&C.forEach(function(D){return e(x,D)}),ut&&Ea(x,S),k}function b(x,E,w,I){if(typeof w=="object"&&w!==null&&w.type===Sc&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case hm:e:{for(var k=w.key,M=E;M!==null;){if(M.key===k){if(k=w.type,k===Sc){if(M.tag===7){n(x,M.sibling),E=s(M,w.props.children),E.return=x,x=E;break e}}else if(M.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ji&&tR(k)===M.type){n(x,M.sibling),E=s(M,w.props),E.ref=Md(x,M,w),E.return=x,x=E;break e}n(x,M);break}else e(x,M);M=M.sibling}w.type===Sc?(E=Ha(w.props.children,x.mode,I,w.key),E.return=x,x=E):(I=jg(w.type,w.key,w.props,null,x.mode,I),I.ref=Md(x,E,w),I.return=x,x=I)}return o(x);case Tc:e:{for(M=w.key;E!==null;){if(E.key===M)if(E.tag===4&&E.stateNode.containerInfo===w.containerInfo&&E.stateNode.implementation===w.implementation){n(x,E.sibling),E=s(E,w.children||[]),E.return=x,x=E;break e}else{n(x,E);break}else e(x,E);E=E.sibling}E=Tx(w,x.mode,I),E.return=x,x=E}return o(x);case Ji:return M=w._init,b(x,E,M(w._payload),I)}if(xh(w))return y(x,E,w,I);if(Nd(w))return _(x,E,w,I);Em(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,E!==null&&E.tag===6?(n(x,E.sibling),E=s(E,w),E.return=x,x=E):(n(x,E),E=Ex(w,x.mode,I),E.return=x,x=E),o(x)):n(x,E)}return b}var yu=yj(!0),vj=yj(!1),Py=Qo(null),Ry=null,Oc=null,QT=null;function YT(){QT=Oc=Ry=null}function XT(t){var e=Py.current;it(Py),t._currentValue=e}function Tb(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function zc(t,e){Ry=t,QT=Oc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($n=!0),t.firstContext=null)}function Ir(t){var e=t._currentValue;if(QT!==t)if(t={context:t,memoizedValue:e,next:null},Oc===null){if(Ry===null)throw Error(q(308));Oc=t,Ry.dependencies={lanes:0,firstContext:t}}else Oc=Oc.next=t;return e}var ja=null;function JT(t){ja===null?ja=[t]:ja.push(t)}function _j(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,JT(e)):(n.next=s.next,s.next=n),e.interleaved=n,fi(t,r)}function fi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zi=!1;function ZT(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xj(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ai(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function bo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,je&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,fi(t,n)}return s=r.interleaved,s===null?(e.next=e,JT(r)):(e.next=s.next,s.next=e),r.interleaved=e,fi(t,n)}function Rg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,FT(t,n)}}function nR(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ay(t,e,n,r){var s=t.updateQueue;Zi=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=u=l=null,a=i;do{var p=a.lane,m=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,_=a;switch(p=e,m=n,_.tag){case 1:if(y=_.payload,typeof y=="function"){h=y.call(m,h,p);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,p=typeof y=="function"?y.call(m,h,p):y,p==null)break e;h=gt({},h,p);break e;case 2:Zi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=m,l=h):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);tl|=o,t.lanes=o,t.memoizedState=h}}function rR(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(q(191,s));s.call(r)}}}var hp={},Is=Qo(hp),wf=Qo(hp),bf=Qo(hp);function Ma(t){if(t===hp)throw Error(q(174));return t}function eS(t,e){switch(Ze(bf,e),Ze(wf,t),Ze(Is,hp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:sb(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=sb(e,t)}it(Is),Ze(Is,e)}function vu(){it(Is),it(wf),it(bf)}function wj(t){Ma(bf.current);var e=Ma(Is.current),n=sb(e,t.type);e!==n&&(Ze(wf,t),Ze(Is,n))}function tS(t){wf.current===t&&(it(Is),it(wf))}var dt=Qo(0);function Ny(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yx=[];function nS(){for(var t=0;t<yx.length;t++)yx[t]._workInProgressVersionPrimary=null;yx.length=0}var Ag=Ei.ReactCurrentDispatcher,vx=Ei.ReactCurrentBatchConfig,el=0,pt=null,Mt=null,Gt=null,ky=!1,Vh=!1,Ef=0,G9=0;function cn(){throw Error(q(321))}function rS(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ns(t[n],e[n]))return!1;return!0}function sS(t,e,n,r,s,i){if(el=i,pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ag.current=t===null||t.memoizedState===null?K9:Q9,t=n(r,s),Vh){i=0;do{if(Vh=!1,Ef=0,25<=i)throw Error(q(301));i+=1,Gt=Mt=null,e.updateQueue=null,Ag.current=Y9,t=n(r,s)}while(Vh)}if(Ag.current=Oy,e=Mt!==null&&Mt.next!==null,el=0,Gt=Mt=pt=null,ky=!1,e)throw Error(q(300));return t}function iS(){var t=Ef!==0;return Ef=0,t}function fs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?pt.memoizedState=Gt=t:Gt=Gt.next=t,Gt}function Pr(){if(Mt===null){var t=pt.alternate;t=t!==null?t.memoizedState:null}else t=Mt.next;var e=Gt===null?pt.memoizedState:Gt.next;if(e!==null)Gt=e,Mt=t;else{if(t===null)throw Error(q(310));Mt=t,t={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Gt===null?pt.memoizedState=Gt=t:Gt=Gt.next=t}return Gt}function Tf(t,e){return typeof e=="function"?e(t):e}function _x(t){var e=Pr(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=Mt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var d=u.lane;if((el&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,pt.lanes|=d,tl|=d}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,ns(r,e.memoizedState)||($n=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,pt.lanes|=i,tl|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xx(t){var e=Pr(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ns(i,e.memoizedState)||($n=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function bj(){}function Ej(t,e){var n=pt,r=Pr(),s=e(),i=!ns(r.memoizedState,s);if(i&&(r.memoizedState=s,$n=!0),r=r.queue,oS(Cj.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Gt!==null&&Gt.memoizedState.tag&1){if(n.flags|=2048,Sf(9,Sj.bind(null,n,r,s,e),void 0,null),Qt===null)throw Error(q(349));el&30||Tj(n,e,s)}return s}function Tj(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Sj(t,e,n,r){e.value=n,e.getSnapshot=r,Ij(e)&&Pj(t)}function Cj(t,e,n){return n(function(){Ij(e)&&Pj(t)})}function Ij(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ns(t,n)}catch{return!0}}function Pj(t){var e=fi(t,1);e!==null&&Zr(e,t,1,-1)}function sR(t){var e=fs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tf,lastRenderedState:t},e.queue=t,t=t.dispatch=H9.bind(null,pt,t),[e.memoizedState,t]}function Sf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Rj(){return Pr().memoizedState}function Ng(t,e,n,r){var s=fs();pt.flags|=t,s.memoizedState=Sf(1|e,n,void 0,r===void 0?null:r)}function r_(t,e,n,r){var s=Pr();r=r===void 0?null:r;var i=void 0;if(Mt!==null){var o=Mt.memoizedState;if(i=o.destroy,r!==null&&rS(r,o.deps)){s.memoizedState=Sf(e,n,i,r);return}}pt.flags|=t,s.memoizedState=Sf(1|e,n,i,r)}function iR(t,e){return Ng(8390656,8,t,e)}function oS(t,e){return r_(2048,8,t,e)}function Aj(t,e){return r_(4,2,t,e)}function Nj(t,e){return r_(4,4,t,e)}function kj(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Oj(t,e,n){return n=n!=null?n.concat([t]):null,r_(4,4,kj.bind(null,e,t),n)}function aS(){}function Dj(t,e){var n=Pr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rS(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function jj(t,e){var n=Pr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rS(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Mj(t,e,n){return el&21?(ns(n,e)||(n=$D(),pt.lanes|=n,tl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$n=!0),t.memoizedState=n)}function q9(t,e){var n=qe;qe=n!==0&&4>n?n:4,t(!0);var r=vx.transition;vx.transition={};try{t(!1),e()}finally{qe=n,vx.transition=r}}function Lj(){return Pr().memoizedState}function W9(t,e,n){var r=To(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Fj(t))Vj(e,n);else if(n=_j(t,e,n,r),n!==null){var s=An();Zr(n,t,r,s),Uj(n,e,r)}}function H9(t,e,n){var r=To(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fj(t))Vj(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,ns(a,o)){var l=e.interleaved;l===null?(s.next=s,JT(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=_j(t,e,s,r),n!==null&&(s=An(),Zr(n,t,r,s),Uj(n,e,r))}}function Fj(t){var e=t.alternate;return t===pt||e!==null&&e===pt}function Vj(t,e){Vh=ky=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Uj(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,FT(t,n)}}var Oy={readContext:Ir,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useInsertionEffect:cn,useLayoutEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useMutableSource:cn,useSyncExternalStore:cn,useId:cn,unstable_isNewReconciler:!1},K9={readContext:Ir,useCallback:function(t,e){return fs().memoizedState=[t,e===void 0?null:e],t},useContext:Ir,useEffect:iR,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ng(4194308,4,kj.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ng(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ng(4,2,t,e)},useMemo:function(t,e){var n=fs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=fs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=W9.bind(null,pt,t),[r.memoizedState,t]},useRef:function(t){var e=fs();return t={current:t},e.memoizedState=t},useState:sR,useDebugValue:aS,useDeferredValue:function(t){return fs().memoizedState=t},useTransition:function(){var t=sR(!1),e=t[0];return t=q9.bind(null,t[1]),fs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=pt,s=fs();if(ut){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),Qt===null)throw Error(q(349));el&30||Tj(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,iR(Cj.bind(null,r,i,t),[t]),r.flags|=2048,Sf(9,Sj.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=fs(),e=Qt.identifierPrefix;if(ut){var n=ei,r=Zs;n=(r&~(1<<32-Jr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ef++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=G9++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Q9={readContext:Ir,useCallback:Dj,useContext:Ir,useEffect:oS,useImperativeHandle:Oj,useInsertionEffect:Aj,useLayoutEffect:Nj,useMemo:jj,useReducer:_x,useRef:Rj,useState:function(){return _x(Tf)},useDebugValue:aS,useDeferredValue:function(t){var e=Pr();return Mj(e,Mt.memoizedState,t)},useTransition:function(){var t=_x(Tf)[0],e=Pr().memoizedState;return[t,e]},useMutableSource:bj,useSyncExternalStore:Ej,useId:Lj,unstable_isNewReconciler:!1},Y9={readContext:Ir,useCallback:Dj,useContext:Ir,useEffect:oS,useImperativeHandle:Oj,useInsertionEffect:Aj,useLayoutEffect:Nj,useMemo:jj,useReducer:xx,useRef:Rj,useState:function(){return xx(Tf)},useDebugValue:aS,useDeferredValue:function(t){var e=Pr();return Mt===null?e.memoizedState=t:Mj(e,Mt.memoizedState,t)},useTransition:function(){var t=xx(Tf)[0],e=Pr().memoizedState;return[t,e]},useMutableSource:bj,useSyncExternalStore:Ej,useId:Lj,unstable_isNewReconciler:!1};function $r(t,e){if(t&&t.defaultProps){e=gt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Sb(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:gt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var s_={isMounted:function(t){return(t=t._reactInternals)?Rl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=An(),s=To(t),i=ai(r,s);i.payload=e,n!=null&&(i.callback=n),e=bo(t,i,s),e!==null&&(Zr(e,t,s,r),Rg(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=An(),s=To(t),i=ai(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=bo(t,i,s),e!==null&&(Zr(e,t,s,r),Rg(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=An(),r=To(t),s=ai(n,r);s.tag=2,e!=null&&(s.callback=e),e=bo(t,s,r),e!==null&&(Zr(e,t,r,n),Rg(e,t,r))}};function oR(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!yf(n,r)||!yf(s,i):!0}function $j(t,e,n){var r=!1,s=Fo,i=e.contextType;return typeof i=="object"&&i!==null?i=Ir(i):(s=Hn(e)?Ja:bn.current,r=e.contextTypes,i=(r=r!=null)?mu(t,s):Fo),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=s_,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function aR(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&s_.enqueueReplaceState(e,e.state,null)}function Cb(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ZT(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ir(i):(i=Hn(e)?Ja:bn.current,s.context=mu(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Sb(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&s_.enqueueReplaceState(s,s.state,null),Ay(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function _u(t,e){try{var n="",r=e;do n+=TG(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function wx(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ib(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var X9=typeof WeakMap=="function"?WeakMap:Map;function Bj(t,e,n){n=ai(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jy||(jy=!0,Lb=r),Ib(t,e)},n}function zj(t,e,n){n=ai(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ib(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ib(t,e),typeof r!="function"&&(Eo===null?Eo=new Set([this]):Eo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function lR(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new X9;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=d8.bind(null,t,e,n),e.then(t,t))}function cR(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function uR(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ai(-1,1),e.tag=2,bo(n,e,1))),n.lanes|=1),t)}var J9=Ei.ReactCurrentOwner,$n=!1;function Cn(t,e,n,r){e.child=t===null?vj(e,null,n,r):yu(e,t.child,n,r)}function dR(t,e,n,r,s){n=n.render;var i=e.ref;return zc(e,s),r=sS(t,e,n,r,i,s),n=iS(),t!==null&&!$n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pi(t,e,s)):(ut&&n&&WT(e),e.flags|=1,Cn(t,e,r,s),e.child)}function hR(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!mS(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Gj(t,e,i,r,s)):(t=jg(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:yf,n(o,r)&&t.ref===e.ref)return pi(t,e,s)}return e.flags|=1,t=So(i,r),t.ref=e.ref,t.return=e,e.child=t}function Gj(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(yf(i,r)&&t.ref===e.ref)if($n=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&($n=!0);else return e.lanes=t.lanes,pi(t,e,s)}return Pb(t,e,n,r,s)}function qj(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(jc,er),er|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ze(jc,er),er|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ze(jc,er),er|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ze(jc,er),er|=r;return Cn(t,e,s,n),e.child}function Wj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Pb(t,e,n,r,s){var i=Hn(n)?Ja:bn.current;return i=mu(e,i),zc(e,s),n=sS(t,e,n,r,i,s),r=iS(),t!==null&&!$n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,pi(t,e,s)):(ut&&r&&WT(e),e.flags|=1,Cn(t,e,n,s),e.child)}function fR(t,e,n,r,s){if(Hn(n)){var i=!0;Sy(e)}else i=!1;if(zc(e,s),e.stateNode===null)kg(t,e),$j(e,n,r),Cb(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ir(u):(u=Hn(n)?Ja:bn.current,u=mu(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&aR(e,o,r,u),Zi=!1;var p=e.memoizedState;o.state=p,Ay(e,r,o,s),l=e.memoizedState,a!==r||p!==l||Wn.current||Zi?(typeof d=="function"&&(Sb(e,n,d,r),l=e.memoizedState),(a=Zi||oR(e,n,a,r,p,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,xj(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:$r(e.type,a),o.props=u,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ir(l):(l=Hn(n)?Ja:bn.current,l=mu(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&aR(e,o,r,l),Zi=!1,p=e.memoizedState,o.state=p,Ay(e,r,o,s);var y=e.memoizedState;a!==h||p!==y||Wn.current||Zi?(typeof m=="function"&&(Sb(e,n,m,r),y=e.memoizedState),(u=Zi||oR(e,n,u,r,p,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Rb(t,e,n,r,i,s)}function Rb(t,e,n,r,s,i){Wj(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&JP(e,n,!1),pi(t,e,i);r=e.stateNode,J9.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=yu(e,t.child,null,i),e.child=yu(e,null,a,i)):Cn(t,e,a,i),e.memoizedState=r.state,s&&JP(e,n,!0),e.child}function Hj(t){var e=t.stateNode;e.pendingContext?XP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&XP(t,e.context,!1),eS(t,e.containerInfo)}function pR(t,e,n,r,s){return gu(),KT(s),e.flags|=256,Cn(t,e,n,r),e.child}var Ab={dehydrated:null,treeContext:null,retryLane:0};function Nb(t){return{baseLanes:t,cachePool:null,transitions:null}}function Kj(t,e,n){var r=e.pendingProps,s=dt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ze(dt,s&1),t===null)return Eb(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=a_(o,r,0,null),t=Ha(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Nb(n),e.memoizedState=Ab,t):lS(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Z9(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=So(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=So(a,i):(i=Ha(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Nb(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Ab,r}return i=t.child,t=i.sibling,r=So(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function lS(t,e){return e=a_({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Tm(t,e,n,r){return r!==null&&KT(r),yu(e,t.child,null,n),t=lS(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Z9(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=wx(Error(q(422))),Tm(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=a_({mode:"visible",children:r.children},s,0,null),i=Ha(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&yu(e,t.child,null,o),e.child.memoizedState=Nb(o),e.memoizedState=Ab,i);if(!(e.mode&1))return Tm(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(q(419)),r=wx(i,r,void 0),Tm(t,e,o,r)}if(a=(o&t.childLanes)!==0,$n||a){if(r=Qt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,fi(t,s),Zr(r,t,s,-1))}return pS(),r=wx(Error(q(421))),Tm(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=h8.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,rr=wo(s.nextSibling),ir=e,ut=!0,Kr=null,t!==null&&(xr[wr++]=Zs,xr[wr++]=ei,xr[wr++]=Za,Zs=t.id,ei=t.overflow,Za=e),e=lS(e,r.children),e.flags|=4096,e)}function mR(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Tb(t.return,e,n)}function bx(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Qj(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Cn(t,e,r.children,n),r=dt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mR(t,n,e);else if(t.tag===19)mR(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ze(dt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ny(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),bx(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ny(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}bx(e,!0,n,null,i);break;case"together":bx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),tl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=So(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=So(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function e8(t,e,n){switch(e.tag){case 3:Hj(e),gu();break;case 5:wj(e);break;case 1:Hn(e.type)&&Sy(e);break;case 4:eS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ze(Py,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ze(dt,dt.current&1),e.flags|=128,null):n&e.child.childLanes?Kj(t,e,n):(Ze(dt,dt.current&1),t=pi(t,e,n),t!==null?t.sibling:null);Ze(dt,dt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Qj(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ze(dt,dt.current),r)break;return null;case 22:case 23:return e.lanes=0,qj(t,e,n)}return pi(t,e,n)}var Yj,kb,Xj,Jj;Yj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};kb=function(){};Xj=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ma(Is.current);var i=null;switch(n){case"input":s=eb(t,s),r=eb(t,r),i=[];break;case"select":s=gt({},s,{value:void 0}),r=gt({},r,{value:void 0}),i=[];break;case"textarea":s=rb(t,s),r=rb(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ey)}ib(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(uf.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(uf.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&nt("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Jj=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ld(t,e){if(!ut)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function un(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function t8(t,e,n){var r=e.pendingProps;switch(HT(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(e),null;case 1:return Hn(e.type)&&Ty(),un(e),null;case 3:return r=e.stateNode,vu(),it(Wn),it(bn),nS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(bm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kr!==null&&(Ub(Kr),Kr=null))),kb(t,e),un(e),null;case 5:tS(e);var s=Ma(bf.current);if(n=e.type,t!==null&&e.stateNode!=null)Xj(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return un(e),null}if(t=Ma(Is.current),bm(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ws]=e,r[xf]=i,t=(e.mode&1)!==0,n){case"dialog":nt("cancel",r),nt("close",r);break;case"iframe":case"object":case"embed":nt("load",r);break;case"video":case"audio":for(s=0;s<bh.length;s++)nt(bh[s],r);break;case"source":nt("error",r);break;case"img":case"image":case"link":nt("error",r),nt("load",r);break;case"details":nt("toggle",r);break;case"input":TP(r,i),nt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},nt("invalid",r);break;case"textarea":CP(r,i),nt("invalid",r)}ib(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&wm(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&wm(r.textContent,a,t),s=["children",""+a]):uf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&nt("scroll",r)}switch(n){case"input":fm(r),SP(r,i,!0);break;case"textarea":fm(r),IP(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ey)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=CD(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ws]=e,t[xf]=r,Yj(t,e,!1,!1),e.stateNode=t;e:{switch(o=ob(n,r),n){case"dialog":nt("cancel",t),nt("close",t),s=r;break;case"iframe":case"object":case"embed":nt("load",t),s=r;break;case"video":case"audio":for(s=0;s<bh.length;s++)nt(bh[s],t);s=r;break;case"source":nt("error",t),s=r;break;case"img":case"image":case"link":nt("error",t),nt("load",t),s=r;break;case"details":nt("toggle",t),s=r;break;case"input":TP(t,r),s=eb(t,r),nt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=gt({},r,{value:void 0}),nt("invalid",t);break;case"textarea":CP(t,r),s=rb(t,r),nt("invalid",t);break;default:s=r}ib(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?RD(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ID(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&df(t,l):typeof l=="number"&&df(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(uf.hasOwnProperty(i)?l!=null&&i==="onScroll"&&nt("scroll",t):l!=null&&kT(t,i,l,o))}switch(n){case"input":fm(t),SP(t,r,!1);break;case"textarea":fm(t),IP(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Lo(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Vc(t,!!r.multiple,i,!1):r.defaultValue!=null&&Vc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ey)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return un(e),null;case 6:if(t&&e.stateNode!=null)Jj(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=Ma(bf.current),Ma(Is.current),bm(e)){if(r=e.stateNode,n=e.memoizedProps,r[ws]=e,(i=r.nodeValue!==n)&&(t=ir,t!==null))switch(t.tag){case 3:wm(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wm(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ws]=e,e.stateNode=r}return un(e),null;case 13:if(it(dt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ut&&rr!==null&&e.mode&1&&!(e.flags&128))gj(),gu(),e.flags|=98560,i=!1;else if(i=bm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[ws]=e}else gu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;un(e),i=!1}else Kr!==null&&(Ub(Kr),Kr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||dt.current&1?Ft===0&&(Ft=3):pS())),e.updateQueue!==null&&(e.flags|=4),un(e),null);case 4:return vu(),kb(t,e),t===null&&vf(e.stateNode.containerInfo),un(e),null;case 10:return XT(e.type._context),un(e),null;case 17:return Hn(e.type)&&Ty(),un(e),null;case 19:if(it(dt),i=e.memoizedState,i===null)return un(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ld(i,!1);else{if(Ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ny(t),o!==null){for(e.flags|=128,Ld(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ze(dt,dt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ct()>xu&&(e.flags|=128,r=!0,Ld(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ny(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ld(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ut)return un(e),null}else 2*Ct()-i.renderingStartTime>xu&&n!==1073741824&&(e.flags|=128,r=!0,Ld(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ct(),e.sibling=null,n=dt.current,Ze(dt,r?n&1|2:n&1),e):(un(e),null);case 22:case 23:return fS(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?er&1073741824&&(un(e),e.subtreeFlags&6&&(e.flags|=8192)):un(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function n8(t,e){switch(HT(e),e.tag){case 1:return Hn(e.type)&&Ty(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return vu(),it(Wn),it(bn),nS(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tS(e),null;case 13:if(it(dt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));gu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return it(dt),null;case 4:return vu(),null;case 10:return XT(e.type._context),null;case 22:case 23:return fS(),null;case 24:return null;default:return null}}var Sm=!1,pn=!1,r8=typeof WeakSet=="function"?WeakSet:Set,se=null;function Dc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Tt(t,e,r)}else n.current=null}function Ob(t,e,n){try{n()}catch(r){Tt(t,e,r)}}var gR=!1;function s8(t,e){if(gb=xy,t=rj(),qT(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,p=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++u===s&&(a=o),p===i&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(yb={focusedElem:t,selectionRange:n},xy=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,b=y.memoizedState,x=e.stateNode,E=x.getSnapshotBeforeUpdate(e.elementType===e.type?_:$r(e.type,_),b);x.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(I){Tt(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return y=gR,gR=!1,y}function Uh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ob(e,n,i)}s=s.next}while(s!==r)}}function i_(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Db(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Zj(t){var e=t.alternate;e!==null&&(t.alternate=null,Zj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ws],delete e[xf],delete e[xb],delete e[U9],delete e[$9])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function eM(t){return t.tag===5||t.tag===3||t.tag===4}function yR(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||eM(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jb(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ey));else if(r!==4&&(t=t.child,t!==null))for(jb(t,e,n),t=t.sibling;t!==null;)jb(t,e,n),t=t.sibling}function Mb(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Mb(t,e,n),t=t.sibling;t!==null;)Mb(t,e,n),t=t.sibling}var en=null,Wr=!1;function Fi(t,e,n){for(n=n.child;n!==null;)tM(t,e,n),n=n.sibling}function tM(t,e,n){if(Cs&&typeof Cs.onCommitFiberUnmount=="function")try{Cs.onCommitFiberUnmount(Xv,n)}catch{}switch(n.tag){case 5:pn||Dc(n,e);case 6:var r=en,s=Wr;en=null,Fi(t,e,n),en=r,Wr=s,en!==null&&(Wr?(t=en,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):en.removeChild(n.stateNode));break;case 18:en!==null&&(Wr?(t=en,n=n.stateNode,t.nodeType===8?mx(t.parentNode,n):t.nodeType===1&&mx(t,n),mf(t)):mx(en,n.stateNode));break;case 4:r=en,s=Wr,en=n.stateNode.containerInfo,Wr=!0,Fi(t,e,n),en=r,Wr=s;break;case 0:case 11:case 14:case 15:if(!pn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ob(n,e,o),s=s.next}while(s!==r)}Fi(t,e,n);break;case 1:if(!pn&&(Dc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tt(n,e,a)}Fi(t,e,n);break;case 21:Fi(t,e,n);break;case 22:n.mode&1?(pn=(r=pn)||n.memoizedState!==null,Fi(t,e,n),pn=r):Fi(t,e,n);break;default:Fi(t,e,n)}}function vR(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new r8),e.forEach(function(r){var s=f8.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Fr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:en=a.stateNode,Wr=!1;break e;case 3:en=a.stateNode.containerInfo,Wr=!0;break e;case 4:en=a.stateNode.containerInfo,Wr=!0;break e}a=a.return}if(en===null)throw Error(q(160));tM(i,o,s),en=null,Wr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Tt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nM(e,t),e=e.sibling}function nM(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Fr(e,t),ls(t),r&4){try{Uh(3,t,t.return),i_(3,t)}catch(_){Tt(t,t.return,_)}try{Uh(5,t,t.return)}catch(_){Tt(t,t.return,_)}}break;case 1:Fr(e,t),ls(t),r&512&&n!==null&&Dc(n,n.return);break;case 5:if(Fr(e,t),ls(t),r&512&&n!==null&&Dc(n,n.return),t.flags&32){var s=t.stateNode;try{df(s,"")}catch(_){Tt(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&TD(s,i),ob(a,o);var u=ob(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?RD(s,h):d==="dangerouslySetInnerHTML"?ID(s,h):d==="children"?df(s,h):kT(s,d,h,u)}switch(a){case"input":tb(s,i);break;case"textarea":SD(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Vc(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?Vc(s,!!i.multiple,i.defaultValue,!0):Vc(s,!!i.multiple,i.multiple?[]:"",!1))}s[xf]=i}catch(_){Tt(t,t.return,_)}}break;case 6:if(Fr(e,t),ls(t),r&4){if(t.stateNode===null)throw Error(q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){Tt(t,t.return,_)}}break;case 3:if(Fr(e,t),ls(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mf(e.containerInfo)}catch(_){Tt(t,t.return,_)}break;case 4:Fr(e,t),ls(t);break;case 13:Fr(e,t),ls(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(dS=Ct())),r&4&&vR(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(pn=(u=pn)||d,Fr(e,t),pn=u):Fr(e,t),ls(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(se=t,d=t.child;d!==null;){for(h=se=d;se!==null;){switch(p=se,m=p.child,p.tag){case 0:case 11:case 14:case 15:Uh(4,p,p.return);break;case 1:Dc(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(_){Tt(r,n,_)}}break;case 5:Dc(p,p.return);break;case 22:if(p.memoizedState!==null){xR(h);continue}}m!==null?(m.return=p,se=m):xR(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=PD("display",o))}catch(_){Tt(t,t.return,_)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(_){Tt(t,t.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Fr(e,t),ls(t),r&4&&vR(t);break;case 21:break;default:Fr(e,t),ls(t)}}function ls(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(eM(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(df(s,""),r.flags&=-33);var i=yR(t);Mb(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=yR(t);jb(t,a,o);break;default:throw Error(q(161))}}catch(l){Tt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function i8(t,e,n){se=t,rM(t)}function rM(t,e,n){for(var r=(t.mode&1)!==0;se!==null;){var s=se,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Sm;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||pn;a=Sm;var u=pn;if(Sm=o,(pn=l)&&!u)for(se=s;se!==null;)o=se,l=o.child,o.tag===22&&o.memoizedState!==null?wR(s):l!==null?(l.return=o,se=l):wR(s);for(;i!==null;)se=i,rM(i),i=i.sibling;se=s,Sm=a,pn=u}_R(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,se=i):_R(t)}}function _R(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pn||i_(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:$r(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&rR(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}rR(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&mf(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}pn||e.flags&512&&Db(e)}catch(p){Tt(e,e.return,p)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function xR(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function wR(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{i_(4,e)}catch(l){Tt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Tt(e,s,l)}}var i=e.return;try{Db(e)}catch(l){Tt(e,i,l)}break;case 5:var o=e.return;try{Db(e)}catch(l){Tt(e,o,l)}}}catch(l){Tt(e,e.return,l)}if(e===t){se=null;break}var a=e.sibling;if(a!==null){a.return=e.return,se=a;break}se=e.return}}var o8=Math.ceil,Dy=Ei.ReactCurrentDispatcher,cS=Ei.ReactCurrentOwner,Sr=Ei.ReactCurrentBatchConfig,je=0,Qt=null,Ot=null,nn=0,er=0,jc=Qo(0),Ft=0,Cf=null,tl=0,o_=0,uS=0,$h=null,Vn=null,dS=0,xu=1/0,Hs=null,jy=!1,Lb=null,Eo=null,Cm=!1,po=null,My=0,Bh=0,Fb=null,Og=-1,Dg=0;function An(){return je&6?Ct():Og!==-1?Og:Og=Ct()}function To(t){return t.mode&1?je&2&&nn!==0?nn&-nn:z9.transition!==null?(Dg===0&&(Dg=$D()),Dg):(t=qe,t!==0||(t=window.event,t=t===void 0?16:KD(t.type)),t):1}function Zr(t,e,n,r){if(50<Bh)throw Bh=0,Fb=null,Error(q(185));cp(t,n,r),(!(je&2)||t!==Qt)&&(t===Qt&&(!(je&2)&&(o_|=n),Ft===4&&no(t,nn)),Kn(t,r),n===1&&je===0&&!(e.mode&1)&&(xu=Ct()+500,n_&&Yo()))}function Kn(t,e){var n=t.callbackNode;zG(t,e);var r=_y(t,t===Qt?nn:0);if(r===0)n!==null&&AP(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&AP(n),e===1)t.tag===0?B9(bR.bind(null,t)):fj(bR.bind(null,t)),F9(function(){!(je&6)&&Yo()}),n=null;else{switch(BD(r)){case 1:n=LT;break;case 4:n=VD;break;case 16:n=vy;break;case 536870912:n=UD;break;default:n=vy}n=dM(n,sM.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sM(t,e){if(Og=-1,Dg=0,je&6)throw Error(q(327));var n=t.callbackNode;if(Gc()&&t.callbackNode!==n)return null;var r=_y(t,t===Qt?nn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ly(t,r);else{e=r;var s=je;je|=2;var i=oM();(Qt!==t||nn!==e)&&(Hs=null,xu=Ct()+500,Wa(t,e));do try{c8();break}catch(a){iM(t,a)}while(!0);YT(),Dy.current=i,je=s,Ot!==null?e=0:(Qt=null,nn=0,e=Ft)}if(e!==0){if(e===2&&(s=db(t),s!==0&&(r=s,e=Vb(t,s))),e===1)throw n=Cf,Wa(t,0),no(t,r),Kn(t,Ct()),n;if(e===6)no(t,r);else{if(s=t.current.alternate,!(r&30)&&!a8(s)&&(e=Ly(t,r),e===2&&(i=db(t),i!==0&&(r=i,e=Vb(t,i))),e===1))throw n=Cf,Wa(t,0),no(t,r),Kn(t,Ct()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:Ta(t,Vn,Hs);break;case 3:if(no(t,r),(r&130023424)===r&&(e=dS+500-Ct(),10<e)){if(_y(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){An(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=_b(Ta.bind(null,t,Vn,Hs),e);break}Ta(t,Vn,Hs);break;case 4:if(no(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Jr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ct()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*o8(r/1960))-r,10<r){t.timeoutHandle=_b(Ta.bind(null,t,Vn,Hs),r);break}Ta(t,Vn,Hs);break;case 5:Ta(t,Vn,Hs);break;default:throw Error(q(329))}}}return Kn(t,Ct()),t.callbackNode===n?sM.bind(null,t):null}function Vb(t,e){var n=$h;return t.current.memoizedState.isDehydrated&&(Wa(t,e).flags|=256),t=Ly(t,e),t!==2&&(e=Vn,Vn=n,e!==null&&Ub(e)),t}function Ub(t){Vn===null?Vn=t:Vn.push.apply(Vn,t)}function a8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ns(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function no(t,e){for(e&=~uS,e&=~o_,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Jr(e),r=1<<n;t[n]=-1,e&=~r}}function bR(t){if(je&6)throw Error(q(327));Gc();var e=_y(t,0);if(!(e&1))return Kn(t,Ct()),null;var n=Ly(t,e);if(t.tag!==0&&n===2){var r=db(t);r!==0&&(e=r,n=Vb(t,r))}if(n===1)throw n=Cf,Wa(t,0),no(t,e),Kn(t,Ct()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ta(t,Vn,Hs),Kn(t,Ct()),null}function hS(t,e){var n=je;je|=1;try{return t(e)}finally{je=n,je===0&&(xu=Ct()+500,n_&&Yo())}}function nl(t){po!==null&&po.tag===0&&!(je&6)&&Gc();var e=je;je|=1;var n=Sr.transition,r=qe;try{if(Sr.transition=null,qe=1,t)return t()}finally{qe=r,Sr.transition=n,je=e,!(je&6)&&Yo()}}function fS(){er=jc.current,it(jc)}function Wa(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,L9(n)),Ot!==null)for(n=Ot.return;n!==null;){var r=n;switch(HT(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ty();break;case 3:vu(),it(Wn),it(bn),nS();break;case 5:tS(r);break;case 4:vu();break;case 13:it(dt);break;case 19:it(dt);break;case 10:XT(r.type._context);break;case 22:case 23:fS()}n=n.return}if(Qt=t,Ot=t=So(t.current,null),nn=er=e,Ft=0,Cf=null,uS=o_=tl=0,Vn=$h=null,ja!==null){for(e=0;e<ja.length;e++)if(n=ja[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ja=null}return t}function iM(t,e){do{var n=Ot;try{if(YT(),Ag.current=Oy,ky){for(var r=pt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ky=!1}if(el=0,Gt=Mt=pt=null,Vh=!1,Ef=0,cS.current=null,n===null||n.return===null){Ft=1,Cf=e,Ot=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=nn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=cR(o);if(m!==null){m.flags&=-257,uR(m,o,a,i,e),m.mode&1&&lR(i,u,e),e=m,l=u;var y=e.updateQueue;if(y===null){var _=new Set;_.add(l),e.updateQueue=_}else y.add(l);break e}else{if(!(e&1)){lR(i,u,e),pS();break e}l=Error(q(426))}}else if(ut&&a.mode&1){var b=cR(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),uR(b,o,a,i,e),KT(_u(l,a));break e}}i=l=_u(l,a),Ft!==4&&(Ft=2),$h===null?$h=[i]:$h.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=Bj(i,l,e);nR(i,x);break e;case 1:a=l;var E=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Eo===null||!Eo.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var I=zj(i,a,e);nR(i,I);break e}}i=i.return}while(i!==null)}lM(n)}catch(k){e=k,Ot===n&&n!==null&&(Ot=n=n.return);continue}break}while(!0)}function oM(){var t=Dy.current;return Dy.current=Oy,t===null?Oy:t}function pS(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),Qt===null||!(tl&268435455)&&!(o_&268435455)||no(Qt,nn)}function Ly(t,e){var n=je;je|=2;var r=oM();(Qt!==t||nn!==e)&&(Hs=null,Wa(t,e));do try{l8();break}catch(s){iM(t,s)}while(!0);if(YT(),je=n,Dy.current=r,Ot!==null)throw Error(q(261));return Qt=null,nn=0,Ft}function l8(){for(;Ot!==null;)aM(Ot)}function c8(){for(;Ot!==null&&!DG();)aM(Ot)}function aM(t){var e=uM(t.alternate,t,er);t.memoizedProps=t.pendingProps,e===null?lM(t):Ot=e,cS.current=null}function lM(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=n8(n,e),n!==null){n.flags&=32767,Ot=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ft=6,Ot=null;return}}else if(n=t8(n,e,er),n!==null){Ot=n;return}if(e=e.sibling,e!==null){Ot=e;return}Ot=e=t}while(e!==null);Ft===0&&(Ft=5)}function Ta(t,e,n){var r=qe,s=Sr.transition;try{Sr.transition=null,qe=1,u8(t,e,n,r)}finally{Sr.transition=s,qe=r}return null}function u8(t,e,n,r){do Gc();while(po!==null);if(je&6)throw Error(q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(GG(t,i),t===Qt&&(Ot=Qt=null,nn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Cm||(Cm=!0,dM(vy,function(){return Gc(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Sr.transition,Sr.transition=null;var o=qe;qe=1;var a=je;je|=4,cS.current=null,s8(t,n),nM(n,t),A9(yb),xy=!!gb,yb=gb=null,t.current=n,i8(n),jG(),je=a,qe=o,Sr.transition=i}else t.current=n;if(Cm&&(Cm=!1,po=t,My=s),i=t.pendingLanes,i===0&&(Eo=null),FG(n.stateNode),Kn(t,Ct()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(jy)throw jy=!1,t=Lb,Lb=null,t;return My&1&&t.tag!==0&&Gc(),i=t.pendingLanes,i&1?t===Fb?Bh++:(Bh=0,Fb=t):Bh=0,Yo(),null}function Gc(){if(po!==null){var t=BD(My),e=Sr.transition,n=qe;try{if(Sr.transition=null,qe=16>t?16:t,po===null)var r=!1;else{if(t=po,po=null,My=0,je&6)throw Error(q(331));var s=je;for(je|=4,se=t.current;se!==null;){var i=se,o=i.child;if(se.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(se=u;se!==null;){var d=se;switch(d.tag){case 0:case 11:case 15:Uh(8,d,i)}var h=d.child;if(h!==null)h.return=d,se=h;else for(;se!==null;){d=se;var p=d.sibling,m=d.return;if(Zj(d),d===u){se=null;break}if(p!==null){p.return=m,se=p;break}se=m}}}var y=i.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var b=_.sibling;_.sibling=null,_=b}while(_!==null)}}se=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,se=o;else e:for(;se!==null;){if(i=se,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Uh(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,se=x;break e}se=i.return}}var E=t.current;for(se=E;se!==null;){o=se;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,se=w;else e:for(o=E;se!==null;){if(a=se,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:i_(9,a)}}catch(k){Tt(a,a.return,k)}if(a===o){se=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,se=I;break e}se=a.return}}if(je=s,Yo(),Cs&&typeof Cs.onPostCommitFiberRoot=="function")try{Cs.onPostCommitFiberRoot(Xv,t)}catch{}r=!0}return r}finally{qe=n,Sr.transition=e}}return!1}function ER(t,e,n){e=_u(n,e),e=Bj(t,e,1),t=bo(t,e,1),e=An(),t!==null&&(cp(t,1,e),Kn(t,e))}function Tt(t,e,n){if(t.tag===3)ER(t,t,n);else for(;e!==null;){if(e.tag===3){ER(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Eo===null||!Eo.has(r))){t=_u(n,t),t=zj(e,t,1),e=bo(e,t,1),t=An(),e!==null&&(cp(e,1,t),Kn(e,t));break}}e=e.return}}function d8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=An(),t.pingedLanes|=t.suspendedLanes&n,Qt===t&&(nn&n)===n&&(Ft===4||Ft===3&&(nn&130023424)===nn&&500>Ct()-dS?Wa(t,0):uS|=n),Kn(t,e)}function cM(t,e){e===0&&(t.mode&1?(e=gm,gm<<=1,!(gm&130023424)&&(gm=4194304)):e=1);var n=An();t=fi(t,e),t!==null&&(cp(t,e,n),Kn(t,n))}function h8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cM(t,n)}function f8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),cM(t,n)}var uM;uM=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wn.current)$n=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return $n=!1,e8(t,e,n);$n=!!(t.flags&131072)}else $n=!1,ut&&e.flags&1048576&&pj(e,Iy,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;kg(t,e),t=e.pendingProps;var s=mu(e,bn.current);zc(e,n),s=sS(null,e,r,t,s,n);var i=iS();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Hn(r)?(i=!0,Sy(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ZT(e),s.updater=s_,e.stateNode=s,s._reactInternals=e,Cb(e,r,t,n),e=Rb(null,e,r,!0,i,n)):(e.tag=0,ut&&i&&WT(e),Cn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(kg(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=m8(r),t=$r(r,t),s){case 0:e=Pb(null,e,r,t,n);break e;case 1:e=fR(null,e,r,t,n);break e;case 11:e=dR(null,e,r,t,n);break e;case 14:e=hR(null,e,r,$r(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$r(r,s),Pb(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$r(r,s),fR(t,e,r,s,n);case 3:e:{if(Hj(e),t===null)throw Error(q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,xj(t,e),Ay(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=_u(Error(q(423)),e),e=pR(t,e,r,n,s);break e}else if(r!==s){s=_u(Error(q(424)),e),e=pR(t,e,r,n,s);break e}else for(rr=wo(e.stateNode.containerInfo.firstChild),ir=e,ut=!0,Kr=null,n=vj(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gu(),r===s){e=pi(t,e,n);break e}Cn(t,e,r,n)}e=e.child}return e;case 5:return wj(e),t===null&&Eb(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,vb(r,s)?o=null:i!==null&&vb(r,i)&&(e.flags|=32),Wj(t,e),Cn(t,e,o,n),e.child;case 6:return t===null&&Eb(e),null;case 13:return Kj(t,e,n);case 4:return eS(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=yu(e,null,r,n):Cn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$r(r,s),dR(t,e,r,s,n);case 7:return Cn(t,e,e.pendingProps,n),e.child;case 8:return Cn(t,e,e.pendingProps.children,n),e.child;case 12:return Cn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ze(Py,r._currentValue),r._currentValue=o,i!==null)if(ns(i.value,o)){if(i.children===s.children&&!Wn.current){e=pi(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=ai(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Tb(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Tb(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Cn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,zc(e,n),s=Ir(s),r=r(s),e.flags|=1,Cn(t,e,r,n),e.child;case 14:return r=e.type,s=$r(r,e.pendingProps),s=$r(r.type,s),hR(t,e,r,s,n);case 15:return Gj(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:$r(r,s),kg(t,e),e.tag=1,Hn(r)?(t=!0,Sy(e)):t=!1,zc(e,n),$j(e,r,s),Cb(e,r,s,n),Rb(null,e,r,!0,t,n);case 19:return Qj(t,e,n);case 22:return qj(t,e,n)}throw Error(q(156,e.tag))};function dM(t,e){return FD(t,e)}function p8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function br(t,e,n,r){return new p8(t,e,n,r)}function mS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function m8(t){if(typeof t=="function")return mS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===DT)return 11;if(t===jT)return 14}return 2}function So(t,e){var n=t.alternate;return n===null?(n=br(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function jg(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")mS(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Sc:return Ha(n.children,s,i,e);case OT:o=8,s|=8;break;case Yw:return t=br(12,n,e,s|2),t.elementType=Yw,t.lanes=i,t;case Xw:return t=br(13,n,e,s),t.elementType=Xw,t.lanes=i,t;case Jw:return t=br(19,n,e,s),t.elementType=Jw,t.lanes=i,t;case wD:return a_(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _D:o=10;break e;case xD:o=9;break e;case DT:o=11;break e;case jT:o=14;break e;case Ji:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=br(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ha(t,e,n,r){return t=br(7,t,r,e),t.lanes=n,t}function a_(t,e,n,r){return t=br(22,t,r,e),t.elementType=wD,t.lanes=n,t.stateNode={isHidden:!1},t}function Ex(t,e,n){return t=br(6,t,null,e),t.lanes=n,t}function Tx(t,e,n){return e=br(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function g8(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sx(0),this.expirationTimes=sx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sx(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function gS(t,e,n,r,s,i,o,a,l){return t=new g8(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=br(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ZT(i),t}function y8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function hM(t){if(!t)return Fo;t=t._reactInternals;e:{if(Rl(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Hn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(Hn(n))return hj(t,n,e)}return e}function fM(t,e,n,r,s,i,o,a,l){return t=gS(n,r,!0,t,s,i,o,a,l),t.context=hM(null),n=t.current,r=An(),s=To(n),i=ai(r,s),i.callback=e??null,bo(n,i,s),t.current.lanes=s,cp(t,s,r),Kn(t,r),t}function l_(t,e,n,r){var s=e.current,i=An(),o=To(s);return n=hM(n),e.context===null?e.context=n:e.pendingContext=n,e=ai(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=bo(s,e,o),t!==null&&(Zr(t,s,o,i),Rg(t,s,o)),o}function Fy(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function TR(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yS(t,e){TR(t,e),(t=t.alternate)&&TR(t,e)}function v8(){return null}var pM=typeof reportError=="function"?reportError:function(t){console.error(t)};function vS(t){this._internalRoot=t}c_.prototype.render=vS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));l_(t,e,null,null)};c_.prototype.unmount=vS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;nl(function(){l_(null,t,null,null)}),e[hi]=null}};function c_(t){this._internalRoot=t}c_.prototype.unstable_scheduleHydration=function(t){if(t){var e=qD();t={blockedOn:null,target:t,priority:e};for(var n=0;n<to.length&&e!==0&&e<to[n].priority;n++);to.splice(n,0,t),n===0&&HD(t)}};function _S(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function SR(){}function _8(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Fy(o);i.call(u)}}var o=fM(e,r,t,0,null,!1,!1,"",SR);return t._reactRootContainer=o,t[hi]=o.current,vf(t.nodeType===8?t.parentNode:t),nl(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Fy(l);a.call(u)}}var l=gS(t,0,!1,null,null,!1,!1,"",SR);return t._reactRootContainer=l,t[hi]=l.current,vf(t.nodeType===8?t.parentNode:t),nl(function(){l_(e,l,n,r)}),l}function d_(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Fy(o);a.call(l)}}l_(e,o,t,s)}else o=_8(n,e,t,s,r);return Fy(o)}zD=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=wh(e.pendingLanes);n!==0&&(FT(e,n|1),Kn(e,Ct()),!(je&6)&&(xu=Ct()+500,Yo()))}break;case 13:nl(function(){var r=fi(t,1);if(r!==null){var s=An();Zr(r,t,1,s)}}),yS(t,1)}};VT=function(t){if(t.tag===13){var e=fi(t,134217728);if(e!==null){var n=An();Zr(e,t,134217728,n)}yS(t,134217728)}};GD=function(t){if(t.tag===13){var e=To(t),n=fi(t,e);if(n!==null){var r=An();Zr(n,t,e,r)}yS(t,e)}};qD=function(){return qe};WD=function(t,e){var n=qe;try{return qe=t,e()}finally{qe=n}};lb=function(t,e,n){switch(e){case"input":if(tb(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=t_(r);if(!s)throw Error(q(90));ED(r),tb(r,s)}}}break;case"textarea":SD(t,n);break;case"select":e=n.value,e!=null&&Vc(t,!!n.multiple,e,!1)}};kD=hS;OD=nl;var x8={usingClientEntryPoint:!1,Events:[dp,Rc,t_,AD,ND,hS]},Fd={findFiberByHostInstance:Da,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},w8={bundleType:Fd.bundleType,version:Fd.version,rendererPackageName:Fd.rendererPackageName,rendererConfig:Fd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ei.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=MD(t),t===null?null:t.stateNode},findFiberByHostInstance:Fd.findFiberByHostInstance||v8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Im=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Im.isDisabled&&Im.supportsFiber)try{Xv=Im.inject(w8),Cs=Im}catch{}}fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x8;fr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_S(e))throw Error(q(200));return y8(t,e,null,n)};fr.createRoot=function(t,e){if(!_S(t))throw Error(q(299));var n=!1,r="",s=pM;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=gS(t,1,!1,null,null,n,!1,r,s),t[hi]=e.current,vf(t.nodeType===8?t.parentNode:t),new vS(e)};fr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=MD(e),t=t===null?null:t.stateNode,t};fr.flushSync=function(t){return nl(t)};fr.hydrate=function(t,e,n){if(!u_(e))throw Error(q(200));return d_(null,t,e,!0,n)};fr.hydrateRoot=function(t,e,n){if(!_S(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=pM;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=fM(e,null,t,1,n??null,s,!1,i,o),t[hi]=e.current,vf(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new c_(e)};fr.render=function(t,e,n){if(!u_(e))throw Error(q(200));return d_(null,t,e,!1,n)};fr.unmountComponentAtNode=function(t){if(!u_(t))throw Error(q(40));return t._reactRootContainer?(nl(function(){d_(null,null,t,!1,function(){t._reactRootContainer=null,t[hi]=null})}),!0):!1};fr.unstable_batchedUpdates=hS;fr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!u_(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return d_(t,e,n,!1,r)};fr.version="18.3.1-next-f1338f8080-20240426";function mM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mM)}catch(t){console.error(t)}}mM(),mD.exports=fr;var h_=mD.exports;const gM=ST(h_);var yM,CR=h_;yM=CR.createRoot,CR.hydrateRoot;var IR={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X=function(t,e){if(!t)throw Xu(e)},Xu=function(t){return new Error("Firebase Database ("+vM.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},b8=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},xS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,d=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(p=64)),r.push(n[d],n[h],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_M(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):b8(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||h==null)throw new E8;const p=i<<2|a>>4;if(r.push(p),u!==64){const m=a<<4&240|u>>2;if(r.push(m),h!==64){const y=u<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class E8 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xM=function(t){const e=_M(t);return xS.encodeByteArray(e,!0)},Vy=function(t){return xM(t).replace(/\./g,"")},Uy=function(t){try{return xS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T8(t){return wM(void 0,t)}function wM(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!S8(n)||(t[n]=wM(t[n],e[n]));return t}function S8(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C8(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I8=()=>C8().__FIREBASE_DEFAULTS__,P8=()=>{if(typeof process>"u"||typeof IR>"u")return;const t=IR.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},R8=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Uy(t[1]);return e&&JSON.parse(e)},f_=()=>{try{return I8()||P8()||R8()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bM=t=>{var e,n;return(n=(e=f_())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},wS=t=>{const e=bM(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},EM=()=>{var t;return(t=f_())===null||t===void 0?void 0:t.config},TM=t=>{var e;return(e=f_())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Vy(JSON.stringify(n)),Vy(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function A8(){var t;const e=(t=f_())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function N8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function CM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function k8(){const t=Vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function O8(){return vM.NODE_ADMIN===!0}function IM(){return!A8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SS(){try{return typeof indexedDB=="object"}catch{return!1}}function PM(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function D8(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8="FirebaseError";class Or extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=j8,Object.setPrototypeOf(this,Or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Al.prototype.create)}}class Al{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?M8(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Or(s,a,r)}}function M8(t,e){return t.replace(L8,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const L8=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(t){return JSON.parse(t)}function tn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=If(Uy(i[0])||""),n=If(Uy(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},F8=function(t){const e=RM(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},V8=function(t){const e=RM(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function wu(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function $b(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $y(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function rl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(PR(i)&&PR(o)){if(!rl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function PR(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Eh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Th(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)r[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)r[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const p=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(p<<1|p>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,d;for(let h=0;h<80;h++){h<40?h<20?(u=a^i&(o^a),d=1518500249):(u=i^o^a,d=1859775393):h<60?(u=i&o|a&(i|o),d=2400959708):(u=i^o^a,d=3395469782);const p=(s<<5|s>>>27)+u+l+d+r[h]&4294967295;l=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=p}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function $8(t,e){const n=new B8(t,e);return n.subscribe.bind(n)}class B8{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");z8(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Sx),s.error===void 0&&(s.error=Sx),s.complete===void 0&&(s.complete=Sx);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function z8(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Sx(){}function G8(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q8=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,X(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},p_=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W8=1e3,H8=2,K8=4*60*60*1e3,Q8=.5;function RR(t,e=W8,n=H8){const r=e*Math.pow(n,t),s=Math.round(Q8*r*(Math.random()-.5)*2);return Math.min(K8,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t){return t&&t._delegate?t._delegate:t}class dr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Y8=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new bS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(J8(e))try{this.getOrInitializeService({instanceIdentifier:Sa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sa){return this.instances.has(e)}getOptions(e=Sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:X8(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Sa){return this.component?this.component.multipleInstances?e:Sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function X8(t){return t===Sa?void 0:t}function J8(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Y8(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const eq={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},tq=Ce.INFO,nq={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},rq=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=nq[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fp{constructor(e){this.name=e,this._logLevel=tq,this._logHandler=rq,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eq[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const sq=(t,e)=>e.some(n=>t instanceof n);let AR,NR;function iq(){return AR||(AR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oq(){return NR||(NR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AM=new WeakMap,Bb=new WeakMap,NM=new WeakMap,Cx=new WeakMap,CS=new WeakMap;function aq(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Co(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&AM.set(n,t)}).catch(()=>{}),CS.set(e,t),e}function lq(t){if(Bb.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Bb.set(t,e)}let zb={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||NM.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Co(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cq(t){zb=t(zb)}function uq(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ix(this),e,...n);return NM.set(r,e.sort?e.sort():[e]),Co(r)}:oq().includes(t)?function(...e){return t.apply(Ix(this),e),Co(AM.get(this))}:function(...e){return Co(t.apply(Ix(this),e))}}function dq(t){return typeof t=="function"?uq(t):(t instanceof IDBTransaction&&lq(t),sq(t,iq())?new Proxy(t,zb):t)}function Co(t){if(t instanceof IDBRequest)return aq(t);if(Cx.has(t))return Cx.get(t);const e=dq(t);return e!==t&&(Cx.set(t,e),CS.set(e,t)),e}const Ix=t=>CS.get(t);function kM(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Co(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Co(o.result),l.oldVersion,l.newVersion,Co(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const hq=["get","getKey","getAll","getAllKeys","count"],fq=["put","add","delete","clear"],Px=new Map;function kR(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Px.get(e))return Px.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=fq.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||hq.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return Px.set(e,i),i}cq(t=>({...t,get:(e,n,r)=>kR(e,n)||t.get(e,n,r),has:(e,n)=>!!kR(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pq{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mq(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mq(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gb="@firebase/app",OR="0.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=new fp("@firebase/app"),gq="@firebase/app-compat",yq="@firebase/analytics-compat",vq="@firebase/analytics",_q="@firebase/app-check-compat",xq="@firebase/app-check",wq="@firebase/auth",bq="@firebase/auth-compat",Eq="@firebase/database",Tq="@firebase/data-connect",Sq="@firebase/database-compat",Cq="@firebase/functions",Iq="@firebase/functions-compat",Pq="@firebase/installations",Rq="@firebase/installations-compat",Aq="@firebase/messaging",Nq="@firebase/messaging-compat",kq="@firebase/performance",Oq="@firebase/performance-compat",Dq="@firebase/remote-config",jq="@firebase/remote-config-compat",Mq="@firebase/storage",Lq="@firebase/storage-compat",Fq="@firebase/firestore",Vq="@firebase/vertexai",Uq="@firebase/firestore-compat",$q="firebase",Bq="11.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="[DEFAULT]",zq={[Gb]:"fire-core",[gq]:"fire-core-compat",[vq]:"fire-analytics",[yq]:"fire-analytics-compat",[xq]:"fire-app-check",[_q]:"fire-app-check-compat",[wq]:"fire-auth",[bq]:"fire-auth-compat",[Eq]:"fire-rtdb",[Tq]:"fire-data-connect",[Sq]:"fire-rtdb-compat",[Cq]:"fire-fn",[Iq]:"fire-fn-compat",[Pq]:"fire-iid",[Rq]:"fire-iid-compat",[Aq]:"fire-fcm",[Nq]:"fire-fcm-compat",[kq]:"fire-perf",[Oq]:"fire-perf-compat",[Dq]:"fire-rc",[jq]:"fire-rc-compat",[Mq]:"fire-gcs",[Lq]:"fire-gcs-compat",[Fq]:"fire-fst",[Uq]:"fire-fst-compat",[Vq]:"fire-vertex","fire-js":"fire-js",[$q]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=new Map,Gq=new Map,Wb=new Map;function DR(t,e){try{t.container.addComponent(e)}catch(n){mi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rr(t){const e=t.name;if(Wb.has(e))return mi.debug(`There were multiple attempts to register component ${e}.`),!1;Wb.set(e,t);for(const n of Pf.values())DR(n,t);for(const n of Gq.values())DR(n,t);return!0}function Si(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Pn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qq={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Io=new Al("app","Firebase",qq);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wq{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new dr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Io.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=Bq;function OM(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:qb,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Io.create("bad-app-name",{appName:String(s)});if(n||(n=EM()),!n)throw Io.create("no-options");const i=Pf.get(s);if(i){if(rl(n,i.options)&&rl(r,i.config))return i;throw Io.create("duplicate-app",{appName:s})}const o=new Z8(s);for(const l of Wb.values())o.addComponent(l);const a=new Wq(n,r,o);return Pf.set(s,a),a}function pp(t=qb){const e=Pf.get(t);if(!e&&t===qb&&EM())return OM();if(!e)throw Io.create("no-app",{appName:t});return e}function jR(){return Array.from(Pf.values())}function _n(t,e,n){var r;let s=(r=zq[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mi.warn(a.join(" "));return}Rr(new dr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hq="firebase-heartbeat-database",Kq=1,Rf="firebase-heartbeat-store";let Rx=null;function DM(){return Rx||(Rx=kM(Hq,Kq,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Rf)}catch(n){console.warn(n)}}}}).catch(t=>{throw Io.create("idb-open",{originalErrorMessage:t.message})})),Rx}async function Qq(t){try{const n=(await DM()).transaction(Rf),r=await n.objectStore(Rf).get(jM(t));return await n.done,r}catch(e){if(e instanceof Or)mi.warn(e.message);else{const n=Io.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mi.warn(n.message)}}}async function MR(t,e){try{const r=(await DM()).transaction(Rf,"readwrite");await r.objectStore(Rf).put(e,jM(t)),await r.done}catch(n){if(n instanceof Or)mi.warn(n.message);else{const r=Io.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});mi.warn(r.message)}}}function jM(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yq=1024,Xq=30;class Jq{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new eW(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=LR();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Xq){const o=tW(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){mi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=LR(),{heartbeatsToSend:r,unsentEntries:s}=Zq(this._heartbeatsCache.heartbeats),i=Vy(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return mi.warn(n),""}}}function LR(){return new Date().toISOString().substring(0,10)}function Zq(t,e=Yq){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),FR(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),FR(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class eW{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SS()?PM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Qq(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return MR(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return MR(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function FR(t){return Vy(JSON.stringify({version:2,heartbeats:t})).length}function tW(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nW(t){Rr(new dr("platform-logger",e=>new pq(e),"PRIVATE")),Rr(new dr("heartbeat",e=>new Jq(e),"PRIVATE")),_n(Gb,OR,t),_n(Gb,OR,"esm2017"),_n("fire-js","")}nW("");var bs=function(){return bs=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},bs.apply(this,arguments)};function mp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function rW(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function MM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sW=MM,LM=new Al("auth","Firebase",MM());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By=new fp("@firebase/auth");function iW(t,...e){By.logLevel<=Ce.WARN&&By.warn(`Auth (${Xo}): ${t}`,...e)}function Mg(t,...e){By.logLevel<=Ce.ERROR&&By.error(`Auth (${Xo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,...e){throw PS(t,...e)}function es(t,...e){return PS(t,...e)}function IS(t,e,n){const r=Object.assign(Object.assign({},sW()),{[e]:n});return new Al("auth","Firebase",r).create(e,{appName:t.name})}function li(t){return IS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oW(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ar(t,"argument-error"),IS(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function PS(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return LM.create(t,...e)}function ge(t,e,...n){if(!t)throw PS(e,...n)}function ti(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Mg(e),new Error(e)}function gi(t,e){t||ti(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function aW(){return VR()==="http:"||VR()==="https:"}function VR(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aW()||SM()||"connection"in navigator)?navigator.onLine:!0}function cW(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n){this.shortDelay=e,this.longDelay=n,gi(n>e,"Short delay should be less than long delay!"),this.isMobile=TS()||CM()}get(){return lW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(t,e){gi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uW={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dW=new gp(3e4,6e4);function Jo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Zo(t,e,n,r,s={}){return VM(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Ju(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},i);return N8()||(u.referrerPolicy="no-referrer"),FM.fetch()(UM(t,t.config.apiHost,n,a),u)})}async function VM(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},uW),e);try{const s=new fW(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Pm(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pm(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Pm(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Pm(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw IS(t,d,u);Ar(t,d)}}catch(s){if(s instanceof Or)throw s;Ar(t,"network-request-failed",{message:String(s)})}}async function yp(t,e,n,r,s={}){const i=await Zo(t,e,n,r,s);return"mfaPendingCredential"in i&&Ar(t,"multi-factor-auth-required",{_serverResponse:i}),i}function UM(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?RS(t.config,s):`${t.config.apiScheme}://${s}`}function hW(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fW{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(es(this.auth,"network-request-failed")),dW.get())})}}function Pm(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=es(t,e,r);return s.customData._tokenResponse=n,s}function UR(t){return t!==void 0&&t.enterprise!==void 0}class pW{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return hW(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function mW(t,e){return Zo(t,"GET","/v2/recaptchaConfig",Jo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gW(t,e){return Zo(t,"POST","/v1/accounts:delete",e)}async function $M(t,e){return Zo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yW(t,e=!1){const n=yt(t),r=await n.getIdToken(e),s=AS(r);ge(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:zh(Ax(s.auth_time)),issuedAtTime:zh(Ax(s.iat)),expirationTime:zh(Ax(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Ax(t){return Number(t)*1e3}function AS(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Mg("JWT malformed, contained fewer than 3 sections"),null;try{const s=Uy(n);return s?JSON.parse(s):(Mg("Failed to decode base64 JWT payload"),null)}catch(s){return Mg("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function $R(t){const e=AS(t);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Af(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Or&&vW(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function vW({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _W{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zh(this.lastLoginAt),this.creationTime=zh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zy(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Af(t,$M(n,{idToken:r}));ge(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?BM(i.providerUserInfo):[],a=wW(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Kb(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function xW(t){const e=yt(t);await zy(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wW(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function BM(t){return t.map(e=>{var{providerId:n}=e,r=mp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bW(t,e){const n=await VM(t,{},async()=>{const r=Ju({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=UM(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",FM.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function EW(t,e){return Zo(t,"POST","/v2/accounts:revokeToken",Jo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$R(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=$R(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await bW(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new qc;return r&&(ge(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ge(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ge(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qc,this.toJSON())}_performRefresh(){return ti("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(t,e){ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ni{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=mp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _W(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Kb(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Af(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return yW(this,e)}reload(){return xW(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ni(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await zy(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pn(this.auth.app))return Promise.reject(li(this.auth));const e=await this.getIdToken();return await Af(this,gW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,m=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,b=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(u=n.createdAt)!==null&&u!==void 0?u:void 0,E=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:I,isAnonymous:k,providerData:M,stsTokenManager:C}=n;ge(w&&C,e,"internal-error");const S=qc.fromJSON(this.name,C);ge(typeof w=="string",e,"internal-error"),Vi(h,e.name),Vi(p,e.name),ge(typeof I=="boolean",e,"internal-error"),ge(typeof k=="boolean",e,"internal-error"),Vi(m,e.name),Vi(y,e.name),Vi(_,e.name),Vi(b,e.name),Vi(x,e.name),Vi(E,e.name);const P=new ni({uid:w,auth:e,email:p,emailVerified:I,displayName:h,isAnonymous:k,photoURL:y,phoneNumber:m,tenantId:_,stsTokenManager:S,createdAt:x,lastLoginAt:E});return M&&Array.isArray(M)&&(P.providerData=M.map(R=>Object.assign({},R))),b&&(P._redirectEventId=b),P}static async _fromIdTokenResponse(e,n,r=!1){const s=new qc;s.updateFromServerResponse(n);const i=new ni({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await zy(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ge(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?BM(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new qc;a.updateFromIdToken(r);const l=new ni({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Kb(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=new Map;function ri(t){gi(t instanceof Function,"Expected a class definition");let e=BR.get(t);return e?(gi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,BR.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}zM.type="NONE";const zR=zM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(t,e,n){return`firebase:${t}:${e}:${n}`}class Wc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Lg(this.userKey,s.apiKey,i),this.fullPersistenceKey=Lg("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ni._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Wc(ri(zR),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||ri(zR);const o=Lg(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const h=ni._fromJSON(e,d);u!==i&&(a=h),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Wc(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Wc(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(GM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QM(e))return"Blackberry";if(YM(e))return"Webos";if(qM(e))return"Safari";if((e.includes("chrome/")||WM(e))&&!e.includes("edge/"))return"Chrome";if(KM(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function GM(t=Vt()){return/firefox\//i.test(t)}function qM(t=Vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function WM(t=Vt()){return/crios\//i.test(t)}function HM(t=Vt()){return/iemobile/i.test(t)}function KM(t=Vt()){return/android/i.test(t)}function QM(t=Vt()){return/blackberry/i.test(t)}function YM(t=Vt()){return/webos/i.test(t)}function NS(t=Vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function TW(t=Vt()){var e;return NS(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function SW(){return k8()&&document.documentMode===10}function XM(t=Vt()){return NS(t)||KM(t)||YM(t)||QM(t)||/windows phone/i.test(t)||HM(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(t,e=[]){let n;switch(t){case"Browser":n=GR(Vt());break;case"Worker":n=`${GR(Vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CW{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IW(t,e={}){return Zo(t,"GET","/v2/passwordPolicy",Jo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PW=6;class RW{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:PW,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AW{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qR(this),this.idTokenSubscription=new qR(this),this.beforeStateQueue=new CW(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ri(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Wc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $M(this,{idToken:e}),r=await ni._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Pn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zy(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cW()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pn(this.app))return Promise.reject(li(this));const n=e?yt(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pn(this.app)?Promise.reject(li(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pn(this.app)?Promise.reject(li(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IW(this),n=new RW(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Al("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await EW(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ri(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await Wc.create(this,[ri(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&iW(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ci(t){return yt(t)}let qR=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=$8(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NW(t){m_=t}function ZM(t){return m_.loadJS(t)}function kW(){return m_.recaptchaEnterpriseScript}function OW(){return m_.gapiScript}function DW(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class jW{constructor(){this.enterprise=new MW}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class MW{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const LW="recaptcha-enterprise",eL="NO_RECAPTCHA";class FW{constructor(e){this.type=LW,this.auth=Ci(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{mW(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new pW(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;UR(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(eL)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jW().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&UR(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=kW();l.length!==0&&(l+=a),ZM(l).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function WR(t,e,n,r=!1,s=!1){const i=new FW(t);let o;if(s)o=eL;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Qb(t,e,n,r,s){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await WR(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await WR(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VW(t,e){const n=Si(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(rl(i,e??{}))return s;Ar(s,"already-initialized")}return n.initialize({options:e})}function UW(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ri);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $W(t,e,n){const r=Ci(t);ge(r._canInitEmulator,r,"emulator-config-failed"),ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=tL(e),{host:o,port:a}=BW(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),zW()}function tL(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function BW(t){const e=tL(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:HR(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:HR(o)}}}function HR(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zW(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ti("not implemented")}_getIdTokenResponse(e){return ti("not implemented")}_linkToIdToken(e,n){return ti("not implemented")}_getReauthenticationResolver(e){return ti("not implemented")}}async function GW(t,e){return Zo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qW(t,e){return yp(t,"POST","/v1/accounts:signInWithPassword",Jo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WW(t,e){return yp(t,"POST","/v1/accounts:signInWithEmailLink",Jo(t,e))}async function HW(t,e){return yp(t,"POST","/v1/accounts:signInWithEmailLink",Jo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf extends kS{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Nf(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Nf(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qb(e,n,"signInWithPassword",qW);case"emailLink":return WW(e,{email:this._email,oobCode:this._password});default:Ar(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qb(e,r,"signUpPassword",GW);case"emailLink":return HW(e,{idToken:n,email:this._email,oobCode:this._password});default:Ar(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hc(t,e){return yp(t,"POST","/v1/accounts:signInWithIdp",Jo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KW="http://localhost";class sl extends kS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new sl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ar("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=mp(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new sl(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Hc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Hc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Hc(e,n)}buildRequest(){const e={requestUri:KW,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ju(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QW(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function YW(t){const e=Eh(Th(t)).link,n=e?Eh(Th(e)).deep_link_id:null,r=Eh(Th(t)).deep_link_id;return(r?Eh(Th(r)).link:null)||r||n||e||t}class OS{constructor(e){var n,r,s,i,o,a;const l=Eh(Th(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=QW((s=l.mode)!==null&&s!==void 0?s:null);ge(u&&d&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=d,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=YW(e);try{return new OS(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(){this.providerId=Zu.PROVIDER_ID}static credential(e,n){return Nf._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=OS.parseLink(n);return ge(r,"argument-error"),Nf._fromEmailAndCode(e,r.code,r.tenantId)}}Zu.PROVIDER_ID="password";Zu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp extends DS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends vp{constructor(){super("facebook.com")}static credential(e){return sl._fromParams({providerId:ro.PROVIDER_ID,signInMethod:ro.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ro.credentialFromTaggedObject(e)}static credentialFromError(e){return ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ro.credential(e.oauthAccessToken)}catch{return null}}}ro.FACEBOOK_SIGN_IN_METHOD="facebook.com";ro.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends vp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return sl._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Xs.credential(n,r)}catch{return null}}}Xs.GOOGLE_SIGN_IN_METHOD="google.com";Xs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends vp{constructor(){super("github.com")}static credential(e){return sl._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return so.credential(e.oauthAccessToken)}catch{return null}}}so.GITHUB_SIGN_IN_METHOD="github.com";so.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends vp{constructor(){super("twitter.com")}static credential(e,n){return sl._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return io.credential(n,r)}catch{return null}}}io.TWITTER_SIGN_IN_METHOD="twitter.com";io.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XW(t,e){return yp(t,"POST","/v1/accounts:signUp",Jo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ni._fromIdTokenResponse(e,r,s),o=KR(r);return new il({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=KR(r);return new il({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function KR(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy extends Or{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Gy.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Gy(e,n,r,s)}}function nL(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Gy._fromErrorAndOperation(t,i,e,r):i})}async function JW(t,e,n=!1){const r=await Af(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return il._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZW(t,e,n=!1){const{auth:r}=t;if(Pn(r.app))return Promise.reject(li(r));const s="reauthenticate";try{const i=await Af(t,nL(r,s,e,t),n);ge(i.idToken,r,"internal-error");const o=AS(i.idToken);ge(o,r,"internal-error");const{sub:a}=o;return ge(t.uid===a,r,"user-mismatch"),il._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Ar(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(t,e,n=!1){if(Pn(t.app))return Promise.reject(li(t));const r="signIn",s=await nL(t,r,e),i=await il._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function eH(t,e){return rL(Ci(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sL(t){const e=Ci(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function tH(t,e,n){if(Pn(t.app))return Promise.reject(li(t));const r=Ci(t),o=await Qb(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",XW).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&sL(t),l}),a=await il._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function nH(t,e,n){return Pn(t.app)?Promise.reject(li(t)):eH(yt(t),Zu.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&sL(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rH(t,e){return yt(t).setPersistence(e)}function sH(t,e,n,r){return yt(t).onIdTokenChanged(e,n,r)}function iH(t,e,n){return yt(t).beforeAuthStateChanged(e,n)}const qy="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qy,"1"),this.storage.removeItem(qy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oH=1e3,aH=10;class oL extends iL{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XM(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);SW()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,aH):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},oH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}oL.type="LOCAL";const aL=oL;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL extends iL{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}lL.type="SESSION";const cL=lL;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lH(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new g_(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await lH(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}g_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=jS("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const p=h;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(){return window}function uH(t){Ps().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(){return typeof Ps().WorkerGlobalScope<"u"&&typeof Ps().importScripts=="function"}async function dH(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hH(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function fH(){return uL()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL="firebaseLocalStorageDb",pH=1,Wy="firebaseLocalStorage",hL="fbase_key";class _p{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function y_(t,e){return t.transaction([Wy],e?"readwrite":"readonly").objectStore(Wy)}function mH(){const t=indexedDB.deleteDatabase(dL);return new _p(t).toPromise()}function Yb(){const t=indexedDB.open(dL,pH);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Wy,{keyPath:hL})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Wy)?e(r):(r.close(),await mH(),e(await Yb()))})})}async function QR(t,e,n){const r=y_(t,!0).put({[hL]:e,value:n});return new _p(r).toPromise()}async function gH(t,e){const n=y_(t,!1).get(e),r=await new _p(n).toPromise();return r===void 0?null:r.value}function YR(t,e){const n=y_(t,!0).delete(e);return new _p(n).toPromise()}const yH=800,vH=3;class fL{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yb(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>vH)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uL()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=g_._getInstance(fH()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await dH(),!this.activeServiceWorker)return;this.sender=new cH(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||hH()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yb();return await QR(e,qy,"1"),await YR(e,qy),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>QR(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>gH(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>YR(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=y_(s,!1).getAll();return new _p(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fL.type="LOCAL";const _H=fL;new gp(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(t,e){return e?ri(e):(ge(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS extends kS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Hc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Hc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Hc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function xH(t){return rL(t.auth,new MS(t),t.bypassAuthState)}function wH(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),ZW(n,new MS(t),t.bypassAuthState)}async function bH(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),JW(n,new MS(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xH;case"linkViaPopup":case"linkViaRedirect":return bH;case"reauthViaPopup":case"reauthViaRedirect":return wH;default:Ar(this.auth,"internal-error")}}resolve(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EH=new gp(2e3,1e4);async function TH(t,e,n){if(Pn(t.app))return Promise.reject(es(t,"operation-not-supported-in-this-environment"));const r=Ci(t);oW(t,e,DS);const s=pL(r,n);return new La(r,"signInViaPopup",e,s).executeNotNull()}class La extends mL{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,La.currentPopupAction&&La.currentPopupAction.cancel(),La.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){gi(this.filter.length===1,"Popup operations only handle one event");const e=jS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(es(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(es(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,La.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(es(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,EH.get())};e()}}La.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SH="pendingRedirect",Fg=new Map;class CH extends mL{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Fg.get(this.auth._key());if(!e){try{const r=await IH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Fg.set(this.auth._key(),e)}return this.bypassAuthState||Fg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IH(t,e){const n=AH(e),r=RH(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function PH(t,e){Fg.set(t._key(),e)}function RH(t){return ri(t._redirectPersistence)}function AH(t){return Lg(SH,t.config.apiKey,t.name)}async function NH(t,e){return await Ci(t)._initializationPromise,gL(t,e,!1)}async function gL(t,e,n=!1){if(Pn(t.app))return Promise.reject(li(t));const r=Ci(t),s=pL(r,e),o=await new CH(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kH=10*60*1e3;class OH{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DH(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!yL(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(es(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kH&&this.cachedEventUids.clear(),this.cachedEventUids.has(XR(e))}saveEventToCache(e){this.cachedEventUids.add(XR(e)),this.lastProcessedEventTime=Date.now()}}function XR(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function yL({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function DH(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yL(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jH(t,e={}){return Zo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LH=/^https?/;async function FH(t){if(t.config.emulator)return;const{authorizedDomains:e}=await jH(t);for(const n of e)try{if(VH(n))return}catch{}Ar(t,"unauthorized-domain")}function VH(t){const e=Hb(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!LH.test(n))return!1;if(MH.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UH=new gp(3e4,6e4);function JR(){const t=Ps().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function $H(t){return new Promise((e,n)=>{var r,s,i;function o(){JR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{JR(),n(es(t,"network-request-failed"))},timeout:UH.get()})}if(!((s=(r=Ps().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Ps().gapi)===null||i===void 0)&&i.load)o();else{const a=DW("iframefcb");return Ps()[a]=()=>{gapi.load?o():n(es(t,"network-request-failed"))},ZM(`${OW()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Vg=null,e})}let Vg=null;function BH(t){return Vg=Vg||$H(t),Vg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zH=new gp(5e3,15e3),GH="__/auth/iframe",qH="emulator/auth/iframe",WH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KH(t){const e=t.config;ge(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?RS(e,qH):`https://${t.config.authDomain}/${GH}`,r={apiKey:e.apiKey,appName:t.name,v:Xo},s=HH.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ju(r).slice(1)}`}async function QH(t){const e=await BH(t),n=Ps().gapi;return ge(n,t,"internal-error"),e.open({where:document.body,url:KH(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:WH,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=es(t,"network-request-failed"),a=Ps().setTimeout(()=>{i(o)},zH.get());function l(){Ps().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XH=500,JH=600,ZH="_blank",e7="http://localhost";class ZR{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function t7(t,e,n,r=XH,s=JH){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},YH),{width:r.toString(),height:s.toString(),top:i,left:o}),u=Vt().toLowerCase();n&&(a=WM(u)?ZH:n),GM(u)&&(e=e||e7,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[m,y])=>`${p}${m}=${y},`,"");if(TW(u)&&a!=="_self")return n7(e||"",a),new ZR(null);const h=window.open(e||"",a,d);ge(h,t,"popup-blocked");try{h.focus()}catch{}return new ZR(h)}function n7(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r7="__/auth/handler",s7="emulator/auth/handler",i7=encodeURIComponent("fac");async function eA(t,e,n,r,s,i){ge(t.config.authDomain,t,"auth-domain-config-required"),ge(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Xo,eventId:s};if(e instanceof DS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",$b(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof vp){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${i7}=${encodeURIComponent(l)}`:"";return`${o7(t)}?${Ju(a).slice(1)}${u}`}function o7({config:t}){return t.emulator?RS(t,s7):`https://${t.authDomain}/${r7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="webStorageSupport";class a7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cL,this._completeRedirectFn=gL,this._overrideRedirectResult=PH}async _openPopup(e,n,r,s){var i;gi((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await eA(e,n,r,Hb(),s);return t7(e,o,jS())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await eA(e,n,r,Hb(),s);return uH(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(gi(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await QH(e),r=new OH(e);return n.register("authEvent",s=>(ge(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Nx,{type:Nx},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Nx];o!==void 0&&n(!!o),Ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=FH(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return XM()||qM()||NS()}}const l7=a7;var tA="@firebase/auth",nA="1.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u7(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function d7(t){Rr(new dr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ge(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JM(t)},u=new AW(r,s,i,l);return UW(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Rr(new dr("auth-internal",e=>{const n=Ci(e.getProvider("auth").getImmediate());return(r=>new c7(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_n(tA,nA,u7(t)),_n(tA,nA,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h7=5*60,f7=TM("authIdTokenMaxAge")||h7;let rA=null;const p7=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>f7)return;const s=n==null?void 0:n.token;rA!==s&&(rA=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function m7(t=pp()){const e=Si(t,"auth");if(e.isInitialized())return e.getImmediate();const n=VW(t,{popupRedirectResolver:l7,persistence:[_H,aL,cL]}),r=TM("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=p7(i.toString());iH(n,o,()=>o(n.currentUser)),sH(n,a=>o(a))}}const s=bM("auth");return s&&$W(n,`http://${s}`),n}function g7(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}NW({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=es("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",g7().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});d7("Browser");var y7="firebase",v7="11.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n(y7,v7,"app");var sA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Po,vL;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function P(){}P.prototype=S.prototype,C.D=S.prototype,C.prototype=new P,C.prototype.constructor=C,C.C=function(R,O,D){for(var N=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)N[Z-2]=arguments[Z];return S.prototype[O].apply(R,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,S,P){P||(P=0);var R=Array(16);if(typeof S=="string")for(var O=0;16>O;++O)R[O]=S.charCodeAt(P++)|S.charCodeAt(P++)<<8|S.charCodeAt(P++)<<16|S.charCodeAt(P++)<<24;else for(O=0;16>O;++O)R[O]=S[P++]|S[P++]<<8|S[P++]<<16|S[P++]<<24;S=C.g[0],P=C.g[1],O=C.g[2];var D=C.g[3],N=S+(D^P&(O^D))+R[0]+3614090360&4294967295;S=P+(N<<7&4294967295|N>>>25),N=D+(O^S&(P^O))+R[1]+3905402710&4294967295,D=S+(N<<12&4294967295|N>>>20),N=O+(P^D&(S^P))+R[2]+606105819&4294967295,O=D+(N<<17&4294967295|N>>>15),N=P+(S^O&(D^S))+R[3]+3250441966&4294967295,P=O+(N<<22&4294967295|N>>>10),N=S+(D^P&(O^D))+R[4]+4118548399&4294967295,S=P+(N<<7&4294967295|N>>>25),N=D+(O^S&(P^O))+R[5]+1200080426&4294967295,D=S+(N<<12&4294967295|N>>>20),N=O+(P^D&(S^P))+R[6]+2821735955&4294967295,O=D+(N<<17&4294967295|N>>>15),N=P+(S^O&(D^S))+R[7]+4249261313&4294967295,P=O+(N<<22&4294967295|N>>>10),N=S+(D^P&(O^D))+R[8]+1770035416&4294967295,S=P+(N<<7&4294967295|N>>>25),N=D+(O^S&(P^O))+R[9]+2336552879&4294967295,D=S+(N<<12&4294967295|N>>>20),N=O+(P^D&(S^P))+R[10]+4294925233&4294967295,O=D+(N<<17&4294967295|N>>>15),N=P+(S^O&(D^S))+R[11]+2304563134&4294967295,P=O+(N<<22&4294967295|N>>>10),N=S+(D^P&(O^D))+R[12]+1804603682&4294967295,S=P+(N<<7&4294967295|N>>>25),N=D+(O^S&(P^O))+R[13]+4254626195&4294967295,D=S+(N<<12&4294967295|N>>>20),N=O+(P^D&(S^P))+R[14]+2792965006&4294967295,O=D+(N<<17&4294967295|N>>>15),N=P+(S^O&(D^S))+R[15]+1236535329&4294967295,P=O+(N<<22&4294967295|N>>>10),N=S+(O^D&(P^O))+R[1]+4129170786&4294967295,S=P+(N<<5&4294967295|N>>>27),N=D+(P^O&(S^P))+R[6]+3225465664&4294967295,D=S+(N<<9&4294967295|N>>>23),N=O+(S^P&(D^S))+R[11]+643717713&4294967295,O=D+(N<<14&4294967295|N>>>18),N=P+(D^S&(O^D))+R[0]+3921069994&4294967295,P=O+(N<<20&4294967295|N>>>12),N=S+(O^D&(P^O))+R[5]+3593408605&4294967295,S=P+(N<<5&4294967295|N>>>27),N=D+(P^O&(S^P))+R[10]+38016083&4294967295,D=S+(N<<9&4294967295|N>>>23),N=O+(S^P&(D^S))+R[15]+3634488961&4294967295,O=D+(N<<14&4294967295|N>>>18),N=P+(D^S&(O^D))+R[4]+3889429448&4294967295,P=O+(N<<20&4294967295|N>>>12),N=S+(O^D&(P^O))+R[9]+568446438&4294967295,S=P+(N<<5&4294967295|N>>>27),N=D+(P^O&(S^P))+R[14]+3275163606&4294967295,D=S+(N<<9&4294967295|N>>>23),N=O+(S^P&(D^S))+R[3]+4107603335&4294967295,O=D+(N<<14&4294967295|N>>>18),N=P+(D^S&(O^D))+R[8]+1163531501&4294967295,P=O+(N<<20&4294967295|N>>>12),N=S+(O^D&(P^O))+R[13]+2850285829&4294967295,S=P+(N<<5&4294967295|N>>>27),N=D+(P^O&(S^P))+R[2]+4243563512&4294967295,D=S+(N<<9&4294967295|N>>>23),N=O+(S^P&(D^S))+R[7]+1735328473&4294967295,O=D+(N<<14&4294967295|N>>>18),N=P+(D^S&(O^D))+R[12]+2368359562&4294967295,P=O+(N<<20&4294967295|N>>>12),N=S+(P^O^D)+R[5]+4294588738&4294967295,S=P+(N<<4&4294967295|N>>>28),N=D+(S^P^O)+R[8]+2272392833&4294967295,D=S+(N<<11&4294967295|N>>>21),N=O+(D^S^P)+R[11]+1839030562&4294967295,O=D+(N<<16&4294967295|N>>>16),N=P+(O^D^S)+R[14]+4259657740&4294967295,P=O+(N<<23&4294967295|N>>>9),N=S+(P^O^D)+R[1]+2763975236&4294967295,S=P+(N<<4&4294967295|N>>>28),N=D+(S^P^O)+R[4]+1272893353&4294967295,D=S+(N<<11&4294967295|N>>>21),N=O+(D^S^P)+R[7]+4139469664&4294967295,O=D+(N<<16&4294967295|N>>>16),N=P+(O^D^S)+R[10]+3200236656&4294967295,P=O+(N<<23&4294967295|N>>>9),N=S+(P^O^D)+R[13]+681279174&4294967295,S=P+(N<<4&4294967295|N>>>28),N=D+(S^P^O)+R[0]+3936430074&4294967295,D=S+(N<<11&4294967295|N>>>21),N=O+(D^S^P)+R[3]+3572445317&4294967295,O=D+(N<<16&4294967295|N>>>16),N=P+(O^D^S)+R[6]+76029189&4294967295,P=O+(N<<23&4294967295|N>>>9),N=S+(P^O^D)+R[9]+3654602809&4294967295,S=P+(N<<4&4294967295|N>>>28),N=D+(S^P^O)+R[12]+3873151461&4294967295,D=S+(N<<11&4294967295|N>>>21),N=O+(D^S^P)+R[15]+530742520&4294967295,O=D+(N<<16&4294967295|N>>>16),N=P+(O^D^S)+R[2]+3299628645&4294967295,P=O+(N<<23&4294967295|N>>>9),N=S+(O^(P|~D))+R[0]+4096336452&4294967295,S=P+(N<<6&4294967295|N>>>26),N=D+(P^(S|~O))+R[7]+1126891415&4294967295,D=S+(N<<10&4294967295|N>>>22),N=O+(S^(D|~P))+R[14]+2878612391&4294967295,O=D+(N<<15&4294967295|N>>>17),N=P+(D^(O|~S))+R[5]+4237533241&4294967295,P=O+(N<<21&4294967295|N>>>11),N=S+(O^(P|~D))+R[12]+1700485571&4294967295,S=P+(N<<6&4294967295|N>>>26),N=D+(P^(S|~O))+R[3]+2399980690&4294967295,D=S+(N<<10&4294967295|N>>>22),N=O+(S^(D|~P))+R[10]+4293915773&4294967295,O=D+(N<<15&4294967295|N>>>17),N=P+(D^(O|~S))+R[1]+2240044497&4294967295,P=O+(N<<21&4294967295|N>>>11),N=S+(O^(P|~D))+R[8]+1873313359&4294967295,S=P+(N<<6&4294967295|N>>>26),N=D+(P^(S|~O))+R[15]+4264355552&4294967295,D=S+(N<<10&4294967295|N>>>22),N=O+(S^(D|~P))+R[6]+2734768916&4294967295,O=D+(N<<15&4294967295|N>>>17),N=P+(D^(O|~S))+R[13]+1309151649&4294967295,P=O+(N<<21&4294967295|N>>>11),N=S+(O^(P|~D))+R[4]+4149444226&4294967295,S=P+(N<<6&4294967295|N>>>26),N=D+(P^(S|~O))+R[11]+3174756917&4294967295,D=S+(N<<10&4294967295|N>>>22),N=O+(S^(D|~P))+R[2]+718787259&4294967295,O=D+(N<<15&4294967295|N>>>17),N=P+(D^(O|~S))+R[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(O+(N<<21&4294967295|N>>>11))&4294967295,C.g[2]=C.g[2]+O&4294967295,C.g[3]=C.g[3]+D&4294967295}r.prototype.u=function(C,S){S===void 0&&(S=C.length);for(var P=S-this.blockSize,R=this.B,O=this.h,D=0;D<S;){if(O==0)for(;D<=P;)s(this,C,D),D+=this.blockSize;if(typeof C=="string"){for(;D<S;)if(R[O++]=C.charCodeAt(D++),O==this.blockSize){s(this,R),O=0;break}}else for(;D<S;)if(R[O++]=C[D++],O==this.blockSize){s(this,R),O=0;break}}this.h=O,this.o+=S},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;var P=8*this.o;for(S=C.length-8;S<C.length;++S)C[S]=P&255,P/=256;for(this.u(C),C=Array(16),S=P=0;4>S;++S)for(var R=0;32>R;R+=8)C[P++]=this.g[S]>>>R&255;return C};function i(C,S){var P=a;return Object.prototype.hasOwnProperty.call(P,C)?P[C]:P[C]=S(C)}function o(C,S){this.h=S;for(var P=[],R=!0,O=C.length-1;0<=O;O--){var D=C[O]|0;R&&D==S||(P[O]=D,R=!1)}this.g=P}var a={};function l(C){return-128<=C&&128>C?i(C,function(S){return new o([S|0],0>S?-1:0)}):new o([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return b(u(-C));for(var S=[],P=1,R=0;C>=P;R++)S[R]=C/P|0,P*=4294967296;return new o(S,0)}function d(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return b(d(C.substring(1),S));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=u(Math.pow(S,8)),R=h,O=0;O<C.length;O+=8){var D=Math.min(8,C.length-O),N=parseInt(C.substring(O,O+D),S);8>D?(D=u(Math.pow(S,D)),R=R.j(D).add(u(N))):(R=R.j(P),R=R.add(u(N)))}return R}var h=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(_(this))return-b(this).m();for(var C=0,S=1,P=0;P<this.g.length;P++){var R=this.i(P);C+=(0<=R?R:4294967296+R)*S,S*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(y(this))return"0";if(_(this))return"-"+b(this).toString(C);for(var S=u(Math.pow(C,6)),P=this,R="";;){var O=I(P,S).g;P=x(P,O.j(S));var D=((0<P.g.length?P.g[0]:P.h)>>>0).toString(C);if(P=O,y(P))return D+R;for(;6>D.length;)D="0"+D;R=D+R}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function y(C){if(C.h!=0)return!1;for(var S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function _(C){return C.h==-1}t.l=function(C){return C=x(this,C),_(C)?-1:y(C)?0:1};function b(C){for(var S=C.g.length,P=[],R=0;R<S;R++)P[R]=~C.g[R];return new o(P,~C.h).add(p)}t.abs=function(){return _(this)?b(this):this},t.add=function(C){for(var S=Math.max(this.g.length,C.g.length),P=[],R=0,O=0;O<=S;O++){var D=R+(this.i(O)&65535)+(C.i(O)&65535),N=(D>>>16)+(this.i(O)>>>16)+(C.i(O)>>>16);R=N>>>16,D&=65535,N&=65535,P[O]=N<<16|D}return new o(P,P[P.length-1]&-2147483648?-1:0)};function x(C,S){return C.add(b(S))}t.j=function(C){if(y(this)||y(C))return h;if(_(this))return _(C)?b(this).j(b(C)):b(b(this).j(C));if(_(C))return b(this.j(b(C)));if(0>this.l(m)&&0>C.l(m))return u(this.m()*C.m());for(var S=this.g.length+C.g.length,P=[],R=0;R<2*S;R++)P[R]=0;for(R=0;R<this.g.length;R++)for(var O=0;O<C.g.length;O++){var D=this.i(R)>>>16,N=this.i(R)&65535,Z=C.i(O)>>>16,de=C.i(O)&65535;P[2*R+2*O]+=N*de,E(P,2*R+2*O),P[2*R+2*O+1]+=D*de,E(P,2*R+2*O+1),P[2*R+2*O+1]+=N*Z,E(P,2*R+2*O+1),P[2*R+2*O+2]+=D*Z,E(P,2*R+2*O+2)}for(R=0;R<S;R++)P[R]=P[2*R+1]<<16|P[2*R];for(R=S;R<2*S;R++)P[R]=0;return new o(P,0)};function E(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function w(C,S){this.g=C,this.h=S}function I(C,S){if(y(S))throw Error("division by zero");if(y(C))return new w(h,h);if(_(C))return S=I(b(C),S),new w(b(S.g),b(S.h));if(_(S))return S=I(C,b(S)),new w(b(S.g),S.h);if(30<C.g.length){if(_(C)||_(S))throw Error("slowDivide_ only works with positive integers.");for(var P=p,R=S;0>=R.l(C);)P=k(P),R=k(R);var O=M(P,1),D=M(R,1);for(R=M(R,2),P=M(P,2);!y(R);){var N=D.add(R);0>=N.l(C)&&(O=O.add(P),D=N),R=M(R,1),P=M(P,1)}return S=x(C,O.j(S)),new w(O,S)}for(O=h;0<=C.l(S);){for(P=Math.max(1,Math.floor(C.m()/S.m())),R=Math.ceil(Math.log(P)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),D=u(P),N=D.j(S);_(N)||0<N.l(C);)P-=R,D=u(P),N=D.j(S);y(D)&&(D=p),O=O.add(D),C=x(C,N)}return new w(O,C)}t.A=function(C){return I(this,C).h},t.and=function(C){for(var S=Math.max(this.g.length,C.g.length),P=[],R=0;R<S;R++)P[R]=this.i(R)&C.i(R);return new o(P,this.h&C.h)},t.or=function(C){for(var S=Math.max(this.g.length,C.g.length),P=[],R=0;R<S;R++)P[R]=this.i(R)|C.i(R);return new o(P,this.h|C.h)},t.xor=function(C){for(var S=Math.max(this.g.length,C.g.length),P=[],R=0;R<S;R++)P[R]=this.i(R)^C.i(R);return new o(P,this.h^C.h)};function k(C){for(var S=C.g.length+1,P=[],R=0;R<S;R++)P[R]=C.i(R)<<1|C.i(R-1)>>>31;return new o(P,C.h)}function M(C,S){var P=S>>5;S%=32;for(var R=C.g.length-P,O=[],D=0;D<R;D++)O[D]=0<S?C.i(D+P)>>>S|C.i(D+P+1)<<32-S:C.i(D+P);return new o(O,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vL=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Po=o}).apply(typeof sA<"u"?sA:typeof self<"u"?self:typeof window<"u"?window:{});var Rm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _L,Sh,xL,Ug,Xb,wL,bL,EL;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,v,T){return f==Array.prototype||f==Object.prototype||(f[v]=T.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rm=="object"&&Rm];for(var v=0;v<f.length;++v){var T=f[v];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function s(f,v){if(v)e:{var T=r;f=f.split(".");for(var A=0;A<f.length-1;A++){var F=f[A];if(!(F in T))break e;T=T[F]}f=f[f.length-1],A=T[f],v=v(A),v!=A&&v!=null&&e(T,f,{configurable:!0,writable:!0,value:v})}}function i(f,v){f instanceof String&&(f+="");var T=0,A=!1,F={next:function(){if(!A&&T<f.length){var U=T++;return{value:v(U,f[U]),done:!1}}return A=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}s("Array.prototype.values",function(f){return f||function(){return i(this,function(v,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(f){var v=typeof f;return v=v!="object"?v:f?Array.isArray(f)?"array":v:"null",v=="array"||v=="object"&&typeof f.length=="number"}function u(f){var v=typeof f;return v=="object"&&f!=null||v=="function"}function d(f,v,T){return f.call.apply(f.bind,arguments)}function h(f,v,T){if(!f)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,A),f.apply(v,F)}}return function(){return f.apply(v,arguments)}}function p(f,v,T){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function m(f,v){var T=Array.prototype.slice.call(arguments,1);return function(){var A=T.slice();return A.push.apply(A,arguments),f.apply(this,A)}}function y(f,v){function T(){}T.prototype=v.prototype,f.aa=v.prototype,f.prototype=new T,f.prototype.constructor=f,f.Qb=function(A,F,U){for(var Q=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)Q[Xe-2]=arguments[Xe];return v.prototype[F].apply(A,Q)}}function _(f){const v=f.length;if(0<v){const T=Array(v);for(let A=0;A<v;A++)T[A]=f[A];return T}return[]}function b(f,v){for(let T=1;T<arguments.length;T++){const A=arguments[T];if(l(A)){const F=f.length||0,U=A.length||0;f.length=F+U;for(let Q=0;Q<U;Q++)f[F+Q]=A[Q]}else f.push(A)}}class x{constructor(v,T){this.i=v,this.j=T,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function E(f){return/^[\s\xa0]*$/.test(f)}function w(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function I(f){return I[" "](f),f}I[" "]=function(){};var k=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function M(f,v,T){for(const A in f)v.call(T,f[A],A,f)}function C(f,v){for(const T in f)v.call(void 0,f[T],T,f)}function S(f){const v={};for(const T in f)v[T]=f[T];return v}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(f,v){let T,A;for(let F=1;F<arguments.length;F++){A=arguments[F];for(T in A)f[T]=A[T];for(let U=0;U<P.length;U++)T=P[U],Object.prototype.hasOwnProperty.call(A,T)&&(f[T]=A[T])}}function O(f){var v=1;f=f.split(":");const T=[];for(;0<v&&f.length;)T.push(f.shift()),v--;return f.length&&T.push(f.join(":")),T}function D(f){a.setTimeout(()=>{throw f},0)}function N(){var f=V;let v=null;return f.g&&(v=f.g,f.g=f.g.next,f.g||(f.h=null),v.next=null),v}class Z{constructor(){this.h=this.g=null}add(v,T){const A=de.get();A.set(v,T),this.h?this.h.next=A:this.g=A,this.h=A}}var de=new x(()=>new Y,f=>f.reset());class Y{constructor(){this.next=this.g=this.h=null}set(v,T){this.h=v,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,$=!1,V=new Z,W=()=>{const f=a.Promise.resolve(void 0);ee=()=>{f.then(fe)}};var fe=()=>{for(var f;f=N();){try{f.h.call(f.g)}catch(T){D(T)}var v=de;v.j(f),100>v.h&&(v.h++,f.next=v.g,v.g=f)}$=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(f,v){this.type=f,this.g=this.target=v,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,v=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};a.addEventListener("test",T,v),a.removeEventListener("test",T,v)}catch{}return f}();function Be(f,v){if(pe.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var T=this.type=f.type,A=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=v,v=f.relatedTarget){if(k){e:{try{I(v.nodeName);var F=!0;break e}catch{}F=!1}F||(v=null)}}else T=="mouseover"?v=f.fromElement:T=="mouseout"&&(v=f.toElement);this.relatedTarget=v,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:at[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Be.aa.h.call(this)}}y(Be,pe);var at={2:"touch",3:"pen",4:"mouse"};Be.prototype.h=function(){Be.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),jr=0;function At(f,v,T,A,F){this.listener=f,this.proxy=null,this.src=v,this.type=T,this.capture=!!A,this.ha=F,this.key=++jr,this.da=this.fa=!1}function Tn(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Jn(f){this.src=f,this.g={},this.h=0}Jn.prototype.add=function(f,v,T,A,F){var U=f.toString();f=this.g[U],f||(f=this.g[U]=[],this.h++);var Q=yr(f,v,A,F);return-1<Q?(v=f[Q],T||(v.fa=!1)):(v=new At(v,this.src,U,!!A,F),v.fa=T,f.push(v)),v};function os(f,v){var T=v.type;if(T in f.g){var A=f.g[T],F=Array.prototype.indexOf.call(A,v,void 0),U;(U=0<=F)&&Array.prototype.splice.call(A,F,1),U&&(Tn(v),f.g[T].length==0&&(delete f.g[T],f.h--))}}function yr(f,v,T,A){for(var F=0;F<f.length;++F){var U=f[F];if(!U.da&&U.listener==v&&U.capture==!!T&&U.ha==A)return F}return-1}var Ni="closure_lm_"+(1e6*Math.random()|0),aa={};function la(f,v,T,A,F){if(Array.isArray(v)){for(var U=0;U<v.length;U++)la(f,v[U],T,A,F);return null}return T=Kp(T),f&&f[xe]?f.K(v,T,u(A)?!!A.capture:!1,F):vd(f,v,T,!1,A,F)}function vd(f,v,T,A,F,U){if(!v)throw Error("Invalid event type");var Q=u(F)?!!F.capture:!!F,Xe=Mr(f);if(Xe||(f[Ni]=Xe=new Jn(f)),T=Xe.add(v,T,A,Q,U),T.proxy)return T;if(A=ca(),T.proxy=A,A.src=f,A.listener=T,f.addEventListener)Ee||(F=Q),F===void 0&&(F=!1),f.addEventListener(v.toString(),A,F);else if(f.attachEvent)f.attachEvent(ki(v.toString()),A);else if(f.addListener&&f.removeListener)f.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return T}function ca(){function f(T){return v.call(f.src,f.listener,T)}const v=Hp;return f}function Vs(f,v,T,A,F){if(Array.isArray(v))for(var U=0;U<v.length;U++)Vs(f,v[U],T,A,F);else A=u(A)?!!A.capture:!!A,T=Kp(T),f&&f[xe]?(f=f.i,v=String(v).toString(),v in f.g&&(U=f.g[v],T=yr(U,T,A,F),-1<T&&(Tn(U[T]),Array.prototype.splice.call(U,T,1),U.length==0&&(delete f.g[v],f.h--)))):f&&(f=Mr(f))&&(v=f.g[v.toString()],f=-1,v&&(f=yr(v,T,A,F)),(T=-1<f?v[f]:null)&&$l(T))}function $l(f){if(typeof f!="number"&&f&&!f.da){var v=f.src;if(v&&v[xe])os(v.i,f);else{var T=f.type,A=f.proxy;v.removeEventListener?v.removeEventListener(T,A,f.capture):v.detachEvent?v.detachEvent(ki(T),A):v.addListener&&v.removeListener&&v.removeListener(A),(T=Mr(v))?(os(T,f),T.h==0&&(T.src=null,v[Ni]=null)):Tn(f)}}}function ki(f){return f in aa?aa[f]:aa[f]="on"+f}function Hp(f,v){if(f.da)f=!0;else{v=new Be(v,this);var T=f.listener,A=f.ha||f.src;f.fa&&$l(f),f=T.call(A,v)}return f}function Mr(f){return f=f[Ni],f instanceof Jn?f:null}var _d="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kp(f){return typeof f=="function"?f:(f[_d]||(f[_d]=function(v){return f.handleEvent(v)}),f[_d])}function ze(){re.call(this),this.i=new Jn(this),this.M=this,this.F=null}y(ze,re),ze.prototype[xe]=!0,ze.prototype.removeEventListener=function(f,v,T,A){Vs(this,f,v,T,A)};function _t(f,v){var T,A=f.F;if(A)for(T=[];A;A=A.F)T.push(A);if(f=f.M,A=v.type||v,typeof v=="string")v=new pe(v,f);else if(v instanceof pe)v.target=v.target||f;else{var F=v;v=new pe(A,f),R(v,F)}if(F=!0,T)for(var U=T.length-1;0<=U;U--){var Q=v.g=T[U];F=Bl(Q,A,!0,v)&&F}if(Q=v.g=f,F=Bl(Q,A,!0,v)&&F,F=Bl(Q,A,!1,v)&&F,T)for(U=0;U<T.length;U++)Q=v.g=T[U],F=Bl(Q,A,!1,v)&&F}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var f=this.i,v;for(v in f.g){for(var T=f.g[v],A=0;A<T.length;A++)Tn(T[A]);delete f.g[v],f.h--}}this.F=null},ze.prototype.K=function(f,v,T,A){return this.i.add(String(f),v,!1,T,A)},ze.prototype.L=function(f,v,T,A){return this.i.add(String(f),v,!0,T,A)};function Bl(f,v,T,A){if(v=f.i.g[String(v)],!v)return!0;v=v.concat();for(var F=!0,U=0;U<v.length;++U){var Q=v[U];if(Q&&!Q.da&&Q.capture==T){var Xe=Q.listener,Zt=Q.ha||Q.src;Q.fa&&os(f.i,Q),F=Xe.call(Zt,A)!==!1&&F}}return F&&!A.defaultPrevented}function Qp(f,v,T){if(typeof f=="function")T&&(f=p(f,T));else if(f&&typeof f.handleEvent=="function")f=p(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:a.setTimeout(f,v||0)}function ua(f){f.g=Qp(()=>{f.g=null,f.i&&(f.i=!1,ua(f))},f.l);const v=f.h;f.h=null,f.m.apply(null,v)}class F0 extends re{constructor(v,T){super(),this.m=v,this.l=T,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ua(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oi(f){re.call(this),this.h=f,this.g={}}y(Oi,re);var zl=[];function Us(f){M(f.g,function(v,T){this.g.hasOwnProperty(T)&&$l(v)},f),f.g={}}Oi.prototype.N=function(){Oi.aa.N.call(this),Us(this)},Oi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gl=a.JSON.stringify,Di=a.JSON.parse,V0=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function xd(){}xd.prototype.h=null;function wd(f){return f.h||(f.h=f.i())}function bd(){}var da={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ha(){pe.call(this,"d")}y(ha,pe);function vr(){pe.call(this,"c")}y(vr,pe);var $s={},ye=null;function De(){return ye=ye||new ze}$s.La="serverreachability";function Ye(f){pe.call(this,$s.La,f)}y(Ye,pe);function Xt(f){const v=De();_t(v,new Ye(v))}$s.STAT_EVENT="statevent";function Mn(f,v){pe.call(this,$s.STAT_EVENT,f),this.stat=v}y(Mn,pe);function lt(f){const v=De();_t(v,new Mn(v,f))}$s.Ma="timingevent";function as(f,v){pe.call(this,$s.Ma,f),this.size=v}y(as,pe);function Jt(f,v){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},v)}function Ln(){this.g=!0}Ln.prototype.xa=function(){this.g=!1};function Iz(f,v,T,A,F,U){f.info(function(){if(f.g)if(U)for(var Q="",Xe=U.split("&"),Zt=0;Zt<Xe.length;Zt++){var Me=Xe[Zt].split("=");if(1<Me.length){var on=Me[0];Me=Me[1];var an=on.split("_");Q=2<=an.length&&an[1]=="type"?Q+(on+"="+Me+"&"):Q+(on+"=redacted&")}}else Q=null;else Q=U;return"XMLHTTP REQ ("+A+") [attempt "+F+"]: "+v+`
`+T+`
`+Q})}function Pz(f,v,T,A,F,U,Q){f.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+F+"]: "+v+`
`+T+`
`+U+" "+Q})}function ql(f,v,T,A){f.info(function(){return"XMLHTTP TEXT ("+v+"): "+Az(f,T)+(A?" "+A:"")})}function Rz(f,v){f.info(function(){return"TIMEOUT: "+v})}Ln.prototype.info=function(){};function Az(f,v){if(!f.g)return v;if(!v)return null;try{var T=JSON.parse(v);if(T){for(f=0;f<T.length;f++)if(Array.isArray(T[f])){var A=T[f];if(!(2>A.length)){var F=A[1];if(Array.isArray(F)&&!(1>F.length)){var U=F[0];if(U!="noop"&&U!="stop"&&U!="close")for(var Q=1;Q<F.length;Q++)F[Q]=""}}}}return Gl(T)}catch{return v}}var Yp={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},NI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},U0;function Xp(){}y(Xp,xd),Xp.prototype.g=function(){return new XMLHttpRequest},Xp.prototype.i=function(){return{}},U0=new Xp;function ji(f,v,T,A){this.j=f,this.i=v,this.l=T,this.R=A||1,this.U=new Oi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kI}function kI(){this.i=null,this.g="",this.h=!1}var OI={},$0={};function B0(f,v,T){f.L=1,f.v=tm(Bs(v)),f.m=T,f.P=!0,DI(f,null)}function DI(f,v){f.F=Date.now(),Jp(f),f.A=Bs(f.v);var T=f.A,A=f.R;Array.isArray(A)||(A=[String(A)]),KI(T.i,"t",A),f.C=0,T=f.j.J,f.h=new kI,f.g=hP(f.j,T?v:null,!f.m),0<f.O&&(f.M=new F0(p(f.Y,f,f.g),f.O)),v=f.U,T=f.g,A=f.ca;var F="readystatechange";Array.isArray(F)||(F&&(zl[0]=F.toString()),F=zl);for(var U=0;U<F.length;U++){var Q=la(T,F[U],A||v.handleEvent,!1,v.h||v);if(!Q)break;v.g[Q.key]=Q}v=f.H?S(f.H):{},f.m?(f.u||(f.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,v)):(f.u="GET",f.g.ea(f.A,f.u,null,v)),Xt(),Iz(f.i,f.u,f.A,f.l,f.R,f.m)}ji.prototype.ca=function(f){f=f.target;const v=this.M;v&&zs(f)==3?v.j():this.Y(f)},ji.prototype.Y=function(f){try{if(f==this.g)e:{const an=zs(this.g);var v=this.g.Ba();const Kl=this.g.Z();if(!(3>an)&&(an!=3||this.g&&(this.h.h||this.g.oa()||tP(this.g)))){this.J||an!=4||v==7||(v==8||0>=Kl?Xt(3):Xt(2)),z0(this);var T=this.g.Z();this.X=T;t:if(jI(this)){var A=tP(this.g);f="";var F=A.length,U=zs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fa(this),Ed(this);var Q="";break t}this.h.i=new a.TextDecoder}for(v=0;v<F;v++)this.h.h=!0,f+=this.h.i.decode(A[v],{stream:!(U&&v==F-1)});A.length=0,this.h.g+=f,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=T==200,Pz(this.i,this.u,this.A,this.l,this.R,an,T),this.o){if(this.T&&!this.K){t:{if(this.g){var Xe,Zt=this.g;if((Xe=Zt.g?Zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Xe)){var Me=Xe;break t}}Me=null}if(T=Me)ql(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,G0(this,T);else{this.o=!1,this.s=3,lt(12),fa(this),Ed(this);break e}}if(this.P){T=!0;let Lr;for(;!this.J&&this.C<Q.length;)if(Lr=Nz(this,Q),Lr==$0){an==4&&(this.s=4,lt(14),T=!1),ql(this.i,this.l,null,"[Incomplete Response]");break}else if(Lr==OI){this.s=4,lt(15),ql(this.i,this.l,Q,"[Invalid Chunk]"),T=!1;break}else ql(this.i,this.l,Lr,null),G0(this,Lr);if(jI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),an!=4||Q.length!=0||this.h.h||(this.s=1,lt(16),T=!1),this.o=this.o&&T,!T)ql(this.i,this.l,Q,"[Invalid Chunked Response]"),fa(this),Ed(this);else if(0<Q.length&&!this.W){this.W=!0;var on=this.j;on.g==this&&on.ba&&!on.M&&(on.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),Y0(on),on.M=!0,lt(11))}}else ql(this.i,this.l,Q,null),G0(this,Q);an==4&&fa(this),this.o&&!this.J&&(an==4?lP(this.j,this):(this.o=!1,Jp(this)))}else Kz(this.g),T==400&&0<Q.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),fa(this),Ed(this)}}}catch{}finally{}};function jI(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Nz(f,v){var T=f.C,A=v.indexOf(`
`,T);return A==-1?$0:(T=Number(v.substring(T,A)),isNaN(T)?OI:(A+=1,A+T>v.length?$0:(v=v.slice(A,A+T),f.C=A+T,v)))}ji.prototype.cancel=function(){this.J=!0,fa(this)};function Jp(f){f.S=Date.now()+f.I,MI(f,f.I)}function MI(f,v){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Jt(p(f.ba,f),v)}function z0(f){f.B&&(a.clearTimeout(f.B),f.B=null)}ji.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Rz(this.i,this.A),this.L!=2&&(Xt(),lt(17)),fa(this),this.s=2,Ed(this)):MI(this,this.S-f)};function Ed(f){f.j.G==0||f.J||lP(f.j,f)}function fa(f){z0(f);var v=f.M;v&&typeof v.ma=="function"&&v.ma(),f.M=null,Us(f.U),f.g&&(v=f.g,f.g=null,v.abort(),v.ma())}function G0(f,v){try{var T=f.j;if(T.G!=0&&(T.g==f||q0(T.h,f))){if(!f.K&&q0(T.h,f)&&T.G==3){try{var A=T.Da.g.parse(v)}catch{A=null}if(Array.isArray(A)&&A.length==3){var F=A;if(F[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<f.F)am(T),im(T);else break e;Q0(T),lt(18)}}else T.za=F[1],0<T.za-T.T&&37500>F[2]&&T.F&&T.v==0&&!T.C&&(T.C=Jt(p(T.Za,T),6e3));if(1>=VI(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else ma(T,11)}else if((f.K||T.g==f)&&am(T),!E(v))for(F=T.Da.g.parse(v),v=0;v<F.length;v++){let Me=F[v];if(T.T=Me[0],Me=Me[1],T.G==2)if(Me[0]=="c"){T.K=Me[1],T.ia=Me[2];const on=Me[3];on!=null&&(T.la=on,T.j.info("VER="+T.la));const an=Me[4];an!=null&&(T.Aa=an,T.j.info("SVER="+T.Aa));const Kl=Me[5];Kl!=null&&typeof Kl=="number"&&0<Kl&&(A=1.5*Kl,T.L=A,T.j.info("backChannelRequestTimeoutMs_="+A)),A=T;const Lr=f.g;if(Lr){const cm=Lr.g?Lr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cm){var U=A.h;U.g||cm.indexOf("spdy")==-1&&cm.indexOf("quic")==-1&&cm.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(W0(U,U.h),U.h=null))}if(A.D){const X0=Lr.g?Lr.g.getResponseHeader("X-HTTP-Session-Id"):null;X0&&(A.ya=X0,et(A.I,A.D,X0))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-f.F,T.j.info("Handshake RTT: "+T.R+"ms")),A=T;var Q=f;if(A.qa=dP(A,A.J?A.ia:null,A.W),Q.K){UI(A.h,Q);var Xe=Q,Zt=A.L;Zt&&(Xe.I=Zt),Xe.B&&(z0(Xe),Jp(Xe)),A.g=Q}else oP(A);0<T.i.length&&om(T)}else Me[0]!="stop"&&Me[0]!="close"||ma(T,7);else T.G==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?ma(T,7):K0(T):Me[0]!="noop"&&T.l&&T.l.ta(Me),T.v=0)}}Xt(4)}catch{}}var kz=class{constructor(f,v){this.g=f,this.map=v}};function LI(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function FI(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function VI(f){return f.h?1:f.g?f.g.size:0}function q0(f,v){return f.h?f.h==v:f.g?f.g.has(v):!1}function W0(f,v){f.g?f.g.add(v):f.h=v}function UI(f,v){f.h&&f.h==v?f.h=null:f.g&&f.g.has(v)&&f.g.delete(v)}LI.prototype.cancel=function(){if(this.i=$I(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function $I(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let v=f.i;for(const T of f.g.values())v=v.concat(T.D);return v}return _(f.i)}function Oz(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var v=[],T=f.length,A=0;A<T;A++)v.push(f[A]);return v}v=[],T=0;for(A in f)v[T++]=f[A];return v}function Dz(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var v=[];f=f.length;for(var T=0;T<f;T++)v.push(T);return v}v=[],T=0;for(const A in f)v[T++]=A;return v}}}function BI(f,v){if(f.forEach&&typeof f.forEach=="function")f.forEach(v,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,v,void 0);else for(var T=Dz(f),A=Oz(f),F=A.length,U=0;U<F;U++)v.call(void 0,A[U],T&&T[U],f)}var zI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jz(f,v){if(f){f=f.split("&");for(var T=0;T<f.length;T++){var A=f[T].indexOf("="),F=null;if(0<=A){var U=f[T].substring(0,A);F=f[T].substring(A+1)}else U=f[T];v(U,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function pa(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof pa){this.h=f.h,Zp(this,f.j),this.o=f.o,this.g=f.g,em(this,f.s),this.l=f.l;var v=f.i,T=new Cd;T.i=v.i,v.g&&(T.g=new Map(v.g),T.h=v.h),GI(this,T),this.m=f.m}else f&&(v=String(f).match(zI))?(this.h=!1,Zp(this,v[1]||"",!0),this.o=Td(v[2]||""),this.g=Td(v[3]||"",!0),em(this,v[4]),this.l=Td(v[5]||"",!0),GI(this,v[6]||"",!0),this.m=Td(v[7]||"")):(this.h=!1,this.i=new Cd(null,this.h))}pa.prototype.toString=function(){var f=[],v=this.j;v&&f.push(Sd(v,qI,!0),":");var T=this.g;return(T||v=="file")&&(f.push("//"),(v=this.o)&&f.push(Sd(v,qI,!0),"@"),f.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&f.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push(Sd(T,T.charAt(0)=="/"?Fz:Lz,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",Sd(T,Uz)),f.join("")};function Bs(f){return new pa(f)}function Zp(f,v,T){f.j=T?Td(v,!0):v,f.j&&(f.j=f.j.replace(/:$/,""))}function em(f,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);f.s=v}else f.s=null}function GI(f,v,T){v instanceof Cd?(f.i=v,$z(f.i,f.h)):(T||(v=Sd(v,Vz)),f.i=new Cd(v,f.h))}function et(f,v,T){f.i.set(v,T)}function tm(f){return et(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Td(f,v){return f?v?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Sd(f,v,T){return typeof f=="string"?(f=encodeURI(f).replace(v,Mz),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Mz(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var qI=/[#\/\?@]/g,Lz=/[#\?:]/g,Fz=/[#\?]/g,Vz=/[#\?@]/g,Uz=/#/g;function Cd(f,v){this.h=this.g=null,this.i=f||null,this.j=!!v}function Mi(f){f.g||(f.g=new Map,f.h=0,f.i&&jz(f.i,function(v,T){f.add(decodeURIComponent(v.replace(/\+/g," ")),T)}))}t=Cd.prototype,t.add=function(f,v){Mi(this),this.i=null,f=Wl(this,f);var T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(v),this.h+=1,this};function WI(f,v){Mi(f),v=Wl(f,v),f.g.has(v)&&(f.i=null,f.h-=f.g.get(v).length,f.g.delete(v))}function HI(f,v){return Mi(f),v=Wl(f,v),f.g.has(v)}t.forEach=function(f,v){Mi(this),this.g.forEach(function(T,A){T.forEach(function(F){f.call(v,F,A,this)},this)},this)},t.na=function(){Mi(this);const f=Array.from(this.g.values()),v=Array.from(this.g.keys()),T=[];for(let A=0;A<v.length;A++){const F=f[A];for(let U=0;U<F.length;U++)T.push(v[A])}return T},t.V=function(f){Mi(this);let v=[];if(typeof f=="string")HI(this,f)&&(v=v.concat(this.g.get(Wl(this,f))));else{f=Array.from(this.g.values());for(let T=0;T<f.length;T++)v=v.concat(f[T])}return v},t.set=function(f,v){return Mi(this),this.i=null,f=Wl(this,f),HI(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[v]),this.h+=1,this},t.get=function(f,v){return f?(f=this.V(f),0<f.length?String(f[0]):v):v};function KI(f,v,T){WI(f,v),0<T.length&&(f.i=null,f.g.set(Wl(f,v),_(T)),f.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],v=Array.from(this.g.keys());for(var T=0;T<v.length;T++){var A=v[T];const U=encodeURIComponent(String(A)),Q=this.V(A);for(A=0;A<Q.length;A++){var F=U;Q[A]!==""&&(F+="="+encodeURIComponent(String(Q[A]))),f.push(F)}}return this.i=f.join("&")};function Wl(f,v){return v=String(v),f.j&&(v=v.toLowerCase()),v}function $z(f,v){v&&!f.j&&(Mi(f),f.i=null,f.g.forEach(function(T,A){var F=A.toLowerCase();A!=F&&(WI(this,A),KI(this,F,T))},f)),f.j=v}function Bz(f,v){const T=new Ln;if(a.Image){const A=new Image;A.onload=m(Li,T,"TestLoadImage: loaded",!0,v,A),A.onerror=m(Li,T,"TestLoadImage: error",!1,v,A),A.onabort=m(Li,T,"TestLoadImage: abort",!1,v,A),A.ontimeout=m(Li,T,"TestLoadImage: timeout",!1,v,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=f}else v(!1)}function zz(f,v){const T=new Ln,A=new AbortController,F=setTimeout(()=>{A.abort(),Li(T,"TestPingServer: timeout",!1,v)},1e4);fetch(f,{signal:A.signal}).then(U=>{clearTimeout(F),U.ok?Li(T,"TestPingServer: ok",!0,v):Li(T,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(F),Li(T,"TestPingServer: error",!1,v)})}function Li(f,v,T,A,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),A(T)}catch{}}function Gz(){this.g=new V0}function qz(f,v,T){const A=T||"";try{BI(f,function(F,U){let Q=F;u(F)&&(Q=Gl(F)),v.push(A+U+"="+encodeURIComponent(Q))})}catch(F){throw v.push(A+"type="+encodeURIComponent("_badmap")),F}}function nm(f){this.l=f.Ub||null,this.j=f.eb||!1}y(nm,xd),nm.prototype.g=function(){return new rm(this.l,this.j)},nm.prototype.i=function(f){return function(){return f}}({});function rm(f,v){ze.call(this),this.D=f,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(rm,ze),t=rm.prototype,t.open=function(f,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=v,this.readyState=1,Pd(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(v.body=f),(this.D||a).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Id(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Pd(this)),this.g&&(this.readyState=3,Pd(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;QI(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function QI(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var v=f.value?f.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!f.done}))&&(this.response=this.responseText+=v)}f.done?Id(this):Pd(this),this.readyState==3&&QI(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Id(this))},t.Qa=function(f){this.g&&(this.response=f,Id(this))},t.ga=function(){this.g&&Id(this)};function Id(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Pd(f)}t.setRequestHeader=function(f,v){this.u.append(f,v)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],v=this.h.entries();for(var T=v.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=v.next();return f.join(`\r
`)};function Pd(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(rm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function YI(f){let v="";return M(f,function(T,A){v+=A,v+=":",v+=T,v+=`\r
`}),v}function H0(f,v,T){e:{for(A in T){var A=!1;break e}A=!0}A||(T=YI(T),typeof f=="string"?T!=null&&encodeURIComponent(String(T)):et(f,v,T))}function xt(f){ze.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(xt,ze);var Wz=/^https?$/i,Hz=["POST","PUT"];t=xt.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,v,T,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);v=v?v.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():U0.g(),this.v=this.o?wd(this.o):wd(U0),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(v,String(f),!0),this.B=!1}catch(U){XI(this,U);return}if(f=T||"",T=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var F in A)T.set(F,A[F]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const U of A.keys())T.set(U,A.get(U));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(T.keys()).find(U=>U.toLowerCase()=="content-type"),F=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Hz,v,void 0))||A||F||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,Q]of T)this.g.setRequestHeader(U,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{eP(this),this.u=!0,this.g.send(f),this.u=!1}catch(U){XI(this,U)}};function XI(f,v){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=v,f.m=5,JI(f),sm(f)}function JI(f){f.A||(f.A=!0,_t(f,"complete"),_t(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,_t(this,"complete"),_t(this,"abort"),sm(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sm(this,!0)),xt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ZI(this):this.bb())},t.bb=function(){ZI(this)};function ZI(f){if(f.h&&typeof o<"u"&&(!f.v[1]||zs(f)!=4||f.Z()!=2)){if(f.u&&zs(f)==4)Qp(f.Ea,0,f);else if(_t(f,"readystatechange"),zs(f)==4){f.h=!1;try{const Q=f.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var T;if(!(T=v)){var A;if(A=Q===0){var F=String(f.D).match(zI)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),A=!Wz.test(F?F.toLowerCase():"")}T=A}if(T)_t(f,"complete"),_t(f,"success");else{f.m=6;try{var U=2<zs(f)?f.g.statusText:""}catch{U=""}f.l=U+" ["+f.Z()+"]",JI(f)}}finally{sm(f)}}}}function sm(f,v){if(f.g){eP(f);const T=f.g,A=f.v[0]?()=>{}:null;f.g=null,f.v=null,v||_t(f,"ready");try{T.onreadystatechange=A}catch{}}}function eP(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function zs(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<zs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var v=this.g.responseText;return f&&v.indexOf(f)==0&&(v=v.substring(f.length)),Di(v)}};function tP(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Kz(f){const v={};f=(f.g&&2<=zs(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<f.length;A++){if(E(f[A]))continue;var T=O(f[A]);const F=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const U=v[F]||[];v[F]=U,U.push(T)}C(v,function(A){return A.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rd(f,v,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||v}function nP(f){this.Aa=0,this.i=[],this.j=new Ln,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rd("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rd("baseRetryDelayMs",5e3,f),this.cb=Rd("retryDelaySeedMs",1e4,f),this.Wa=Rd("forwardChannelMaxRetries",2,f),this.wa=Rd("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new LI(f&&f.concurrentRequestLimit),this.Da=new Gz,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=nP.prototype,t.la=8,t.G=1,t.connect=function(f,v,T,A){lt(0),this.W=f,this.H=v||{},T&&A!==void 0&&(this.H.OSID=T,this.H.OAID=A),this.F=this.X,this.I=dP(this,null,this.W),om(this)};function K0(f){if(rP(f),f.G==3){var v=f.U++,T=Bs(f.I);if(et(T,"SID",f.K),et(T,"RID",v),et(T,"TYPE","terminate"),Ad(f,T),v=new ji(f,f.j,v),v.L=2,v.v=tm(Bs(T)),T=!1,a.navigator&&a.navigator.sendBeacon)try{T=a.navigator.sendBeacon(v.v.toString(),"")}catch{}!T&&a.Image&&(new Image().src=v.v,T=!0),T||(v.g=hP(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Jp(v)}uP(f)}function im(f){f.g&&(Y0(f),f.g.cancel(),f.g=null)}function rP(f){im(f),f.u&&(a.clearTimeout(f.u),f.u=null),am(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function om(f){if(!FI(f.h)&&!f.s){f.s=!0;var v=f.Ga;ee||W(),$||(ee(),$=!0),V.add(v,f),f.B=0}}function Qz(f,v){return VI(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=v.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Jt(p(f.Ga,f,v),cP(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const F=new ji(this,this.j,f);let U=this.o;if(this.S&&(U?(U=S(U),R(U,this.S)):U=this.S),this.m!==null||this.O||(F.H=U,U=null),this.P)e:{for(var v=0,T=0;T<this.i.length;T++){t:{var A=this.i[T];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(v+=A,4096<v){v=T;break e}if(v===4096||T===this.i.length-1){v=T+1;break e}}v=1e3}else v=1e3;v=iP(this,F,v),T=Bs(this.I),et(T,"RID",f),et(T,"CVER",22),this.D&&et(T,"X-HTTP-Session-Id",this.D),Ad(this,T),U&&(this.O?v="headers="+encodeURIComponent(String(YI(U)))+"&"+v:this.m&&H0(T,this.m,U)),W0(this.h,F),this.Ua&&et(T,"TYPE","init"),this.P?(et(T,"$req",v),et(T,"SID","null"),F.T=!0,B0(F,T,null)):B0(F,T,v),this.G=2}}else this.G==3&&(f?sP(this,f):this.i.length==0||FI(this.h)||sP(this))};function sP(f,v){var T;v?T=v.l:T=f.U++;const A=Bs(f.I);et(A,"SID",f.K),et(A,"RID",T),et(A,"AID",f.T),Ad(f,A),f.m&&f.o&&H0(A,f.m,f.o),T=new ji(f,f.j,T,f.B+1),f.m===null&&(T.H=f.o),v&&(f.i=v.D.concat(f.i)),v=iP(f,T,1e3),T.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),W0(f.h,T),B0(T,A,v)}function Ad(f,v){f.H&&M(f.H,function(T,A){et(v,A,T)}),f.l&&BI({},function(T,A){et(v,A,T)})}function iP(f,v,T){T=Math.min(f.i.length,T);var A=f.l?p(f.l.Na,f.l,f):null;e:{var F=f.i;let U=-1;for(;;){const Q=["count="+T];U==-1?0<T?(U=F[0].g,Q.push("ofs="+U)):U=0:Q.push("ofs="+U);let Xe=!0;for(let Zt=0;Zt<T;Zt++){let Me=F[Zt].g;const on=F[Zt].map;if(Me-=U,0>Me)U=Math.max(0,F[Zt].g-100),Xe=!1;else try{qz(on,Q,"req"+Me+"_")}catch{A&&A(on)}}if(Xe){A=Q.join("&");break e}}}return f=f.i.splice(0,T),v.D=f,A}function oP(f){if(!f.g&&!f.u){f.Y=1;var v=f.Fa;ee||W(),$||(ee(),$=!0),V.add(v,f),f.v=0}}function Q0(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Jt(p(f.Fa,f),cP(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,aP(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Jt(p(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),im(this),aP(this))};function Y0(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function aP(f){f.g=new ji(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var v=Bs(f.qa);et(v,"RID","rpc"),et(v,"SID",f.K),et(v,"AID",f.T),et(v,"CI",f.F?"0":"1"),!f.F&&f.ja&&et(v,"TO",f.ja),et(v,"TYPE","xmlhttp"),Ad(f,v),f.m&&f.o&&H0(v,f.m,f.o),f.L&&(f.g.I=f.L);var T=f.g;f=f.ia,T.L=1,T.v=tm(Bs(v)),T.m=null,T.P=!0,DI(T,f)}t.Za=function(){this.C!=null&&(this.C=null,im(this),Q0(this),lt(19))};function am(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function lP(f,v){var T=null;if(f.g==v){am(f),Y0(f),f.g=null;var A=2}else if(q0(f.h,v))T=v.D,UI(f.h,v),A=1;else return;if(f.G!=0){if(v.o)if(A==1){T=v.m?v.m.length:0,v=Date.now()-v.F;var F=f.B;A=De(),_t(A,new as(A,T)),om(f)}else oP(f);else if(F=v.s,F==3||F==0&&0<v.X||!(A==1&&Qz(f,v)||A==2&&Q0(f)))switch(T&&0<T.length&&(v=f.h,v.i=v.i.concat(T)),F){case 1:ma(f,5);break;case 4:ma(f,10);break;case 3:ma(f,6);break;default:ma(f,2)}}}function cP(f,v){let T=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(T*=2),T*v}function ma(f,v){if(f.j.info("Error code "+v),v==2){var T=p(f.fb,f),A=f.Xa;const F=!A;A=new pa(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Zp(A,"https"),tm(A),F?Bz(A.toString(),T):zz(A.toString(),T)}else lt(2);f.G=0,f.l&&f.l.sa(v),uP(f),rP(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function uP(f){if(f.G=0,f.ka=[],f.l){const v=$I(f.h);(v.length!=0||f.i.length!=0)&&(b(f.ka,v),b(f.ka,f.i),f.h.i.length=0,_(f.i),f.i.length=0),f.l.ra()}}function dP(f,v,T){var A=T instanceof pa?Bs(T):new pa(T);if(A.g!="")v&&(A.g=v+"."+A.g),em(A,A.s);else{var F=a.location;A=F.protocol,v=v?v+"."+F.hostname:F.hostname,F=+F.port;var U=new pa(null);A&&Zp(U,A),v&&(U.g=v),F&&em(U,F),T&&(U.l=T),A=U}return T=f.D,v=f.ya,T&&v&&et(A,T,v),et(A,"VER",f.la),Ad(f,A),A}function hP(f,v,T){if(v&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=f.Ca&&!f.pa?new xt(new nm({eb:T})):new xt(f.pa),v.Ha(f.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fP(){}t=fP.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function lm(){}lm.prototype.g=function(f,v){return new Zn(f,v)};function Zn(f,v){ze.call(this),this.g=new nP(v),this.l=f,this.h=v&&v.messageUrlParams||null,f=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(f?f["X-WebChannel-Content-Type"]=v.messageContentType:f={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(f?f["X-WebChannel-Client-Profile"]=v.va:f={"X-WebChannel-Client-Profile":v.va}),this.g.S=f,(f=v&&v.Sb)&&!E(f)&&(this.g.m=f),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!E(v)&&(this.g.D=v,f=this.h,f!==null&&v in f&&(f=this.h,v in f&&delete f[v])),this.j=new Hl(this)}y(Zn,ze),Zn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zn.prototype.close=function(){K0(this.g)},Zn.prototype.o=function(f){var v=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.u&&(T={},T.__data__=Gl(f),f=T);v.i.push(new kz(v.Ya++,f)),v.G==3&&om(v)},Zn.prototype.N=function(){this.g.l=null,delete this.j,K0(this.g),delete this.g,Zn.aa.N.call(this)};function pP(f){ha.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var v=f.__sm__;if(v){e:{for(const T in v){f=T;break e}f=void 0}(this.i=f)&&(f=this.i,v=v!==null&&f in v?v[f]:void 0),this.data=v}else this.data=f}y(pP,ha);function mP(){vr.call(this),this.status=1}y(mP,vr);function Hl(f){this.g=f}y(Hl,fP),Hl.prototype.ua=function(){_t(this.g,"a")},Hl.prototype.ta=function(f){_t(this.g,new pP(f))},Hl.prototype.sa=function(f){_t(this.g,new mP)},Hl.prototype.ra=function(){_t(this.g,"b")},lm.prototype.createWebChannel=lm.prototype.g,Zn.prototype.send=Zn.prototype.o,Zn.prototype.open=Zn.prototype.m,Zn.prototype.close=Zn.prototype.close,EL=function(){return new lm},bL=function(){return De()},wL=$s,Xb={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yp.NO_ERROR=0,Yp.TIMEOUT=8,Yp.HTTP_ERROR=6,Ug=Yp,NI.COMPLETE="complete",xL=NI,bd.EventType=da,da.OPEN="a",da.CLOSE="b",da.ERROR="c",da.MESSAGE="d",ze.prototype.listen=ze.prototype.K,Sh=bd,xt.prototype.listenOnce=xt.prototype.L,xt.prototype.getLastError=xt.prototype.Ka,xt.prototype.getLastErrorCode=xt.prototype.Ba,xt.prototype.getStatus=xt.prototype.Z,xt.prototype.getResponseJson=xt.prototype.Oa,xt.prototype.getResponseText=xt.prototype.oa,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Ha,_L=xt}).apply(typeof Rm<"u"?Rm:typeof self<"u"?self:typeof window<"u"?window:{});const iA="@firebase/firestore",oA="4.7.7";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};qt.UNAUTHENTICATED=new qt(null),qt.GOOGLE_CREDENTIALS=new qt("google-credentials-uid"),qt.FIRST_PARTY=new qt("first-party-uid"),qt.MOCK_USER=new qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ed="11.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=new fp("@firebase/firestore");function vc(){return ol.logLevel}function G(t,...e){if(ol.logLevel<=Ce.DEBUG){const n=e.map(LS);ol.debug(`Firestore (${ed}): ${t}`,...n)}}function It(t,...e){if(ol.logLevel<=Ce.ERROR){const n=e.map(LS);ol.error(`Firestore (${ed}): ${t}`,...n)}}function al(t,...e){if(ol.logLevel<=Ce.WARN){const n=e.map(LS);ol.warn(`Firestore (${ed}): ${t}`,...n)}}function LS(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${ed}) INTERNAL ASSERTION FAILED: `+t;throw It(e),new Error(e)}function ce(t,e){t||ie()}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Or{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(qt.UNAUTHENTICATED))}shutdown(){}}class x7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class w7{constructor(e){this.t=e,this.currentUser=qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ce(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Rs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Rs,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Rs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string"),new TL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string"),new qt(e)}}class b7{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=qt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class E7{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new b7(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class T7{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Pn(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){ce(this.o===void 0);const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new aA(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string"),this.R=n.token,new aA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=S7(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ve(t,e){return t<e?-1:t>e?1:0}function Zb(t,e){const n=Jb().encode(t),r=Jb().encode(e);for(let s=0;s<Math.min(n.length,r.length);s++){const i=ve(n[s],r[s]);if(i!==0)return i}return ve(n.length,r.length)}function bu(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function CL(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=-62135596800,cA=1e6;class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*cA);return new mt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<lA)throw new K(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cA}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-lA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{static fromTimestamp(e){return new ue(e)}static min(){return new ue(new mt(0,0))}static max(){return new ue(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA="__name__";class ps{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ps.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ps?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=ps.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ve(e.length,n.length)}static compareSegments(e,n){const r=ps.isNumericId(e),s=ps.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?ps.extractNumericId(e).compare(ps.extractNumericId(n)):Zb(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Po.fromString(e.substring(4,e.length-2))}}class Ue extends ps{construct(e,n,r){return new Ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const C7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ht extends ps{construct(e,n,r){return new ht(e,n,r)}static isValidIdentifier(e){return C7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===uA}static keyField(){return new ht([uA])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new K(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new K(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ht(n)}static emptyPath(){return new ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Ue.fromString(e))}static fromName(e){return new J(Ue.fromString(e).popFirst(5))}static empty(){return new J(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Ue(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu=-1;class Hy{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function eE(t){return t.fields.find(e=>e.kind===2)}function Ca(t){return t.fields.filter(e=>e.kind!==2)}Hy.UNKNOWN_ID=-1;class $g{constructor(e,n){this.fieldPath=e,this.kind=n}}class kf{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new kf(0,hr.min())}}function IL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ue.fromTimestamp(r===1e9?new mt(n+1,0):new mt(n,r));return new hr(s,J.empty(),e)}function PL(t){return new hr(t.readTime,t.key,Eu)}class hr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new hr(ue.min(),J.empty(),Eu)}static max(){return new hr(ue.max(),J.empty(),Eu)}}function FS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ea(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==RL)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr="SimpleDb";class v_{static open(e,n,r,s){try{return new v_(n,e.transaction(s,r))}catch(i){throw new Gh(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.m=new Rs,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{n.error?this.m.reject(new Gh(e,n.error)):this.m.resolve()},this.transaction.onerror=r=>{const s=VS(r.target.error);this.m.reject(new Gh(e,s))}}get p(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(G(tr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}S(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new P7(n)}}class Ro{static delete(e){return G(tr,"Removing database:",e),Ra(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!SS())return!1;if(Ro.v())return!0;const e=Vt(),n=Ro.C(e),r=0<n&&n<10,s=NL(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static C(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.O=r,Ro.C(Vt())===12.2&&It("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async N(e){return this.db||(G(tr,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Gh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new K(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new K(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Gh(e,o))},s.onupgradeneeded=i=>{G(tr,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.O.B(o,s.transaction,i.oldVersion,this.version).next(()=>{G(tr,"Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.N(e);const a=v_.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(u=>(a.S(),u)).catch(u=>(a.abort(u),L.reject(u))).toPromise();return l.catch(()=>{}),await a.p,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(G(tr,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function NL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class I7{constructor(e){this.q=e,this.$=!1,this.U=null}get isDone(){return this.$}get K(){return this.U}set cursor(e){this.q=e}done(){this.$=!0}W(e){this.U=e}delete(){return Ra(this.q.delete())}}class Gh extends K{constructor(e,n){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ta(t){return t.name==="IndexedDbTransactionError"}class P7{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(G(tr,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(G(tr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ra(r)}add(e){return G(tr,"ADD",this.store.name,e,e),Ra(this.store.add(e))}get(e){return Ra(this.store.get(e)).next(n=>(n===void 0&&(n=null),G(tr,"GET",this.store.name,e,n),n))}delete(e){return G(tr,"DELETE",this.store.name,e),Ra(this.store.delete(e))}count(){return G(tr,"COUNT",this.store.name),Ra(this.store.count())}G(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new L((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.j(i,(a,l)=>{o.push(l)}).next(()=>o)}}H(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new L((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}J(e,n){G(tr,"DELETE ALL",this.store.name);const r=this.options(e,n);r.Y=!1;const s=this.cursor(r);return this.j(s,(i,o,a)=>a.delete())}Z(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.j(s,n)}X(e){const n=this.cursor({});return new L((r,s)=>{n.onerror=i=>{const o=VS(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}j(e,n){const r=[];return new L((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new I7(a),u=n(a.primaryKey,a.value,l);if(u instanceof L){const d=u.catch(h=>(l.done(),L.reject(h)));r.push(d)}l.isDone?s():l.K===null?a.continue():a.continue(l.K)}}).next(()=>L.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ra(t){return new L((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=VS(r.target.error);n(s)}})}let dA=!1;function VS(t){const e=Ro.C(Vt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new K("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return dA||(dA=!0,setTimeout(()=>{throw r},0)),r}}return t}const qh="IndexBackfiller";class R7{constructor(e,n){this.asyncQueue=e,this.ee=n,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}te(e){G(qh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ee.ne();G(qh,`Documents written: ${n}`)}catch(n){ta(n)?G(qh,"Ignoring IndexedDB error during index backfill: ",n):await ea(n)}await this.te(6e4)})}}class A7{constructor(e,n){this.localStore=e,this.persistence=n}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.re(n,e))}re(e,n){const r=new Set;let s=n,i=!0;return L.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return G(qh,`Processing collection: ${o}`),this.ie(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}ie(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.se(s,i)).next(a=>(G(qh,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}se(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=PL(i);FS(o,r)>0&&(r=o)}),new hr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Bn.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=-1;function __(t){return t==null}function Of(t){return t===0&&1/t==-1/0}function kL(t){return typeof t=="number"&&Number.isInteger(t)&&!Of(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="";function xn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=hA(e)),e=N7(t.get(n),e);return hA(e)}function N7(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Ky:n+="";break;default:n+=i}}return n}function hA(t){return t+Ky+""}function Es(t){const e=t.length;if(ce(e>=2),e===2)return ce(t.charAt(0)===Ky&&t.charAt(1)===""),Ue.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf(Ky,i);switch((o<0||o>n)&&ie(),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:ie()}i=o+2}return new Ue(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="remoteDocuments",xp="owner",Yl="owner",Df="mutationQueues",k7="userId",Hr="mutations",fA="batchId",Fa="userMutationsIndex",pA=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t,e){return[t,xn(e)]}function OL(t,e,n){return[t,xn(e),n]}const O7={},Tu="documentMutations",Qy="remoteDocumentsV14",D7=["prefixPath","collectionGroup","readTime","documentId"],zg="documentKeyIndex",j7=["prefixPath","collectionGroup","documentId"],DL="collectionGroupIndex",M7=["collectionGroup","readTime","prefixPath","documentId"],jf="remoteDocumentGlobal",tE="remoteDocumentGlobalKey",Su="targets",jL="queryTargetsIndex",L7=["canonicalId","targetId"],Cu="targetDocuments",F7=["targetId","path"],US="documentTargetsIndex",V7=["path","targetId"],Yy="targetGlobalKey",Qa="targetGlobal",Mf="collectionParents",U7=["collectionId","parent"],Iu="clientMetadata",$7="clientId",x_="bundles",B7="bundleId",w_="namedQueries",z7="name",$S="indexConfiguration",G7="indexId",nE="collectionGroupIndex",q7="collectionGroup",Xy="indexState",W7=["indexId","uid"],ML="sequenceNumberIndex",H7=["uid","sequenceNumber"],Jy="indexEntries",K7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],LL="documentKeyIndex",Q7=["indexId","uid","orderedDocumentKey"],b_="documentOverlays",Y7=["userId","collectionPath","documentId"],rE="collectionPathOverlayIndex",X7=["userId","collectionPath","largestBatchId"],FL="collectionGroupOverlayIndex",J7=["userId","collectionGroup","largestBatchId"],BS="globals",Z7="name",VL=[Df,Hr,Tu,Ia,Su,xp,Qa,Cu,Iu,jf,Mf,x_,w_],eK=[...VL,b_],UL=[Df,Hr,Tu,Qy,Su,xp,Qa,Cu,Iu,jf,Mf,x_,w_,b_],$L=UL,zS=[...$L,$S,Xy,Jy],tK=zS,nK=[...zS,BS];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE extends AL{constructor(e,n){super(),this.ue=e,this.currentSequenceNumber=n}}function Ut(t,e){const n=le(t);return Ro.M(n.ue,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function na(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function BL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vt=class iE{constructor(e,n){this.comparator=e,this.root=n||Ao.EMPTY}insert(e,n){return new iE(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ao.BLACK,null,null))}remove(e){return new iE(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ao.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Am(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Am(this.root,e,this.comparator,!1)}getReverseIterator(){return new Am(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Am(this.root,e,this.comparator,!0)}},Am=class{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ao=class qs{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??qs.RED,this.left=s??qs.EMPTY,this.right=i??qs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new qs(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return qs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return qs.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}};Ao.EMPTY=null,Ao.RED=!0,Ao.BLACK=!1;Ao.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ao(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.comparator=e,this.data=new vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gA(this.data.getIterator())}getIteratorFrom(e){return new gA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof We)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new We(this.comparator);return n.data=e,n}}class gA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Xl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(ht.comparator)}static empty(){return new zn([])}unionWith(e){let n=new We(ht.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new zL("Invalid base64 string: "+i):i}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const rK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yi(t){if(ce(!!t),typeof t=="string"){let e=0;const n=rK.exec(t);if(ce(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ct(t.seconds),nanos:ct(t.nanos)}}function ct(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vi(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL="server_timestamp",qL="__type__",WL="__previous_value__",HL="__local_write_time__";function GS(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[qL])===null||n===void 0?void 0:n.stringValue)===GL}function E_(t){const e=t.mapValue.fields[WL];return GS(e)?E_(e):e}function Lf(t){const e=yi(t.mapValue.fields[HL].timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sK{constructor(e,n,r,s,i,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}const Zy="(default)";class ll{constructor(e,n){this.projectId=e,this.database=n||Zy}static empty(){return new ll("","")}get isDefaultDatabase(){return this.database===Zy}isEqual(e){return e instanceof ll&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="__type__",KL="__max__",mo={mapValue:{fields:{__type__:{stringValue:KL}}}},WS="__vector__",Pu="value",Gg={nullValue:"NULL_VALUE"};function Vo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?GS(t)?4:QL(t)?9007199254740991:T_(t)?10:11:ie()}function Ns(t,e){if(t===e)return!0;const n=Vo(t);if(n!==Vo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Lf(t).isEqual(Lf(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=yi(s.timestampValue),a=yi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return vi(s.bytesValue).isEqual(vi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ct(s.geoPointValue.latitude)===ct(i.geoPointValue.latitude)&&ct(s.geoPointValue.longitude)===ct(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ct(s.integerValue)===ct(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ct(s.doubleValue),a=ct(i.doubleValue);return o===a?Of(o)===Of(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return bu(t.arrayValue.values||[],e.arrayValue.values||[],Ns);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(mA(o)!==mA(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ns(o[l],a[l])))return!1;return!0}(t,e);default:return ie()}}function Ff(t,e){return(t.values||[]).find(n=>Ns(n,e))!==void 0}function Uo(t,e){if(t===e)return 0;const n=Vo(t),r=Vo(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=ct(i.integerValue||i.doubleValue),l=ct(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return yA(t.timestampValue,e.timestampValue);case 4:return yA(Lf(t),Lf(e));case 5:return Zb(t.stringValue,e.stringValue);case 6:return function(i,o){const a=vi(i),l=vi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=ve(a[u],l[u]);if(d!==0)return d}return ve(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ve(ct(i.latitude),ct(o.latitude));return a!==0?a:ve(ct(i.longitude),ct(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return vA(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,u,d;const h=i.fields||{},p=o.fields||{},m=(a=h[Pu])===null||a===void 0?void 0:a.arrayValue,y=(l=p[Pu])===null||l===void 0?void 0:l.arrayValue,_=ve(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0);return _!==0?_:vA(m,y)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===mo.mapValue&&o===mo.mapValue)return 0;if(i===mo.mapValue)return 1;if(o===mo.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const p=Zb(l[h],d[h]);if(p!==0)return p;const m=Uo(a[l[h]],u[d[h]]);if(m!==0)return m}return ve(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ie()}}function yA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);const n=yi(t),r=yi(e),s=ve(n.seconds,r.seconds);return s!==0?s:ve(n.nanos,r.nanos)}function vA(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Uo(n[s],r[s]);if(i)return i}return ve(n.length,r.length)}function Ru(t){return oE(t)}function oE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=yi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return vi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=oE(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${oE(n.fields[o])}`;return s+"}"}(t.mapValue):ie()}function qg(t){switch(Vo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=E_(t);return e?16+qg(e):16;case 5:return 2*t.stringValue.length;case 6:return vi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+qg(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return na(r.fields,(i,o)=>{s+=i.length+qg(o)}),s}(t.mapValue);default:throw ie()}}function Vf(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function aE(t){return!!t&&"integerValue"in t}function Uf(t){return!!t&&"arrayValue"in t}function _A(t){return!!t&&"nullValue"in t}function xA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wg(t){return!!t&&"mapValue"in t}function T_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[qS])===null||n===void 0?void 0:n.stringValue)===WS}function Wh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return na(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Wh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function QL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===KL}const YL={mapValue:{fields:{[qS]:{stringValue:WS},[Pu]:{arrayValue:{}}}}};function iK(t){return"nullValue"in t?Gg:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Vf(ll.empty(),J.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?T_(t)?YL:{mapValue:{}}:ie()}function oK(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Vf(ll.empty(),J.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?YL:"mapValue"in t?T_(t)?{mapValue:{}}:mo:ie()}function wA(t,e){const n=Uo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function bA(t,e){const n=Uo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.value=e}static empty(){return new yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Wg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wh(n)}setAll(e){let n=ht.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Wh(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Wg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ns(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Wg(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){na(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new yn(Wh(this.value))}}function XL(t){const e=[];return na(t.fields,(n,r)=>{const s=new ht([n]);if(Wg(r)){const i=XL(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new St(e,0,ue.min(),ue.min(),ue.min(),yn.empty(),0)}static newFoundDocument(e,n,r,s){return new St(e,1,n,ue.min(),r,s,0)}static newNoDocument(e,n){return new St(e,2,n,ue.min(),ue.min(),yn.empty(),0)}static newUnknownDocument(e,n){return new St(e,3,n,ue.min(),ue.min(),yn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof St&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new St(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n){this.position=e,this.inclusive=n}}function EA(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Uo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function TA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ns(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n="asc"){this.field=e,this.dir=n}}function aK(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{}class Pe extends JL{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lK(e,n,r):n==="array-contains"?new dK(e,r):n==="in"?new s4(e,r):n==="not-in"?new hK(e,r):n==="array-contains-any"?new fK(e,r):new Pe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cK(e,r):new uK(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Uo(n,this.value)):n!==null&&Vo(this.value)===Vo(n)&&this.matchesComparison(Uo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ge extends JL{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Ge(e,n)}matches(e){return Nu(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Nu(t){return t.op==="and"}function lE(t){return t.op==="or"}function HS(t){return ZL(t)&&Nu(t)}function ZL(t){for(const e of t.filters)if(e instanceof Ge)return!1;return!0}function cE(t){if(t instanceof Pe)return t.field.canonicalString()+t.op.toString()+Ru(t.value);if(HS(t))return t.filters.map(e=>cE(e)).join(",");{const e=t.filters.map(n=>cE(n)).join(",");return`${t.op}(${e})`}}function e4(t,e){return t instanceof Pe?function(r,s){return s instanceof Pe&&r.op===s.op&&r.field.isEqual(s.field)&&Ns(r.value,s.value)}(t,e):t instanceof Ge?function(r,s){return s instanceof Ge&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&e4(o,s.filters[a]),!0):!1}(t,e):void ie()}function t4(t,e){const n=t.filters.concat(e);return Ge.create(n,t.op)}function n4(t){return t instanceof Pe?function(n){return`${n.field.canonicalString()} ${n.op} ${Ru(n.value)}`}(t):t instanceof Ge?function(n){return n.op.toString()+" {"+n.getFilters().map(n4).join(" ,")+"}"}(t):"Filter"}class lK extends Pe{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class cK extends Pe{constructor(e,n){super(e,"in",n),this.keys=r4("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uK extends Pe{constructor(e,n){super(e,"not-in",n),this.keys=r4("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function r4(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class dK extends Pe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Uf(n)&&Ff(n.arrayValue,this.value)}}class s4 extends Pe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ff(this.value.arrayValue,n)}}class hK extends Pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ff(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ff(this.value.arrayValue,n)}}class fK extends Pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Uf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ff(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pK{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.le=null}}function uE(t,e=null,n=[],r=[],s=null,i=null,o=null){return new pK(t,e,n,r,s,i,o)}function cl(t){const e=le(t);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>cE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),__(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ru(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ru(r)).join(",")),e.le=n}return e.le}function wp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!aK(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!e4(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!TA(t.startAt,e.startAt)&&TA(t.endAt,e.endAt)}function ev(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function tv(t,e){return t.filters.filter(n=>n instanceof Pe&&n.field.isEqual(e))}function SA(t,e,n){let r=Gg,s=!0;for(const i of tv(t,e)){let o=Gg,a=!0;switch(i.op){case"<":case"<=":o=iK(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Gg}wA({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];wA({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function CA(t,e,n){let r=mo,s=!0;for(const i of tv(t,e)){let o=mo,a=!0;switch(i.op){case">=":case">":o=oK(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=mo}bA({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];bA({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function i4(t,e,n,r,s,i,o,a){return new td(t,e,n,r,s,i,o,a)}function bp(t){return new td(t)}function IA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function o4(t){return t.collectionGroup!==null}function Hh(t){const e=le(t);if(e.he===null){e.he=[];const n=new Set;for(const i of e.explicitOrderBy)e.he.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new We(ht.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.he.push(new $f(i,r))}),n.has(ht.keyField().canonicalString())||e.he.push(new $f(ht.keyField(),r))}return e.he}function or(t){const e=le(t);return e.Pe||(e.Pe=mK(e,Hh(t))),e.Pe}function mK(t,e){if(t.limitType==="F")return uE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new $f(s.field,i)});const n=t.endAt?new Au(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Au(t.startAt.position,t.startAt.inclusive):null;return uE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function dE(t,e){const n=t.filters.concat([e]);return new td(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function hE(t,e,n){return new td(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function S_(t,e){return wp(or(t),or(e))&&t.limitType===e.limitType}function a4(t){return`${cl(or(t))}|lt:${t.limitType}`}function _c(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>n4(s)).join(", ")}]`),__(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ru(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ru(s)).join(",")),`Target(${r})`}(or(t))}; limitType=${t.limitType})`}function Ep(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Hh(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const u=EA(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Hh(r),s)||r.endAt&&!function(o,a,l){const u=EA(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Hh(r),s))}(t,e)}function l4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function c4(t){return(e,n)=>{let r=!1;for(const s of Hh(t)){const i=gK(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function gK(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?Uo(l,u):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){na(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return BL(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yK=new vt(J.comparator);function sr(){return yK}const u4=new vt(J.comparator);function Ch(...t){let e=u4;for(const n of t)e=e.insert(n.key,n);return e}function d4(t){let e=u4;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ts(){return Kh()}function h4(){return Kh()}function Kh(){return new Ii(t=>t.toString(),(t,e)=>t.isEqual(e))}const vK=new vt(J.comparator),_K=new We(J.comparator);function Te(...t){let e=_K;for(const n of t)e=e.add(n);return e}const xK=new We(ve);function KS(){return xK}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Of(e)?"-0":e}}function f4(t){return{integerValue:""+t}}function wK(t,e){return kL(e)?f4(e):QS(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(){this._=void 0}}function bK(t,e,n){return t instanceof ku?function(s,i){const o={fields:{[qL]:{stringValue:GL},[HL]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&GS(i)&&(i=E_(i)),i&&(o.fields[WL]=i),{mapValue:o}}(n,e):t instanceof ul?m4(t,e):t instanceof dl?g4(t,e):function(s,i){const o=p4(s,i),a=PA(o)+PA(s.Ie);return aE(o)&&aE(s.Ie)?f4(a):QS(s.serializer,a)}(t,e)}function EK(t,e,n){return t instanceof ul?m4(t,e):t instanceof dl?g4(t,e):n}function p4(t,e){return t instanceof Bf?function(r){return aE(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ku extends C_{}class ul extends C_{constructor(e){super(),this.elements=e}}function m4(t,e){const n=y4(e);for(const r of t.elements)n.some(s=>Ns(s,r))||n.push(r);return{arrayValue:{values:n}}}class dl extends C_{constructor(e){super(),this.elements=e}}function g4(t,e){let n=y4(e);for(const r of t.elements)n=n.filter(s=>!Ns(s,r));return{arrayValue:{values:n}}}class Bf extends C_{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function PA(t){return ct(t.integerValue||t.doubleValue)}function y4(t){return Uf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,n){this.field=e,this.transform=n}}function TK(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ul&&s instanceof ul||r instanceof dl&&s instanceof dl?bu(r.elements,s.elements,Ns):r instanceof Bf&&s instanceof Bf?Ns(r.Ie,s.Ie):r instanceof ku&&s instanceof ku}(t.transform,e.transform)}class SK{constructor(e,n){this.version=e,this.transformResults=n}}class Rn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}let P_=class{};function v4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new YS(t.key,Rn.none()):new nd(t.key,t.data,Rn.none());{const n=t.data,r=yn.empty();let s=new We(ht.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Pi(t.key,r,new zn(s.toArray()),Rn.none())}}function CK(t,e,n){t instanceof nd?function(s,i,o){const a=s.value.clone(),l=AA(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Pi?function(s,i,o){if(!Hg(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=AA(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(_4(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Qh(t,e,n,r){return t instanceof nd?function(i,o,a,l){if(!Hg(i.precondition,o))return a;const u=i.value.clone(),d=NA(i.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Pi?function(i,o,a,l){if(!Hg(i.precondition,o))return a;const u=NA(i.fieldTransforms,l,o),d=o.data;return d.setAll(_4(i)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,o,a){return Hg(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function IK(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=p4(r.transform,s||null);i!=null&&(n===null&&(n=yn.empty()),n.set(r.field,i))}return n||null}function RA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&bu(r,s,(i,o)=>TK(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nd extends P_{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Pi extends P_{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function _4(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function AA(t,e,n){const r=new Map;ce(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,EK(o,a,n[s]))}return r}function NA(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,bK(i,o,e))}return r}class YS extends P_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class x4 extends P_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&CK(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Qh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Qh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=h4();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=v4(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Te())}isEqual(e){return this.batchId===e.batchId&&bu(this.mutations,e.mutations,(n,r)=>RA(n,r))&&bu(this.baseMutations,e.baseMutations,(n,r)=>RA(n,r))}}class JS{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ce(e.mutations.length===r.length);let s=function(){return vK}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new JS(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZS=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PK{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,Ne;function RK(t){switch(t){case B.OK:return ie();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return ie()}}function w4(t){if(t===void 0)return It("GRPC error has no .code"),B.UNKNOWN;switch(t){case Nt.OK:return B.OK;case Nt.CANCELLED:return B.CANCELLED;case Nt.UNKNOWN:return B.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return B.INTERNAL;case Nt.UNAVAILABLE:return B.UNAVAILABLE;case Nt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Nt.NOT_FOUND:return B.NOT_FOUND;case Nt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Nt.ABORTED:return B.ABORTED;case Nt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Nt.DATA_LOSS:return B.DATA_LOSS;default:return ie()}}(Ne=Nt||(Nt={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AK=new Po([4294967295,4294967295],0);function kA(t){const e=Jb().encode(t),n=new vL;return n.update(e),new Uint8Array(n.digest())}function OA(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Po([n,r],0),new Po([s,i],0)]}class e1{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ih(`Invalid padding: ${n}`);if(r<0)throw new Ih(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ih(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ih(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=Po.fromNumber(this.Ee)}Ae(e,n,r){let s=e.add(n.multiply(Po.fromNumber(r)));return s.compare(AK)===1&&(s=new Po([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=kA(e),[r,s]=OA(n);for(let i=0;i<this.hashCount;i++){const o=this.Ae(r,s,i);if(!this.Re(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new e1(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ee===0)return;const n=kA(e),[r,s]=OA(n);for(let i=0;i<this.hashCount;i++){const o=this.Ae(r,s,i);this.Ve(o)}}Ve(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ih extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Sp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Tp(ue.min(),s,new vt(ve),sr(),Te())}}class Sp{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Sp(r,n,Te(),Te(),Te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,n,r,s){this.me=e,this.removedTargetIds=n,this.key=r,this.fe=s}}class b4{constructor(e,n){this.targetId=e,this.ge=n}}class E4{constructor(e,n,r=Rt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class DA{constructor(){this.pe=0,this.ye=jA(),this.we=Rt.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Te(),n=Te(),r=Te();return this.ye.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie()}}),new Sp(this.we,this.Se,e,n,r)}Me(){this.be=!1,this.ye=jA()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,ce(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class NK{constructor(e){this.ke=e,this.qe=new Map,this.Qe=sr(),this.$e=Nm(),this.Ue=Nm(),this.Ke=new vt(ve)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const r=this.He(n);switch(e.state){case 0:this.Je(n)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(n);break;case 3:this.Je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Ce(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((r,s)=>{this.Je(s)&&n(s)})}Ze(e){const n=e.targetId,r=e.ge.count,s=this.Xe(n);if(s){const i=s.target;if(ev(i))if(r===0){const o=new J(i.path);this.ze(n,o,St.newNoDocument(o,ue.min()))}else ce(r===1);else{const o=this.et(n);if(o!==r){const a=this.tt(e),l=a?this.nt(a,e,o):1;if(l!==0){this.Ye(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=vi(r).toUint8Array()}catch(l){if(l instanceof zL)return al("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new e1(o,s,i)}catch(l){return al(l instanceof Ih?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(e,n,r){return n.ge.count===r-this.st(e,n.targetId)?0:2}st(e,n){const r=this.ke.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.ze(n,i,null),s++)}),s}ot(e){const n=new Map;this.qe.forEach((i,o)=>{const a=this.Xe(o);if(a){if(i.current&&ev(a.target)){const l=new J(a.target.path);this._t(l).has(o)||this.ut(o,l)||this.ze(o,l,St.newNoDocument(l,e))}i.ve&&(n.set(o,i.Fe()),i.Me())}});let r=Te();this.Ue.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Xe(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.Qe.forEach((i,o)=>o.setReadTime(e));const s=new Tp(e,n,this.Ke,this.Qe,r);return this.Qe=sr(),this.$e=Nm(),this.Ue=Nm(),this.Ke=new vt(ve),s}Ge(e,n){if(!this.Je(e))return;const r=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,r),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,n)?s.xe(n,1):s.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),r&&(this.Qe=this.Qe.insert(n,r))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new DA,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new We(ve),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new We(ve),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new DA),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function Nm(){return new vt(J.comparator)}function jA(){return new vt(J.comparator)}const kK={asc:"ASCENDING",desc:"DESCENDING"},OK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DK={and:"AND",or:"OR"};class jK{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function fE(t,e){return t.useProto3Json||__(e)?e:{value:e}}function Ou(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function T4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function MK(t,e){return Ou(t,e.toTimestamp())}function Nn(t){return ce(!!t),ue.fromTimestamp(function(n){const r=yi(n);return new mt(r.seconds,r.nanos)}(t))}function t1(t,e){return pE(t,e).canonicalString()}function pE(t,e){const n=function(s){return new Ue(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function S4(t){const e=Ue.fromString(t);return ce(D4(e)),e}function nv(t,e){return t1(t.databaseId,e.path)}function Ya(t,e){const n=S4(e);if(n.get(1)!==t.databaseId.projectId)throw new K(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(P4(n))}function C4(t,e){return t1(t.databaseId,e)}function I4(t){const e=S4(t);return e.length===4?Ue.emptyPath():P4(e)}function mE(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function P4(t){return ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function MA(t,e,n){return{name:nv(t,e),fields:n.value.mapValue.fields}}function LK(t,e,n){const r=Ya(t,e.name),s=Nn(e.updateTime),i=e.createTime?Nn(e.createTime):ue.min(),o=new yn({mapValue:{fields:e.fields}}),a=St.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function FK(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(ce(d===void 0||typeof d=="string"),Rt.fromBase64String(d||"")):(ce(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Rt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?B.UNKNOWN:w4(u.code);return new K(d,u.message||"")}(o);n=new E4(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ya(t,r.document.name),i=Nn(r.document.updateTime),o=r.document.createTime?Nn(r.document.createTime):ue.min(),a=new yn({mapValue:{fields:r.document.fields}}),l=St.newFoundDocument(s,i,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Kg(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ya(t,r.document),i=r.readTime?Nn(r.readTime):ue.min(),o=St.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Kg([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ya(t,r.document),i=r.removedTargetIds||[];n=new Kg([],i,s,null)}else{if(!("filter"in e))return ie();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new PK(s,i),a=r.targetId;n=new b4(a,o)}}return n}function rv(t,e){let n;if(e instanceof nd)n={update:MA(t,e.key,e.value)};else if(e instanceof YS)n={delete:nv(t,e.key)};else if(e instanceof Pi)n={update:MA(t,e.key,e.data),updateMask:GK(e.fieldMask)};else{if(!(e instanceof x4))return ie();n={verify:nv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof ku)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ul)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof dl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Bf)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:MK(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie()}(t,e.precondition)),n}function gE(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Rn.updateTime(Nn(i.updateTime)):i.exists!==void 0?Rn.exists(i.exists):Rn.none()}(e.currentDocument):Rn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)ce(a.setToServerValue==="REQUEST_TIME"),l=new ku;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new ul(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new dl(d)}else"increment"in a?l=new Bf(o,a.increment):ie();const u=ht.fromServerFormat(a.fieldPath);return new I_(u,l)}(t,s)):[];if(e.update){e.update.name;const s=Ya(t,e.update.name),i=new yn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new zn(u.map(d=>ht.fromServerFormat(d)))}(e.updateMask);return new Pi(s,i,o,n,r)}return new nd(s,i,n,r)}if(e.delete){const s=Ya(t,e.delete);return new YS(s,n)}if(e.verify){const s=Ya(t,e.verify);return new x4(s,n)}return ie()}function VK(t,e){return t&&t.length>0?(ce(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Nn(s.updateTime):Nn(i);return o.isEqual(ue.min())&&(o=Nn(i)),new SK(o,s.transformResults||[])}(n,e))):[]}function R4(t,e){return{documents:[C4(t,e.path)]}}function A4(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=C4(t,s);const i=function(u){if(u.length!==0)return O4(Ge.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(d=>function(p){return{field:xc(p.field),direction:$K(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=fE(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ht:n,parent:s}}function N4(t){let e=I4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ce(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(h){const p=k4(h);return p instanceof Ge&&HS(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(y){return new $f(wc(y.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,__(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,m=h.values||[];return new Au(m,p)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const p=!h.before,m=h.values||[];return new Au(m,p)}(n.endAt)),i4(e,s,o,i,a,"F",l,u)}function UK(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function k4(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=wc(n.unaryFilter.field);return Pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=wc(n.unaryFilter.field);return Pe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=wc(n.unaryFilter.field);return Pe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=wc(n.unaryFilter.field);return Pe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return Pe.create(wc(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ge.create(n.compositeFilter.filters.map(r=>k4(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function $K(t){return kK[t]}function BK(t){return OK[t]}function zK(t){return DK[t]}function xc(t){return{fieldPath:t.canonicalString()}}function wc(t){return ht.fromServerFormat(t.fieldPath)}function O4(t){return t instanceof Pe?function(n){if(n.op==="=="){if(xA(n.value))return{unaryFilter:{field:xc(n.field),op:"IS_NAN"}};if(_A(n.value))return{unaryFilter:{field:xc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xA(n.value))return{unaryFilter:{field:xc(n.field),op:"IS_NOT_NAN"}};if(_A(n.value))return{unaryFilter:{field:xc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xc(n.field),op:BK(n.op),value:n.value}}}(t):t instanceof Ge?function(n){const r=n.getFilters().map(s=>O4(s));return r.length===1?r[0]:{compositeFilter:{op:zK(n.op),filters:r}}}(t):ie()}function GK(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function D4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,n,r,s,i=ue.min(),o=ue.min(),a=Rt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new si(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new si(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e){this.Tt=e}}function qK(t,e){let n;if(e.document)n=LK(t.Tt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=J.fromSegments(e.noDocument.path),s=fl(e.noDocument.readTime);n=St.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ie();{const r=J.fromSegments(e.unknownDocument.path),s=fl(e.unknownDocument.version);n=St.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new mt(s[0],s[1]);return ue.fromTimestamp(i)}(e.readTime)),n}function LA(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:sv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:nv(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Ou(i,o.version.toTimestamp()),createTime:Ou(i,o.createTime.toTimestamp())}}(t.Tt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:hl(e.version)};else{if(!e.isUnknownDocument())return ie();r.unknownDocument={path:n.path.toArray(),version:hl(e.version)}}return r}function sv(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function hl(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function fl(t){const e=new mt(t.seconds,t.nanoseconds);return ue.fromTimestamp(e)}function Aa(t,e){const n=(e.baseMutations||[]).map(i=>gE(t.Tt,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>gE(t.Tt,i)),s=mt.fromMillis(e.localWriteTimeMs);return new XS(e.batchId,s,n,r)}function Ph(t){const e=fl(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?fl(t.lastLimboFreeSnapshotVersion):ue.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){return ce(i.documents.length===1),or(bp(I4(i.documents[0])))}(t.query):function(i){return or(N4(i))}(t.query),new si(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Rt.fromBase64String(t.resumeToken))}function M4(t,e){const n=hl(e.snapshotVersion),r=hl(e.lastLimboFreeSnapshotVersion);let s;s=ev(e.target)?R4(t.Tt,e.target):A4(t.Tt,e.target).ht;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:cl(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function L4(t){const e=N4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?hE(e,e.limit,"L"):e}function kx(t,e){return new ZS(e.largestBatchId,gE(t.Tt,e.overlayMutation))}function FA(t,e){const n=e.path.lastSegment();return[t,xn(e.path.popLast()),n]}function VA(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:hl(r.readTime),documentKey:xn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WK{getBundleMetadata(e,n){return UA(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:fl(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return UA(e).put(function(s){return{bundleId:s.id,createTime:hl(Nn(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return $A(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:L4(i.bundledQuery),readTime:fl(i.readTime)}}(r)})}saveNamedQuery(e,n){return $A(e).put(function(s){return{name:s.name,readTime:hl(Nn(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function UA(t){return Ut(t,x_)}function $A(t){return Ut(t,w_)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,n){this.serializer=e,this.userId=n}static It(e,n){const r=n.uid||"";return new R_(e,r)}getOverlay(e,n){return Vd(e).get(FA(this.userId,n)).next(r=>r?kx(this.serializer,r):null)}getOverlays(e,n){const r=Ts();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new ZS(n,o);s.push(this.Et(e,a))}),L.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(xn(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Vd(e).J(rE,a))}),L.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Ts(),i=xn(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Vd(e).G(rE,o).next(a=>{for(const l of a){const u=kx(this.serializer,l);s.set(u.getKey(),u)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Ts();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Vd(e).Z({index:FL,range:a},(l,u,d)=>{const h=kx(this.serializer,u);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>i)}Et(e,n){return Vd(e).put(function(s,i,o){const[a,l,u]=FA(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:rv(s.Tt,o.mutation)}}(this.serializer,this.userId,n))}}function Vd(t){return Ut(t,b_)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK{dt(e){return Ut(e,BS)}getSessionToken(e){return this.dt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Rt.fromUint8Array(r):Rt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.dt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(){}At(e,n){this.Rt(e,n),n.Vt()}Rt(e,n){if("nullValue"in e)this.ft(n,5);else if("booleanValue"in e)this.ft(n,10),n.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(n,15),n.gt(ct(e.integerValue));else if("doubleValue"in e){const r=ct(e.doubleValue);isNaN(r)?this.ft(n,13):(this.ft(n,15),Of(r)?n.gt(0):n.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(n,20),typeof r=="string"&&(r=yi(r)),n.yt(`${r.seconds||""}`),n.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,n),this.St(n);else if("bytesValue"in e)this.ft(n,30),n.bt(vi(e.bytesValue)),this.St(n);else if("referenceValue"in e)this.Dt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ft(n,45),n.gt(r.latitude||0),n.gt(r.longitude||0)}else"mapValue"in e?QL(e)?this.ft(n,Number.MAX_SAFE_INTEGER):T_(e)?this.vt(e.mapValue,n):(this.Ct(e.mapValue,n),this.St(n)):"arrayValue"in e?(this.Ft(e.arrayValue,n),this.St(n)):ie()}wt(e,n){this.ft(n,25),this.Mt(e,n)}Mt(e,n){n.yt(e)}Ct(e,n){const r=e.fields||{};this.ft(n,55);for(const s of Object.keys(r))this.wt(s,n),this.Rt(r[s],n)}vt(e,n){var r,s;const i=e.fields||{};this.ft(n,53);const o=Pu,a=((s=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.ft(n,15),n.gt(ct(a)),this.wt(o,n),this.Rt(i[o],n)}Ft(e,n){const r=e.values||[];this.ft(n,50);for(const s of r)this.Rt(s,n)}Dt(e,n){this.ft(n,37),J.fromName(e).path.forEach(r=>{this.ft(n,60),this.Mt(r,n)})}ft(e,n){e.gt(n)}St(e){e.gt(2)}}Na.xt=new Na;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=255;function KK(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function BA(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=KK(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class QK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ot(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Nt(r.value),r=n.next();this.Bt()}Lt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.kt(r.value),r=n.next();this.qt()}Qt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Nt(r);else if(r<2048)this.Nt(960|r>>>6),this.Nt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Nt(480|r>>>12),this.Nt(128|63&r>>>6),this.Nt(128|63&r);else{const s=n.codePointAt(0);this.Nt(240|s>>>18),this.Nt(128|63&s>>>12),this.Nt(128|63&s>>>6),this.Nt(128|63&s)}}this.Bt()}$t(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.kt(r);else if(r<2048)this.kt(960|r>>>6),this.kt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.kt(480|r>>>12),this.kt(128|63&r>>>6),this.kt(128|63&r);else{const s=n.codePointAt(0);this.kt(240|s>>>18),this.kt(128|63&s>>>12),this.kt(128|63&s>>>6),this.kt(128|63&s)}}this.qt()}Ut(e){const n=this.Kt(e),r=BA(n);this.Wt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Gt(e){const n=this.Kt(e),r=BA(n);this.Wt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}zt(){this.jt(Jl),this.jt(255)}Ht(){this.Jt(Jl),this.Jt(255)}reset(){this.position=0}seed(e){this.Wt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Yt(){return this.buffer.slice(0,this.position)}Kt(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Nt(e){const n=255&e;n===0?(this.jt(0),this.jt(255)):n===Jl?(this.jt(Jl),this.jt(0)):this.jt(n)}kt(e){const n=255&e;n===0?(this.Jt(0),this.Jt(255)):n===Jl?(this.Jt(Jl),this.Jt(0)):this.Jt(e)}Bt(){this.jt(0),this.jt(1)}qt(){this.Jt(0),this.Jt(1)}jt(e){this.Wt(1),this.buffer[this.position++]=e}Jt(e){this.Wt(1),this.buffer[this.position++]=~e}Wt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class YK{constructor(e){this.Zt=e}bt(e){this.Zt.Ot(e)}yt(e){this.Zt.Qt(e)}gt(e){this.Zt.Ut(e)}Vt(){this.Zt.zt()}}class XK{constructor(e){this.Zt=e}bt(e){this.Zt.Lt(e)}yt(e){this.Zt.$t(e)}gt(e){this.Zt.Gt(e)}Vt(){this.Zt.Ht()}}class Ud{constructor(){this.Zt=new QK,this.Xt=new YK(this.Zt),this.en=new XK(this.Zt)}seed(e){this.Zt.seed(e)}tn(e){return e===0?this.Xt:this.en}Yt(){return this.Zt.Yt()}reset(){this.Zt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}nn(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ka(this.indexId,this.documentKey,this.arrayValue,r)}}function Ui(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=zA(t.arrayValue,e.arrayValue),n!==0?n:(n=zA(t.directionalValue,e.directionalValue),n!==0?n:J.comparator(t.documentKey,e.documentKey)))}function zA(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e){this.rn=new We((n,r)=>ht.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.sn=e.orderBy,this._n=[];for(const n of e.filters){const r=n;r.isInequality()?this.rn=this.rn.add(r):this._n.push(r)}}get an(){return this.rn.size>1}un(e){if(ce(e.collectionGroup===this.collectionId),this.an)return!1;const n=eE(e);if(n!==void 0&&!this.cn(n))return!1;const r=Ca(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.cn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.rn.size>0){const a=this.rn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.ln(a,l)||!this.hn(this.sn[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.sn.length||!this.hn(this.sn[o++],a))return!1}return!0}Pn(){if(this.an)return null;let e=new We(ht.comparator);const n=[];for(const r of this._n)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new $g(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new $g(r.field,0))}for(const r of this.sn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new $g(r.field,r.dir==="asc"?0:1)));return new Hy(Hy.UNKNOWN_ID,this.collectionId,n,kf.empty())}cn(e){for(const n of this._n)if(this.ln(n,e))return!0;return!1}ln(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}hn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(t){var e,n;if(ce(t instanceof Pe||t instanceof Ge),t instanceof Pe){if(t instanceof s4){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>Pe.create(t.field,"==",i)))||[];return Ge.create(s,"or")}return t}const r=t.filters.map(s=>F4(s));return Ge.create(r,t.op)}function JK(t){if(t.getFilters().length===0)return[];const e=_E(F4(t));return ce(V4(e)),yE(e)||vE(e)?[e]:e.getFilters()}function yE(t){return t instanceof Pe}function vE(t){return t instanceof Ge&&HS(t)}function V4(t){return yE(t)||vE(t)||function(n){if(n instanceof Ge&&lE(n)){for(const r of n.getFilters())if(!yE(r)&&!vE(r))return!1;return!0}return!1}(t)}function _E(t){if(ce(t instanceof Pe||t instanceof Ge),t instanceof Pe)return t;if(t.filters.length===1)return _E(t.filters[0]);const e=t.filters.map(r=>_E(r));let n=Ge.create(e,t.op);return n=iv(n),V4(n)?n:(ce(n instanceof Ge),ce(Nu(n)),ce(n.filters.length>1),n.filters.reduce((r,s)=>n1(r,s)))}function n1(t,e){let n;return ce(t instanceof Pe||t instanceof Ge),ce(e instanceof Pe||e instanceof Ge),n=t instanceof Pe?e instanceof Pe?function(s,i){return Ge.create([s,i],"and")}(t,e):qA(t,e):e instanceof Pe?qA(e,t):function(s,i){if(ce(s.filters.length>0&&i.filters.length>0),Nu(s)&&Nu(i))return t4(s,i.getFilters());const o=lE(s)?s:i,a=lE(s)?i:s,l=o.filters.map(u=>n1(u,a));return Ge.create(l,"or")}(t,e),iv(n)}function qA(t,e){if(Nu(e))return t4(e,t.getFilters());{const n=e.filters.map(r=>n1(t,r));return Ge.create(n,"or")}}function iv(t){if(ce(t instanceof Pe||t instanceof Ge),t instanceof Pe)return t;const e=t.getFilters();if(e.length===1)return iv(e[0]);if(ZL(t))return t;const n=e.map(s=>iv(s)),r=[];return n.forEach(s=>{s instanceof Pe?r.push(s):s instanceof Ge&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Ge.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZK{constructor(){this.Tn=new r1}addToCollectionParentIndex(e,n){return this.Tn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(hr.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(hr.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class r1{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new We(Ue.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new We(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="IndexedDbIndexManager",km=new Uint8Array(0);class eQ{constructor(e,n){this.databaseId=n,this.In=new r1,this.En=new Ii(r=>cl(r),(r,s)=>wp(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.In.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.In.add(n)});const i={collectionId:r,parent:xn(s)};return HA(e).put(i)}return L.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[CL(n),""],!1,!0);return HA(e).G(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Es(o.parent))}return r})}addFieldIndex(e,n){const r=$d(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=ec(e);return i.next(a=>{o.put(VA(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=$d(e),s=ec(e),i=Zl(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=$d(e),r=Zl(e),s=ec(e);return n.J().next(()=>r.J()).next(()=>s.J())}createTargetIndexes(e,n){return L.forEach(this.dn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new GA(r).Pn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=Zl(e);let s=!0;const i=new Map;return L.forEach(this.dn(n),o=>this.An(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=Te();const a=[];return L.forEach(i,(l,u)=>{G(WA,`Using index ${function(w){return`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(I=>`${I.fieldPath}:${I.kind}`).join(",")}`}(l)} to execute ${cl(n)}`);const d=function(w,I){const k=eE(I);if(k===void 0)return null;for(const M of tv(w,k.fieldPath))switch(M.op){case"array-contains-any":return M.value.arrayValue.values||[];case"array-contains":return[M.value]}return null}(u,l),h=function(w,I){const k=new Map;for(const M of Ca(I))for(const C of tv(w,M.fieldPath))switch(C.op){case"==":case"in":k.set(M.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return k.set(M.fieldPath.canonicalString(),C.value),Array.from(k.values())}return null}(u,l),p=function(w,I){const k=[];let M=!0;for(const C of Ca(I)){const S=C.kind===0?SA(w,C.fieldPath,w.startAt):CA(w,C.fieldPath,w.startAt);k.push(S.value),M&&(M=S.inclusive)}return new Au(k,M)}(u,l),m=function(w,I){const k=[];let M=!0;for(const C of Ca(I)){const S=C.kind===0?CA(w,C.fieldPath,w.endAt):SA(w,C.fieldPath,w.endAt);k.push(S.value),M&&(M=S.inclusive)}return new Au(k,M)}(u,l),y=this.Rn(l,u,p),_=this.Rn(l,u,m),b=this.Vn(l,u,h),x=this.mn(l.indexId,d,y,p.inclusive,_,m.inclusive,b);return L.forEach(x,E=>r.H(E,n.limit).next(w=>{w.forEach(I=>{const k=J.fromSegments(I.documentKey);o.has(k)||(o=o.add(k),a.push(k))})}))}).next(()=>a)}return L.resolve(null)})}dn(e){let n=this.En.get(e);return n||(e.filters.length===0?n=[e]:n=JK(Ge.create(e.filters,"and")).map(r=>uE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.En.set(e,n),n)}mn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),u=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const p=n?this.fn(n[h/u]):km,m=this.gn(e,p,r[h%u],s),y=this.pn(e,p,i[h%u],o),_=a.map(b=>this.gn(e,p,b,!0));d.push(...this.createRange(m,y,_))}return d}gn(e,n,r,s){const i=new ka(e,J.empty(),n,r);return s?i:i.nn()}pn(e,n,r,s){const i=new ka(e,J.empty(),n,r);return s?i.nn():i}An(e,n){const r=new GA(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.un(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.dn(n);return L.forEach(s,i=>this.An(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new We(ht.comparator),d=!1;for(const h of l.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:u=u.add(p.field));for(const h of l.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}yn(e,n){const r=new Ud;for(const s of Ca(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.tn(s.kind);Na.xt.At(i,o)}return r.Yt()}fn(e){const n=new Ud;return Na.xt.At(e,n.tn(0)),n.Yt()}wn(e,n){const r=new Ud;return Na.xt.At(Vf(this.databaseId,n),r.tn(function(i){const o=Ca(i);return o.length===0?0:o[o.length-1].kind}(e))),r.Yt()}Vn(e,n,r){if(r===null)return[];let s=[];s.push(new Ud);let i=0;for(const o of Ca(e)){const a=r[i++];for(const l of s)if(this.Sn(n,o.fieldPath)&&Uf(a))s=this.bn(s,o,a);else{const u=l.tn(o.kind);Na.xt.At(a,u)}}return this.Dn(s)}Rn(e,n,r){return this.Vn(e,n,r.position)}Dn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Yt();return n}bn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new Ud;l.seed(a.Yt()),Na.xt.At(o,l.tn(n.kind)),i.push(l)}return i}Sn(e,n){return!!e.filters.find(r=>r instanceof Pe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=$d(e),s=ec(e);return(n?r.G(nE,IDBKeyRange.bound(n,n)):r.G()).next(i=>{const o=[];return L.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const p=h?new kf(h.sequenceNumber,new hr(fl(h.readTime),new J(Es(h.documentKey)),h.largestBatchId)):kf.empty(),m=d.fields.map(([y,_])=>new $g(ht.fromServerFormat(y),_));return new Hy(d.indexId,d.collectionGroup,m,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ve(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=$d(e),i=ec(e);return this.vn(e).next(o=>s.G(nE,IDBKeyRange.bound(n,n)).next(a=>L.forEach(a,l=>i.put(VA(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return L.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?L.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),L.forEach(a,l=>this.Cn(e,s,l).next(u=>{const d=this.Fn(i,l);return u.isEqual(d)?L.resolve():this.Mn(e,i,l,u,d)}))))})}xn(e,n,r,s){return Zl(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.wn(r,n.key),documentKey:n.key.path.toArray()})}On(e,n,r,s){return Zl(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.wn(r,n.key),n.key.path.toArray()])}Cn(e,n,r){const s=Zl(e);let i=new We(Ui);return s.Z({index:LL,range:IDBKeyRange.only([r.indexId,this.uid,this.wn(r,n)])},(o,a)=>{i=i.add(new ka(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>i)}Fn(e,n){let r=new We(Ui);const s=this.yn(n,e);if(s==null)return r;const i=eE(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Uf(o))for(const a of o.arrayValue.values||[])r=r.add(new ka(n.indexId,e.key,this.fn(a),s))}else r=r.add(new ka(n.indexId,e.key,km,s));return r}Mn(e,n,r,s,i){G(WA,"Updating index entries for document '%s'",n.key);const o=[];return function(l,u,d,h,p){const m=l.getIterator(),y=u.getIterator();let _=Xl(m),b=Xl(y);for(;_||b;){let x=!1,E=!1;if(_&&b){const w=d(_,b);w<0?E=!0:w>0&&(x=!0)}else _!=null?E=!0:x=!0;x?(h(b),b=Xl(y)):E?(p(_),_=Xl(m)):(_=Xl(m),b=Xl(y))}}(s,i,Ui,a=>{o.push(this.xn(e,n,r,a))},a=>{o.push(this.On(e,n,r,a))}),L.waitFor(o)}vn(e){let n=1;return ec(e).Z({index:ML,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ui(o,a)).filter((o,a,l)=>!a||Ui(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Ui(o,e),l=Ui(o,n);if(a===0)s[0]=e.nn();else if(a>0&&l<0)s.push(o),s.push(o.nn());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Nn(s[o],s[o+1]))return[];const a=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,km,[]],l=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,km,[]];i.push(IDBKeyRange.bound(a,l))}return i}Nn(e,n){return Ui(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(KA)}getMinOffset(e,n){return L.mapArray(this.dn(n),r=>this.An(e,r).next(s=>s||ie())).next(KA)}}function HA(t){return Ut(t,Mf)}function Zl(t){return Ut(t,Jy)}function $d(t){return Ut(t,$S)}function ec(t){return Ut(t,Xy)}function KA(t){ce(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;FS(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new hr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},U4=41943040;class fn{static withCacheSize(e){return new fn(e,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(t,e,n){const r=t.store(Hr),s=t.store(Tu),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Z({range:o},(d,h,p)=>(a++,p.delete()));i.push(l.next(()=>{ce(a===1)}));const u=[];for(const d of n.mutations){const h=OL(e,d.key.path,n.batchId);i.push(s.delete(h)),u.push(d.key)}return L.waitFor(i).next(()=>u)}function ov(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ie();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(U4,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);class A_{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Bn={}}static It(e,n,r,s){ce(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new A_(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $i(e).Z({index:Fa,range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=bc(e),o=$i(e);return o.add({}).next(a=>{ce(typeof a=="number");const l=new XS(a,n,r,s),u=function(m,y,_){const b=_.baseMutations.map(E=>rv(m.Tt,E)),x=_.mutations.map(E=>rv(m.Tt,E));return{userId:y,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:b,mutations:x}}(this.serializer,this.userId,l),d=[];let h=new We((p,m)=>ve(p.canonicalString(),m.canonicalString()));for(const p of s){const m=OL(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(u)),d.push(i.put(m,O7))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Bn[a]=l.keys()}),L.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return $i(e).get(n).next(r=>r?(ce(r.userId===this.userId),Aa(this.serializer,r)):null)}Ln(e,n){return this.Bn[n]?L.resolve(this.Bn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Bn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return $i(e).Z({index:Fa,range:s},(o,a,l)=>{a.userId===this.userId&&(ce(a.batchId>=r),i=Aa(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ka;return $i(e).Z({index:Fa,range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Ka],[this.userId,Number.POSITIVE_INFINITY]);return $i(e).G(Fa,n).next(r=>r.map(s=>Aa(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Bg(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return bc(e).Z({range:s},(o,a,l)=>{const[u,d,h]=o,p=Es(d);if(u===this.userId&&n.path.isEqual(p))return $i(e).get(h).next(m=>{if(!m)throw ie();ce(m.userId===this.userId),i.push(Aa(this.serializer,m))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new We(ve);const s=[];return n.forEach(i=>{const o=Bg(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=bc(e).Z({range:a},(u,d,h)=>{const[p,m,y]=u,_=Es(m);p===this.userId&&i.path.isEqual(_)?r=r.add(y):h.done()});s.push(l)}),L.waitFor(s).next(()=>this.kn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Bg(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new We(ve);return bc(e).Z({range:o},(l,u,d)=>{const[h,p,m]=l,y=Es(p);h===this.userId&&r.isPrefixOf(y)?y.length===s&&(a=a.add(m)):d.done()}).next(()=>this.kn(e,a))}kn(e,n){const r=[],s=[];return n.forEach(i=>{s.push($i(e).get(i).next(o=>{if(o===null)throw ie();ce(o.userId===this.userId),r.push(Aa(this.serializer,o))}))}),L.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return $4(e.ue,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.qn(n.batchId)}),L.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}qn(e){delete this.Bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return L.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return bc(e).Z({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=Es(i[1]);s.push(l)}else a.done()}).next(()=>{ce(s.length===0)})})}containsKey(e,n){return B4(e,this.userId,n)}Qn(e){return z4(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Ka,lastStreamToken:""})}}function B4(t,e,n){const r=Bg(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return bc(t).Z({range:i,Y:!0},(a,l,u)=>{const[d,h,p]=a;d===e&&h===s&&(o=!0),u.done()}).next(()=>o)}function $i(t){return Ut(t,Hr)}function bc(t){return Ut(t,Tu)}function z4(t){return Ut(t,Df)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new pl(0)}static Kn(){return new pl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tQ{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Wn(e).next(n=>{const r=new pl(n.highestTargetId);return n.highestTargetId=r.next(),this.Gn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Wn(e).next(n=>ue.fromTimestamp(new mt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Wn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Wn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Gn(e,s)))}addTargetData(e,n){return this.zn(e,n).next(()=>this.Wn(e).next(r=>(r.targetCount+=1,this.jn(n,r),this.Gn(e,r))))}updateTargetData(e,n){return this.zn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>tc(e).delete(n.targetId)).next(()=>this.Wn(e)).next(r=>(ce(r.targetCount>0),r.targetCount-=1,this.Gn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return tc(e).Z((o,a)=>{const l=Ph(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>L.waitFor(i)).next(()=>s)}forEachTarget(e,n){return tc(e).Z((r,s)=>{const i=Ph(s);n(i)})}Wn(e){return YA(e).get(Yy).next(n=>(ce(n!==null),n))}Gn(e,n){return YA(e).put(Yy,n)}zn(e,n){return tc(e).put(M4(this.serializer,n))}jn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Wn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=cl(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return tc(e).Z({range:s,index:jL},(o,a,l)=>{const u=Ph(a);wp(n,u.target)&&(i=u,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=oo(e);return n.forEach(o=>{const a=xn(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),L.waitFor(s)}removeMatchingKeys(e,n,r){const s=oo(e);return L.forEach(n,i=>{const o=xn(i.path);return L.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=oo(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=oo(e);let i=Te();return s.Z({range:r,Y:!0},(o,a,l)=>{const u=Es(o[1]),d=new J(u);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=xn(n.path),s=IDBKeyRange.bound([r],[CL(r)],!1,!0);let i=0;return oo(e).Z({index:US,Y:!0,range:s},([o,a],l,u)=>{o!==0&&(i++,u.done())}).next(()=>i>0)}lt(e,n){return tc(e).get(n).next(r=>r?Ph(r):null)}}function tc(t){return Ut(t,Su)}function YA(t){return Ut(t,Qa)}function oo(t){return Ut(t,Cu)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="LruGarbageCollector",nQ=1048576;function JA([t,e],[n,r]){const s=ve(t,n);return s===0?ve(e,r):s}class rQ{constructor(e){this.Hn=e,this.buffer=new We(JA),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();JA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class G4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){G(XA,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ta(n)?G(XA,"Ignoring IndexedDB error during garbage collection: ",n):await ea(n)}await this.er(3e5)})}}class sQ{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Bn.ae);const r=new rQ(n);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.tr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(QA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QA):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let r,s,i,o,a,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),vc()<=Ce.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}function q4(t,e){return new sQ(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iQ{constructor(e,n){this.db=e,this.garbageCollector=q4(this,n)}nr(e){const n=this.sr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}sr(e){let n=0;return this.rr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}rr(e,n){return this._r(e,(r,s)=>n(s))}addReference(e,n,r){return Om(e,r)}removeReference(e,n,r){return Om(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Om(e,n)}ar(e,n){return function(s,i){let o=!1;return z4(s).X(a=>B4(s,a,i).next(l=>(l&&(o=!0),L.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this._r(e,(o,a)=>{if(a<=n){const l=this.ar(e,o).next(u=>{if(!u)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ue.min()),oo(e).delete(function(h){return[0,xn(h.path)]}(o))))});s.push(l)}}).next(()=>L.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Om(e,n)}_r(e,n){const r=oo(e);let s,i=Bn.ae;return r.Z({index:US},([o,a],{path:l,sequenceNumber:u})=>{o===0?(i!==Bn.ae&&n(new J(Es(s)),i),i=u,s=l):i=Bn.ae}).next(()=>{i!==Bn.ae&&n(new J(Es(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Om(t,e){return oo(t).put(function(r,s){return{targetId:0,path:xn(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(){this.changes=new Ii(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,St.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oQ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ga(e).put(r)}removeEntry(e,n,r){return ga(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],sv(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.ur(e,r)))}getEntry(e,n){let r=St.newInvalidDocument(n);return ga(e).Z({index:zg,range:IDBKeyRange.only(Bd(n))},(s,i)=>{r=this.cr(n,i)}).next(()=>r)}lr(e,n){let r={size:0,document:St.newInvalidDocument(n)};return ga(e).Z({index:zg,range:IDBKeyRange.only(Bd(n))},(s,i)=>{r={document:this.cr(n,i),size:ov(i)}}).next(()=>r)}getEntries(e,n){let r=sr();return this.hr(e,n,(s,i)=>{const o=this.cr(s,i);r=r.insert(s,o)}).next(()=>r)}Pr(e,n){let r=sr(),s=new vt(J.comparator);return this.hr(e,n,(i,o)=>{const a=this.cr(i,o);r=r.insert(i,a),s=s.insert(i,ov(o))}).next(()=>({documents:r,Tr:s}))}hr(e,n,r){if(n.isEmpty())return L.resolve();let s=new We(tN);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Bd(s.first()),Bd(s.last())),o=s.getIterator();let a=o.getNext();return ga(e).Z({index:zg,range:i},(l,u,d)=>{const h=J.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&tN(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?d.W(Bd(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),sv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ga(e).G(IDBKeyRange.bound(a,l,!0)).next(u=>{i==null||i.incrementDocumentReadCount(u.length);let d=sr();for(const h of u){const p=this.cr(J.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(Ep(n,p)||s.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=sr();const o=eN(n,r),a=eN(n,hr.max());return ga(e).Z({index:DL,range:IDBKeyRange.bound(o,a,!0)},(l,u,d)=>{const h=this.cr(J.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(h.key,h),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new aQ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return ZA(e).get(tE).next(n=>(ce(!!n),n))}ur(e,n){return ZA(e).put(tE,n)}cr(e,n){if(n){const r=qK(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ue.min())))return r}return St.newInvalidDocument(e)}}function H4(t){return new oQ(t)}class aQ extends W4{constructor(e,n){super(),this.Ir=e,this.trackRemovals=n,this.Er=new Ii(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new We((i,o)=>ve(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Er.get(i);if(n.push(this.Ir.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=LA(this.Ir.serializer,o);s=s.add(i.path.popLast());const u=ov(l);r+=u-a.size,n.push(this.Ir.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=LA(this.Ir.serializer,o.convertToNoDocument(ue.min()));n.push(this.Ir.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Ir.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Ir.updateMetadata(e,r)),L.waitFor(n)}getFromCache(e,n){return this.Ir.lr(e,n).next(r=>(this.Er.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Ir.Pr(e,n).next(({documents:r,Tr:s})=>(s.forEach((i,o)=>{this.Er.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function ZA(t){return Ut(t,jf)}function ga(t){return Ut(t,Qy)}function Bd(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function eN(t,e){const n=e.documentKey.path.toArray();return[t,sv(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function tN(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=ve(n[i],r[i]),s)return s;return s=ve(n.length,r.length),s||(s=ve(n[n.length-2],r[r.length-2]),s||ve(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lQ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Qh(r.mutation,s,zn.empty(),mt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Te()){const s=Ts();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ch();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ts();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Te()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=sr();const o=Kh(),a=function(){return Kh()}();return n.forEach((l,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof Pi)?i=i.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Qh(d.mutation,u,d.mutation.getFieldMask(),mt.now())):o.set(u.key,zn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var h;return a.set(u,new lQ(d,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Kh();let s=new vt((o,a)=>o-a),i=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||zn.empty();d=a.applyToLocalView(u,d),r.set(l,d);const h=(s.get(a.batchId)||Te()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,h=h4();d.forEach(p=>{if(!i.has(p)){const m=v4(n.get(p),r.get(p));m!==null&&h.set(p,m),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):o4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(Ts());let a=Eu,l=i;return o.next(u=>L.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Te())).next(d=>({batchId:a,changes:d4(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=Ch();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ch();return this.indexManager.getCollectionParents(e,i).next(a=>L.forEach(a,l=>{const u=function(h,p){return new td(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,St.newInvalidDocument(d)))});let a=Ch();return o.forEach((l,u)=>{const d=i.get(l);d!==void 0&&Qh(d.mutation,u,zn.empty(),mt.now()),Ep(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cQ{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return L.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Nn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(s){return{name:s.name,query:L4(s.bundledQuery),readTime:Nn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uQ{constructor(){this.overlays=new vt(J.comparator),this.Rr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ts();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.Et(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Rr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=Ts(),i=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new vt((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=i.get(u.largestBatchId);d===null&&(d=Ts(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=Ts(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=s)););return L.resolve(a)}Et(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ZS(n,r));let i=this.Rr.get(n);i===void 0&&(i=Te(),this.Rr.set(n,i)),this.Rr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dQ{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.Vr=new We(zt.mr),this.gr=new We(zt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const r=new zt(e,n);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.wr(new zt(e,n))}Sr(e,n){e.forEach(r=>this.removeReference(r,n))}br(e){const n=new J(new Ue([])),r=new zt(n,e),s=new zt(n,e+1),i=[];return this.gr.forEachInRange([r,s],o=>{this.wr(o),i.push(o.key)}),i}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new J(new Ue([])),r=new zt(n,e),s=new zt(n,e+1);let i=Te();return this.gr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new zt(e,0),r=this.Vr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class zt{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return J.comparator(e.key,n.key)||ve(e.Cr,n.Cr)}static pr(e,n){return ve(e.Cr,n.Cr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hQ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new We(zt.mr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new XS(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Mr=this.Mr.add(new zt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Nr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Ka:this.Fr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new zt(n,0),s=new zt(n,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([r,s],o=>{const a=this.Or(o.Cr);i.push(a)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new We(ve);return n.forEach(s=>{const i=new zt(s,0),o=new zt(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([i,o],a=>{r=r.add(a.Cr)})}),L.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new zt(new J(i),0);let a=new We(ve);return this.Mr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.Cr)),!0)},o),L.resolve(this.Br(a))}Br(e){const n=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ce(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return L.forEach(n.mutations,s=>{const i=new zt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,n){const r=new zt(n,0),s=this.Mr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fQ{constructor(e){this.kr=e,this.docs=function(){return new vt(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.kr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():St.newInvalidDocument(n))}getEntries(e,n){let r=sr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():St.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=sr();const o=n.path,a=new J(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||FS(PL(d),r)<=0||(s.has(d.key)||Ep(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie()}qr(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new pQ(this)}getSize(e){return L.resolve(this.size)}}class pQ extends W4{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mQ{constructor(e){this.persistence=e,this.Qr=new Ii(n=>cl(n),wp),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.$r=0,this.Ur=new s1,this.targetCount=0,this.Kr=pl.Un()}forEachTarget(e,n){return this.Qr.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.$r&&(this.$r=n),L.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new pl(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.zn(n),L.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Qr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.Qr.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.Ur.yr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.Ur.Sr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ur.vr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new Bn(0),this.zr=!1,this.zr=!0,this.jr=new dQ,this.referenceDelegate=e(this),this.Hr=new mQ(this),this.indexManager=new ZK,this.remoteDocumentCache=function(s){return new fQ(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new j4(n),this.Yr=new cQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uQ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Wr[e.toKey()];return r||(r=new hQ(n,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new gQ(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(i=>this.referenceDelegate.Xr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}ei(e,n){return L.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,n)))}}class gQ extends AL{constructor(e){super(),this.currentSequenceNumber=e}}class N_{constructor(e){this.persistence=e,this.ti=new s1,this.ni=null}static ri(e){return new N_(e)}get ii(){if(this.ni)return this.ni;throw ie()}addReference(e,n,r){return this.ti.addReference(r,n),this.ii.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.ti.removeReference(r,n),this.ii.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),L.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.ii.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.ii,r=>{const s=J.fromPath(r);return this.si(e,s).next(i=>{i||n.removeEntry(s,ue.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(r=>{r?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return L.or([()=>L.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class av{constructor(e,n){this.persistence=e,this.oi=new Ii(r=>xn(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=q4(this,n)}static ri(e,n){return new av(e,n)}Zr(){}Xr(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}sr(e){let n=0;return this.rr(e,r=>{n++}).next(()=>n)}rr(e,n){return L.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.qr(e,o=>this.ar(e,o,n).next(a=>{a||(r++,i.removeEntry(o,ue.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),L.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qg(e.data.value)),n}ar(e,n,r){return L.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.oi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yQ{constructor(e){this.serializer=e}B(e,n,r,s){const i=new v_("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore(xp)}(e),function(l){l.createObjectStore(Df,{keyPath:k7}),l.createObjectStore(Hr,{keyPath:fA,autoIncrement:!0}).createIndex(Fa,pA,{unique:!0}),l.createObjectStore(Tu)}(e),nN(e),function(l){l.createObjectStore(Ia)}(e));let o=L.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore(Cu),l.deleteObjectStore(Su),l.deleteObjectStore(Qa)}(e),nN(e)),o=o.next(()=>function(l){const u=l.store(Qa),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ue.min().toTimestamp(),targetCount:0};return u.put(Yy,d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store(Hr).G().next(h=>{l.deleteObjectStore(Hr),l.createObjectStore(Hr,{keyPath:fA,autoIncrement:!0}).createIndex(Fa,pA,{unique:!0});const p=u.store(Hr),m=h.map(y=>p.put(y));return L.waitFor(m)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore(Iu,{keyPath:$7})})(e)})),r<5&&s>=5&&(o=o.next(()=>this._i(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore(jf)}(e),this.ai(i)))),r<7&&s>=7&&(o=o.next(()=>this.ui(i))),r<8&&s>=8&&(o=o.next(()=>this.ci(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.li(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore(x_,{keyPath:B7})})(e),function(l){l.createObjectStore(w_,{keyPath:z7})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore(b_,{keyPath:Y7});u.createIndex(rE,X7,{unique:!1}),u.createIndex(FL,J7,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore(Qy,{keyPath:D7});u.createIndex(zg,j7),u.createIndex(DL,M7)}(e)).next(()=>this.hi(e,i)).next(()=>e.deleteObjectStore(Ia))),r<14&&s>=14&&(o=o.next(()=>this.Pi(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore($S,{keyPath:G7,autoIncrement:!0}).createIndex(nE,q7,{unique:!1}),l.createObjectStore(Xy,{keyPath:W7}).createIndex(ML,H7,{unique:!1}),l.createObjectStore(Jy,{keyPath:K7}).createIndex(LL,Q7,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore(Xy).clear()}).next(()=>{n.objectStore(Jy).clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(l){l.createObjectStore(BS,{keyPath:Z7})})(e)})),o}ai(e){let n=0;return e.store(Ia).Z((r,s)=>{n+=ov(s)}).next(()=>{const r={byteSize:n};return e.store(jf).put(tE,r)})}_i(e){const n=e.store(Df),r=e.store(Hr);return n.G().next(s=>L.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,Ka],[i.userId,i.lastAcknowledgedBatchId]);return r.G(Fa,o).next(a=>L.forEach(a,l=>{ce(l.userId===i.userId);const u=Aa(this.serializer,l);return $4(e,i.userId,u).next(()=>{})}))}))}ui(e){const n=e.store(Cu),r=e.store(Ia);return e.store(Qa).get(Yy).next(s=>{const i=[];return r.Z((o,a)=>{const l=new Ue(o),u=function(h){return[0,xn(h)]}(l);i.push(n.get(u).next(d=>d?L.resolve():(h=>n.put({targetId:0,path:xn(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>L.waitFor(i))})}ci(e,n){e.createObjectStore(Mf,{keyPath:U7});const r=n.store(Mf),s=new r1,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:xn(l)})}};return n.store(Ia).Z({Y:!0},(o,a)=>{const l=new Ue(o);return i(l.popLast())}).next(()=>n.store(Tu).Z({Y:!0},([o,a,l],u)=>{const d=Es(a);return i(d.popLast())}))}li(e){const n=e.store(Su);return n.Z((r,s)=>{const i=Ph(s),o=M4(this.serializer,i);return n.put(o)})}hi(e,n){const r=n.store(Ia),s=[];return r.Z((i,o)=>{const a=n.store(Qy),l=function(h){return h.document?new J(Ue.fromString(h.document.name).popFirst(5)):h.noDocument?J.fromSegments(h.noDocument.path):h.unknownDocument?J.fromSegments(h.unknownDocument.path):ie()}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(u))}).next(()=>L.waitFor(s))}Pi(e,n){const r=n.store(Hr),s=H4(this.serializer),i=new i1(N_.ri,this.serializer.Tt);return r.G().next(o=>{const a=new Map;return o.forEach(l=>{var u;let d=(u=a.get(l.userId))!==null&&u!==void 0?u:Te();Aa(this.serializer,l).keys().forEach(h=>d=d.add(h)),a.set(l.userId,d)}),L.forEach(a,(l,u)=>{const d=new qt(u),h=R_.It(this.serializer,d),p=i.getIndexManager(d),m=A_.It(d,this.serializer,p,i.referenceDelegate);return new K4(s,m,h,p).recalculateAndSaveOverlaysForDocumentKeys(new sE(n,Bn.ae),l).next()})})}}function nN(t){t.createObjectStore(Cu,{keyPath:F7}).createIndex(US,V7,{unique:!0}),t.createObjectStore(Su,{keyPath:"targetId"}).createIndex(jL,L7,{unique:!0}),t.createObjectStore(Qa)}const Bi="IndexedDbPersistence",Ox=18e5,Dx=5e3,jx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",vQ="main";class o1{constructor(e,n,r,s,i,o,a,l,u,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Ti=i,this.window=o,this.document=a,this.Ii=u,this.Ei=d,this.di=h,this.Gr=null,this.zr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ai=null,this.inForeground=!1,this.Ri=null,this.Vi=null,this.mi=Number.NEGATIVE_INFINITY,this.fi=p=>Promise.resolve(),!o1.D())throw new K(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new iQ(this,s),this.gi=n+vQ,this.serializer=new j4(l),this.pi=new Ro(this.gi,this.di,new yQ(this.serializer)),this.jr=new HK,this.Hr=new tQ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=H4(this.serializer),this.Yr=new WK,this.window&&this.window.localStorage?this.yi=this.window.localStorage:(this.yi=null,d===!1&&It(Bi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new K(B.FAILED_PRECONDITION,jx);return this.Si(),this.bi(),this.Di(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Hr.getHighestSequenceNumber(e))}).then(e=>{this.Gr=new Bn(e,this.Ii)}).then(()=>{this.zr=!0}).catch(e=>(this.pi&&this.pi.close(),Promise.reject(e)))}Ci(e){return this.fi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.pi.k(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ti.enqueueAndForget(async()=>{this.started&&await this.wi()}))}wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Dm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Fi(e).next(n=>{n||(this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Mi(e)).next(n=>this.isPrimary&&!n?this.xi(e).next(()=>!1):!!n&&this.Oi(e).next(()=>!0))).catch(e=>{if(ta(e))return G(Bi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return G(Bi,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ti.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Fi(e){return zd(e).get(Yl).next(n=>L.resolve(this.Ni(n)))}Bi(e){return Dm(e).delete(this.clientId)}async Li(){if(this.isPrimary&&!this.ki(this.mi,Ox)){this.mi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Ut(n,Iu);return r.G().next(s=>{const i=this.qi(s,Ox),o=s.filter(a=>i.indexOf(a)===-1);return L.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.yi)for(const n of e)this.yi.removeItem(this.Qi(n.clientId))}}Di(){this.Vi=this.Ti.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.wi().then(()=>this.Li()).then(()=>this.Di()))}Ni(e){return!!e&&e.ownerId===this.clientId}Mi(e){return this.Ei?L.resolve(!0):zd(e).get(Yl).next(n=>{if(n!==null&&this.ki(n.leaseTimestampMs,Dx)&&!this.$i(n.ownerId)){if(this.Ni(n)&&this.networkEnabled)return!0;if(!this.Ni(n)){if(!n.allowTabSynchronization)throw new K(B.FAILED_PRECONDITION,jx);return!1}}return!(!this.networkEnabled||!this.inForeground)||Dm(e).G().next(r=>this.qi(r,Dx).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&G(Bi,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.zr=!1,this.Ui(),this.Vi&&(this.Vi.cancel(),this.Vi=null),this.Ki(),this.Wi(),await this.pi.runTransaction("shutdown","readwrite",[xp,Iu],e=>{const n=new sE(e,Bn.ae);return this.xi(n).next(()=>this.Bi(n))}),this.pi.close(),this.Gi()}qi(e,n){return e.filter(r=>this.ki(r.updateTimeMs,n)&&!this.$i(r.clientId))}zi(){return this.runTransaction("getActiveClients","readonly",e=>Dm(e).G().next(n=>this.qi(n,Ox).map(r=>r.clientId)))}get started(){return this.zr}getGlobalsCache(){return this.jr}getMutationQueue(e,n){return A_.It(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new eQ(e,this.serializer.Tt.databaseId)}getDocumentOverlayCache(e){return R_.It(this.serializer,e)}getBundleCache(){return this.Yr}runTransaction(e,n,r){G(Bi,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===17?nK:l===16?tK:l===15?zS:l===14?$L:l===13?UL:l===12?eK:l===11?VL:void ie()}(this.di);let o;return this.pi.runTransaction(e,s,i,a=>(o=new sE(a,this.Gr?this.Gr.next():Bn.ae),n==="readwrite-primary"?this.Fi(o).next(l=>!!l||this.Mi(o)).next(l=>{if(!l)throw It(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ti.enqueueRetryable(()=>this.fi(!1)),new K(B.FAILED_PRECONDITION,RL);return r(o)}).next(l=>this.Oi(o).next(()=>l)):this.ji(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ji(e){return zd(e).get(Yl).next(n=>{if(n!==null&&this.ki(n.leaseTimestampMs,Dx)&&!this.$i(n.ownerId)&&!this.Ni(n)&&!(this.Ei||this.allowTabSynchronization&&n.allowTabSynchronization))throw new K(B.FAILED_PRECONDITION,jx)})}Oi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zd(e).put(Yl,n)}static D(){return Ro.D()}xi(e){const n=zd(e);return n.get(Yl).next(r=>this.Ni(r)?(G(Bi,"Releasing primary lease."),n.delete(Yl)):L.resolve())}ki(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(It(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Si(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ri=()=>{this.Ti.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.wi()))},this.document.addEventListener("visibilitychange",this.Ri),this.inForeground=this.document.visibilityState==="visible")}Ki(){this.Ri&&(this.document.removeEventListener("visibilitychange",this.Ri),this.Ri=null)}bi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ai=()=>{this.Ui();const n=/(?:Version|Mobile)\/1[456]/;IM()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Ti.enterRestrictedMode(!0),this.Ti.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ai))}Wi(){this.Ai&&(this.window.removeEventListener("pagehide",this.Ai),this.Ai=null)}$i(e){var n;try{const r=((n=this.yi)===null||n===void 0?void 0:n.getItem(this.Qi(e)))!==null;return G(Bi,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return It(Bi,"Failed to get zombied client id.",r),!1}}Ui(){if(this.yi)try{this.yi.setItem(this.Qi(this.clientId),String(Date.now()))}catch(e){It("Failed to set zombie client id.",e)}}Gi(){if(this.yi)try{this.yi.removeItem(this.Qi(this.clientId))}catch{}}Qi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function zd(t){return Ut(t,xp)}function Dm(t){return Ut(t,Iu)}function Q4(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Hi=r,this.Ji=s}static Yi(e,n){let r=Te(),s=Te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new a1(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Q{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return IM()?8:NL(Vt())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.rs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ss(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new _Q;return this._s(e,n,o).next(a=>{if(i.result=a,this.Xi)return this.us(e,n,o,a.size)})}).next(()=>i.result)}us(e,n,r,s){return r.documentReadCount<this.es?(vc()<=Ce.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",_c(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),L.resolve()):(vc()<=Ce.DEBUG&&G("QueryEngine","Query:",_c(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(vc()<=Ce.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",_c(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,or(n))):L.resolve())}rs(e,n){if(IA(n))return L.resolve(null);let r=or(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=hE(n,null,"F"),r=or(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Te(...i);return this.ns.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.cs(n,a);return this.ls(n,u,o,l.readTime)?this.rs(e,hE(n,null,"F")):this.hs(e,u,n,l)}))})))}ss(e,n,r,s){return IA(n)||s.isEqual(ue.min())?L.resolve(null):this.ns.getDocuments(e,r).next(i=>{const o=this.cs(n,i);return this.ls(n,o,r,s)?L.resolve(null):(vc()<=Ce.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),_c(n)),this.hs(e,o,n,IL(s,Eu)).next(a=>a))})}cs(e,n){let r=new We(c4(e));return n.forEach((s,i)=>{Ep(e,i)&&(r=r.add(i))}),r}ls(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}_s(e,n,r){return vc()<=Ce.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",_c(n)),this.ns.getDocumentsMatchingQuery(e,n,hr.min(),r)}hs(e,n,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="LocalStore",xQ=3e8;class wQ{constructor(e,n,r,s){this.persistence=e,this.Ps=n,this.serializer=s,this.Ts=new vt(ve),this.Is=new Ii(i=>cl(i),wp),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new K4(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function X4(t,e,n,r){return new wQ(t,e,n,r)}async function J4(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.As(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Te();for(const u of s){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of i){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Rs:u,removedBatchIds:o,addedBatchIds:a}))})})}function bQ(t,e){const n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.ds.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const h=u.batch,p=h.keys();let m=L.resolve();return p.forEach(y=>{m=m.next(()=>d.getEntry(l,y)).next(_=>{const b=u.docVersions.get(y);ce(b!==null),_.version.compareTo(b)<0&&(h.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),d.addEntry(_)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Te();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Z4(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function EQ(t,e){const n=le(t),r=e.snapshotVersion;let s=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.ds.newChangeBuffer({trackRemovals:!0});s=n.Ts;const a=[];e.targetChanges.forEach((d,h)=>{const p=s.get(h);if(!p)return;a.push(n.Hr.removeMatchingKeys(i,d.removedDocuments,h).next(()=>n.Hr.addMatchingKeys(i,d.addedDocuments,h)));let m=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Rt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),s=s.insert(h,m),function(_,b,x){return _.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=xQ?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(p,m,d)&&a.push(n.Hr.updateTargetData(i,m))});let l=sr(),u=Te();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(TQ(i,o,e.documentUpdates).next(d=>{l=d.Vs,u=d.fs})),!r.isEqual(ue.min())){const d=n.Hr.getLastRemoteSnapshotVersion(i).next(h=>n.Hr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return L.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ts=s,i))}function TQ(t,e,n){let r=Te(),s=Te();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=sr();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):G(l1,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Vs:o,fs:s}})}function SQ(t,e){const n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ka),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lv(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Hr.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Hr.allocateTargetId(r).next(o=>(s=new si(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(r.targetId,r),n.Is.set(e,r.targetId)),r})}async function Du(t,e,n){const r=le(t),s=r.Ts.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ta(o))throw o;G(l1,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function xE(t,e,n){const r=le(t);let s=ue.min(),i=Te();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const h=le(l),p=h.Is.get(d);return p!==void 0?L.resolve(h.Ts.get(p)):h.Hr.getTargetData(u,d)}(r,o,or(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Ps.getDocumentsMatchingQuery(o,e,n?s:ue.min(),n?i:Te())).next(a=>(nF(r,l4(e),a),{documents:a,gs:i})))}function eF(t,e){const n=le(t),r=le(n.Hr),s=n.Ts.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.lt(i,e).next(o=>o?o.target:null))}function tF(t,e){const n=le(t),r=n.Es.get(e)||ue.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.ds.getAllFromCollectionGroup(s,e,IL(r,Eu),Number.MAX_SAFE_INTEGER)).then(s=>(nF(n,e,s),s))}function nF(t,e,n){let r=t.Es.get(e)||ue.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Es.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF="firestore_clients";function rN(t,e){return`${rF}_${t}_${e}`}const sF="firestore_mutations";function sN(t,e,n){let r=`${sF}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const iF="firestore_targets";function Mx(t,e){return`${iF}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="SharedClientState";class cv{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Ss(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new K(s.error.code,s.error.message))),o?new cv(e,n,s.state,i):(It(_s,`Failed to parse mutation state for ID '${n}': ${r}`),null)}bs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yh{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ss(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new K(r.error.code,r.error.message))),i?new Yh(e,r.state,s):(It(_s,`Failed to parse target state for ID '${e}': ${n}`),null)}bs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uv{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ss(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=KS();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=kL(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new uv(e,i):(It(_s,`Failed to parse client data for instance '${e}': ${n}`),null)}}class c1{constructor(e,n){this.clientId=e,this.onlineState=n}static Ss(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new c1(n.clientId,n.onlineState):(It(_s,`Failed to parse online state: ${e}`),null)}}class wE{constructor(){this.activeTargetIds=KS()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lx{constructor(e,n,r,s,i){this.window=e,this.Ti=n,this.persistenceKey=r,this.Cs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Fs=this.Ms.bind(this),this.xs=new vt(ve),this.started=!1,this.Os=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ns=rN(this.persistenceKey,this.Cs),this.Bs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.xs=this.xs.insert(this.Cs,new wE),this.Ls=new RegExp(`^${rF}_${o}_([^_]*)$`),this.ks=new RegExp(`^${sF}_${o}_(\\d+)(?:_(.*))?$`),this.qs=new RegExp(`^${iF}_${o}_(\\d+)$`),this.Qs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.$s=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.zi();for(const r of e){if(r===this.Cs)continue;const s=this.getItem(rN(this.persistenceKey,r));if(s){const i=uv.Ss(r,s);i&&(this.xs=this.xs.insert(i.clientId,i))}}this.Us();const n=this.storage.getItem(this.Qs);if(n){const r=this.Ks(n);r&&this.Ws(r)}for(const r of this.Os)this.Ms(r);this.Os=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Bs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Gs(this.xs)}isActiveQueryTarget(e){let n=!1;return this.xs.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.zs(e,"pending")}updateMutationState(e,n,r){this.zs(e,n,r),this.js(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Mx(this.persistenceKey,e));if(s){const i=Yh.Ss(e,s);i&&(r=i.state)}}return n&&this.Hs.Ds(e),this.Us(),r}removeLocalQueryTarget(e){this.Hs.vs(e),this.Us()}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Mx(this.persistenceKey,e))}updateQueryState(e,n,r){this.Js(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.js(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Ys(e)}notifyBundleLoaded(e){this.Zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Fs),this.removeItem(this.Ns),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return G(_s,"READ",e,n),n}setItem(e,n){G(_s,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){G(_s,"REMOVE",e),this.storage.removeItem(e)}Ms(e){const n=e;if(n.storageArea===this.storage){if(G(_s,"EVENT",n.key,n.newValue),n.key===this.Ns)return void It("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ti.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Ls.test(n.key)){if(n.newValue==null){const r=this.Xs(n.key);return this.eo(r,null)}{const r=this.no(n.key,n.newValue);if(r)return this.eo(r.clientId,r)}}else if(this.ks.test(n.key)){if(n.newValue!==null){const r=this.ro(n.key,n.newValue);if(r)return this.io(r)}}else if(this.qs.test(n.key)){if(n.newValue!==null){const r=this.so(n.key,n.newValue);if(r)return this.oo(r)}}else if(n.key===this.Qs){if(n.newValue!==null){const r=this.Ks(n.newValue);if(r)return this.Ws(r)}}else if(n.key===this.Bs){const r=function(i){let o=Bn.ae;if(i!=null)try{const a=JSON.parse(i);ce(typeof a=="number"),o=a}catch(a){It(_s,"Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Bn.ae&&this.sequenceNumberHandler(r)}else if(n.key===this.$s){const r=this._o(n.newValue);await Promise.all(r.map(s=>this.syncEngine.ao(s)))}}}else this.Os.push(n)})}}get Hs(){return this.xs.get(this.Cs)}Us(){this.setItem(this.Ns,this.Hs.bs())}zs(e,n,r){const s=new cv(this.currentUser,e,n,r),i=sN(this.persistenceKey,this.currentUser,e);this.setItem(i,s.bs())}js(e){const n=sN(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Ys(e){const n={clientId:this.Cs,onlineState:e};this.storage.setItem(this.Qs,JSON.stringify(n))}Js(e,n,r){const s=Mx(this.persistenceKey,e),i=new Yh(e,n,r);this.setItem(s,i.bs())}Zs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.$s,n)}Xs(e){const n=this.Ls.exec(e);return n?n[1]:null}no(e,n){const r=this.Xs(e);return uv.Ss(r,n)}ro(e,n){const r=this.ks.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return cv.Ss(new qt(i),s,n)}so(e,n){const r=this.qs.exec(e),s=Number(r[1]);return Yh.Ss(s,n)}Ks(e){return c1.Ss(e)}_o(e){return JSON.parse(e)}async io(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.uo(e.batchId,e.state,e.error);G(_s,`Ignoring mutation for non-active user ${e.user.uid}`)}oo(e){return this.syncEngine.co(e.targetId,e.state,e.error)}eo(e,n){const r=n?this.xs.insert(e,n):this.xs.remove(e),s=this.Gs(this.xs),i=this.Gs(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.lo(o,a).then(()=>{this.xs=r})}Ws(e){this.xs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Gs(e){let n=KS();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class oF{constructor(){this.ho=new wE,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,r){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new wE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CQ{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="ConnectivityMonitor";class oN{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){G(iN,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){G(iN,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jm=null;function bE(){return jm===null?jm=function(){return 268435456+Math.round(2147483648*Math.random())}():jm++,"0x"+jm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="RestConnection",IQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class PQ{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===Zy?`project_id=${r}`:`project_id=${r}&database_id=${s}`}So(e,n,r,s,i){const o=bE(),a=this.bo(e,n.toUriEncodedString());G(Fx,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,s,i),this.vo(e,a,l,r).then(u=>(G(Fx,`Received RPC '${e}' ${o}: `,u),u),u=>{throw al(Fx,`RPC '${e}' ${o} failed with error: `,u,"url: ",a,"request:",r),u})}Co(e,n,r,s,i,o){return this.So(e,n,r,s,i)}Do(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ed}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}bo(e,n){const r=IQ[e];return`${this.po}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RQ{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn="WebChannelConnection";class AQ extends PQ{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,s){const i=bE();return new Promise((o,a)=>{const l=new _L;l.setWithCredentials(!0),l.listenOnce(xL.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ug.NO_ERROR:const d=l.getResponseJson();G(dn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case Ug.TIMEOUT:G(dn,`RPC '${e}' ${i} timed out`),a(new K(B.DEADLINE_EXCEEDED,"Request time out"));break;case Ug.HTTP_ERROR:const h=l.getStatus();if(G(dn,`RPC '${e}' ${i} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const y=function(b){const x=b.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(x)>=0?x:B.UNKNOWN}(m.status);a(new K(y,m.message))}else a(new K(B.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new K(B.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{G(dn,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);G(dn,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",u,r,15)})}Wo(e,n,r){const s=bE(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=EL(),a=bL(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");G(dn,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);let p=!1,m=!1;const y=new RQ({Fo:b=>{m?G(dn,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(p||(G(dn,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),G(dn,`RPC '${e}' stream ${s} sending:`,b),h.send(b))},Mo:()=>h.close()}),_=(b,x,E)=>{b.listen(x,w=>{try{E(w)}catch(I){setTimeout(()=>{throw I},0)}})};return _(h,Sh.EventType.OPEN,()=>{m||(G(dn,`RPC '${e}' stream ${s} transport opened.`),y.Qo())}),_(h,Sh.EventType.CLOSE,()=>{m||(m=!0,G(dn,`RPC '${e}' stream ${s} transport closed`),y.Uo())}),_(h,Sh.EventType.ERROR,b=>{m||(m=!0,al(dn,`RPC '${e}' stream ${s} transport errored:`,b),y.Uo(new K(B.UNAVAILABLE,"The operation could not be completed")))}),_(h,Sh.EventType.MESSAGE,b=>{var x;if(!m){const E=b.data[0];ce(!!E);const w=E,I=(w==null?void 0:w.error)||((x=w[0])===null||x===void 0?void 0:x.error);if(I){G(dn,`RPC '${e}' stream ${s} received error:`,I);const k=I.status;let M=function(P){const R=Nt[P];if(R!==void 0)return w4(R)}(k),C=I.message;M===void 0&&(M=B.INTERNAL,C="Unknown error status: "+k+" with message "+I.message),m=!0,y.Uo(new K(M,C)),h.close()}else G(dn,`RPC '${e}' stream ${s} received:`,E),y.Ko(E)}}),_(a,wL.STAT_EVENT,b=>{b.stat===Xb.PROXY?G(dn,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===Xb.NOPROXY&&G(dn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{y.$o()},0),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aF(){return typeof window<"u"?window:null}function Qg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(t){return new jK(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ti=e,this.timerId=n,this.Go=r,this.zo=s,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="PersistentStream";class cF{constructor(e,n,r,s,i,o,a,l){this.Ti=e,this.n_=r,this.r_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new lF(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(It(n.toString()),It("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===n&&this.V_(r,s)},r=>{e(()=>{const s=new K(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,n){const r=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return G(aN,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(G(aN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class NQ extends cF{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=FK(this.serializer,e),r=function(i){if(!("targetChange"in i))return ue.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?Nn(o.readTime):ue.min()}(e);return this.listener.p_(n,r)}y_(e){const n={};n.database=mE(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=ev(l)?{documents:R4(i,l)}:{query:A4(i,l).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=T4(i,o.resumeToken);const u=fE(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=Ou(i,o.snapshotVersion.toTimestamp());const u=fE(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=UK(this.serializer,e);r&&(n.labels=r),this.I_(n)}w_(e){const n={};n.database=mE(this.serializer),n.removeTarget=e,this.I_(n)}}class kQ extends cF{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return ce(!!e.streamToken),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=VK(e.writeResults,e.commitTime),r=Nn(e.commitTime);return this.listener.v_(r,n)}C_(){const e={};e.database=mE(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>rv(this.serializer,r))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OQ{}class DQ extends OQ{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new K(B.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,pE(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(B.UNKNOWN,i.toString())})}Co(e,n,r,s,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,pE(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(B.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class jQ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(It(n),this.N_=!1):G("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml="RemoteStore";class MQ{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To(o=>{r.enqueueAndForget(async()=>{Nl(this)&&(G(ml,"Restarting streams for network reachability change."),await async function(l){const u=le(l);u.W_.add(4),await Cp(u),u.j_.set("Unknown"),u.W_.delete(4),await O_(u)}(this))})}),this.j_=new jQ(r,s)}}async function O_(t){if(Nl(t))for(const e of t.G_)await e(!0)}async function Cp(t){for(const e of t.G_)await e(!1)}function D_(t,e){const n=le(t);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),h1(n)?d1(n):sd(n).c_()&&u1(n,e))}function ju(t,e){const n=le(t),r=sd(n);n.K_.delete(e),r.c_()&&uF(n,e),n.K_.size===0&&(r.c_()?r.P_():Nl(n)&&n.j_.set("Unknown"))}function u1(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sd(t).y_(e)}function uF(t,e){t.H_.Ne(e),sd(t).w_(e)}function d1(t){t.H_=new NK({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.K_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),sd(t).start(),t.j_.B_()}function h1(t){return Nl(t)&&!sd(t).u_()&&t.K_.size>0}function Nl(t){return le(t).W_.size===0}function dF(t){t.H_=void 0}async function LQ(t){t.j_.set("Online")}async function FQ(t){t.K_.forEach((e,n)=>{u1(t,e)})}async function VQ(t,e){dF(t),h1(t)?(t.j_.q_(e),d1(t)):t.j_.set("Unknown")}async function UQ(t,e,n){if(t.j_.set("Online"),e instanceof E4&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.K_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.K_.delete(a),s.H_.removeTarget(a))}(t,e)}catch(r){G(ml,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dv(t,r)}else if(e instanceof Kg?t.H_.We(e):e instanceof b4?t.H_.Ze(e):t.H_.je(e),!n.isEqual(ue.min()))try{const r=await Z4(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.H_.ot(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.K_.get(u);d&&i.K_.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=i.K_.get(l);if(!d)return;i.K_.set(l,d.withResumeToken(Rt.EMPTY_BYTE_STRING,d.snapshotVersion)),uF(i,l);const h=new si(d.target,l,u,d.sequenceNumber);u1(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){G(ml,"Failed to raise snapshot:",r),await dv(t,r)}}async function dv(t,e,n){if(!ta(e))throw e;t.W_.add(1),await Cp(t),t.j_.set("Offline"),n||(n=()=>Z4(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G(ml,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await O_(t)})}function hF(t,e){return e().catch(n=>dv(t,n,e))}async function rd(t){const e=le(t),n=$o(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:Ka;for(;$Q(e);)try{const s=await SQ(e.localStore,r);if(s===null){e.U_.length===0&&n.P_();break}r=s.batchId,BQ(e,s)}catch(s){await dv(e,s)}fF(e)&&pF(e)}function $Q(t){return Nl(t)&&t.U_.length<10}function BQ(t,e){t.U_.push(e);const n=$o(t);n.c_()&&n.S_&&n.b_(e.mutations)}function fF(t){return Nl(t)&&!$o(t).u_()&&t.U_.length>0}function pF(t){$o(t).start()}async function zQ(t){$o(t).C_()}async function GQ(t){const e=$o(t);for(const n of t.U_)e.b_(n.mutations)}async function qQ(t,e,n){const r=t.U_.shift(),s=JS.from(r,e,n);await hF(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await rd(t)}async function WQ(t,e){e&&$o(t).S_&&await async function(r,s){if(function(o){return RK(o)&&o!==B.ABORTED}(s.code)){const i=r.U_.shift();$o(r).h_(),await hF(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await rd(r)}}(t,e),fF(t)&&pF(t)}async function lN(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),G(ml,"RemoteStore received new credentials");const r=Nl(n);n.W_.add(3),await Cp(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await O_(n)}async function EE(t,e){const n=le(t);e?(n.W_.delete(2),await O_(n)):e||(n.W_.add(2),await Cp(n),n.j_.set("Unknown"))}function sd(t){return t.J_||(t.J_=function(n,r,s){const i=le(n);return i.M_(),new NQ(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{xo:LQ.bind(null,t),No:FQ.bind(null,t),Lo:VQ.bind(null,t),p_:UQ.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),h1(t)?d1(t):t.j_.set("Unknown")):(await t.J_.stop(),dF(t))})),t.J_}function $o(t){return t.Y_||(t.Y_=function(n,r,s){const i=le(n);return i.M_(),new kQ(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:zQ.bind(null,t),Lo:WQ.bind(null,t),D_:GQ.bind(null,t),v_:qQ.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await rd(t)):(await t.Y_.stop(),t.U_.length>0&&(G(ml,`Stopping write stream with ${t.U_.length} pending writes`),t.U_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new f1(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function p1(t,e){if(It("AsyncQueue",`${e}: ${t}`),ta(t))return new K(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{static emptySet(e){return new Kc(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Ch(),this.sortedSet=new vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Kc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Kc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(){this.Z_=new vt(J.comparator)}track(e){const n=e.doc.key,r=this.Z_.get(n);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(n):e.type===1&&r.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):ie():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Mu{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Mu(e,n,Kc.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&S_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HQ{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class KQ{constructor(){this.queries=uN(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,r){const s=le(n),i=s.queries;s.queries=uN(),i.forEach((o,a)=>{for(const l of a.ta)l.onError(r)})})(this,new K(B.ABORTED,"Firestore shutting down"))}}function uN(){return new Ii(t=>a4(t),S_)}async function m1(t,e){const n=le(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.na()&&e.ra()&&(r=2):(i=new HQ,r=e.ra()?0:1);try{switch(r){case 0:i.ea=await n.onListen(s,!0);break;case 1:i.ea=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=p1(o,`Initialization of query '${_c(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.ta.push(e),e.sa(n.onlineState),i.ea&&e.oa(i.ea)&&y1(n)}async function g1(t,e){const n=le(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ta.indexOf(e);o>=0&&(i.ta.splice(o,1),i.ta.length===0?s=e.ra()?0:1:!i.na()&&e.ra()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function QQ(t,e){const n=le(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.ta)a.oa(s)&&(r=!0);o.ea=s}}r&&y1(n)}function YQ(t,e,n){const r=le(t),s=r.queries.get(e);if(s)for(const i of s.ta)i.onError(n);r.queries.delete(e)}function y1(t){t.ia.forEach(e=>{e.next()})}var TE,dN;(dN=TE||(TE={}))._a="default",dN.Cache="cache";class v1{constructor(e,n,r){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Mu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const r=n!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=Mu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==TE.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e){this.key=e}}class gF{constructor(e){this.key=e}}class XQ{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Te(),this.mutatedKeys=Te(),this.ya=c4(e),this.wa=new Kc(this.ya)}get Sa(){return this.fa}ba(e,n){const r=n?n.Da:new cN,s=n?n.wa:this.wa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const p=s.get(d),m=Ep(this.query,h)?h:null,y=!!p&&this.mutatedKeys.has(p.key),_=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let b=!1;p&&m?p.data.isEqual(m.data)?y!==_&&(r.track({type:3,doc:m}),b=!0):this.va(p,m)||(r.track({type:2,doc:m}),b=!0,(l&&this.ya(m,l)>0||u&&this.ya(m,u)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),b=!0):p&&!m&&(r.track({type:1,doc:p}),b=!0,(l||u)&&(a=!0)),b&&(m?(o=o.add(m),i=_?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{wa:o,Da:r,ls:a,mutatedKeys:i}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((d,h)=>function(m,y){const _=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return _(m)-_(y)}(d.type,h.type)||this.ya(d.doc,h.doc)),this.Ca(r),s=s!=null&&s;const a=n&&!s?this.Fa():[],l=this.pa.size===0&&this.current&&!s?1:0,u=l!==this.ga;return this.ga=l,o.length!==0||u?{snapshot:new Mu(this.query,e.wa,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new cN,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Te(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const n=[];return e.forEach(r=>{this.pa.has(r)||n.push(new gF(r))}),this.pa.forEach(r=>{e.has(r)||n.push(new mF(r))}),n}Oa(e){this.fa=e.gs,this.pa=Te();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return Mu.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const id="SyncEngine";class JQ{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ZQ{constructor(e){this.key=e,this.Ba=!1}}class eY{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new Ii(a=>a4(a),S_),this.qa=new Map,this.Qa=new Set,this.$a=new vt(J.comparator),this.Ua=new Map,this.Ka=new s1,this.Wa={},this.Ga=new Map,this.za=pl.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function tY(t,e,n=!0){const r=j_(t);let s;const i=r.ka.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Na()):s=await yF(r,e,n,!0),s}async function nY(t,e){const n=j_(t);await yF(n,e,!0,!1)}async function yF(t,e,n,r){const s=await lv(t.localStore,or(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await _1(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&D_(t.remoteStore,s),a}async function _1(t,e,n,r,s){t.Ha=(h,p,m)=>async function(_,b,x,E){let w=b.view.ba(x);w.ls&&(w=await xE(_.localStore,b.query,!1).then(({documents:C})=>b.view.ba(C,w)));const I=E&&E.targetChanges.get(b.targetId),k=E&&E.targetMismatches.get(b.targetId)!=null,M=b.view.applyChanges(w,_.isPrimaryClient,I,k);return SE(_,b.targetId,M.Ma),M.snapshot}(t,h,p,m);const i=await xE(t.localStore,e,!0),o=new XQ(e,i.gs),a=o.ba(i.documents),l=Sp.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);SE(t,n,u.Ma);const d=new JQ(e,n,o);return t.ka.set(e,d),t.qa.has(n)?t.qa.get(n).push(e):t.qa.set(n,[e]),u.snapshot}async function rY(t,e,n){const r=le(t),s=r.ka.get(e),i=r.qa.get(s.targetId);if(i.length>1)return r.qa.set(s.targetId,i.filter(o=>!S_(o,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Du(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ju(r.remoteStore,s.targetId),Lu(r,s.targetId)}).catch(ea)):(Lu(r,s.targetId),await Du(r.localStore,s.targetId,!0))}async function sY(t,e){const n=le(t),r=n.ka.get(e),s=n.qa.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ju(n.remoteStore,r.targetId))}async function iY(t,e,n){const r=E1(t);try{const s=await function(o,a){const l=le(o),u=mt.now(),d=a.reduce((m,y)=>m.add(y.key),Te());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=sr(),_=Te();return l.ds.getEntries(m,d).next(b=>{y=b,y.forEach((x,E)=>{E.isValidDocument()||(_=_.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(b=>{h=b;const x=[];for(const E of a){const w=IK(E,h.get(E.key).overlayedDocument);w!=null&&x.push(new Pi(E.key,w,XL(w.value.mapValue),Rn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,x,a)}).next(b=>{p=b;const x=b.applyToLocalDocumentSet(h,_);return l.documentOverlayCache.saveOverlays(m,b.batchId,x)})}).then(()=>({batchId:p.batchId,changes:d4(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let u=o.Wa[o.currentUser.toKey()];u||(u=new vt(ve)),u=u.insert(a,l),o.Wa[o.currentUser.toKey()]=u}(r,s.batchId,n),await ra(r,s.changes),await rd(r.remoteStore)}catch(s){const i=p1(s,"Failed to persist write");n.reject(i)}}async function vF(t,e){const n=le(t);try{const r=await EQ(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Ua.get(i);o&&(ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ba=!0:s.modifiedDocuments.size>0?ce(o.Ba):s.removedDocuments.size>0&&(ce(o.Ba),o.Ba=!1))}),await ra(n,r,e)}catch(r){await ea(r)}}function hN(t,e,n){const r=le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ka.forEach((i,o)=>{const a=o.view.sa(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=le(o);l.onlineState=a;let u=!1;l.queries.forEach((d,h)=>{for(const p of h.ta)p.sa(a)&&(u=!0)}),u&&y1(l)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function oY(t,e,n){const r=le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Ua.get(e),i=s&&s.key;if(i){let o=new vt(J.comparator);o=o.insert(i,St.newNoDocument(i,ue.min()));const a=Te().add(i),l=new Tp(ue.min(),new Map,new vt(ve),o,a);await vF(r,l),r.$a=r.$a.remove(i),r.Ua.delete(e),b1(r)}else await Du(r.localStore,e,!1).then(()=>Lu(r,e,n)).catch(ea)}async function aY(t,e){const n=le(t),r=e.batch.batchId;try{const s=await bQ(n.localStore,e);w1(n,r,null),x1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ra(n,s)}catch(s){await ea(s)}}async function lY(t,e,n){const r=le(t);try{const s=await function(o,a){const l=le(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(ce(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);w1(r,e,n),x1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ra(r,s)}catch(s){await ea(s)}}function x1(t,e){(t.Ga.get(e)||[]).forEach(n=>{n.resolve()}),t.Ga.delete(e)}function w1(t,e,n){const r=le(t);let s=r.Wa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function Lu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.qa.get(e))t.ka.delete(r),n&&t.La.Ja(r,n);t.qa.delete(e),t.isPrimaryClient&&t.Ka.br(e).forEach(r=>{t.Ka.containsKey(r)||_F(t,r)})}function _F(t,e){t.Qa.delete(e.path.canonicalString());const n=t.$a.get(e);n!==null&&(ju(t.remoteStore,n),t.$a=t.$a.remove(e),t.Ua.delete(n),b1(t))}function SE(t,e,n){for(const r of n)r instanceof mF?(t.Ka.addReference(r.key,e),cY(t,r)):r instanceof gF?(G(id,"Document no longer in limbo: "+r.key),t.Ka.removeReference(r.key,e),t.Ka.containsKey(r.key)||_F(t,r.key)):ie()}function cY(t,e){const n=e.key,r=n.path.canonicalString();t.$a.get(n)||t.Qa.has(r)||(G(id,"New document in limbo: "+n),t.Qa.add(r),b1(t))}function b1(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const n=new J(Ue.fromString(e)),r=t.za.next();t.Ua.set(r,new ZQ(n)),t.$a=t.$a.insert(n,r),D_(t.remoteStore,new si(or(bp(n.path)),r,"TargetPurposeLimboResolution",Bn.ae))}}async function ra(t,e,n){const r=le(t),s=[],i=[],o=[];r.ka.isEmpty()||(r.ka.forEach((a,l)=>{o.push(r.Ha(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){s.push(u);const h=a1.Yi(l.targetId,u);i.push(h)}}))}),await Promise.all(o),r.La.p_(s),await async function(l,u){const d=le(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>L.forEach(u,p=>L.forEach(p.Hi,m=>d.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>L.forEach(p.Ji,m=>d.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!ta(h))throw h;G(l1,"Failed to update sequence numbers: "+h)}for(const h of u){const p=h.targetId;if(!h.fromCache){const m=d.Ts.get(p),y=m.snapshotVersion,_=m.withLastLimboFreeSnapshotVersion(y);d.Ts=d.Ts.insert(p,_)}}}(r.localStore,i))}async function uY(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){G(id,"User change. New user:",e.toKey());const r=await J4(n.localStore,e);n.currentUser=e,function(i,o){i.Ga.forEach(a=>{a.forEach(l=>{l.reject(new K(B.CANCELLED,o))})}),i.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ra(n,r.Rs)}}function dY(t,e){const n=le(t),r=n.Ua.get(e);if(r&&r.Ba)return Te().add(r.key);{let s=Te();const i=n.qa.get(e);if(!i)return s;for(const o of i){const a=n.ka.get(o);s=s.unionWith(a.view.Sa)}return s}}async function hY(t,e){const n=le(t),r=await xE(n.localStore,e.query,!0),s=e.view.Oa(r);return n.isPrimaryClient&&SE(n,e.targetId,s.Ma),s}async function fY(t,e){const n=le(t);return tF(n.localStore,e).then(r=>ra(n,r))}async function pY(t,e,n,r){const s=le(t),i=await function(a,l){const u=le(a),d=le(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Ln(h,l).next(p=>p?u.localDocuments.getDocuments(h,p):L.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await rd(s.remoteStore):n==="acknowledged"||n==="rejected"?(w1(s,e,r||null),x1(s,e),function(a,l){le(le(a).mutationQueue).qn(l)}(s.localStore,e)):ie(),await ra(s,i)):G(id,"Cannot apply mutation batch with id: "+e)}async function mY(t,e){const n=le(t);if(j_(n),E1(n),e===!0&&n.ja!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await fN(n,r.toArray());n.ja=!0,await EE(n.remoteStore,!0);for(const i of s)D_(n.remoteStore,i)}else if(e===!1&&n.ja!==!1){const r=[];let s=Promise.resolve();n.qa.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(Lu(n,o),Du(n.localStore,o,!0))),ju(n.remoteStore,o)}),await s,await fN(n,r),function(o){const a=le(o);a.Ua.forEach((l,u)=>{ju(a.remoteStore,u)}),a.Ka.Dr(),a.Ua=new Map,a.$a=new vt(J.comparator)}(n),n.ja=!1,await EE(n.remoteStore,!1)}}async function fN(t,e,n){const r=le(t),s=[],i=[];for(const o of e){let a;const l=r.qa.get(o);if(l&&l.length!==0){a=await lv(r.localStore,or(l[0]));for(const u of l){const d=r.ka.get(u),h=await hY(r,d);h.snapshot&&i.push(h.snapshot)}}else{const u=await eF(r.localStore,o);a=await lv(r.localStore,u),await _1(r,xF(u),o,!1,a.resumeToken)}s.push(a)}return r.La.p_(i),s}function xF(t){return i4(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function gY(t){return function(n){return le(le(n).persistence).zi()}(le(t).localStore)}async function yY(t,e,n,r){const s=le(t);if(s.ja)return void G(id,"Ignoring unexpected query state notification.");const i=s.qa.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await tF(s.localStore,l4(i[0])),a=Tp.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Rt.EMPTY_BYTE_STRING);await ra(s,o,a);break}case"rejected":await Du(s.localStore,e,!0),Lu(s,e,r);break;default:ie()}}async function vY(t,e,n){const r=j_(t);if(r.ja){for(const s of e){if(r.qa.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){G(id,"Adding an already active target "+s);continue}const i=await eF(r.localStore,s),o=await lv(r.localStore,i);await _1(r,xF(i),o.targetId,!1,o.resumeToken),D_(r.remoteStore,o)}for(const s of n)r.qa.has(s)&&await Du(r.localStore,s,!1).then(()=>{ju(r.remoteStore,s),Lu(r,s)}).catch(ea)}}function j_(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oY.bind(null,e),e.La.p_=QQ.bind(null,e.eventManager),e.La.Ja=YQ.bind(null,e.eventManager),e}function E1(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lY.bind(null,e),e}class zf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=k_(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return X4(this.persistence,new Y4,e.initialUser,this.serializer)}Xa(e){return new i1(N_.ri,this.serializer)}Za(e){return new oF}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zf.provider={build:()=>new zf};class _Y extends zf{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){ce(this.persistence.referenceDelegate instanceof av);const r=this.persistence.referenceDelegate.garbageCollector;return new G4(r,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new i1(r=>av.ri(r,n),this.serializer)}}class xY extends zf{constructor(e,n,r){super(),this.ru=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ru.initialize(this,e),await E1(this.ru.syncEngine),await rd(this.ru.remoteStore),await this.persistence.Ci(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}eu(e){return X4(this.persistence,new Y4,e.initialUser,this.serializer)}tu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new G4(r,e.asyncQueue,n)}nu(e,n){const r=new A7(n,this.persistence);return new R7(e.asyncQueue,r)}Xa(e){const n=Q4(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new o1(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,aF(),Qg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Za(e){return new oF}}class wY extends xY{constructor(e,n){super(e,n,!1),this.ru=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.ru.syncEngine;this.sharedClientState instanceof Lx&&(this.sharedClientState.syncEngine={uo:pY.bind(null,n),co:yY.bind(null,n),lo:vY.bind(null,n),zi:gY.bind(null,n),ao:fY.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ci(async r=>{await mY(this.ru.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Za(e){const n=aF();if(!Lx.D(n))throw new K(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Q4(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Lx(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class hv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hN(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uY.bind(null,this.syncEngine),await EE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new KQ}()}createDatastore(e){const n=k_(e.databaseInfo.databaseId),r=function(i){return new AQ(i)}(e.databaseInfo);return function(i,o,a,l){return new DQ(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new MQ(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>hN(this.syncEngine,n,0),function(){return oN.D()?new oN:new CQ}())}createSyncEngine(e,n){return function(s,i,o,a,l,u,d){const h=new eY(s,i,o,a,l,u);return d&&(h.ja=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=le(s);G(ml,"RemoteStore shutting down."),i.W_.add(5),await Cp(i),i.z_.shutdown(),i.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}hv.provider={build:()=>new hv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):It("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo="FirestoreClient";class bY{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=qt.UNAUTHENTICATED,this.clientId=SL.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{G(Bo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(G(Bo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=p1(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Vx(t,e){t.asyncQueue.verifyOperationInProgress(),G(Bo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await J4(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function pN(t,e){t.asyncQueue.verifyOperationInProgress();const n=await EY(t);G(Bo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>lN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>lN(e.remoteStore,s)),t._onlineComponents=e}async function EY(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(Bo,"Using user provided OfflineComponentProvider");try{await Vx(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;al("Error using user provided cache. Falling back to memory cache: "+n),await Vx(t,new zf)}}else G(Bo,"Using default OfflineComponentProvider"),await Vx(t,new _Y(void 0));return t._offlineComponents}async function wF(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(Bo,"Using user provided OnlineComponentProvider"),await pN(t,t._uninitializedComponentsProvider._online)):(G(Bo,"Using default OnlineComponentProvider"),await pN(t,new hv))),t._onlineComponents}function TY(t){return wF(t).then(e=>e.syncEngine)}async function fv(t){const e=await wF(t),n=e.eventManager;return n.onListen=tY.bind(null,e.syncEngine),n.onUnlisten=rY.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=nY.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=sY.bind(null,e.syncEngine),n}function SY(t,e,n={}){const r=new Rs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const d=new T1({next:p=>{d.su(),o.enqueueAndForget(()=>g1(i,h));const m=p.docs.has(a);!m&&p.fromCache?u.reject(new K(B.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?u.reject(new K(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new v1(bp(a.path),d,{includeMetadataChanges:!0,Ta:!0});return m1(i,h)}(await fv(t),t.asyncQueue,e,n,r)),r.promise}function CY(t,e,n={}){const r=new Rs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const d=new T1({next:p=>{d.su(),o.enqueueAndForget(()=>g1(i,h)),p.fromCache&&l.source==="server"?u.reject(new K(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new v1(a,d,{includeMetadataChanges:!0,Ta:!0});return m1(i,h)}(await fv(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bF(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EF(t,e,n){if(!n)throw new K(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function IY(t,e,n,r){if(e===!0&&r===!0)throw new K(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function gN(t){if(!J.isDocumentKey(t))throw new K(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yN(t){if(J.isDocumentKey(t))throw new K(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function M_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function Qn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=M_(t);throw new K(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF="firestore.googleapis.com",vN=!0;class _N{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TF,this.ssl=vN}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:vN;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=U4;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nQ)throw new K(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IY("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bF((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class L_{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _N({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _N(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new _7;switch(r.type){case"firstParty":return new E7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=mN.get(n);r&&(G("ComponentProvider","Removing Datastore"),mN.delete(n),r.terminate())}(this),Promise.resolve()}}function PY(t,e,n,r={}){var s;const i=(t=Qn(t,L_))._getSettings(),o=`${e}:${n}`;if(i.host!==TF&&i.host!==o&&al("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=qt.MOCK_USER;else{a=ES(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new K(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new qt(u)}t._authCredentials=new x7(new TL(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let od=class SF{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new SF(this.firestore,e,this._query)}};class wn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new No(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}}class No extends od{constructor(e,n,r){super(e,n,bp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new J(e))}withConverter(e){return new No(this.firestore,e,this._path)}}function Fu(t,e,...n){if(t=yt(t),EF("collection","path",e),t instanceof L_){const r=Ue.fromString(e,...n);return yN(r),new No(t,null,r)}{if(!(t instanceof wn||t instanceof No))throw new K(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return yN(r),new No(t.firestore,null,r)}}function Xn(t,e,...n){if(t=yt(t),arguments.length===1&&(e=SL.newId()),EF("doc","path",e),t instanceof L_){const r=Ue.fromString(e,...n);return gN(r),new wn(t,null,new J(r))}{if(!(t instanceof wn||t instanceof No))throw new K(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return gN(r),new wn(t.firestore,t instanceof No?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="AsyncQueue";class wN{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new lF(this,"async_queue_retry"),this.Su=()=>{const r=Qg();r&&G(xN,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const n=Qg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=Qg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Rs;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!ta(e))throw e;G(xN,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw It("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.bu=n,n}enqueueAfterDelay(e,n,r){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const s=f1.createAndSchedule(this,e,n,r,i=>this.Fu(i));return this.fu.push(s),s}Du(){this.gu&&ie()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}function bN(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class _i extends L_{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new wN,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wN(e),this._firestoreClient=void 0,await e}}}function RY(t,e){const n=typeof t=="object"?t:pp(),r=typeof t=="string"?t:Zy,s=Si(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=wS("firestore");i&&PY(s,...i)}return s}function F_(t){if(t._terminated)throw new K(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||CF(t),t._firestoreClient}function CF(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,u,d){return new sK(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,bF(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new bY(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}async function AY(t){al("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();NY(t,hv.provider,{build:n=>new wY(n,e.cacheSizeBytes)})}function NY(t,e,n){if((t=Qn(t,_i))._firestoreClient||t._terminated)throw new K(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new K(B.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},CF(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vu(Rt.fromBase64String(e))}catch(n){throw new K(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vu(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kY=/^__.*__$/;class OY{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Pi(e,this.data,this.fieldMask,n,this.fieldTransforms):new nd(e,this.data,n,this.fieldTransforms)}}class IF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Pi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function PF(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class U_{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new U_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Uu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return pv(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(PF(this.Lu)&&kY.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class DY{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||k_(e)}ju(e,n,r,s=!1){return new U_({Lu:e,methodName:n,zu:r,path:ht.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $_(t){const e=t._freezeSettings(),n=k_(t._databaseId);return new DY(t._databaseId,!!e.ignoreUndefinedProperties,n)}function RF(t,e,n,r,s,i={}){const o=t.ju(i.merge||i.mergeFields?2:0,e,n,s);A1("Data must be an object, but it was:",o,r);const a=NF(r,o);let l,u;if(i.merge)l=new zn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const h of i.mergeFields){const p=CE(e,h,n);if(!o.contains(p))throw new K(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);OF(d,p)||d.push(p)}l=new zn(d),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new OY(new yn(a),l,u)}class B_ extends ad{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof B_}}function AF(t,e,n){return new U_({Lu:3,zu:e.settings.zu,methodName:t._methodName,Qu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class I1 extends ad{_toFieldTransform(e){return new I_(e.path,new ku)}isEqual(e){return e instanceof I1}}class P1 extends ad{constructor(e,n){super(e),this.Hu=n}_toFieldTransform(e){const n=AF(this,e,!0),r=this.Hu.map(i=>kl(i,n)),s=new ul(r);return new I_(e.path,s)}isEqual(e){return e instanceof P1&&rl(this.Hu,e.Hu)}}class R1 extends ad{constructor(e,n){super(e),this.Hu=n}_toFieldTransform(e){const n=AF(this,e,!0),r=this.Hu.map(i=>kl(i,n)),s=new dl(r);return new I_(e.path,s)}isEqual(e){return e instanceof R1&&rl(this.Hu,e.Hu)}}function jY(t,e,n,r){const s=t.ju(1,e,n);A1("Data must be an object, but it was:",s,r);const i=[],o=yn.empty();na(r,(l,u)=>{const d=N1(e,l,n);u=yt(u);const h=s.Uu(d);if(u instanceof B_)i.push(d);else{const p=kl(u,h);p!=null&&(i.push(d),o.set(d,p))}});const a=new zn(i);return new IF(o,a,s.fieldTransforms)}function MY(t,e,n,r,s,i){const o=t.ju(1,e,n),a=[CE(e,r,n)],l=[s];if(i.length%2!=0)throw new K(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(CE(e,i[p])),l.push(i[p+1]);const u=[],d=yn.empty();for(let p=a.length-1;p>=0;--p)if(!OF(u,a[p])){const m=a[p];let y=l[p];y=yt(y);const _=o.Uu(m);if(y instanceof B_)u.push(m);else{const b=kl(y,_);b!=null&&(u.push(m),d.set(m,b))}}const h=new zn(u);return new IF(d,h,o.fieldTransforms)}function LY(t,e,n,r=!1){return kl(n,t.ju(r?4:3,e))}function kl(t,e){if(kF(t=yt(t)))return A1("Unsupported field value:",e,t),NF(t,e);if(t instanceof ad)return function(r,s){if(!PF(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=kl(a,s.Ku(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wK(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=mt.fromDate(r);return{timestampValue:Ou(s.serializer,i)}}if(r instanceof mt){const i=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ou(s.serializer,i)}}if(r instanceof S1)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vu)return{bytesValue:T4(s.serializer,r._byteString)};if(r instanceof wn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:t1(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof C1)return function(o,a){return{mapValue:{fields:{[qS]:{stringValue:WS},[Pu]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Wu("VectorValues must only contain numeric values.");return QS(a.serializer,u)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${M_(r)}`)}(t,e)}function NF(t,e){const n={};return BL(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):na(t,(r,s)=>{const i=kl(s,e.qu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function kF(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof mt||t instanceof S1||t instanceof Vu||t instanceof wn||t instanceof ad||t instanceof C1)}function A1(t,e,n){if(!kF(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=M_(n);throw r==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+r)}}function CE(t,e,n){if((e=yt(e))instanceof V_)return e._internalPath;if(typeof e=="string")return N1(t,e);throw pv("Field path arguments must be of type string or ",t,!1,void 0,n)}const FY=new RegExp("[~\\*/\\[\\]]");function N1(t,e,n){if(e.search(FY)>=0)throw pv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new V_(...e.split("."))._internalPath}catch{throw pv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pv(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new K(B.INVALID_ARGUMENT,a+t+l)}function OF(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VY(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(z_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class VY extends DF{data(){return super.data()}}function z_(t,e){return typeof e=="string"?N1(t,e):e instanceof V_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class k1{}class MF extends k1{}function LF(t,e,...n){let r=[];e instanceof k1&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof O1).length,a=i.filter(l=>l instanceof G_).length;if(o>1||o>0&&a>0)throw new K(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class G_ extends MF{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new G_(e,n,r)}_apply(e){const n=this._parse(e);return FF(e._query,n),new od(e.firestore,e.converter,dE(e._query,n))}_parse(e){const n=$_(e.firestore);return function(i,o,a,l,u,d,h){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new K(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){TN(h,d);const y=[];for(const _ of h)y.push(EN(l,i,_));p={arrayValue:{values:y}}}else p=EN(l,i,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||TN(h,d),p=LY(a,o,h,d==="in"||d==="not-in");return Pe.create(u,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function UY(t,e,n){const r=e,s=z_("where",t);return G_._create(s,r,n)}class O1 extends k1{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new O1(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ge.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)FF(o,l),o=dE(o,l)}(e._query,n),new od(e.firestore,e.converter,dE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class D1 extends MF{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new D1(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new K(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $f(i,o)}(e._query,this._field,this._direction);return new od(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new td(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function $Y(t,e="asc"){const n=e,r=z_("orderBy",t);return D1._create(r,n)}function EN(t,e,n){if(typeof(n=yt(n))=="string"){if(n==="")throw new K(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!o4(e)&&n.indexOf("/")!==-1)throw new K(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ue.fromString(n));if(!J.isDocumentKey(r))throw new K(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vf(t,new J(r))}if(n instanceof wn)return Vf(t,n._key);throw new K(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${M_(n)}.`)}function TN(t,e){if(!Array.isArray(t)||t.length===0)throw new K(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FF(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class BY{convertValue(e,n="none"){switch(Vo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return na(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[Pu].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>ct(o.doubleValue));return new C1(i)}convertGeoPoint(e){return new S1(ct(e.latitude),ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=E_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Lf(e));default:return null}}convertTimestamp(e){const n=yi(e);return new mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ue.fromString(e);ce(D4(r));const s=new ll(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||It(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class UF extends DF{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(z_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Yg extends UF{data(e={}){return super.data(e)}}class $F{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Rh(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Yg(this._firestore,this._userDataWriter,r.key,r,new Rh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new Yg(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Rh(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Yg(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Rh(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:zY(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function zY(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(t){t=Qn(t,wn);const e=Qn(t.firestore,_i);return SY(F_(e),t._key).then(n=>zF(e,t,n))}class j1 extends BY{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,n)}}function GY(t){t=Qn(t,od);const e=Qn(t.firestore,_i),n=F_(e),r=new j1(e);return jF(t._query),CY(n,t._query).then(s=>new $F(e,r,t,s))}function Pp(t,e,n){t=Qn(t,wn);const r=Qn(t.firestore,_i),s=VF(t.converter,e);return M1(r,[RF($_(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Rn.none())])}function Rp(t,e,n,...r){t=Qn(t,wn);const s=Qn(t.firestore,_i),i=$_(s);let o;return o=typeof(e=yt(e))=="string"||e instanceof V_?MY(i,"updateDoc",t._key,e,n,r):jY(i,"updateDoc",t._key,e),M1(s,[o.toMutation(t._key,Rn.exists(!0))])}function qY(t,e){const n=Qn(t.firestore,_i),r=Xn(t),s=VF(t.converter,e);return M1(n,[RF($_(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Rn.exists(!1))]).then(()=>r)}function BF(t,...e){var n,r,s;t=yt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||bN(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(bN(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,u,d;if(t instanceof wn)u=Qn(t.firestore,_i),d=bp(t._key.path),l={next:h=>{e[o]&&e[o](zF(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Qn(t,od);u=Qn(h.firestore,_i),d=h._query;const p=new j1(u);l={next:m=>{e[o]&&e[o](new $F(u,p,h,m))},error:e[o+1],complete:e[o+2]},jF(t._query)}return function(p,m,y,_){const b=new T1(_),x=new v1(m,b,y);return p.asyncQueue.enqueueAndForget(async()=>m1(await fv(p),x)),()=>{b.su(),p.asyncQueue.enqueueAndForget(async()=>g1(await fv(p),x))}}(F_(u),d,a,l)}function M1(t,e){return function(r,s){const i=new Rs;return r.asyncQueue.enqueueAndForget(async()=>iY(await TY(r),s,i)),i.promise}(F_(t),e)}function zF(t,e,n){const r=n.docs.get(e._key),s=new j1(t);return new UF(t,s,e._key,r,new Rh(n.hasPendingWrites,n.fromCache),e.converter)}function Qc(){return new I1("serverTimestamp")}function WY(...t){return new P1("arrayUnion",t)}function HY(...t){return new R1("arrayRemove",t)}(function(e,n=!0){(function(s){ed=s})(Xo),Rr(new dr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new _i(new w7(r.getProvider("auth-internal")),new T7(o,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new K(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ll(u.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),_n(iA,oA,e),_n(iA,oA,"esm2017")})();const GF="@firebase/installations",L1="0.6.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF=1e4,WF=`w:${L1}`,HF="FIS_v2",KY="https://firebaseinstallations.googleapis.com/v1",QY=60*60*1e3,YY="installations",XY="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JY={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},gl=new Al(YY,XY,JY);function KF(t){return t instanceof Or&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QF({projectId:t}){return`${KY}/projects/${t}/installations`}function YF(t){return{token:t.token,requestStatus:2,expiresIn:eX(t.expiresIn),creationTime:Date.now()}}async function XF(t,e){const r=(await e.json()).error;return gl.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function JF({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ZY(t,{refreshToken:e}){const n=JF(t);return n.append("Authorization",tX(e)),n}async function ZF(t){const e=await t();return e.status>=500&&e.status<600?t():e}function eX(t){return Number(t.replace("s","000"))}function tX(t){return`${HF} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nX({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=QF(t),s=JF(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:n,authVersion:HF,appId:t.appId,sdkVersion:WF},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await ZF(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:YF(u.authToken)}}else throw await XF("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eV(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rX(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sX=/^[cdef][\w-]{21}$/,IE="";function iX(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=oX(t);return sX.test(n)?n:IE}catch{return IE}}function oX(t){return rX(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV=new Map;function nV(t,e){const n=q_(t);rV(n,e),aX(n,e)}function rV(t,e){const n=tV.get(t);if(n)for(const r of n)r(e)}function aX(t,e){const n=lX();n&&n.postMessage({key:t,fid:e}),cX()}let Va=null;function lX(){return!Va&&"BroadcastChannel"in self&&(Va=new BroadcastChannel("[Firebase] FID Change"),Va.onmessage=t=>{rV(t.data.key,t.data.fid)}),Va}function cX(){tV.size===0&&Va&&(Va.close(),Va=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uX="firebase-installations-database",dX=1,yl="firebase-installations-store";let Ux=null;function F1(){return Ux||(Ux=kM(uX,dX,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(yl)}}})),Ux}async function mv(t,e){const n=q_(t),s=(await F1()).transaction(yl,"readwrite"),i=s.objectStore(yl),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&nV(t,e.fid),e}async function sV(t){const e=q_(t),r=(await F1()).transaction(yl,"readwrite");await r.objectStore(yl).delete(e),await r.done}async function W_(t,e){const n=q_(t),s=(await F1()).transaction(yl,"readwrite"),i=s.objectStore(yl),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&nV(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V1(t){let e;const n=await W_(t.appConfig,r=>{const s=hX(r),i=fX(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===IE?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function hX(t){const e=t||{fid:iX(),registrationStatus:0};return iV(e)}function fX(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(gl.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=pX(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:mX(t)}:{installationEntry:e}}async function pX(t,e){try{const n=await nX(t,e);return mv(t.appConfig,n)}catch(n){throw KF(n)&&n.customData.serverCode===409?await sV(t.appConfig):await mv(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function mX(t){let e=await SN(t.appConfig);for(;e.registrationStatus===1;)await eV(100),e=await SN(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await V1(t);return r||n}return e}function SN(t){return W_(t,e=>{if(!e)throw gl.create("installation-not-found");return iV(e)})}function iV(t){return gX(t)?{fid:t.fid,registrationStatus:0}:t}function gX(t){return t.registrationStatus===1&&t.registrationTime+qF<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yX({appConfig:t,heartbeatServiceProvider:e},n){const r=vX(t,n),s=ZY(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:WF,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await ZF(()=>fetch(r,a));if(l.ok){const u=await l.json();return YF(u)}else throw await XF("Generate Auth Token",l)}function vX(t,{fid:e}){return`${QF(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U1(t,e=!1){let n;const r=await W_(t.appConfig,i=>{if(!oV(i))throw gl.create("not-registered");const o=i.authToken;if(!e&&wX(o))return i;if(o.requestStatus===1)return n=_X(t,e),i;{if(!navigator.onLine)throw gl.create("app-offline");const a=EX(i);return n=xX(t,a),a}});return n?await n:r.authToken}async function _X(t,e){let n=await CN(t.appConfig);for(;n.authToken.requestStatus===1;)await eV(100),n=await CN(t.appConfig);const r=n.authToken;return r.requestStatus===0?U1(t,e):r}function CN(t){return W_(t,e=>{if(!oV(e))throw gl.create("not-registered");const n=e.authToken;return TX(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function xX(t,e){try{const n=await yX(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await mv(t.appConfig,r),n}catch(n){if(KF(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await sV(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await mv(t.appConfig,r)}throw n}}function oV(t){return t!==void 0&&t.registrationStatus===2}function wX(t){return t.requestStatus===2&&!bX(t)}function bX(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+QY}function EX(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function TX(t){return t.requestStatus===1&&t.requestTime+qF<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SX(t){const e=t,{installationEntry:n,registrationPromise:r}=await V1(e);return r?r.catch(console.error):U1(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CX(t,e=!1){const n=t;return await IX(n),(await U1(n,e)).token}async function IX(t){const{registrationPromise:e}=await V1(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PX(t){if(!t||!t.options)throw $x("App Configuration");if(!t.name)throw $x("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw $x(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function $x(t){return gl.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV="installations",RX="installations-internal",AX=t=>{const e=t.getProvider("app").getImmediate(),n=PX(e),r=Si(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},NX=t=>{const e=t.getProvider("app").getImmediate(),n=Si(e,aV).getImmediate();return{getId:()=>SX(n),getToken:s=>CX(n,s)}};function kX(){Rr(new dr(aV,AX,"PUBLIC")),Rr(new dr(RX,NX,"PRIVATE"))}kX();_n(GF,L1);_n(GF,L1,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="analytics",OX="firebase_id",DX="origin",jX=60*1e3,MX="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$1="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn=new fp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LX={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ar=new Al("analytics","Analytics",LX);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FX(t){if(!t.startsWith($1)){const e=ar.create("invalid-gtag-resource",{gtagURL:t});return Yn.warn(e.message),""}return t}function lV(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function VX(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function UX(t,e){const n=VX("firebase-js-sdk-policy",{createScriptURL:FX}),r=document.createElement("script"),s=`${$1}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function $X(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function BX(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await lV(n)).find(u=>u.measurementId===s);l&&await e[l.appId]}}catch(a){Yn.error(a)}t("config",s,i)}async function zX(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await lV(n);for(const l of o){const u=a.find(h=>h.measurementId===l),d=u&&e[u.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Yn.error(i)}}function GX(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await zX(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await BX(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){Yn.error(a)}}return s}function qX(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=GX(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function WX(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes($1)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HX=30,KX=1e3;class QX{constructor(e={},n=KX){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const cV=new QX;function YX(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function XX(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:YX(r)},i=MX.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw ar.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function JX(t,e=cV,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw ar.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw ar.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new tJ;return setTimeout(async()=>{a.abort()},jX),uV({appId:r,apiKey:s,measurementId:i},o,a,e)}async function uV(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=cV){var i;const{appId:o,measurementId:a}=t;try{await ZX(r,e)}catch(l){if(a)return Yn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await XX(t);return s.deleteThrottleMetadata(o),l}catch(l){const u=l;if(!eJ(u)){if(s.deleteThrottleMetadata(o),a)return Yn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw l}const d=Number((i=u==null?void 0:u.customData)===null||i===void 0?void 0:i.httpStatus)===503?RR(n,s.intervalMillis,HX):RR(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(o,h),Yn.debug(`Calling attemptFetch again in ${d} millis`),uV(t,h,r,s)}}function ZX(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(ar.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function eJ(t){if(!(t instanceof Or)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class tJ{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function nJ(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rJ(){if(SS())try{await PM()}catch(t){return Yn.warn(ar.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Yn.warn(ar.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function sJ(t,e,n,r,s,i,o){var a;const l=JX(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Yn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Yn.error(m)),e.push(l);const u=rJ().then(m=>{if(m)return r.getId()}),[d,h]=await Promise.all([l,u]);WX(i)||UX(i,d.measurementId),s("js",new Date);const p=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return p[DX]="firebase",p.update=!0,h!=null&&(p[OX]=h),s("config",d.measurementId,p),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iJ{constructor(e){this.app=e}_delete(){return delete Xh[this.app.options.appId],Promise.resolve()}}let Xh={},IN=[];const PN={};let Bx="dataLayer",oJ="gtag",RN,dV,AN=!1;function aJ(){const t=[];if(SM()&&t.push("This is a browser extension environment."),D8()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=ar.create("invalid-analytics-context",{errorInfo:e});Yn.warn(n.message)}}function lJ(t,e,n){aJ();const r=t.options.appId;if(!r)throw ar.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Yn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ar.create("no-api-key");if(Xh[r]!=null)throw ar.create("already-exists",{id:r});if(!AN){$X(Bx);const{wrappedGtag:i,gtagCore:o}=qX(Xh,IN,PN,Bx,oJ);dV=i,RN=o,AN=!0}return Xh[r]=sJ(t,IN,PN,e,RN,Bx,n),new iJ(t)}function cJ(t=pp()){t=yt(t);const e=Si(t,gv);return e.isInitialized()?e.getImmediate():uJ(t)}function uJ(t,e={}){const n=Si(t,gv);if(n.isInitialized()){const s=n.getImmediate();if(rl(e,n.getOptions()))return s;throw ar.create("already-initialized")}return n.initialize({options:e})}function dJ(t,e,n,r){t=yt(t),nJ(dV,Xh[t.app.options.appId],e,n,r).catch(s=>Yn.error(s))}const NN="@firebase/analytics",kN="0.10.11";function hJ(){Rr(new dr(gv,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return lJ(r,s,n)},"PUBLIC")),Rr(new dr("analytics-internal",t,"PRIVATE")),_n(NN,kN),_n(NN,kN,"esm2017");function t(e){try{const n=e.getProvider(gv).getImmediate();return{logEvent:(r,s,i)=>dJ(n,r,s,i)}}catch(n){throw ar.create("interop-component-reg-failed",{reason:n})}}}hJ();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV="firebasestorage.googleapis.com",fJ="storageBucket",pJ=2*60*1e3,mJ=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends Or{constructor(e,n,r=0){super(zx(e),`Firebase Storage: ${n} (${zx(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ms.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ks;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ks||(ks={}));function zx(t){return"storage/"+t}function gJ(){const t="An unknown error occurred, please check the error payload for server response.";return new Ms(ks.UNKNOWN,t)}function yJ(){return new Ms(ks.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vJ(){return new Ms(ks.CANCELED,"User canceled the upload/download.")}function _J(t){return new Ms(ks.INVALID_URL,"Invalid URL '"+t+"'.")}function xJ(t){return new Ms(ks.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function ON(t){return new Ms(ks.INVALID_ARGUMENT,t)}function fV(){return new Ms(ks.APP_DELETED,"The Firebase app was deleted.")}function wJ(t){return new Ms(ks.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Yr.makeFromUrl(e,n)}catch{return new Yr(e,"")}if(r.path==="")return r;throw xJ(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function u(I){I.path_=decodeURIComponent(I.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${p}`,"i"),y={bucket:1,path:3},_=n===hV?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",x=new RegExp(`^https?://${_}/${s}/${b}`,"i"),w=[{regex:a,indices:l,postModify:i},{regex:m,indices:y,postModify:u},{regex:x,indices:{bucket:1,path:2},postModify:u}];for(let I=0;I<w.length;I++){const k=w[I],M=k.regex.exec(e);if(M){const C=M[k.indices.bucket];let S=M[k.indices.path];S||(S=""),r=new Yr(C,S),k.postModify(r);break}}if(r==null)throw _J(e);return r}}class bJ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EJ(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function d(...b){u||(u=!0,e.apply(null,b))}function h(b){s=setTimeout(()=>{s=null,t(m,l())},b)}function p(){i&&clearTimeout(i)}function m(b,...x){if(u){p();return}if(b){p(),d.call(null,b,...x);return}if(l()||o){p(),d.call(null,b,...x);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,h(w)}let y=!1;function _(b){y||(y=!0,p(),!u&&(s!==null?(b||(a=2),clearTimeout(s),h(0)):b||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,_(!0)},n),_}function TJ(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SJ(t){return t!==void 0}function DN(t,e,n,r){if(r<e)throw ON(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw ON(`Invalid value for '${t}'. Expected ${n} or less.`)}function CJ(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var yv;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(yv||(yv={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IJ(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PJ{constructor(e,n,r,s,i,o,a,l,u,d,h,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,y)=>{this.resolve_=m,this.reject_=y,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Mm(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===yv.NO_ERROR,l=i.getStatus();if(!a||IJ(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===yv.ABORT;r(!1,new Mm(!1,null,d));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Mm(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());SJ(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=gJ();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?fV():vJ();o(l)}else{const l=yJ();o(l)}};this.canceled_?n(!1,new Mm(!1,null,!0)):this.backoffId_=EJ(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&TJ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Mm{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function RJ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function AJ(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function NJ(t,e){e&&(t["X-Firebase-GMPID"]=e)}function kJ(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function OJ(t,e,n,r,s,i,o=!0){const a=CJ(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return NJ(u,e),RJ(u,n),AJ(u,i),kJ(u,r),new PJ(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DJ(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function jJ(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,n){this._service=e,n instanceof Yr?this._location=n:this._location=Yr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new vv(e,n)}get root(){const e=new Yr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jJ(this._location.path)}get storage(){return this._service}get parent(){const e=DJ(this._location.path);if(e===null)return null;const n=new Yr(this._location.bucket,e);return new vv(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw wJ(e)}}function jN(t,e){const n=e==null?void 0:e[fJ];return n==null?null:Yr.makeFromBucketSpec(n,t)}function MJ(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:ES(s,t.app.options.projectId))}class LJ{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=hV,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pJ,this._maxUploadRetryTime=mJ,this._requests=new Set,s!=null?this._bucket=Yr.makeFromBucketSpec(s,this._host):this._bucket=jN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Yr.makeFromBucketSpec(this._url,e):this._bucket=jN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){DN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){DN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vv(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new bJ(fV());{const o=OJ(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const MN="@firebase/storage",LN="0.13.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV="storage";function FJ(t=pp(),e){t=yt(t);const r=Si(t,pV).getImmediate({identifier:e}),s=wS("storage");return s&&VJ(r,...s),r}function VJ(t,e,n,r={}){MJ(t,e,n,r)}function UJ(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new LJ(n,r,s,e,Xo)}function $J(){Rr(new dr(pV,UJ,"PUBLIC").setMultipleInstances(!0)),_n(MN,LN,""),_n(MN,LN,"esm2017")}$J();var FN={};const VN="@firebase/database",UN="1.0.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mV="";function BJ(t){mV=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zJ{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),tn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:If(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GJ{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ti(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new zJ(e)}}catch{}return new GJ},Ua=gV("localStorage"),qJ=gV("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=new fp("@firebase/database"),WJ=function(){let t=1;return function(){return t++}}(),yV=function(t){const e=q8(t),n=new U8;n.update(e);const r=n.digest();return xS.encodeByteArray(r)},Ap=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Ap.apply(null,r):typeof r=="object"?e+=tn(r):e+=r,e+=" "}return e};let Jh=null,$N=!0;const HJ=function(t,e){X(!0,"Can't turn on custom loggers persistently."),Yc.logLevel=Ce.VERBOSE,Jh=Yc.log.bind(Yc)},mn=function(...t){if($N===!0&&($N=!1,Jh===null&&qJ.get("logging_enabled")===!0&&HJ()),Jh){const e=Ap.apply(null,t);Jh(e)}},Np=function(t){return function(...e){mn(t,...e)}},PE=function(...t){const e="FIREBASE INTERNAL ERROR: "+Ap(...t);Yc.error(e)},xi=function(...t){const e=`FIREBASE FATAL ERROR: ${Ap(...t)}`;throw Yc.error(e),new Error(e)},lr=function(...t){const e="FIREBASE WARNING: "+Ap(...t);Yc.warn(e)},KJ=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&lr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},vV=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},QJ=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Uu="[MIN_NAME]",vl="[MAX_NAME]",ld=function(t,e){if(t===e)return 0;if(t===Uu||e===vl)return-1;if(e===Uu||t===vl)return 1;{const n=BN(t),r=BN(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},YJ=function(t,e){return t===e?0:t<e?-1:1},Gd=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+tn(e))},B1=function(t){if(typeof t!="object"||t===null)return tn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=tn(e[r]),n+=":",n+=B1(t[e[r]]);return n+="}",n},_V=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function Nr(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const xV=function(t){X(!vV(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,l;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const d=u.join("");let h="";for(l=0;l<64;l+=8){let p=parseInt(d.substr(l,8),2).toString(16);p.length===1&&(p="0"+p),h=h+p}return h.toLowerCase()},XJ=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},JJ=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},ZJ=new RegExp("^-?(0*)\\d{1,10}$"),eZ=-2147483648,tZ=2147483647,BN=function(t){if(ZJ.test(t)){const e=Number(t);if(e>=eZ&&e<=tZ)return e}return null},kp=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw lr("Exception was thrown by user callback.",n),e},Math.floor(0))}},nZ=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Zh=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rZ{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Pn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){lr(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sZ{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(mn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',lr(e)}}class Xg{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Xg.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="5",wV="v",bV="s",EV="r",TV="f",SV=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,CV="ls",IV="p",RE="ac",PV="websocket",RV="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e,n,r,s,i=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ua.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ua.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function iZ(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function NV(t,e,n){X(typeof e=="string","typeof type must == string"),X(typeof n=="object","typeof params must == object");let r;if(e===PV)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===RV)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);iZ(t)&&(n.ns=t.namespace);const s=[];return Nr(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oZ{constructor(){this.counters_={}}incrementCounter(e,n=1){Ti(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return T8(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx={},qx={};function G1(t){const e=t.toString();return Gx[e]||(Gx[e]=new oZ),Gx[e]}function aZ(t,e){const n=t.toString();return qx[n]||(qx[n]=e()),qx[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lZ{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&kp(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN="start",cZ="close",uZ="pLPCommand",dZ="pRTLPCB",kV="id",OV="pw",DV="ser",hZ="cb",fZ="seg",pZ="ts",mZ="d",gZ="dframe",jV=1870,MV=30,yZ=jV-MV,vZ=25e3,_Z=3e4;class Mc{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Np(e),this.stats_=G1(n),this.urlFn=l=>(this.appCheckToken&&(l[RE]=this.appCheckToken),NV(n,RV,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new lZ(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(_Z)),QJ(()=>{if(this.isClosed_)return;this.scriptTagHolder=new q1((...i)=>{const[o,a,l,u,d]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===zN)this.id=a,this.password=l;else if(o===cZ)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[zN]="t",r[DV]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[hZ]=this.scriptTagHolder.uniqueCallbackIdentifier),r[wV]=z1,this.transportSessionId&&(r[bV]=this.transportSessionId),this.lastSessionId&&(r[CV]=this.lastSessionId),this.applicationId&&(r[IV]=this.applicationId),this.appCheckToken&&(r[RE]=this.appCheckToken),typeof location<"u"&&location.hostname&&SV.test(location.hostname)&&(r[EV]=TV);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Mc.forceAllow_=!0}static forceDisallow(){Mc.forceDisallow_=!0}static isAvailable(){return Mc.forceAllow_?!0:!Mc.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!XJ()&&!JJ()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=tn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=xM(n),s=_V(r,yZ);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[gZ]="t",r[kV]=e,r[OV]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=tn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class q1{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=WJ(),window[uZ+this.uniqueCallbackIdentifier]=e,window[dZ+this.uniqueCallbackIdentifier]=n,this.myIFrame=q1.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){mn("frame writing exception"),a.stack&&mn(a.stack),mn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||mn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[kV]=this.myID,e[OV]=this.myPW,e[DV]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+MV+r.length<=jV;){const o=this.pendingSegs.shift();r=r+"&"+fZ+s+"="+o.seg+"&"+pZ+s+"="+o.ts+"&"+mZ+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(vZ)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{mn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xZ=16384,wZ=45e3;let _v=null;typeof MozWebSocket<"u"?_v=MozWebSocket:typeof WebSocket<"u"&&(_v=WebSocket);class Qr{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Np(this.connId),this.stats_=G1(n),this.connURL=Qr.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[wV]=z1,typeof location<"u"&&location.hostname&&SV.test(location.hostname)&&(o[EV]=TV),n&&(o[bV]=n),r&&(o[CV]=r),s&&(o[RE]=s),i&&(o[IV]=i),NV(e,PV,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ua.set("previous_websocket_failure",!0);try{let r;O8(),this.mySock=new _v(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Qr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&_v!==null&&!Qr.forceDisallow_}static previouslyFailed(){return Ua.isInMemoryStorage||Ua.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ua.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=If(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(X(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=tn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=_V(n,xZ);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(wZ))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Qr.responsesRequiredToBeHealthy=2;Qr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{static get ALL_TRANSPORTS(){return[Mc,Qr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Qr&&Qr.isAvailable();let r=n&&!Qr.previouslyFailed();if(e.webSocketOnly&&(n||lr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Qr];else{const s=this.transports_=[];for(const i of Gf.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Gf.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Gf.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bZ=6e4,EZ=5e3,TZ=10*1024,SZ=100*1024,Wx="t",GN="d",CZ="s",qN="r",IZ="e",WN="o",HN="a",KN="n",QN="p",PZ="h";class RZ{constructor(e,n,r,s,i,o,a,l,u,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Np("c:"+this.id+":"),this.transportManager_=new Gf(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Zh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>SZ?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>TZ?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Wx in e){const n=e[Wx];n===HN?this.upgradeIfSecondaryHealthy_():n===qN?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===WN&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Gd("t",e),r=Gd("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:QN,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:HN,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:KN,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Gd("t",e),r=Gd("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Gd(Wx,e);if(GN in e){const r=e[GN];if(n===PZ){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===KN){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===CZ?this.onConnectionShutdown_(r):n===qN?this.onReset_(r):n===IZ?PE("Server Error: "+r):n===WN?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):PE("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),z1!==r&&lr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Zh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(bZ))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(EZ))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:QN,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ua.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e){this.allowedEvents_=e,this.listeners_={},X(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){X(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv extends FV{static getInstance(){return new xv}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!TS()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return X(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=32,XN=768;class ot{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Ke(){return new ot("")}function ke(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function zo(t){return t.pieces_.length-t.pieceNum_}function st(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ot(t.pieces_,e)}function VV(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function AZ(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function UV(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function $V(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ot(e,0)}function Ht(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ot)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new ot(n,0)}function Ae(t){return t.pieceNum_>=t.pieces_.length}function Er(t,e){const n=ke(t),r=ke(e);if(n===null)return e;if(n===r)return Er(st(t),st(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function BV(t,e){if(zo(t)!==zo(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Xr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(zo(t)>zo(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class NZ{constructor(e,n){this.errorPrefix_=n,this.parts_=UV(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=p_(this.parts_[r]);zV(this)}}function kZ(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=p_(e),zV(t)}function OZ(t){const e=t.parts_.pop();t.byteLength_-=p_(e),t.parts_.length>0&&(t.byteLength_-=1)}function zV(t){if(t.byteLength_>XN)throw new Error(t.errorPrefix_+"has a key path longer than "+XN+" bytes ("+t.byteLength_+").");if(t.parts_.length>YN)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+YN+") or object contains a cycle "+Pa(t))}function Pa(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1 extends FV{static getInstance(){return new W1}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return X(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd=1e3,DZ=60*5*1e3,JN=30*1e3,jZ=1.3,MZ=3e4,LZ="server_kill",ZN=3;class ci extends LV{constructor(e,n,r,s,i,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=ci.nextPersistentConnectionId_++,this.log_=Np("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=qd,this.maxReconnectDelay_=DZ,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");W1.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&xv.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(tn(i)),X(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new bS,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),X(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),X(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const l=a.d,u=a.s;ci.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Ti(e,"w")){const r=wu(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();lr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||V8(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=JN)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=F8(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),X(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+tn(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):PE("Unrecognized action received from server: "+tn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){X(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=qd,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=qd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>MZ&&(this.reconnectDelay_=qd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*jZ)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+ci.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},u=function(h){X(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,p]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?mn("getToken() completed but was canceled"):(mn("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=p&&p.token,a=new RZ(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,m=>{lr(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(LZ)},i))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&lr(h),l())}}}interrupt(e){mn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){mn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],$b(this.interruptReasons_)&&(this.reconnectDelay_=qd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>B1(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new ot(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){mn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=ZN&&(this.reconnectDelay_=JN,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){mn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=ZN&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+mV.replace(/\./g,"-")]=1,TS()?e["framework.cordova"]=1:CM()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=xv.getInstance().currentlyOnline();return $b(this.interruptReasons_)&&e}}ci.nextPersistentConnectionId_=0;ci.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Oe(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H_=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Oe(Uu,e),s=new Oe(Uu,n);return this.compare(r,s)!==0}minPost(){return Oe.MIN}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lm;class GV extends H_{static get __EMPTY_NODE(){return Lm}static set __EMPTY_NODE(e){Lm=e}compare(e,n){return ld(e.name,n.name)}isDefinedOn(e){throw Xu("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Oe.MIN}maxPost(){return new Oe(vl,Lm)}makePost(e,n){return X(typeof e=="string","KeyIndex indexValue must always be a string."),new Oe(e,Lm)}toString(){return".key"}}const Xc=new GV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Wt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Wt.RED,this.left=s??Gn.EMPTY_NODE,this.right=i??Gn.EMPTY_NODE}copy(e,n,r,s,i){return new Wt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Gn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Gn.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Wt.RED=!0;Wt.BLACK=!1;class FZ{copy(e,n,r,s,i){return this}insert(e,n,r){return new Wt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Gn{constructor(e,n=Gn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Gn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Wt.BLACK,null,null))}remove(e){return new Gn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Wt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Fm(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Fm(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Fm(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Fm(this.root_,null,this.comparator_,!0,e)}}Gn.EMPTY_NODE=new FZ;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VZ(t,e){return ld(t.name,e.name)}function H1(t,e){return ld(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AE;function UZ(t){AE=t}const qV=function(t){return typeof t=="number"?"number:"+xV(t):"string:"+t},WV=function(t){if(t.isLeafNode()){const e=t.val();X(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ti(e,".sv"),"Priority must be a string or number.")}else X(t===AE||t.isEmpty(),"priority of unexpected type.");X(t===AE||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ek;class Bt{static set __childrenNodeConstructor(e){ek=e}static get __childrenNodeConstructor(){return ek}constructor(e,n=Bt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,X(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),WV(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Bt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Bt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ae(e)?this:ke(e)===".priority"?this.priorityNode_:Bt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Bt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=ke(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(X(r!==".priority"||zo(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Bt.__childrenNodeConstructor.EMPTY_NODE.updateChild(st(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+qV(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=xV(this.value_):e+=this.value_,this.lazyHash_=yV(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Bt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Bt.__childrenNodeConstructor?-1:(X(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Bt.VALUE_TYPE_ORDER.indexOf(n),i=Bt.VALUE_TYPE_ORDER.indexOf(r);return X(s>=0,"Unknown leaf type: "+n),X(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Bt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HV,KV;function $Z(t){HV=t}function BZ(t){KV=t}class zZ extends H_{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?ld(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Oe.MIN}maxPost(){return new Oe(vl,new Bt("[PRIORITY-POST]",KV))}makePost(e,n){const r=HV(e);return new Oe(n,new Bt("[PRIORITY-POST]",r))}toString(){return".priority"}}const vn=new zZ;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GZ=Math.log(2);class qZ{constructor(e){const n=i=>parseInt(Math.log(i)/GZ,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const wv=function(t,e,n,r){t.sort(e);const s=function(l,u){const d=u-l;let h,p;if(d===0)return null;if(d===1)return h=t[l],p=n?n(h):h,new Wt(p,h.node,Wt.BLACK,null,null);{const m=parseInt(d/2,10)+l,y=s(l,m),_=s(m+1,u);return h=t[m],p=n?n(h):h,new Wt(p,h.node,Wt.BLACK,y,_)}},i=function(l){let u=null,d=null,h=t.length;const p=function(y,_){const b=h-y,x=h;h-=y;const E=s(b+1,x),w=t[b],I=n?n(w):w;m(new Wt(I,w.node,_,null,E))},m=function(y){u?(u.left=y,u=y):(d=y,u=y)};for(let y=0;y<l.count;++y){const _=l.nextBitIsOne(),b=Math.pow(2,l.count-(y+1));_?p(b,Wt.BLACK):(p(b,Wt.BLACK),p(b,Wt.RED))}return d},o=new qZ(t.length),a=i(o);return new Gn(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hx;const nc={};class ii{static get Default(){return X(nc&&vn,"ChildrenNode.ts has not been loaded"),Hx=Hx||new ii({".priority":nc},{".priority":vn}),Hx}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=wu(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Gn?n:null}hasIndex(e){return Ti(this.indexSet_,e.toString())}addIndex(e,n){X(e!==Xc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Oe.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=wv(r,e.getCompare()):a=nc;const l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;const d=Object.assign({},this.indexes_);return d[l]=a,new ii(d,u)}addToIndexes(e,n){const r=$y(this.indexes_,(s,i)=>{const o=wu(this.indexSet_,i);if(X(o,"Missing index implementation for "+i),s===nc)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Oe.Wrap);let u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),wv(a,o.getCompare())}else return nc;else{const a=n.get(e.name);let l=s;return a&&(l=l.remove(new Oe(e.name,a))),l.insert(e,e.node)}});return new ii(r,this.indexSet_)}removeFromIndexes(e,n){const r=$y(this.indexes_,s=>{if(s===nc)return s;{const i=n.get(e.name);return i?s.remove(new Oe(e.name,i)):s}});return new ii(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wd;class $e{static get EMPTY_NODE(){return Wd||(Wd=new $e(new Gn(H1),null,ii.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&WV(this.priorityNode_),this.children_.isEmpty()&&X(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Wd}updatePriority(e){return this.children_.isEmpty()?this:new $e(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Wd:n}}getChild(e){const n=ke(e);return n===null?this:this.getImmediateChild(n).getChild(st(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(X(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Oe(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Wd:this.priorityNode_;return new $e(s,o,i)}}updateChild(e,n){const r=ke(e);if(r===null)return n;{X(ke(e)!==".priority"||zo(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(st(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(vn,(o,a)=>{n[o]=a.val(e),r++,i&&$e.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+qV(this.getPriority().val())+":"),this.forEachChild(vn,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":yV(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Oe(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Oe(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Oe(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Oe.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Oe.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Op?-1:0}withIndex(e){if(e===Xc||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new $e(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Xc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(vn),s=n.getIterator(vn);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Xc?null:this.indexMap_.get(e.toString())}}$e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class WZ extends $e{constructor(){super(new Gn(H1),$e.EMPTY_NODE,ii.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return $e.EMPTY_NODE}isEmpty(){return!1}}const Op=new WZ;Object.defineProperties(Oe,{MIN:{value:new Oe(Uu,$e.EMPTY_NODE)},MAX:{value:new Oe(vl,Op)}});GV.__EMPTY_NODE=$e.EMPTY_NODE;Bt.__childrenNodeConstructor=$e;UZ(Op);BZ(Op);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HZ=!0;function gn(t,e=null){if(t===null)return $e.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),X(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Bt(n,gn(e))}if(!(t instanceof Array)&&HZ){const n=[];let r=!1;if(Nr(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=gn(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Oe(o,l)))}}),n.length===0)return $e.EMPTY_NODE;const i=wv(n,VZ,o=>o.name,H1);if(r){const o=wv(n,vn.getCompare());return new $e(i,gn(e),new ii({".priority":o},{".priority":vn}))}else return new $e(i,gn(e),ii.Default)}else{let n=$e.EMPTY_NODE;return Nr(t,(r,s)=>{if(Ti(t,r)&&r.substring(0,1)!=="."){const i=gn(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(gn(e))}}$Z(gn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KZ extends H_{constructor(e){super(),this.indexPath_=e,X(!Ae(e)&&ke(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?ld(e.name,n.name):i}makePost(e,n){const r=gn(e),s=$e.EMPTY_NODE.updateChild(this.indexPath_,r);return new Oe(n,s)}maxPost(){const e=$e.EMPTY_NODE.updateChild(this.indexPath_,Op);return new Oe(vl,e)}toString(){return UV(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QZ extends H_{compare(e,n){const r=e.node.compareTo(n.node);return r===0?ld(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Oe.MIN}maxPost(){return Oe.MAX}makePost(e,n){const r=gn(e);return new Oe(n,r)}toString(){return".value"}}const YZ=new QZ;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XZ(t){return{type:"value",snapshotNode:t}}function JZ(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ZZ(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function tk(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function eee(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=vn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return X(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return X(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Uu}hasEnd(){return this.endSet_}getIndexEndValue(){return X(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return X(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:vl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return X(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===vn}copy(){const e=new K1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function nk(t){const e={};if(t.isDefault())return e;let n;if(t.index_===vn?n="$priority":t.index_===YZ?n="$value":t.index_===Xc?n="$key":(X(t.index_ instanceof KZ,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=tn(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=tn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+tn(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=tn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+tn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function rk(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==vn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv extends LV{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(X(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Np("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=bv.getListenId_(e,r),a={};this.listens_[o]=a;const l=nk(e._queryParams);this.restRequest_(i+".json",l,(u,d)=>{let h=d;if(u===404&&(h=null,u=null),u===null&&this.onDataUpdate_(i,h,!1,r),wu(this.listens_,o)===a){let p;u?u===401?p="permission_denied":p="rest_error:"+u:p="ok",s(p,null)}})}unlisten(e,n){const r=bv.getListenId_(e,n);delete this.listens_[r]}get(e){const n=nk(e._queryParams),r=e._path.toString(),s=new bS;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ju(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=If(a.responseText)}catch{lr("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&lr("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tee{constructor(){this.rootNode_=$e.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(){return{value:null,children:new Map}}function QV(t,e,n){if(Ae(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=ke(e);t.children.has(r)||t.children.set(r,Ev());const s=t.children.get(r);e=st(e),QV(s,e,n)}}function NE(t,e,n){t.value!==null?n(e,t.value):nee(t,(r,s)=>{const i=new ot(e.toString()+"/"+r);NE(s,i,n)})}function nee(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ree{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Nr(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=10*1e3,see=30*1e3,iee=5*60*1e3;class oee{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new ree(e);const r=sk+(see-sk)*Math.random();Zh(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Nr(e,(s,i)=>{i>0&&Ti(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Zh(this.reportStats_.bind(this),Math.floor(Math.random()*2*iee))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ss;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ss||(Ss={}));function YV(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function XV(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function JV(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Ss.ACK_USER_WRITE,this.source=YV()}operationForChild(e){if(Ae(this.path)){if(this.affectedTree.value!=null)return X(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ot(e));return new Tv(Ke(),n,this.revert)}}else return X(ke(this.path)===e,"operationForChild called for unrelated child."),new Tv(st(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Ss.OVERWRITE}operationForChild(e){return Ae(this.path)?new _l(this.source,Ke(),this.snap.getImmediateChild(e)):new _l(this.source,st(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Ss.MERGE}operationForChild(e){if(Ae(this.path)){const n=this.children.subtree(new ot(e));return n.isEmpty()?null:n.value?new _l(this.source,Ke(),n.value):new qf(this.source,Ke(),n)}else return X(ke(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new qf(this.source,st(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ae(e))return this.isFullyInitialized()&&!this.filtered_;const n=ke(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function aee(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(eee(o.childName,o.snapshotNode))}),Hd(t,s,"child_removed",e,r,n),Hd(t,s,"child_added",e,r,n),Hd(t,s,"child_moved",i,r,n),Hd(t,s,"child_changed",e,r,n),Hd(t,s,"value",e,r,n),s}function Hd(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,l)=>cee(t,a,l)),o.forEach(a=>{const l=lee(t,a,i);s.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function lee(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function cee(t,e,n){if(e.childName==null||n.childName==null)throw Xu("Should only compare child_ events.");const r=new Oe(e.childName,e.snapshotNode),s=new Oe(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZV(t,e){return{eventCache:t,serverCache:e}}function ef(t,e,n,r){return ZV(new Q1(e,n,r),t.serverCache)}function e5(t,e,n,r){return ZV(t.eventCache,new Q1(e,n,r))}function kE(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function xl(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kx;const uee=()=>(Kx||(Kx=new Gn(YJ)),Kx);class rt{static fromObject(e){let n=new rt(null);return Nr(e,(r,s)=>{n=n.set(new ot(r),s)}),n}constructor(e,n=uee()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ke(),value:this.value};if(Ae(e))return null;{const r=ke(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(st(e),n);return i!=null?{path:Ht(new ot(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ae(e))return this;{const n=ke(e),r=this.children.get(n);return r!==null?r.subtree(st(e)):new rt(null)}}set(e,n){if(Ae(e))return new rt(n,this.children);{const r=ke(e),i=(this.children.get(r)||new rt(null)).set(st(e),n),o=this.children.insert(r,i);return new rt(this.value,o)}}remove(e){if(Ae(e))return this.children.isEmpty()?new rt(null):new rt(null,this.children);{const n=ke(e),r=this.children.get(n);if(r){const s=r.remove(st(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new rt(null):new rt(this.value,i)}else return this}}get(e){if(Ae(e))return this.value;{const n=ke(e),r=this.children.get(n);return r?r.get(st(e)):null}}setTree(e,n){if(Ae(e))return n;{const r=ke(e),i=(this.children.get(r)||new rt(null)).setTree(st(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new rt(this.value,o)}}fold(e){return this.fold_(Ke(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Ht(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Ke(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Ae(e))return null;{const i=ke(e),o=this.children.get(i);return o?o.findOnPath_(st(e),Ht(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ke(),n)}foreachOnPath_(e,n,r){if(Ae(e))return this;{this.value&&r(n,this.value);const s=ke(e),i=this.children.get(s);return i?i.foreachOnPath_(st(e),Ht(n,s),r):new rt(null)}}foreach(e){this.foreach_(Ke(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Ht(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.writeTree_=e}static empty(){return new ts(new rt(null))}}function tf(t,e,n){if(Ae(e))return new ts(new rt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Er(s,e);return i=i.updateChild(o,n),new ts(t.writeTree_.set(s,i))}else{const s=new rt(n),i=t.writeTree_.setTree(e,s);return new ts(i)}}}function ik(t,e,n){let r=t;return Nr(n,(s,i)=>{r=tf(r,Ht(e,s),i)}),r}function ok(t,e){if(Ae(e))return ts.empty();{const n=t.writeTree_.setTree(e,new rt(null));return new ts(n)}}function OE(t,e){return Ol(t,e)!=null}function Ol(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Er(n.path,e)):null}function ak(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(vn,(r,s)=>{e.push(new Oe(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Oe(r,s.value))}),e}function ko(t,e){if(Ae(e))return t;{const n=Ol(t,e);return n!=null?new ts(new rt(n)):new ts(t.writeTree_.subtree(e))}}function DE(t){return t.writeTree_.isEmpty()}function $u(t,e){return t5(Ke(),t.writeTree_,e)}function t5(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(X(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=t5(Ht(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Ht(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n5(t,e){return a5(e,t)}function dee(t,e,n,r,s){X(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=tf(t.visibleWrites,e,n)),t.lastWriteId=r}function hee(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function fee(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);X(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&pee(a,r.path)?s=!1:Xr(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return mee(t),!0;if(r.snap)t.visibleWrites=ok(t.visibleWrites,r.path);else{const a=r.children;Nr(a,l=>{t.visibleWrites=ok(t.visibleWrites,Ht(r.path,l))})}return!0}else return!1}function pee(t,e){if(t.snap)return Xr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Xr(Ht(t.path,n),e))return!0;return!1}function mee(t){t.visibleWrites=r5(t.allWrites,gee,Ke()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function gee(t){return t.visible}function r5(t,e,n){let r=ts.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)Xr(n,o)?(a=Er(n,o),r=tf(r,a,i.snap)):Xr(o,n)&&(a=Er(o,n),r=tf(r,Ke(),i.snap.getChild(a)));else if(i.children){if(Xr(n,o))a=Er(n,o),r=ik(r,a,i.children);else if(Xr(o,n))if(a=Er(o,n),Ae(a))r=ik(r,Ke(),i.children);else{const l=wu(i.children,ke(a));if(l){const u=l.getChild(st(a));r=tf(r,Ke(),u)}}}else throw Xu("WriteRecord should have .snap or .children")}}return r}function s5(t,e,n,r,s){if(!r&&!s){const i=Ol(t.visibleWrites,e);if(i!=null)return i;{const o=ko(t.visibleWrites,e);if(DE(o))return n;if(n==null&&!OE(o,Ke()))return null;{const a=n||$e.EMPTY_NODE;return $u(o,a)}}}else{const i=ko(t.visibleWrites,e);if(!s&&DE(i))return n;if(!s&&n==null&&!OE(i,Ke()))return null;{const o=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(Xr(u.path,e)||Xr(e,u.path))},a=r5(t.allWrites,o,e),l=n||$e.EMPTY_NODE;return $u(a,l)}}}function yee(t,e,n){let r=$e.EMPTY_NODE;const s=Ol(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(vn,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=ko(t.visibleWrites,e);return n.forEachChild(vn,(o,a)=>{const l=$u(ko(i,new ot(o)),a);r=r.updateImmediateChild(o,l)}),ak(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=ko(t.visibleWrites,e);return ak(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function vee(t,e,n,r,s){X(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Ht(e,n);if(OE(t.visibleWrites,i))return null;{const o=ko(t.visibleWrites,i);return DE(o)?s.getChild(n):$u(o,s.getChild(n))}}function _ee(t,e,n,r){const s=Ht(e,n),i=Ol(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=ko(t.visibleWrites,s);return $u(o,r.getNode().getImmediateChild(n))}else return null}function xee(t,e){return Ol(t.visibleWrites,e)}function wee(t,e,n,r,s,i,o){let a;const l=ko(t.visibleWrites,e),u=Ol(l,Ke());if(u!=null)a=u;else if(n!=null)a=$u(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],h=o.getCompare(),p=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let m=p.getNext();for(;m&&d.length<s;)h(m,r)!==0&&d.push(m),m=p.getNext();return d}else return[]}function bee(){return{visibleWrites:ts.empty(),allWrites:[],lastWriteId:-1}}function jE(t,e,n,r){return s5(t.writeTree,t.treePath,e,n,r)}function i5(t,e){return yee(t.writeTree,t.treePath,e)}function lk(t,e,n,r){return vee(t.writeTree,t.treePath,e,n,r)}function Sv(t,e){return xee(t.writeTree,Ht(t.treePath,e))}function Eee(t,e,n,r,s,i){return wee(t.writeTree,t.treePath,e,n,r,s,i)}function Y1(t,e,n){return _ee(t.writeTree,t.treePath,e,n)}function o5(t,e){return a5(Ht(t.treePath,e),t.writeTree)}function a5(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tee{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;X(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),X(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,tk(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,ZZ(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,JZ(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,tk(r,e.snapshotNode,s.oldSnap));else throw Xu("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class See{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const l5=new See;class X1{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Q1(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Y1(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:xl(this.viewCache_),i=Eee(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}function Cee(t,e){X(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),X(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Iee(t,e,n,r,s){const i=new Tee;let o,a;if(n.type===Ss.OVERWRITE){const u=n;u.source.fromUser?o=ME(t,e,u.path,u.snap,r,s,i):(X(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Ae(u.path),o=Cv(t,e,u.path,u.snap,r,s,a,i))}else if(n.type===Ss.MERGE){const u=n;u.source.fromUser?o=Ree(t,e,u.path,u.children,r,s,i):(X(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=LE(t,e,u.path,u.children,r,s,a,i))}else if(n.type===Ss.ACK_USER_WRITE){const u=n;u.revert?o=kee(t,e,u.path,r,s,i):o=Aee(t,e,u.path,u.affectedTree,r,s,i)}else if(n.type===Ss.LISTEN_COMPLETE)o=Nee(t,e,n.path,r,i);else throw Xu("Unknown operation type: "+n.type);const l=i.getChanges();return Pee(e,o,l),{viewCache:o,changes:l}}function Pee(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=kE(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(XZ(kE(e)))}}function c5(t,e,n,r,s,i){const o=e.eventCache;if(Sv(r,n)!=null)return e;{let a,l;if(Ae(n))if(X(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=xl(e),d=u instanceof $e?u:$e.EMPTY_NODE,h=i5(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),h,i)}else{const u=jE(r,xl(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=ke(n);if(u===".priority"){X(zo(n)===1,"Can't have a priority with additional path components");const d=o.getNode();l=e.serverCache.getNode();const h=lk(r,n,d,l);h!=null?a=t.filter.updatePriority(d,h):a=o.getNode()}else{const d=st(n);let h;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();const p=lk(r,n,o.getNode(),l);p!=null?h=o.getNode().getImmediateChild(u).updateChild(d,p):h=o.getNode().getImmediateChild(u)}else h=Y1(r,u,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),u,h,d,s,i):a=o.getNode()}}return ef(e,a,o.isFullyInitialized()||Ae(n),t.filter.filtersNodes())}}function Cv(t,e,n,r,s,i,o,a){const l=e.serverCache;let u;const d=o?t.filter:t.filter.getIndexedFilter();if(Ae(n))u=d.updateFullNode(l.getNode(),r,null);else if(d.filtersNodes()&&!l.isFiltered()){const m=l.getNode().updateChild(n,r);u=d.updateFullNode(l.getNode(),m,null)}else{const m=ke(n);if(!l.isCompleteForPath(n)&&zo(n)>1)return e;const y=st(n),b=l.getNode().getImmediateChild(m).updateChild(y,r);m===".priority"?u=d.updatePriority(l.getNode(),b):u=d.updateChild(l.getNode(),m,b,y,l5,null)}const h=e5(e,u,l.isFullyInitialized()||Ae(n),d.filtersNodes()),p=new X1(s,h,i);return c5(t,h,n,s,p,a)}function ME(t,e,n,r,s,i,o){const a=e.eventCache;let l,u;const d=new X1(s,e,i);if(Ae(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=ef(e,u,!0,t.filter.filtersNodes());else{const h=ke(n);if(h===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),l=ef(e,u,a.isFullyInitialized(),a.isFiltered());else{const p=st(n),m=a.getNode().getImmediateChild(h);let y;if(Ae(p))y=r;else{const _=d.getCompleteChild(h);_!=null?VV(p)===".priority"&&_.getChild($V(p)).isEmpty()?y=_:y=_.updateChild(p,r):y=$e.EMPTY_NODE}if(m.equals(y))l=e;else{const _=t.filter.updateChild(a.getNode(),h,y,p,d,o);l=ef(e,_,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function ck(t,e){return t.eventCache.isCompleteForChild(e)}function Ree(t,e,n,r,s,i,o){let a=e;return r.foreach((l,u)=>{const d=Ht(n,l);ck(e,ke(d))&&(a=ME(t,a,d,u,s,i,o))}),r.foreach((l,u)=>{const d=Ht(n,l);ck(e,ke(d))||(a=ME(t,a,d,u,s,i,o))}),a}function uk(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function LE(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;Ae(n)?u=r:u=new rt(null).setTree(n,r);const d=e.serverCache.getNode();return u.children.inorderTraversal((h,p)=>{if(d.hasChild(h)){const m=e.serverCache.getNode().getImmediateChild(h),y=uk(t,m,p);l=Cv(t,l,new ot(h),y,s,i,o,a)}}),u.children.inorderTraversal((h,p)=>{const m=!e.serverCache.isCompleteForChild(h)&&p.value===null;if(!d.hasChild(h)&&!m){const y=e.serverCache.getNode().getImmediateChild(h),_=uk(t,y,p);l=Cv(t,l,new ot(h),_,s,i,o,a)}}),l}function Aee(t,e,n,r,s,i,o){if(Sv(s,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Ae(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Cv(t,e,n,l.getNode().getChild(n),s,i,a,o);if(Ae(n)){let u=new rt(null);return l.getNode().forEachChild(Xc,(d,h)=>{u=u.set(new ot(d),h)}),LE(t,e,n,u,s,i,a,o)}else return e}else{let u=new rt(null);return r.foreach((d,h)=>{const p=Ht(n,d);l.isCompleteForPath(p)&&(u=u.set(d,l.getNode().getChild(p)))}),LE(t,e,n,u,s,i,a,o)}}function Nee(t,e,n,r,s){const i=e.serverCache,o=e5(e,i.getNode(),i.isFullyInitialized()||Ae(n),i.isFiltered());return c5(t,o,n,r,l5,s)}function kee(t,e,n,r,s,i){let o;if(Sv(r,n)!=null)return e;{const a=new X1(r,e,s),l=e.eventCache.getNode();let u;if(Ae(n)||ke(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=jE(r,xl(e));else{const h=e.serverCache.getNode();X(h instanceof $e,"serverChildren would be complete if leaf node"),d=i5(r,h)}d=d,u=t.filter.updateFullNode(l,d,i)}else{const d=ke(n);let h=Y1(r,d,e.serverCache);h==null&&e.serverCache.isCompleteForChild(d)&&(h=l.getImmediateChild(d)),h!=null?u=t.filter.updateChild(l,d,h,st(n),a,i):e.eventCache.getNode().hasChild(d)?u=t.filter.updateChild(l,d,$e.EMPTY_NODE,st(n),a,i):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=jE(r,xl(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||Sv(r,Ke())!=null,ef(e,u,o,t.filter.filtersNodes())}}function Oee(t,e){const n=xl(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ae(e)&&!n.getImmediateChild(ke(e)).isEmpty())?n.getChild(e):null}function dk(t,e,n,r){e.type===Ss.MERGE&&e.source.queryId!==null&&(X(xl(t.viewCache_),"We should always have a full cache before handling merges"),X(kE(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=Iee(t.processor_,s,e,n,r);return Cee(t.processor_,i.viewCache),X(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,Dee(t,i.changes,i.viewCache.eventCache.getNode())}function Dee(t,e,n,r){const s=t.eventRegistrations_;return aee(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hk;function jee(t){X(!hk,"__referenceConstructor has already been defined"),hk=t}function J1(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return X(i!=null,"SyncTree gave us an op for an invalid query."),dk(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(dk(o,e,n,r));return i}}function Z1(t,e){let n=null;for(const r of t.views.values())n=n||Oee(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fk;function Mee(t){X(!fk,"__referenceConstructor has already been defined"),fk=t}class pk{constructor(e){this.listenProvider_=e,this.syncPointTree_=new rt(null),this.pendingWriteTree_=bee(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Lee(t,e,n,r,s){return dee(t.pendingWriteTree_,e,n,r,s),s?Q_(t,new _l(YV(),e,n)):[]}function Lc(t,e,n=!1){const r=hee(t.pendingWriteTree_,e);if(fee(t.pendingWriteTree_,e)){let i=new rt(null);return r.snap!=null?i=i.set(Ke(),!0):Nr(r.children,o=>{i=i.set(new ot(o),!0)}),Q_(t,new Tv(r.path,i,n))}else return[]}function K_(t,e,n){return Q_(t,new _l(XV(),e,n))}function Fee(t,e,n){const r=rt.fromObject(n);return Q_(t,new qf(XV(),e,r))}function Vee(t,e,n,r){const s=f5(t,r);if(s!=null){const i=p5(s),o=i.path,a=i.queryId,l=Er(o,e),u=new _l(JV(a),l,n);return m5(t,o,u)}else return[]}function Uee(t,e,n,r){const s=f5(t,r);if(s){const i=p5(s),o=i.path,a=i.queryId,l=Er(o,e),u=rt.fromObject(n),d=new qf(JV(a),l,u);return m5(t,o,d)}else return[]}function u5(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Er(o,e),u=Z1(a,l);if(u)return u});return s5(s,e,i,n,!0)}function Q_(t,e){return d5(e,t.syncPointTree_,null,n5(t.pendingWriteTree_,Ke()))}function d5(t,e,n,r){if(Ae(t.path))return h5(t,e,n,r);{const s=e.get(Ke());n==null&&s!=null&&(n=Z1(s,Ke()));let i=[];const o=ke(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const u=n?n.getImmediateChild(o):null,d=o5(r,o);i=i.concat(d5(a,l,u,d))}return s&&(i=i.concat(J1(s,t,r,n))),i}}function h5(t,e,n,r){const s=e.get(Ke());n==null&&s!=null&&(n=Z1(s,Ke()));let i=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,u=o5(r,o),d=t.operationForChild(o);d&&(i=i.concat(h5(d,a,l,u)))}),s&&(i=i.concat(J1(s,t,r,n))),i}function f5(t,e){return t.tagToQueryMap.get(e)}function p5(t){const e=t.indexOf("$");return X(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ot(t.substr(0,e))}}function m5(t,e,n){const r=t.syncPointTree_.get(e);X(r,"Missing sync point for query tag that we're tracking");const s=n5(t.pendingWriteTree_,e);return J1(r,n,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new eC(n)}node(){return this.node_}}class tC{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ht(this.path_,e);return new tC(this.syncTree_,n)}node(){return u5(this.syncTree_,this.path_)}}const $ee=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},mk=function(t,e,n){if(!t||typeof t!="object")return t;if(X(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Bee(t[".sv"],e,n);if(typeof t[".sv"]=="object")return zee(t[".sv"],e);X(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Bee=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:X(!1,"Unexpected server value: "+t)}},zee=function(t,e,n){t.hasOwnProperty("increment")||X(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&X(!1,"Unexpected increment value: "+r);const s=e.node();if(X(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},Gee=function(t,e,n,r){return nC(e,new tC(n,t),r)},qee=function(t,e,n){return nC(t,new eC(e),n)};function nC(t,e,n){const r=t.getPriority().val(),s=mk(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=mk(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new Bt(a,gn(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Bt(s))),o.forEachChild(vn,(a,l)=>{const u=nC(l,e.getImmediateChild(a),n);u!==l&&(i=i.updateImmediateChild(a,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function sC(t,e){let n=e instanceof ot?e:new ot(e),r=t,s=ke(n);for(;s!==null;){const i=wu(r.node.children,s)||{children:{},childCount:0};r=new rC(s,r,i),n=st(n),s=ke(n)}return r}function cd(t){return t.node.value}function g5(t,e){t.node.value=e,FE(t)}function y5(t){return t.node.childCount>0}function Wee(t){return cd(t)===void 0&&!y5(t)}function Y_(t,e){Nr(t.node.children,(n,r)=>{e(new rC(n,t,r))})}function v5(t,e,n,r){n&&e(t),Y_(t,s=>{v5(s,e,!0)})}function Hee(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Dp(t){return new ot(t.parent===null?t.name:Dp(t.parent)+"/"+t.name)}function FE(t){t.parent!==null&&Kee(t.parent,t.name,t)}function Kee(t,e,n){const r=Wee(n),s=Ti(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,FE(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,FE(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qee=/[\[\].#$\/\u0000-\u001F\u007F]/,Yee=/[\[\].#$\u0000-\u001F\u007F]/,Qx=10*1024*1024,_5=function(t){return typeof t=="string"&&t.length!==0&&!Qee.test(t)},Xee=function(t){return typeof t=="string"&&t.length!==0&&!Yee.test(t)},Jee=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Xee(t)},x5=function(t,e,n){const r=n instanceof ot?new NZ(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Pa(r));if(typeof e=="function")throw new Error(t+"contains a function "+Pa(r)+" with contents = "+e.toString());if(vV(e))throw new Error(t+"contains "+e.toString()+" "+Pa(r));if(typeof e=="string"&&e.length>Qx/3&&p_(e)>Qx)throw new Error(t+"contains a string greater than "+Qx+" utf8 bytes "+Pa(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Nr(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!_5(o)))throw new Error(t+" contains an invalid key ("+o+") "+Pa(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);kZ(r,o),x5(t,a,r),OZ(r)}),s&&i)throw new Error(t+' contains ".value" child '+Pa(r)+" in addition to actual children.")}},Zee=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!_5(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Jee(n))throw new Error(G8(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ete{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function tte(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!BV(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function Dl(t,e,n){tte(t,n),nte(t,r=>Xr(r,e)||Xr(e,r))}function nte(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(rte(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function rte(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Jh&&mn("event: "+n.toString()),kp(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ste="repo_interrupt",ite=25;class ote{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ete,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ev(),this.transactionQueueTree_=new rC,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ate(t,e,n){if(t.stats_=G1(t.repoInfo_),t.forceRestClient_||nZ())t.server_=new bv(t.repoInfo_,(r,s,i,o)=>{gk(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>yk(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{tn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new ci(t.repoInfo_,e,(r,s,i,o)=>{gk(t,r,s,i,o)},r=>{yk(t,r)},r=>{cte(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=aZ(t.repoInfo_,()=>new oee(t.stats_,t.server_)),t.infoData_=new tee,t.infoSyncTree_=new pk({startListening:(r,s,i,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=K_(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),iC(t,"connected",!1),t.serverSyncTree_=new pk({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,l)=>{const u=o(a,l);Dl(t.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function lte(t){const n=t.infoData_.getNode(new ot(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function w5(t){return $ee({timestamp:lte(t)})}function gk(t,e,n,r,s){t.dataUpdateCount++;const i=new ot(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const l=$y(n,u=>gn(u));o=Uee(t.serverSyncTree_,i,l,s)}else{const l=gn(n);o=Vee(t.serverSyncTree_,i,l,s)}else if(r){const l=$y(n,u=>gn(u));o=Fee(t.serverSyncTree_,i,l)}else{const l=gn(n);o=K_(t.serverSyncTree_,i,l)}let a=i;o.length>0&&(a=aC(t,i)),Dl(t.eventQueue_,a,o)}function yk(t,e){iC(t,"connected",e),e===!1&&dte(t)}function cte(t,e){Nr(e,(n,r)=>{iC(t,n,r)})}function iC(t,e,n){const r=new ot("/.info/"+e),s=gn(n);t.infoData_.updateSnapshot(r,s);const i=K_(t.infoSyncTree_,r,s);Dl(t.eventQueue_,r,i)}function ute(t){return t.nextWriteId_++}function dte(t){b5(t,"onDisconnectEvents");const e=w5(t),n=Ev();NE(t.onDisconnect_,Ke(),(s,i)=>{const o=Gee(s,i,t.serverSyncTree_,e);QV(n,s,o)});let r=[];NE(n,Ke(),(s,i)=>{r=r.concat(K_(t.serverSyncTree_,s,i));const o=mte(t,s);aC(t,o)}),t.onDisconnect_=Ev(),Dl(t.eventQueue_,Ke(),r)}function hte(t){t.persistentConnection_&&t.persistentConnection_.interrupt(ste)}function b5(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),mn(n,...e)}function E5(t,e,n){return u5(t.serverSyncTree_,e,n)||$e.EMPTY_NODE}function oC(t,e=t.transactionQueueTree_){if(e||X_(t,e),cd(e)){const n=S5(t,e);X(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&fte(t,Dp(e),n)}else y5(e)&&Y_(e,n=>{oC(t,n)})}function fte(t,e,n){const r=n.map(u=>u.currentWriteId),s=E5(t,e,r);let i=s;const o=s.hash();for(let u=0;u<n.length;u++){const d=n[u];X(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=Er(e,d.path);i=i.updateChild(h,d.currentOutputSnapshotRaw)}const a=i.val(!0),l=e;t.server_.put(l.toString(),a,u=>{b5(t,"transaction put response",{path:l.toString(),status:u});let d=[];if(u==="ok"){const h=[];for(let p=0;p<n.length;p++)n[p].status=2,d=d.concat(Lc(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&h.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();X_(t,sC(t.transactionQueueTree_,e)),oC(t,t.transactionQueueTree_),Dl(t.eventQueue_,e,d);for(let p=0;p<h.length;p++)kp(h[p])}else{if(u==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{lr("transaction at "+l.toString()+" failed: "+u);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=u}aC(t,e)}},o)}function aC(t,e){const n=T5(t,e),r=Dp(n),s=S5(t,n);return pte(t,s,r),r}function pte(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],u=Er(n,l.path);let d=!1,h;if(X(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,h=l.abortReason,s=s.concat(Lc(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=ite)d=!0,h="maxretry",s=s.concat(Lc(t.serverSyncTree_,l.currentWriteId,!0));else{const p=E5(t,l.path,o);l.currentInputSnapshot=p;const m=e[a].update(p.val());if(m!==void 0){x5("transaction failed: Data returned ",m,l.path);let y=gn(m);typeof m=="object"&&m!=null&&Ti(m,".priority")||(y=y.updatePriority(p.getPriority()));const b=l.currentWriteId,x=w5(t),E=qee(y,p,x);l.currentOutputSnapshotRaw=y,l.currentOutputSnapshotResolved=E,l.currentWriteId=ute(t),o.splice(o.indexOf(b),1),s=s.concat(Lee(t.serverSyncTree_,l.path,E,l.currentWriteId,l.applyLocally)),s=s.concat(Lc(t.serverSyncTree_,b,!0))}else d=!0,h="nodata",s=s.concat(Lc(t.serverSyncTree_,l.currentWriteId,!0))}Dl(t.eventQueue_,n,s),s=[],d&&(e[a].status=2,function(p){setTimeout(p,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}X_(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)kp(r[a]);oC(t,t.transactionQueueTree_)}function T5(t,e){let n,r=t.transactionQueueTree_;for(n=ke(e);n!==null&&cd(r)===void 0;)r=sC(r,n),e=st(e),n=ke(e);return r}function S5(t,e){const n=[];return C5(t,e,n),n.sort((r,s)=>r.order-s.order),n}function C5(t,e,n){const r=cd(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Y_(e,s=>{C5(t,s,n)})}function X_(t,e){const n=cd(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,g5(e,n.length>0?n:void 0)}Y_(e,r=>{X_(t,r)})}function mte(t,e){const n=Dp(T5(t,e)),r=sC(t.transactionQueueTree_,e);return Hee(r,s=>{Yx(t,s)}),Yx(t,r),v5(r,s=>{Yx(t,s)}),n}function Yx(t,e){const n=cd(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(X(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(X(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Lc(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?g5(e,void 0):n.length=i+1,Dl(t.eventQueue_,Dp(e),s);for(let o=0;o<r.length;o++)kp(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gte(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function yte(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):lr(`Invalid query segment '${n}' in query '${t}'`)}return e}const vk=function(t,e){const n=vte(t),r=n.namespace;n.domain==="firebase.com"&&xi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&xi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||KJ();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new AV(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new ot(n.pathString)}},vte=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let d=t.indexOf("/");d===-1&&(d=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(d,h)),d<h&&(s=gte(t.substring(d,h)));const p=yte(t.substring(Math.min(t.length,h)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;const m=e.slice(0,u);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),i=r}"ns"in p&&(i=p.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Ae(this._path)?null:VV(this._path)}get ref(){return new ud(this._repo,this._path)}get _queryIdentifier(){const e=rk(this._queryParams),n=B1(e);return n==="{}"?"default":n}get _queryObject(){return rk(this._queryParams)}isEqual(e){if(e=yt(e),!(e instanceof lC))return!1;const n=this._repo===e._repo,r=BV(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+AZ(this._path)}}class ud extends lC{constructor(e,n){super(e,n,new K1,!1)}get parent(){const e=$V(this._path);return e===null?null:new ud(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}jee(ud);Mee(ud);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _te="FIREBASE_DATABASE_EMULATOR_HOST",VE={};let xte=!1;function wte(t,e,n,r){t.repoInfo_=new AV(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function bte(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||xi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),mn("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=vk(i,s),a=o.repoInfo,l;typeof process<"u"&&FN&&(l=FN[_te]),l?(i=`http://${l}?ns=${a.namespace}`,o=vk(i,s),a=o.repoInfo):o.repoInfo.secure;const u=new sZ(t.name,t.options,e);Zee("Invalid Firebase Database URL",o),Ae(o.path)||xi("Database URL must point to the root of a Firebase Database (not including a child path).");const d=Tte(a,t,u,new rZ(t,n));return new Ste(d,t)}function Ete(t,e){const n=VE[e];(!n||n[t.key]!==t)&&xi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),hte(t),delete n[t.key]}function Tte(t,e,n,r){let s=VE[e.name];s||(s={},VE[e.name]=s);let i=s[t.toURLString()];return i&&xi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new ote(t,xte,n,r),s[t.toURLString()]=i,i}class Ste{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(ate(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ud(this._repo,Ke())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Ete(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&xi("Cannot call "+e+" on a deleted database.")}}function Cte(t=pp(),e){const n=Si(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=wS("database");r&&Ite(n,...r)}return n}function Ite(t,e,n,r={}){t=yt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&xi("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&xi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new Xg(Xg.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:ES(r.mockUserToken,t.app.options.projectId);i=new Xg(o)}wte(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pte(t){BJ(Xo),Rr(new dr("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return bte(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),_n(VN,UN,t),_n(VN,UN,"esm2017")}ci.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};ci.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Pte();const Rte={apiKey:void 0,authDomain:void 0,databaseURL:"https://undefined-default-rtdb.firebaseio.com",projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,measurementId:void 0};let wl;jR().length?wl=jR()[0]:wl=OM(Rte);const ui=m7(wl),rn=RY(wl);FJ(wl);Cte(wl);cJ(wl);rH(ui,aL).catch(t=>{console.error("Auth persistence error:",t)});let _k=!1;const I5=async()=>{if(_k)return!0;try{const t=Xn(rn,"_test","connection");return await Pp(t,{timestamp:new Date().toISOString()}),_k=!0,console.log("Firestore connection established"),!0}catch(t){throw console.error("Error connecting to Firestore:",t),t}},cC=(t,e)=>{throw console.error(`Error in ${e}:`,t),t.code==="unavailable"?new Error("Unable to connect to the server. Please check your internet connection."):new Error(t.message||"An error occurred while accessing the database")},Iv=async(t,e)=>{try{await I5();const n=Xn(rn,"users",t);(await Ip(n)).exists()?await Rp(n,{...e,updatedAt:Qc()}):await Pp(n,{...e,id:t,createdAt:Qc(),updatedAt:Qc(),isPremium:!1,role:e.role||"Learner",level:e.level||1,xp:e.xp||{current:0,nextLevel:1e3},stats:e.stats||{coursesCompleted:0,quizzesTaken:0,averageScore:0,streak:0}})}catch(n){cC(n,"creating user profile")}},UE=async t=>{try{await I5();const e=await Ip(Xn(rn,"users",t));return e.exists()?e.data():null}catch(e){return cC(e,"getting user profile"),null}};async function Ate(t,e){try{const n=Xn(rn,"users",t);return await Rp(n,{isPremium:e}),!0}catch(n){return cC(n,"updating premium status"),!1}}const P5=g.createContext({currentUser:null,userProfile:null,loading:!0,updateUserPremium:async()=>!1,logout:async()=>{}}),Yt=()=>g.useContext(P5),R5=({children:t})=>{const[e,n]=g.useState(null),[r,s]=g.useState(null),[i,o]=g.useState(!0);g.useEffect(()=>{let d=!0;(async()=>{try{console.log("Checking redirect result...");const m=await NH(ui);console.log("Redirect result:",m),m!=null&&m.user&&d&&(console.log("User from redirect:",m.user),await Iv(m.user.uid,{id:m.user.uid,email:m.user.email||"",name:m.user.displayName||"",profileImage:m.user.photoURL||"",createdAt:new Date().toISOString(),isPremium:!1}),console.log("User profile created/updated"),n(m.user))}catch(m){console.error("Error handling redirect result:",m)}})();const p=ui.onAuthStateChanged(async m=>{if(console.log("Auth state changed:",m),!!d){if(n(m),m)try{console.log("Fetching user profile...");const y=await UE(m.uid);if(console.log("User profile:",y),!d)return;if(s(y),!y){console.log("Creating new user profile..."),await Iv(m.uid,{id:m.uid,email:m.email||"",name:m.displayName||"",profileImage:m.photoURL||"",createdAt:new Date().toISOString(),isPremium:!1});const _=await UE(m.uid);if(console.log("New profile created:",_),!d)return;s(_)}}catch(y){console.error("Error fetching/creating user profile:",y)}else{if(!d)return;s(null)}d&&o(!1)}});return()=>{d=!1,p()}},[]);const u={currentUser:e,userProfile:r,loading:i,updateUserPremium:async d=>{if(!e)return!1;const h=await Ate(e.uid,d);return h&&r&&s({...r,isPremium:d}),h},logout:async()=>{try{await ui.signOut(),n(null),s(null)}catch(d){throw console.error("Error signing out:",d),d}}};return c.jsx(P5.Provider,{value:u,children:t})};/**
 * @remix-run/router v1.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wf(){return Wf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wf.apply(this,arguments)}var go;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(go||(go={}));const xk="popstate";function Nte(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=jl(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),$E("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof i=="string"?i:Pv(i))}function r(s,i){uC(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return Ote(e,n,r,t)}function Pt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function uC(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kte(){return Math.random().toString(36).substr(2,8)}function wk(t,e){return{usr:t.state,key:t.key,idx:e}}function $E(t,e,n,r){return n===void 0&&(n=null),Wf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?jl(e):e,{state:n,key:e&&e.key||r||kte()})}function Pv(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function jl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Ote(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=go.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(Wf({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=go.Pop;let b=d(),x=b==null?null:b-u;u=b,l&&l({action:a,location:_.location,delta:x})}function p(b,x){a=go.Push;let E=$E(_.location,b,x);n&&n(E,b),u=d()+1;let w=wk(E,u),I=_.createHref(E);try{o.pushState(w,"",I)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(I)}i&&l&&l({action:a,location:_.location,delta:1})}function m(b,x){a=go.Replace;let E=$E(_.location,b,x);n&&n(E,b),u=d();let w=wk(E,u),I=_.createHref(E);o.replaceState(w,"",I),i&&l&&l({action:a,location:_.location,delta:0})}function y(b){let x=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof b=="string"?b:Pv(b);return E=E.replace(/ $/,"%20"),Pt(x,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,x)}let _={get action(){return a},get location(){return t(s,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(xk,h),l=b,()=>{s.removeEventListener(xk,h),l=null}},createHref(b){return e(s,b)},createURL:y,encodeLocation(b){let x=y(b);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:p,replace:m,go(b){return o.go(b)}};return _}var bk;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(bk||(bk={}));function Dte(t,e,n){return n===void 0&&(n="/"),jte(t,e,n)}function jte(t,e,n,r){let s=typeof e=="string"?jl(e):e,i=dC(s.pathname||"/",n);if(i==null)return null;let o=A5(t);Mte(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=Kte(i);a=qte(o[l],u)}return a}function A5(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Pt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Oo([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Pt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),A5(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:zte(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of N5(i.path))s(i,o,l)}),e}function N5(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=N5(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Mte(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Gte(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Lte=/^:[\w-]+$/,Fte=3,Vte=2,Ute=1,$te=10,Bte=-2,Ek=t=>t==="*";function zte(t,e){let n=t.split("/"),r=n.length;return n.some(Ek)&&(r+=Bte),e&&(r+=Vte),n.filter(s=>!Ek(s)).reduce((s,i)=>s+(Lte.test(i)?Fte:i===""?Ute:$te),r)}function Gte(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function qte(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=Wte({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),p=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Oo([i,h.pathname]),pathnameBase:Jte(Oo([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=Oo([i,h.pathnameBase]))}return o}function Wte(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Hte(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:p,isOptional:m}=d;if(p==="*"){let _=a[h]||"";o=i.slice(0,i.length-_.length).replace(/(.)\/+$/,"$1")}const y=a[h];return m&&!y?u[p]=void 0:u[p]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function Hte(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),uC(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Kte(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return uC(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function dC(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Qte(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?jl(t):t;return{pathname:n?n.startsWith("/")?n:Yte(n,e):e,search:Zte(r),hash:ene(s)}}function Yte(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Xx(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Xte(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function hC(t,e){let n=Xte(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function fC(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=jl(t):(s=Wf({},t),Pt(!s.pathname||!s.pathname.includes("?"),Xx("?","pathname","search",s)),Pt(!s.pathname||!s.pathname.includes("#"),Xx("#","pathname","hash",s)),Pt(!s.search||!s.search.includes("#"),Xx("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=Qte(s,a),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const Oo=t=>t.join("/").replace(/\/\/+/g,"/"),Jte=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Zte=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ene=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function tne(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const k5=["post","put","patch","delete"];new Set(k5);const nne=["get",...k5];new Set(nne);/**
 * React Router v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hf(){return Hf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hf.apply(this,arguments)}const pC=g.createContext(null),rne=g.createContext(null),sa=g.createContext(null),J_=g.createContext(null),Ri=g.createContext({outlet:null,matches:[],isDataRoute:!1}),O5=g.createContext(null);function sne(t,e){let{relative:n}=e===void 0?{}:e;dd()||Pt(!1);let{basename:r,navigator:s}=g.useContext(sa),{hash:i,pathname:o,search:a}=M5(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Oo([r,o])),s.createHref({pathname:l,search:a,hash:i})}function dd(){return g.useContext(J_)!=null}function Ai(){return dd()||Pt(!1),g.useContext(J_).location}function D5(t){g.useContext(sa).static||g.useLayoutEffect(t)}function Qe(){let{isDataRoute:t}=g.useContext(Ri);return t?yne():ine()}function ine(){dd()||Pt(!1);let t=g.useContext(pC),{basename:e,future:n,navigator:r}=g.useContext(sa),{matches:s}=g.useContext(Ri),{pathname:i}=Ai(),o=JSON.stringify(hC(s,n.v7_relativeSplatPath)),a=g.useRef(!1);return D5(()=>{a.current=!0}),g.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let h=fC(u,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Oo([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function j5(){let{matches:t}=g.useContext(Ri),e=t[t.length-1];return e?e.params:{}}function M5(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=g.useContext(sa),{matches:s}=g.useContext(Ri),{pathname:i}=Ai(),o=JSON.stringify(hC(s,r.v7_relativeSplatPath));return g.useMemo(()=>fC(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function one(t,e){return ane(t,e)}function ane(t,e,n,r){dd()||Pt(!1);let{navigator:s,static:i}=g.useContext(sa),{matches:o}=g.useContext(Ri),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let d=Ai(),h;if(e){var p;let x=typeof e=="string"?jl(e):e;u==="/"||(p=x.pathname)!=null&&p.startsWith(u)||Pt(!1),h=x}else h=d;let m=h.pathname||"/",y=m;if(u!=="/"){let x=u.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let _=Dte(t,{pathname:y}),b=hne(_&&_.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Oo([u,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:Oo([u,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,n,r);return e&&b?g.createElement(J_.Provider,{value:{location:Hf({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:go.Pop}},b):b}function lne(){let t=gne(),e=tne(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:s},n):null,null)}const cne=g.createElement(lne,null);class une extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?g.createElement(Ri.Provider,{value:this.props.routeContext},g.createElement(O5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function dne(t){let{routeContext:e,match:n,children:r}=t,s=g.useContext(pC);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(Ri.Provider,{value:e},r)}function hne(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||Pt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:p,errors:m}=n,y=h.route.loader&&p[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||y){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let m,y=!1,_=null,b=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,_=h.route.errorElement||cne,l&&(u<0&&p===0?(vne("route-fallback"),y=!0,b=null):u===p&&(y=!0,b=h.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,p+1)),E=()=>{let w;return m?w=_:y?w=b:h.route.Component?w=g.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,g.createElement(dne,{match:h,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?g.createElement(une,{location:n.location,revalidation:n.revalidation,component:_,error:m,children:E(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):E()},null)}var L5=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(L5||{}),Rv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Rv||{});function fne(t){let e=g.useContext(pC);return e||Pt(!1),e}function pne(t){let e=g.useContext(rne);return e||Pt(!1),e}function mne(t){let e=g.useContext(Ri);return e||Pt(!1),e}function F5(t){let e=mne(),n=e.matches[e.matches.length-1];return n.route.id||Pt(!1),n.route.id}function gne(){var t;let e=g.useContext(O5),n=pne(Rv.UseRouteError),r=F5(Rv.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function yne(){let{router:t}=fne(L5.UseNavigateStable),e=F5(Rv.UseNavigateStable),n=g.useRef(!1);return D5(()=>{n.current=!0}),g.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Hf({fromRouteId:e},i)))},[t,e])}const Tk={};function vne(t,e,n){Tk[t]||(Tk[t]=!0)}function _ne(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function mC(t){let{to:e,replace:n,state:r,relative:s}=t;dd()||Pt(!1);let{future:i,static:o}=g.useContext(sa),{matches:a}=g.useContext(Ri),{pathname:l}=Ai(),u=Qe(),d=fC(e,hC(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return g.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:s}),[u,h,s,n,r]),null}function he(t){Pt(!1)}function xne(t){let{basename:e="/",children:n=null,location:r,navigationType:s=go.Pop,navigator:i,static:o=!1,future:a}=t;dd()&&Pt(!1);let l=e.replace(/^\/*/,"/"),u=g.useMemo(()=>({basename:l,navigator:i,static:o,future:Hf({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=jl(r));let{pathname:d="/",search:h="",hash:p="",state:m=null,key:y="default"}=r,_=g.useMemo(()=>{let b=dC(d,l);return b==null?null:{location:{pathname:b,search:h,hash:p,state:m,key:y},navigationType:s}},[l,d,h,p,m,y,s]);return _==null?null:g.createElement(sa.Provider,{value:u},g.createElement(J_.Provider,{children:n,value:_}))}function V5(t){let{children:e,location:n}=t;return one(BE(e),n)}new Promise(()=>{});function BE(t,e){e===void 0&&(e=[]);let n=[];return g.Children.forEach(t,(r,s)=>{if(!g.isValidElement(r))return;let i=[...e,s];if(r.type===g.Fragment){n.push.apply(n,BE(r.props.children,i));return}r.type!==he&&Pt(!1),!r.props.index||!r.props.children||Pt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=BE(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zE(){return zE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zE.apply(this,arguments)}function wne(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function bne(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Ene(t,e){return t.button===0&&(!e||e==="_self")&&!bne(t)}function GE(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function Tne(t,e){let n=GE(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const Sne=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Cne="6";try{window.__reactRouterVersion=Cne}catch{}const Ine="startTransition",Sk=fD[Ine];function Pne(t){let{basename:e,children:n,future:r,window:s}=t,i=g.useRef();i.current==null&&(i.current=Nte({window:s,v5Compat:!0}));let o=i.current,[a,l]=g.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=g.useCallback(h=>{u&&Sk?Sk(()=>l(h)):l(h)},[l,u]);return g.useLayoutEffect(()=>o.listen(d),[o,d]),g.useEffect(()=>_ne(r),[r]),g.createElement(xne,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Rne=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ane=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nne=g.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:d,viewTransition:h}=e,p=wne(e,Sne),{basename:m}=g.useContext(sa),y,_=!1;if(typeof u=="string"&&Ane.test(u)&&(y=u,Rne))try{let w=new URL(window.location.href),I=u.startsWith("//")?new URL(w.protocol+u):new URL(u),k=dC(I.pathname,m);I.origin===w.origin&&k!=null?u=k+I.search+I.hash:_=!0}catch{}let b=sne(u,{relative:s}),x=kne(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function E(w){r&&r(w),w.defaultPrevented||x(w)}return g.createElement("a",zE({},p,{href:y||b,onClick:_||i?r:E,ref:n,target:l}))});var Ck;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ck||(Ck={}));var Ik;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ik||(Ik={}));function kne(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Qe(),u=Ai(),d=M5(t,{relative:o});return g.useCallback(h=>{if(Ene(h,n)){h.preventDefault();let p=r!==void 0?r:Pv(u)===Pv(d);l(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[u,l,d,r,s,n,t,i,o,a])}function One(t){let e=g.useRef(GE(t)),n=g.useRef(!1),r=Ai(),s=g.useMemo(()=>Tne(r.search,n.current?null:e.current),[r.search]),i=Qe(),o=g.useCallback((a,l)=>{const u=GE(typeof a=="function"?a(s):a);n.current=!0,i("?"+u,l)},[i,s]);return[s,o]}function ae(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Pk(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Z_(...t){return e=>{let n=!1;const r=t.map(s=>{const i=Pk(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():Pk(t[s],null)}}}}function Ve(...t){return g.useCallback(Z_(...t),t)}function Dne(t,e){const n=g.createContext(e),r=i=>{const{children:o,...a}=i,l=g.useMemo(()=>a,Object.values(a));return c.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=g.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function mr(t,e=[]){let n=[];function r(i,o){const a=g.createContext(o),l=n.length;n=[...n,o];const u=h=>{var x;const{scope:p,children:m,...y}=h,_=((x=p==null?void 0:p[t])==null?void 0:x[l])||a,b=g.useMemo(()=>y,Object.values(y));return c.jsx(_.Provider,{value:b,children:m})};u.displayName=i+"Provider";function d(h,p){var _;const m=((_=p==null?void 0:p[t])==null?void 0:_[l])||a,y=g.useContext(m);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=n.map(o=>g.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return g.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,jne(s,...e)]}function jne(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const h=l(i)[`__scope${u}`];return{...a,...h}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var bl=g.forwardRef((t,e)=>{const{children:n,...r}=t,s=g.Children.toArray(n),i=s.find(Mne);if(i){const o=i.props.children,a=s.map(l=>l===i?g.Children.count(o)>1?g.Children.only(null):g.isValidElement(o)?o.props.children:null:l);return c.jsx(qE,{...r,ref:e,children:g.isValidElement(o)?g.cloneElement(o,void 0,a):null})}return c.jsx(qE,{...r,ref:e,children:n})});bl.displayName="Slot";var qE=g.forwardRef((t,e)=>{const{children:n,...r}=t;if(g.isValidElement(n)){const s=Fne(n),i=Lne(r,n.props);return n.type!==g.Fragment&&(i.ref=e?Z_(e,s):s),g.cloneElement(n,i)}return g.Children.count(n)>1?g.Children.only(null):null});qE.displayName="SlotClone";var U5=({children:t})=>c.jsx(c.Fragment,{children:t});function Mne(t){return g.isValidElement(t)&&t.type===U5}function Lne(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function Fne(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Vne=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],_e=Vne.reduce((t,e)=>{const n=g.forwardRef((r,s)=>{const{asChild:i,...o}=r,a=i?bl:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(a,{...o,ref:s})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function $5(t,e){t&&h_.flushSync(()=>t.dispatchEvent(e))}function Lt(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Une(t,e=globalThis==null?void 0:globalThis.document){const n=Lt(t);g.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var $ne="DismissableLayer",WE="dismissableLayer.update",Bne="dismissableLayer.pointerDownOutside",zne="dismissableLayer.focusOutside",Rk,B5=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),e0=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,u=g.useContext(B5),[d,h]=g.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=g.useState({}),y=Ve(e,C=>h(C)),_=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=_.indexOf(b),E=d?_.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,I=E>=x,k=Wne(C=>{const S=C.target,P=[...u.branches].some(R=>R.contains(S));!I||P||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},p),M=Hne(C=>{const S=C.target;[...u.branches].some(R=>R.contains(S))||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},p);return Une(C=>{E===u.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},p),g.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Rk=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Ak(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=Rk)}},[d,p,n,u]),g.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Ak())},[d,u]),g.useEffect(()=>{const C=()=>m({});return document.addEventListener(WE,C),()=>document.removeEventListener(WE,C)},[]),c.jsx(_e.div,{...l,ref:y,style:{pointerEvents:w?I?"auto":"none":void 0,...t.style},onFocusCapture:ae(t.onFocusCapture,M.onFocusCapture),onBlurCapture:ae(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:ae(t.onPointerDownCapture,k.onPointerDownCapture)})});e0.displayName=$ne;var Gne="DismissableLayerBranch",qne=g.forwardRef((t,e)=>{const n=g.useContext(B5),r=g.useRef(null),s=Ve(e,r);return g.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),c.jsx(_e.div,{...t,ref:s})});qne.displayName=Gne;function Wne(t,e=globalThis==null?void 0:globalThis.document){const n=Lt(t),r=g.useRef(!1),s=g.useRef(()=>{});return g.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){z5(Bne,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Hne(t,e=globalThis==null?void 0:globalThis.document){const n=Lt(t),r=g.useRef(!1);return g.useEffect(()=>{const s=i=>{i.target&&!r.current&&z5(zne,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Ak(){const t=new CustomEvent(WE);document.dispatchEvent(t)}function z5(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?$5(s,i):s.dispatchEvent(i)}var Os=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},Kne=fD.useId||(()=>{}),Qne=0;function Do(t){const[e,n]=g.useState(Kne());return Os(()=>{n(r=>r??String(Qne++))},[t]),e?`radix-${e}`:""}const Yne=["top","right","bottom","left"],Go=Math.min,nr=Math.max,Av=Math.round,Vm=Math.floor,As=t=>({x:t,y:t}),Xne={left:"right",right:"left",bottom:"top",top:"bottom"},Jne={start:"end",end:"start"};function HE(t,e,n){return nr(t,Go(e,n))}function wi(t,e){return typeof t=="function"?t(e):t}function bi(t){return t.split("-")[0]}function hd(t){return t.split("-")[1]}function gC(t){return t==="x"?"y":"x"}function yC(t){return t==="y"?"height":"width"}function qo(t){return["top","bottom"].includes(bi(t))?"y":"x"}function vC(t){return gC(qo(t))}function Zne(t,e,n){n===void 0&&(n=!1);const r=hd(t),s=vC(t),i=yC(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Nv(o)),[o,Nv(o)]}function ere(t){const e=Nv(t);return[KE(t),e,KE(e)]}function KE(t){return t.replace(/start|end/g,e=>Jne[e])}function tre(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function nre(t,e,n,r){const s=hd(t);let i=tre(bi(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(KE)))),i}function Nv(t){return t.replace(/left|right|bottom|top/g,e=>Xne[e])}function rre(t){return{top:0,right:0,bottom:0,left:0,...t}}function G5(t){return typeof t!="number"?rre(t):{top:t,right:t,bottom:t,left:t}}function kv(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function Nk(t,e,n){let{reference:r,floating:s}=t;const i=qo(e),o=vC(e),a=yC(o),l=bi(e),u=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(hd(e)){case"start":m[o]-=p*(n&&u?-1:1);break;case"end":m[o]+=p*(n&&u?-1:1);break}return m}const sre=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=Nk(u,r,l),p=r,m={},y=0;for(let _=0;_<a.length;_++){const{name:b,fn:x}=a[_],{x:E,y:w,data:I,reset:k}=await x({x:d,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:u,platform:o,elements:{reference:t,floating:e}});d=E??d,h=w??h,m={...m,[b]:{...m[b],...I}},k&&y<=50&&(y++,typeof k=="object"&&(k.placement&&(p=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):k.rects),{x:d,y:h}=Nk(u,p,l)),_=-1)}return{x:d,y:h,placement:p,strategy:s,middlewareData:m}};async function Kf(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=wi(e,t),y=G5(m),b=a[p?h==="floating"?"reference":"floating":h],x=kv(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),E=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),I=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},k=kv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:E,offsetParent:w,strategy:l}):E);return{top:(x.top-k.top+y.top)/I.y,bottom:(k.bottom-x.bottom+y.bottom)/I.y,left:(x.left-k.left+y.left)/I.x,right:(k.right-x.right+y.right)/I.x}}const ire=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:d=0}=wi(t,e)||{};if(u==null)return{};const h=G5(d),p={x:n,y:r},m=vC(s),y=yC(m),_=await o.getDimensions(u),b=m==="y",x=b?"top":"left",E=b?"bottom":"right",w=b?"clientHeight":"clientWidth",I=i.reference[y]+i.reference[m]-p[m]-i.floating[y],k=p[m]-i.reference[m],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let C=M?M[w]:0;(!C||!await(o.isElement==null?void 0:o.isElement(M)))&&(C=a.floating[w]||i.floating[y]);const S=I/2-k/2,P=C/2-_[y]/2-1,R=Go(h[x],P),O=Go(h[E],P),D=R,N=C-_[y]-O,Z=C/2-_[y]/2+S,de=HE(D,Z,N),Y=!l.arrow&&hd(s)!=null&&Z!==de&&i.reference[y]/2-(Z<D?R:O)-_[y]/2<0,ee=Y?Z<D?Z-D:Z-N:0;return{[m]:p[m]+ee,data:{[m]:de,centerOffset:Z-de-ee,...Y&&{alignmentOffset:ee}},reset:Y}}}),ore=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:_=!0,...b}=wi(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=bi(s),E=qo(a),w=bi(a)===a,I=await(l.isRTL==null?void 0:l.isRTL(u.floating)),k=p||(w||!_?[Nv(a)]:ere(a)),M=y!=="none";!p&&M&&k.push(...nre(a,_,y,I));const C=[a,...k],S=await Kf(e,b),P=[];let R=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&P.push(S[x]),h){const Z=Zne(s,o,I);P.push(S[Z[0]],S[Z[1]])}if(R=[...R,{placement:s,overflows:P}],!P.every(Z=>Z<=0)){var O,D;const Z=(((O=i.flip)==null?void 0:O.index)||0)+1,de=C[Z];if(de)return{data:{index:Z,overflows:R},reset:{placement:de}};let Y=(D=R.filter(ee=>ee.overflows[0]<=0).sort((ee,$)=>ee.overflows[1]-$.overflows[1])[0])==null?void 0:D.placement;if(!Y)switch(m){case"bestFit":{var N;const ee=(N=R.filter($=>{if(M){const V=qo($.placement);return V===E||V==="y"}return!0}).map($=>[$.placement,$.overflows.filter(V=>V>0).reduce((V,W)=>V+W,0)]).sort(($,V)=>$[1]-V[1])[0])==null?void 0:N[0];ee&&(Y=ee);break}case"initialPlacement":Y=a;break}if(s!==Y)return{reset:{placement:Y}}}return{}}}};function kk(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Ok(t){return Yne.some(e=>t[e]>=0)}const are=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=wi(t,e);switch(r){case"referenceHidden":{const i=await Kf(e,{...s,elementContext:"reference"}),o=kk(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Ok(o)}}}case"escaped":{const i=await Kf(e,{...s,altBoundary:!0}),o=kk(i,n.floating);return{data:{escapedOffsets:o,escaped:Ok(o)}}}default:return{}}}}};async function lre(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=bi(n),a=hd(n),l=qo(n)==="y",u=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,h=wi(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof y=="number"&&(m=a==="end"?y*-1:y),l?{x:m*d,y:p*u}:{x:p*u,y:m*d}}const cre=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await lre(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},ure=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x,y:E}=b;return{x,y:E}}},...l}=wi(t,e),u={x:n,y:r},d=await Kf(e,l),h=qo(bi(s)),p=gC(h);let m=u[p],y=u[h];if(i){const b=p==="y"?"top":"left",x=p==="y"?"bottom":"right",E=m+d[b],w=m-d[x];m=HE(E,m,w)}if(o){const b=h==="y"?"top":"left",x=h==="y"?"bottom":"right",E=y+d[b],w=y-d[x];y=HE(E,y,w)}const _=a.fn({...e,[p]:m,[h]:y});return{..._,data:{x:_.x-n,y:_.y-r,enabled:{[p]:i,[h]:o}}}}}},dre=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=wi(t,e),d={x:n,y:r},h=qo(s),p=gC(h);let m=d[p],y=d[h];const _=wi(a,e),b=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(l){const w=p==="y"?"height":"width",I=i.reference[p]-i.floating[w]+b.mainAxis,k=i.reference[p]+i.reference[w]-b.mainAxis;m<I?m=I:m>k&&(m=k)}if(u){var x,E;const w=p==="y"?"width":"height",I=["top","left"].includes(bi(s)),k=i.reference[h]-i.floating[w]+(I&&((x=o.offset)==null?void 0:x[h])||0)+(I?0:b.crossAxis),M=i.reference[h]+i.reference[w]+(I?0:((E=o.offset)==null?void 0:E[h])||0)-(I?b.crossAxis:0);y<k?y=k:y>M&&(y=M)}return{[p]:m,[h]:y}}}},hre=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...u}=wi(t,e),d=await Kf(e,u),h=bi(s),p=hd(s),m=qo(s)==="y",{width:y,height:_}=i.floating;let b,x;h==="top"||h==="bottom"?(b=h,x=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(x=h,b=p==="end"?"top":"bottom");const E=_-d.top-d.bottom,w=y-d.left-d.right,I=Go(_-d[b],E),k=Go(y-d[x],w),M=!e.middlewareData.shift;let C=I,S=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(S=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=E),M&&!p){const R=nr(d.left,0),O=nr(d.right,0),D=nr(d.top,0),N=nr(d.bottom,0);m?S=y-2*(R!==0||O!==0?R+O:nr(d.left,d.right)):C=_-2*(D!==0||N!==0?D+N:nr(d.top,d.bottom))}await l({...e,availableWidth:S,availableHeight:C});const P=await o.getDimensions(a.floating);return y!==P.width||_!==P.height?{reset:{rects:!0}}:{}}}};function t0(){return typeof window<"u"}function fd(t){return q5(t)?(t.nodeName||"").toLowerCase():"#document"}function cr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ls(t){var e;return(e=(q5(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function q5(t){return t0()?t instanceof Node||t instanceof cr(t).Node:!1}function rs(t){return t0()?t instanceof Element||t instanceof cr(t).Element:!1}function Ds(t){return t0()?t instanceof HTMLElement||t instanceof cr(t).HTMLElement:!1}function Dk(t){return!t0()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof cr(t).ShadowRoot}function jp(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=ss(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function fre(t){return["table","td","th"].includes(fd(t))}function n0(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function _C(t){const e=xC(),n=rs(t)?ss(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function pre(t){let e=Wo(t);for(;Ds(e)&&!Bu(e);){if(_C(e))return e;if(n0(e))return null;e=Wo(e)}return null}function xC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Bu(t){return["html","body","#document"].includes(fd(t))}function ss(t){return cr(t).getComputedStyle(t)}function r0(t){return rs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Wo(t){if(fd(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Dk(t)&&t.host||Ls(t);return Dk(e)?e.host:e}function W5(t){const e=Wo(t);return Bu(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ds(e)&&jp(e)?e:W5(e)}function Qf(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=W5(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=cr(s);if(i){const a=QE(o);return e.concat(o,o.visualViewport||[],jp(s)?s:[],a&&n?Qf(a):[])}return e.concat(s,Qf(s,[],n))}function QE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function H5(t){const e=ss(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ds(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=Av(n)!==i||Av(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function wC(t){return rs(t)?t:t.contextElement}function Jc(t){const e=wC(t);if(!Ds(e))return As(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=H5(e);let o=(i?Av(n.width):n.width)/r,a=(i?Av(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const mre=As(0);function K5(t){const e=cr(t);return!xC()||!e.visualViewport?mre:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function gre(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==cr(t)?!1:e}function El(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=wC(t);let o=As(1);e&&(r?rs(r)&&(o=Jc(r)):o=Jc(t));const a=gre(i,n,r)?K5(i):As(0);let l=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const p=cr(i),m=r&&rs(r)?cr(r):r;let y=p,_=QE(y);for(;_&&r&&m!==y;){const b=Jc(_),x=_.getBoundingClientRect(),E=ss(_),w=x.left+(_.clientLeft+parseFloat(E.paddingLeft))*b.x,I=x.top+(_.clientTop+parseFloat(E.paddingTop))*b.y;l*=b.x,u*=b.y,d*=b.x,h*=b.y,l+=w,u+=I,y=cr(_),_=QE(y)}}return kv({width:d,height:h,x:l,y:u})}function bC(t,e){const n=r0(t).scrollLeft;return e?e.left+n:El(Ls(t)).left+n}function Q5(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:bC(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function yre(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Ls(r),a=e?n0(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},u=As(1);const d=As(0),h=Ds(r);if((h||!h&&!i)&&((fd(r)!=="body"||jp(o))&&(l=r0(r)),Ds(r))){const m=El(r);u=Jc(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const p=o&&!h&&!i?Q5(o,l,!0):As(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+p.x,y:n.y*u.y-l.scrollTop*u.y+d.y+p.y}}function vre(t){return Array.from(t.getClientRects())}function _re(t){const e=Ls(t),n=r0(t),r=t.ownerDocument.body,s=nr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=nr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+bC(t);const a=-n.scrollTop;return ss(r).direction==="rtl"&&(o+=nr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function xre(t,e){const n=cr(t),r=Ls(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const u=xC();(!u||u&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function wre(t,e){const n=El(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Ds(t)?Jc(t):As(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,u=r*i.y;return{width:o,height:a,x:l,y:u}}function jk(t,e,n){let r;if(e==="viewport")r=xre(t,n);else if(e==="document")r=_re(Ls(t));else if(rs(e))r=wre(e,n);else{const s=K5(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return kv(r)}function Y5(t,e){const n=Wo(t);return n===e||!rs(n)||Bu(n)?!1:ss(n).position==="fixed"||Y5(n,e)}function bre(t,e){const n=e.get(t);if(n)return n;let r=Qf(t,[],!1).filter(a=>rs(a)&&fd(a)!=="body"),s=null;const i=ss(t).position==="fixed";let o=i?Wo(t):t;for(;rs(o)&&!Bu(o);){const a=ss(o),l=_C(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||jp(o)&&!l&&Y5(t,o))?r=r.filter(d=>d!==o):s=a,o=Wo(o)}return e.set(t,r),r}function Ere(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?n0(e)?[]:bre(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,d)=>{const h=jk(e,d,s);return u.top=nr(h.top,u.top),u.right=Go(h.right,u.right),u.bottom=Go(h.bottom,u.bottom),u.left=nr(h.left,u.left),u},jk(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Tre(t){const{width:e,height:n}=H5(t);return{width:e,height:n}}function Sre(t,e,n){const r=Ds(e),s=Ls(e),i=n==="fixed",o=El(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=As(0);if(r||!r&&!i)if((fd(e)!=="body"||jp(s))&&(a=r0(e)),r){const p=El(e,!0,i,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else s&&(l.x=bC(s));const u=s&&!r&&!i?Q5(s,a):As(0),d=o.left+a.scrollLeft-l.x-u.x,h=o.top+a.scrollTop-l.y-u.y;return{x:d,y:h,width:o.width,height:o.height}}function Jx(t){return ss(t).position==="static"}function Mk(t,e){if(!Ds(t)||ss(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ls(t)===n&&(n=n.ownerDocument.body),n}function X5(t,e){const n=cr(t);if(n0(t))return n;if(!Ds(t)){let s=Wo(t);for(;s&&!Bu(s);){if(rs(s)&&!Jx(s))return s;s=Wo(s)}return n}let r=Mk(t,e);for(;r&&fre(r)&&Jx(r);)r=Mk(r,e);return r&&Bu(r)&&Jx(r)&&!_C(r)?n:r||pre(t)||n}const Cre=async function(t){const e=this.getOffsetParent||X5,n=this.getDimensions,r=await n(t.floating);return{reference:Sre(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Ire(t){return ss(t).direction==="rtl"}const Pre={convertOffsetParentRelativeRectToViewportRelativeRect:yre,getDocumentElement:Ls,getClippingRect:Ere,getOffsetParent:X5,getElementRects:Cre,getClientRects:vre,getDimensions:Tre,getScale:Jc,isElement:rs,isRTL:Ire};function J5(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Rre(t,e){let n=null,r;const s=Ls(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const u=t.getBoundingClientRect(),{left:d,top:h,width:p,height:m}=u;if(a||e(),!p||!m)return;const y=Vm(h),_=Vm(s.clientWidth-(d+p)),b=Vm(s.clientHeight-(h+m)),x=Vm(d),w={rootMargin:-y+"px "+-_+"px "+-b+"px "+-x+"px",threshold:nr(0,Go(1,l))||1};let I=!0;function k(M){const C=M[0].intersectionRatio;if(C!==l){if(!I)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!J5(u,t.getBoundingClientRect())&&o(),I=!1}try{n=new IntersectionObserver(k,{...w,root:s.ownerDocument})}catch{n=new IntersectionObserver(k,w)}n.observe(t)}return o(!0),i}function Are(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=wC(t),d=s||i?[...u?Qf(u):[],...Qf(e)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=u&&a?Rre(u,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(x=>{let[E]=x;E&&E.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(e)})),n()}),u&&!l&&m.observe(u),m.observe(e));let y,_=l?El(t):null;l&&b();function b(){const x=El(t);_&&!J5(_,x)&&n(),_=x,y=requestAnimationFrame(b)}return n(),()=>{var x;d.forEach(E=>{s&&E.removeEventListener("scroll",n),i&&E.removeEventListener("resize",n)}),h==null||h(),(x=m)==null||x.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const Nre=cre,kre=ure,Ore=ore,Dre=hre,jre=are,Lk=ire,Mre=dre,Lre=(t,e,n)=>{const r=new Map,s={platform:Pre,...n},i={...s.platform,_c:r};return sre(t,e,{...s,platform:i})};var Jg=typeof document<"u"?g.useLayoutEffect:g.useEffect;function Ov(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Ov(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Ov(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Z5(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Fk(t,e){const n=Z5(t);return Math.round(e*n)/n}function Zx(t){const e=g.useRef(t);return Jg(()=>{e.current=t}),e}function Fre(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[d,h]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=g.useState(r);Ov(p,r)||m(r);const[y,_]=g.useState(null),[b,x]=g.useState(null),E=g.useCallback($=>{$!==M.current&&(M.current=$,_($))},[]),w=g.useCallback($=>{$!==C.current&&(C.current=$,x($))},[]),I=i||y,k=o||b,M=g.useRef(null),C=g.useRef(null),S=g.useRef(d),P=l!=null,R=Zx(l),O=Zx(s),D=Zx(u),N=g.useCallback(()=>{if(!M.current||!C.current)return;const $={placement:e,strategy:n,middleware:p};O.current&&($.platform=O.current),Lre(M.current,C.current,$).then(V=>{const W={...V,isPositioned:D.current!==!1};Z.current&&!Ov(S.current,W)&&(S.current=W,h_.flushSync(()=>{h(W)}))})},[p,e,n,O,D]);Jg(()=>{u===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,h($=>({...$,isPositioned:!1})))},[u]);const Z=g.useRef(!1);Jg(()=>(Z.current=!0,()=>{Z.current=!1}),[]),Jg(()=>{if(I&&(M.current=I),k&&(C.current=k),I&&k){if(R.current)return R.current(I,k,N);N()}},[I,k,N,R,P]);const de=g.useMemo(()=>({reference:M,floating:C,setReference:E,setFloating:w}),[E,w]),Y=g.useMemo(()=>({reference:I,floating:k}),[I,k]),ee=g.useMemo(()=>{const $={position:n,left:0,top:0};if(!Y.floating)return $;const V=Fk(Y.floating,d.x),W=Fk(Y.floating,d.y);return a?{...$,transform:"translate("+V+"px, "+W+"px)",...Z5(Y.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:V,top:W}},[n,a,Y.floating,d.x,d.y]);return g.useMemo(()=>({...d,update:N,refs:de,elements:Y,floatingStyles:ee}),[d,N,de,Y,ee])}const Vre=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Lk({element:r.current,padding:s}).fn(n):{}:r?Lk({element:r,padding:s}).fn(n):{}}}},Ure=(t,e)=>({...Nre(t),options:[t,e]}),$re=(t,e)=>({...kre(t),options:[t,e]}),Bre=(t,e)=>({...Mre(t),options:[t,e]}),zre=(t,e)=>({...Ore(t),options:[t,e]}),Gre=(t,e)=>({...Dre(t),options:[t,e]}),qre=(t,e)=>({...jre(t),options:[t,e]}),Wre=(t,e)=>({...Vre(t),options:[t,e]});var Hre="Arrow",e3=g.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return c.jsx(_e.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});e3.displayName=Hre;var Kre=e3;function EC(t){const[e,n]=g.useState(void 0);return Os(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var TC="Popper",[t3,s0]=mr(TC),[Qre,n3]=t3(TC),r3=t=>{const{__scopePopper:e,children:n}=t,[r,s]=g.useState(null);return c.jsx(Qre,{scope:e,anchor:r,onAnchorChange:s,children:n})};r3.displayName=TC;var s3="PopperAnchor",i3=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=n3(s3,n),o=g.useRef(null),a=Ve(e,o);return g.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:c.jsx(_e.div,{...s,ref:a})});i3.displayName=s3;var SC="PopperContent",[Yre,Xre]=t3(SC),o3=g.forwardRef((t,e)=>{var xe,jr,At,Tn,Jn,os;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:y,..._}=t,b=n3(SC,n),[x,E]=g.useState(null),w=Ve(e,yr=>E(yr)),[I,k]=g.useState(null),M=EC(I),C=(M==null?void 0:M.width)??0,S=(M==null?void 0:M.height)??0,P=r+(i!=="center"?"-"+i:""),R=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},O=Array.isArray(u)?u:[u],D=O.length>0,N={padding:R,boundary:O.filter(Zre),altBoundary:D},{refs:Z,floatingStyles:de,placement:Y,isPositioned:ee,middlewareData:$}=Fre({strategy:"fixed",placement:P,whileElementsMounted:(...yr)=>Are(...yr,{animationFrame:m==="always"}),elements:{reference:b.anchor},middleware:[Ure({mainAxis:s+S,alignmentAxis:o}),l&&$re({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Bre():void 0,...N}),l&&zre({...N}),Gre({...N,apply:({elements:yr,rects:Ni,availableWidth:aa,availableHeight:la})=>{const{width:vd,height:ca}=Ni.reference,Vs=yr.floating.style;Vs.setProperty("--radix-popper-available-width",`${aa}px`),Vs.setProperty("--radix-popper-available-height",`${la}px`),Vs.setProperty("--radix-popper-anchor-width",`${vd}px`),Vs.setProperty("--radix-popper-anchor-height",`${ca}px`)}}),I&&Wre({element:I,padding:a}),ese({arrowWidth:C,arrowHeight:S}),p&&qre({strategy:"referenceHidden",...N})]}),[V,W]=c3(Y),fe=Lt(y);Os(()=>{ee&&(fe==null||fe())},[ee,fe]);const re=(xe=$.arrow)==null?void 0:xe.x,pe=(jr=$.arrow)==null?void 0:jr.y,Ee=((At=$.arrow)==null?void 0:At.centerOffset)!==0,[Be,at]=g.useState();return Os(()=>{x&&at(window.getComputedStyle(x).zIndex)},[x]),c.jsx("div",{ref:Z.setFloating,"data-radix-popper-content-wrapper":"",style:{...de,transform:ee?de.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Be,"--radix-popper-transform-origin":[(Tn=$.transformOrigin)==null?void 0:Tn.x,(Jn=$.transformOrigin)==null?void 0:Jn.y].join(" "),...((os=$.hide)==null?void 0:os.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:c.jsx(Yre,{scope:n,placedSide:V,onArrowChange:k,arrowX:re,arrowY:pe,shouldHideArrow:Ee,children:c.jsx(_e.div,{"data-side":V,"data-align":W,..._,ref:w,style:{..._.style,animation:ee?void 0:"none"}})})})});o3.displayName=SC;var a3="PopperArrow",Jre={top:"bottom",right:"left",bottom:"top",left:"right"},l3=g.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=Xre(a3,r),o=Jre[i.placedSide];return c.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:c.jsx(Kre,{...s,ref:n,style:{...s.style,display:"block"}})})});l3.displayName=a3;function Zre(t){return t!==null}var ese=t=>({name:"transformOrigin",options:t,fn(e){var b,x,E;const{placement:n,rects:r,middlewareData:s}=e,o=((b=s.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[u,d]=c3(n),h={start:"0%",center:"50%",end:"100%"}[d],p=(((x=s.arrow)==null?void 0:x.x)??0)+a/2,m=(((E=s.arrow)==null?void 0:E.y)??0)+l/2;let y="",_="";return u==="bottom"?(y=o?h:`${p}px`,_=`${-l}px`):u==="top"?(y=o?h:`${p}px`,_=`${r.floating.height+l}px`):u==="right"?(y=`${-l}px`,_=o?h:`${m}px`):u==="left"&&(y=`${r.floating.width+l}px`,_=o?h:`${m}px`),{data:{x:y,y:_}}}});function c3(t){const[e,n="center"]=t.split("-");return[e,n]}var u3=r3,d3=i3,h3=o3,f3=l3,tse="Portal",CC=g.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=g.useState(!1);Os(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?gM.createPortal(c.jsx(_e.div,{...r,ref:e}),o):null});CC.displayName=tse;function nse(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var Dn=t=>{const{present:e,children:n}=t,r=rse(e),s=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),i=Ve(r.ref,sse(s));return typeof n=="function"||r.isPresent?g.cloneElement(s,{ref:i}):null};Dn.displayName="Presence";function rse(t){const[e,n]=g.useState(),r=g.useRef({}),s=g.useRef(t),i=g.useRef("none"),o=t?"mounted":"unmounted",[a,l]=nse(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const u=Um(r.current);i.current=a==="mounted"?u:"none"},[a]),Os(()=>{const u=r.current,d=s.current;if(d!==t){const p=i.current,m=Um(u);t?l("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&p!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Os(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=m=>{const _=Um(r.current).includes(m.animationName);if(m.target===e&&_&&(l("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},p=m=>{m.target===e&&(i.current=Um(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:g.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function Um(t){return(t==null?void 0:t.animationName)||"none"}function sse(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Ml({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=ise({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,a=Lt(n),l=g.useCallback(u=>{if(i){const h=typeof u=="function"?u(t):u;h!==t&&a(h)}else s(u)},[i,t,s,a]);return[o,l]}function ise({defaultProp:t,onChange:e}){const n=g.useState(t),[r]=n,s=g.useRef(r),i=Lt(e);return g.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var ose="VisuallyHidden",p3=g.forwardRef((t,e)=>c.jsx(_e.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));p3.displayName=ose;var ase=p3,[i0,X_e]=mr("Tooltip",[s0]),o0=s0(),m3="TooltipProvider",lse=700,YE="tooltip.open",[cse,IC]=i0(m3),g3=t=>{const{__scopeTooltip:e,delayDuration:n=lse,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,[o,a]=g.useState(!0),l=g.useRef(!1),u=g.useRef(0);return g.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),c.jsx(cse,{scope:e,isOpenDelayed:o,delayDuration:n,onOpen:g.useCallback(()=>{window.clearTimeout(u.current),a(!1)},[]),onClose:g.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>a(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:g.useCallback(d=>{l.current=d},[]),disableHoverableContent:s,children:i})};g3.displayName=m3;var a0="Tooltip",[use,l0]=i0(a0),y3=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=t,l=IC(a0,t.__scopeTooltip),u=o0(e),[d,h]=g.useState(null),p=Do(),m=g.useRef(0),y=o??l.disableHoverableContent,_=a??l.delayDuration,b=g.useRef(!1),[x=!1,E]=Ml({prop:r,defaultProp:s,onChange:C=>{C?(l.onOpen(),document.dispatchEvent(new CustomEvent(YE))):l.onClose(),i==null||i(C)}}),w=g.useMemo(()=>x?b.current?"delayed-open":"instant-open":"closed",[x]),I=g.useCallback(()=>{window.clearTimeout(m.current),m.current=0,b.current=!1,E(!0)},[E]),k=g.useCallback(()=>{window.clearTimeout(m.current),m.current=0,E(!1)},[E]),M=g.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{b.current=!0,E(!0),m.current=0},_)},[_,E]);return g.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),c.jsx(u3,{...u,children:c.jsx(use,{scope:e,contentId:p,open:x,stateAttribute:w,trigger:d,onTriggerChange:h,onTriggerEnter:g.useCallback(()=>{l.isOpenDelayed?M():I()},[l.isOpenDelayed,M,I]),onTriggerLeave:g.useCallback(()=>{y?k():(window.clearTimeout(m.current),m.current=0)},[k,y]),onOpen:I,onClose:k,disableHoverableContent:y,children:n})})};y3.displayName=a0;var XE="TooltipTrigger",v3=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=l0(XE,n),i=IC(XE,n),o=o0(n),a=g.useRef(null),l=Ve(e,a,s.onTriggerChange),u=g.useRef(!1),d=g.useRef(!1),h=g.useCallback(()=>u.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),c.jsx(d3,{asChild:!0,...o,children:c.jsx(_e.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:ae(t.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:ae(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:ae(t.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:ae(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:ae(t.onBlur,s.onClose),onClick:ae(t.onClick,s.onClose)})})});v3.displayName=XE;var dse="TooltipPortal",[J_e,hse]=i0(dse,{forceMount:void 0}),zu="TooltipContent",_3=g.forwardRef((t,e)=>{const n=hse(zu,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=l0(zu,t.__scopeTooltip);return c.jsx(Dn,{present:r||o.open,children:o.disableHoverableContent?c.jsx(x3,{side:s,...i,ref:e}):c.jsx(fse,{side:s,...i,ref:e})})}),fse=g.forwardRef((t,e)=>{const n=l0(zu,t.__scopeTooltip),r=IC(zu,t.__scopeTooltip),s=g.useRef(null),i=Ve(e,s),[o,a]=g.useState(null),{trigger:l,onClose:u}=n,d=s.current,{onPointerInTransitChange:h}=r,p=g.useCallback(()=>{a(null),h(!1)},[h]),m=g.useCallback((y,_)=>{const b=y.currentTarget,x={x:y.clientX,y:y.clientY},E=yse(x,b.getBoundingClientRect()),w=vse(x,E),I=_se(_.getBoundingClientRect()),k=wse([...w,...I]);a(k),h(!0)},[h]);return g.useEffect(()=>()=>p(),[p]),g.useEffect(()=>{if(l&&d){const y=b=>m(b,d),_=b=>m(b,l);return l.addEventListener("pointerleave",y),d.addEventListener("pointerleave",_),()=>{l.removeEventListener("pointerleave",y),d.removeEventListener("pointerleave",_)}}},[l,d,m,p]),g.useEffect(()=>{if(o){const y=_=>{const b=_.target,x={x:_.clientX,y:_.clientY},E=(l==null?void 0:l.contains(b))||(d==null?void 0:d.contains(b)),w=!xse(x,o);E?p():w&&(p(),u())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[l,d,o,u,p]),c.jsx(x3,{...t,ref:i})}),[pse,mse]=i0(a0,{isInside:!1}),x3=g.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=l0(zu,n),u=o0(n),{onClose:d}=l;return g.useEffect(()=>(document.addEventListener(YE,d),()=>document.removeEventListener(YE,d)),[d]),g.useEffect(()=>{if(l.trigger){const h=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),c.jsx(e0,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:c.jsxs(h3,{"data-state":l.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[c.jsx(U5,{children:r}),c.jsx(pse,{scope:n,isInside:!0,children:c.jsx(ase,{id:l.contentId,role:"tooltip",children:s||r})})]})})});_3.displayName=zu;var w3="TooltipArrow",gse=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=o0(n);return mse(w3,n).isInside?null:c.jsx(f3,{...s,...r,ref:e})});gse.displayName=w3;function yse(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function vse(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function _se(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function xse(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,u=e[o].x,d=e[o].y;l>r!=d>r&&n<(u-a)*(r-l)/(d-l)+a&&(s=!s)}return s}function wse(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),bse(e)}function bse(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Ese=g3,Tse=y3,Sse=v3,b3=_3;function E3(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=E3(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function T3(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=E3(t))&&(r&&(r+=" "),r+=e);return r}const PC="-",Cse=t=>{const e=Pse(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(PC);return a[0]===""&&a.length!==1&&a.shift(),S3(a,e)||Ise(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},S3=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?S3(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(PC);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},Vk=/^\[(.+)\]$/,Ise=t=>{if(Vk.test(t)){const e=Vk.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Pse=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return Ase(Object.entries(t.classGroups),n).forEach(([i,o])=>{JE(o,r,i,e)}),r},JE=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:Uk(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(Rse(s)){JE(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{JE(o,Uk(e,i),n,r)})})},Uk=(t,e)=>{let n=t;return e.split(PC).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Rse=t=>t.isThemeGetter,Ase=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,Nse=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},C3="!",kse=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let u=0,d=0,h;for(let b=0;b<a.length;b++){let x=a[b];if(u===0){if(x===s&&(r||a.slice(b,b+i)===e)){l.push(a.slice(d,b)),d=b+i;continue}if(x==="/"){h=b;continue}}x==="["?u++:x==="]"&&u--}const p=l.length===0?a:a.substring(d),m=p.startsWith(C3),y=m?p.substring(1):p,_=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:_}};return n?a=>n({className:a,parseClassName:o}):o},Ose=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},Dse=t=>({cache:Nse(t.cacheSize),parseClassName:kse(t),...Cse(t)}),jse=/\s+/,Mse=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(jse);let a="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}=n(u);let y=!!m,_=r(y?p.substring(0,m):p);if(!_){if(!y){a=u+(a.length>0?" "+a:a);continue}if(_=r(p),!_){a=u+(a.length>0?" "+a:a);continue}y=!1}const b=Ose(d).join(":"),x=h?b+C3:b,E=x+_;if(i.includes(E))continue;i.push(E);const w=s(_,y);for(let I=0;I<w.length;++I){const k=w[I];i.push(x+k)}a=u+(a.length>0?" "+a:a)}return a};function Lse(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=I3(e))&&(r&&(r+=" "),r+=n);return r}const I3=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=I3(t[r]))&&(n&&(n+=" "),n+=e);return n};function Fse(t,...e){let n,r,s,i=o;function o(l){const u=e.reduce((d,h)=>h(d),t());return n=Dse(u),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const u=r(l);if(u)return u;const d=Mse(l,n);return s(l,d),d}return function(){return i(Lse.apply(null,arguments))}}const tt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},P3=/^\[(?:([a-z-]+):)?(.+)\]$/i,Vse=/^\d+\/\d+$/,Use=new Set(["px","full","screen"]),$se=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Bse=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,zse=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Gse=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,qse=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Gs=t=>Zc(t)||Use.has(t)||Vse.test(t),zi=t=>pd(t,"length",Zse),Zc=t=>!!t&&!Number.isNaN(Number(t)),ew=t=>pd(t,"number",Zc),Kd=t=>!!t&&Number.isInteger(Number(t)),Wse=t=>t.endsWith("%")&&Zc(t.slice(0,-1)),be=t=>P3.test(t),Gi=t=>$se.test(t),Hse=new Set(["length","size","percentage"]),Kse=t=>pd(t,Hse,R3),Qse=t=>pd(t,"position",R3),Yse=new Set(["image","url"]),Xse=t=>pd(t,Yse,tie),Jse=t=>pd(t,"",eie),Qd=()=>!0,pd=(t,e,n)=>{const r=P3.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Zse=t=>Bse.test(t)&&!zse.test(t),R3=()=>!1,eie=t=>Gse.test(t),tie=t=>qse.test(t),nie=()=>{const t=tt("colors"),e=tt("spacing"),n=tt("blur"),r=tt("brightness"),s=tt("borderColor"),i=tt("borderRadius"),o=tt("borderSpacing"),a=tt("borderWidth"),l=tt("contrast"),u=tt("grayscale"),d=tt("hueRotate"),h=tt("invert"),p=tt("gap"),m=tt("gradientColorStops"),y=tt("gradientColorStopPositions"),_=tt("inset"),b=tt("margin"),x=tt("opacity"),E=tt("padding"),w=tt("saturate"),I=tt("scale"),k=tt("sepia"),M=tt("skew"),C=tt("space"),S=tt("translate"),P=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",be,e],D=()=>[be,e],N=()=>["",Gs,zi],Z=()=>["auto",Zc,be],de=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Y=()=>["solid","dashed","dotted","double","none"],ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],V=()=>["","0",be],W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],fe=()=>[Zc,be];return{cacheSize:500,separator:":",theme:{colors:[Qd],spacing:[Gs,zi],blur:["none","",Gi,be],brightness:fe(),borderColor:[t],borderRadius:["none","","full",Gi,be],borderSpacing:D(),borderWidth:N(),contrast:fe(),grayscale:V(),hueRotate:fe(),invert:V(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[Wse,zi],inset:O(),margin:O(),opacity:fe(),padding:D(),saturate:fe(),scale:fe(),sepia:V(),skew:fe(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",be]}],container:["container"],columns:[{columns:[Gi]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...de(),be]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Kd,be]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",be]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",Kd,be]}],"grid-cols":[{"grid-cols":[Qd]}],"col-start-end":[{col:["auto",{span:["full",Kd,be]},be]}],"col-start":[{"col-start":Z()}],"col-end":[{"col-end":Z()}],"grid-rows":[{"grid-rows":[Qd]}],"row-start-end":[{row:["auto",{span:[Kd,be]},be]}],"row-start":[{"row-start":Z()}],"row-end":[{"row-end":Z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",be]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",be]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",be,e]}],"min-w":[{"min-w":[be,e,"min","max","fit"]}],"max-w":[{"max-w":[be,e,"none","full","min","max","fit","prose",{screen:[Gi]},Gi]}],h:[{h:[be,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[be,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Gi,zi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ew]}],"font-family":[{font:[Qd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",be]}],"line-clamp":[{"line-clamp":["none",Zc,ew]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Gs,be]}],"list-image":[{"list-image":["none",be]}],"list-style-type":[{list:["none","disc","decimal",be]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Y(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Gs,zi]}],"underline-offset":[{"underline-offset":["auto",Gs,be]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",be]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",be]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...de(),Qse]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Kse]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Xse]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...Y(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:Y()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Y()]}],"outline-offset":[{"outline-offset":[Gs,be]}],"outline-w":[{outline:[Gs,zi]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:N()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Gs,zi]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Gi,Jse]}],"shadow-color":[{shadow:[Qd]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...ee(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ee()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Gi,be]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",be]}],duration:[{duration:fe()}],ease:[{ease:["linear","in","out","in-out",be]}],delay:[{delay:fe()}],animate:[{animate:["none","spin","ping","pulse","bounce",be]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[Kd,be]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",be]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",be]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",be]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Gs,zi,ew]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},rie=Fse(nie);function oe(...t){return rie(T3(t))}function sie(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(let r=0;r<6;r++){const s=Math.floor(Math.random()*t.length);n+=t[s]}return n}const Ah=Ese,$m=Tse,Bm=Sse,Nh=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>c.jsx(b3,{ref:r,sideOffset:e,className:oe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));Nh.displayName=b3.displayName;var c0=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},u0=typeof window>"u"||"Deno"in globalThis;function Br(){}function iie(t,e){return typeof t=="function"?t(e):t}function oie(t){return typeof t=="number"&&t>=0&&t!==1/0}function aie(t,e){return Math.max(t+(e||0)-Date.now(),0)}function $k(t,e){return typeof t=="function"?t(e):t}function lie(t,e){return typeof t=="function"?t(e):t}function Bk(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==RC(o,e.options))return!1}else if(!Xf(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function zk(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Yf(e.options.mutationKey)!==Yf(i))return!1}else if(!Xf(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function RC(t,e){return((e==null?void 0:e.queryKeyHashFn)||Yf)(t)}function Yf(t){return JSON.stringify(t,(e,n)=>ZE(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Xf(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Xf(t[n],e[n])):!1}function A3(t,e){if(t===e)return t;const n=Gk(t)&&Gk(e);if(n||ZE(t)&&ZE(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{};let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&r.includes(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=A3(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function Gk(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function ZE(t){if(!qk(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!qk(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function qk(t){return Object.prototype.toString.call(t)==="[object Object]"}function cie(t){return new Promise(e=>{setTimeout(e,t)})}function uie(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?A3(t,e):e}function die(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function hie(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var AC=Symbol();function N3(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===AC?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var $a,ao,iu,KO,fie=(KO=class extends c0{constructor(){super();Le(this,$a);Le(this,ao);Le(this,iu);we(this,iu,e=>{if(!u0&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){z(this,ao)||this.setEventListener(z(this,iu))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,ao))==null||e.call(this),we(this,ao,void 0))}setEventListener(e){var n;we(this,iu,e),(n=z(this,ao))==null||n.call(this),we(this,ao,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){z(this,$a)!==e&&(we(this,$a,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof z(this,$a)=="boolean"?z(this,$a):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},$a=new WeakMap,ao=new WeakMap,iu=new WeakMap,KO),k3=new fie,ou,lo,au,QO,pie=(QO=class extends c0{constructor(){super();Le(this,ou,!0);Le(this,lo);Le(this,au);we(this,au,e=>{if(!u0&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){z(this,lo)||this.setEventListener(z(this,au))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,lo))==null||e.call(this),we(this,lo,void 0))}setEventListener(e){var n;we(this,au,e),(n=z(this,lo))==null||n.call(this),we(this,lo,e(this.setOnline.bind(this)))}setOnline(e){z(this,ou)!==e&&(we(this,ou,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return z(this,ou)}},ou=new WeakMap,lo=new WeakMap,au=new WeakMap,QO),Dv=new pie;function mie(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function gie(t){return Math.min(1e3*2**t,3e4)}function O3(t){return(t??"online")==="online"?Dv.isOnline():!0}var D3=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function tw(t){return t instanceof D3}function j3(t){let e=!1,n=0,r=!1,s;const i=mie(),o=_=>{var b;r||(p(new D3(_)),(b=t.abort)==null||b.call(t))},a=()=>{e=!0},l=()=>{e=!1},u=()=>k3.isFocused()&&(t.networkMode==="always"||Dv.isOnline())&&t.canRun(),d=()=>O3(t.networkMode)&&t.canRun(),h=_=>{var b;r||(r=!0,(b=t.onSuccess)==null||b.call(t,_),s==null||s(),i.resolve(_))},p=_=>{var b;r||(r=!0,(b=t.onError)==null||b.call(t,_),s==null||s(),i.reject(_))},m=()=>new Promise(_=>{var b;s=x=>{(r||u())&&_(x)},(b=t.onPause)==null||b.call(t)}).then(()=>{var _;s=void 0,r||(_=t.onContinue)==null||_.call(t)}),y=()=>{if(r)return;let _;const b=n===0?t.initialPromise:void 0;try{_=b??t.fn()}catch(x){_=Promise.reject(x)}Promise.resolve(_).then(h).catch(x=>{var M;if(r)return;const E=t.retry??(u0?0:3),w=t.retryDelay??gie,I=typeof w=="function"?w(n,x):w,k=E===!0||typeof E=="number"&&n<E||typeof E=="function"&&E(n,x);if(e||!k){p(x);return}n++,(M=t.onFail)==null||M.call(t,n,x),cie(I).then(()=>u()?void 0:m()).then(()=>{e?p(x):y()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?y():m().then(y),i)}}function yie(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=a=>setTimeout(a,0);const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var In=yie(),Ba,YO,M3=(YO=class{constructor(){Le(this,Ba)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),oie(this.gcTime)&&we(this,Ba,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(u0?1/0:5*60*1e3))}clearGcTimeout(){z(this,Ba)&&(clearTimeout(z(this,Ba)),we(this,Ba,void 0))}},Ba=new WeakMap,YO),lu,cu,_r,za,hn,op,Ga,Gr,Ws,XO,vie=(XO=class extends M3{constructor(e){super();Le(this,Gr);Le(this,lu);Le(this,cu);Le(this,_r);Le(this,za);Le(this,hn);Le(this,op);Le(this,Ga);we(this,Ga,!1),we(this,op,e.defaultOptions),this.setOptions(e.options),this.observers=[],we(this,za,e.client),we(this,_r,z(this,za).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,we(this,lu,xie(this.options)),this.state=e.state??z(this,lu),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=z(this,hn))==null?void 0:e.promise}setOptions(e){this.options={...z(this,op),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&z(this,_r).remove(this)}setData(e,n){const r=uie(this.state.data,e,this.options);return ln(this,Gr,Ws).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){ln(this,Gr,Ws).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=z(this,hn))==null?void 0:r.promise;return(s=z(this,hn))==null||s.cancel(e),n?n.then(Br).catch(Br):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(z(this,lu))}isActive(){return this.observers.some(e=>lie(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===AC||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!aie(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=z(this,hn))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=z(this,hn))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),z(this,_r).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(z(this,hn)&&(z(this,Ga)?z(this,hn).cancel({revert:!0}):z(this,hn).cancelRetry()),this.scheduleGc()),z(this,_r).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ln(this,Gr,Ws).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(z(this,hn))return z(this,hn).continueRetry(),z(this,hn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(p=>p.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(we(this,Ga,!0),r.signal)})},i=()=>{const h=N3(this.options,n),p={client:z(this,za),queryKey:this.queryKey,meta:this.meta};return s(p),we(this,Ga,!1),this.options.persister?this.options.persister(h,p,this):h(p)},o={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:z(this,za),state:this.state,fetchFn:i};s(o),(l=this.options.behavior)==null||l.onFetch(o,this),we(this,cu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&ln(this,Gr,Ws).call(this,{type:"fetch",meta:(d=o.fetchOptions)==null?void 0:d.meta});const a=h=>{var p,m,y,_;tw(h)&&h.silent||ln(this,Gr,Ws).call(this,{type:"error",error:h}),tw(h)||((m=(p=z(this,_r).config).onError)==null||m.call(p,h,this),(_=(y=z(this,_r).config).onSettled)==null||_.call(y,this.state.data,h,this)),this.scheduleGc()};return we(this,hn,j3({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var p,m,y,_;if(h===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(b){a(b);return}(m=(p=z(this,_r).config).onSuccess)==null||m.call(p,h,this),(_=(y=z(this,_r).config).onSettled)==null||_.call(y,h,this.state.error,this),this.scheduleGc()},onError:a,onFail:(h,p)=>{ln(this,Gr,Ws).call(this,{type:"failed",failureCount:h,error:p})},onPause:()=>{ln(this,Gr,Ws).call(this,{type:"pause"})},onContinue:()=>{ln(this,Gr,Ws).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),z(this,hn).start()}},lu=new WeakMap,cu=new WeakMap,_r=new WeakMap,za=new WeakMap,hn=new WeakMap,op=new WeakMap,Ga=new WeakMap,Gr=new WeakSet,Ws=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,..._ie(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return tw(s)&&s.revert&&z(this,cu)?{...z(this,cu),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),In.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),z(this,_r).notify({query:this,type:"updated",action:e})})},XO);function _ie(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:O3(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function xie(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var gs,JO,wie=(JO=class extends c0{constructor(e={}){super();Le(this,gs);this.config=e,we(this,gs,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??RC(s,n);let o=this.get(i);return o||(o=new vie({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){z(this,gs).has(e.queryHash)||(z(this,gs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=z(this,gs).get(e.queryHash);n&&(e.destroy(),n===e&&z(this,gs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){In.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return z(this,gs).get(e)}getAll(){return[...z(this,gs).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Bk(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>Bk(e,r)):n}notify(e){In.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){In.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){In.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},gs=new WeakMap,JO),ys,Sn,qa,vs,Qi,ZO,bie=(ZO=class extends M3{constructor(e){super();Le(this,vs);Le(this,ys);Le(this,Sn);Le(this,qa);this.mutationId=e.mutationId,we(this,Sn,e.mutationCache),we(this,ys,[]),this.state=e.state||Eie(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){z(this,ys).includes(e)||(z(this,ys).push(e),this.clearGcTimeout(),z(this,Sn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){we(this,ys,z(this,ys).filter(n=>n!==e)),this.scheduleGc(),z(this,Sn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){z(this,ys).length||(this.state.status==="pending"?this.scheduleGc():z(this,Sn).remove(this))}continue(){var e;return((e=z(this,qa))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,i,o,a,l,u,d,h,p,m,y,_,b,x,E,w,I,k,M,C;we(this,qa,j3({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(S,P)=>{ln(this,vs,Qi).call(this,{type:"failed",failureCount:S,error:P})},onPause:()=>{ln(this,vs,Qi).call(this,{type:"pause"})},onContinue:()=>{ln(this,vs,Qi).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>z(this,Sn).canRun(this)}));const n=this.state.status==="pending",r=!z(this,qa).canStart();try{if(!n){ln(this,vs,Qi).call(this,{type:"pending",variables:e,isPaused:r}),await((i=(s=z(this,Sn).config).onMutate)==null?void 0:i.call(s,e,this));const P=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,e));P!==this.state.context&&ln(this,vs,Qi).call(this,{type:"pending",context:P,variables:e,isPaused:r})}const S=await z(this,qa).start();return await((u=(l=z(this,Sn).config).onSuccess)==null?void 0:u.call(l,S,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,S,e,this.state.context)),await((m=(p=z(this,Sn).config).onSettled)==null?void 0:m.call(p,S,null,this.state.variables,this.state.context,this)),await((_=(y=this.options).onSettled)==null?void 0:_.call(y,S,null,e,this.state.context)),ln(this,vs,Qi).call(this,{type:"success",data:S}),S}catch(S){try{throw await((x=(b=z(this,Sn).config).onError)==null?void 0:x.call(b,S,e,this.state.context,this)),await((w=(E=this.options).onError)==null?void 0:w.call(E,S,e,this.state.context)),await((k=(I=z(this,Sn).config).onSettled)==null?void 0:k.call(I,void 0,S,this.state.variables,this.state.context,this)),await((C=(M=this.options).onSettled)==null?void 0:C.call(M,void 0,S,e,this.state.context)),S}finally{ln(this,vs,Qi).call(this,{type:"error",error:S})}}finally{z(this,Sn).runNext(this)}}},ys=new WeakMap,Sn=new WeakMap,qa=new WeakMap,vs=new WeakSet,Qi=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),In.batch(()=>{z(this,ys).forEach(r=>{r.onMutationUpdate(e)}),z(this,Sn).notify({mutation:this,type:"updated",action:e})})},ZO);function Eie(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ys,qr,ap,eD,Tie=(eD=class extends c0{constructor(e={}){super();Le(this,Ys);Le(this,qr);Le(this,ap);this.config=e,we(this,Ys,new Set),we(this,qr,new Map),we(this,ap,0)}build(e,n,r){const s=new bie({mutationCache:this,mutationId:++um(this,ap)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){z(this,Ys).add(e);const n=zm(e);if(typeof n=="string"){const r=z(this,qr).get(n);r?r.push(e):z(this,qr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(z(this,Ys).delete(e)){const n=zm(e);if(typeof n=="string"){const r=z(this,qr).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&z(this,qr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=zm(e);if(typeof n=="string"){const r=z(this,qr).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=zm(e);if(typeof n=="string"){const s=(r=z(this,qr).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){In.batch(()=>{z(this,Ys).forEach(e=>{this.notify({type:"removed",mutation:e})}),z(this,Ys).clear(),z(this,qr).clear()})}getAll(){return Array.from(z(this,Ys))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>zk(n,r))}findAll(e={}){return this.getAll().filter(n=>zk(e,n))}notify(e){In.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return In.batch(()=>Promise.all(e.map(n=>n.continue().catch(Br))))}},Ys=new WeakMap,qr=new WeakMap,ap=new WeakMap,eD);function zm(t){var e;return(e=t.options.scope)==null?void 0:e.id}function Wk(t){return{onFetch:(e,n)=>{var d,h,p,m,y;const r=e.options,s=(p=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],o=((y=e.state.data)==null?void 0:y.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let _=!1;const b=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?_=!0:e.signal.addEventListener("abort",()=>{_=!0}),e.signal)})},x=N3(e.options,e.fetchOptions),E=async(w,I,k)=>{if(_)return Promise.reject();if(I==null&&w.pages.length)return Promise.resolve(w);const M={client:e.client,queryKey:e.queryKey,pageParam:I,direction:k?"backward":"forward",meta:e.options.meta};b(M);const C=await x(M),{maxPages:S}=e.options,P=k?hie:die;return{pages:P(w.pages,C,S),pageParams:P(w.pageParams,I,S)}};if(s&&i.length){const w=s==="backward",I=w?Sie:Hk,k={pages:i,pageParams:o},M=I(r,k);a=await E(k,M,w)}else{const w=t??i.length;do{const I=l===0?o[0]??r.initialPageParam:Hk(r,a);if(l>0&&I==null)break;a=await E(a,I),l++}while(l<w)}return a};e.options.persister?e.fetchFn=()=>{var _,b;return(b=(_=e.options).persister)==null?void 0:b.call(_,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function Hk(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Sie(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Et,co,uo,uu,du,ho,hu,fu,tD,Cie=(tD=class{constructor(t={}){Le(this,Et);Le(this,co);Le(this,uo);Le(this,uu);Le(this,du);Le(this,ho);Le(this,hu);Le(this,fu);we(this,Et,t.queryCache||new wie),we(this,co,t.mutationCache||new Tie),we(this,uo,t.defaultOptions||{}),we(this,uu,new Map),we(this,du,new Map),we(this,ho,0)}mount(){um(this,ho)._++,z(this,ho)===1&&(we(this,hu,k3.subscribe(async t=>{t&&(await this.resumePausedMutations(),z(this,Et).onFocus())})),we(this,fu,Dv.subscribe(async t=>{t&&(await this.resumePausedMutations(),z(this,Et).onOnline())})))}unmount(){var t,e;um(this,ho)._--,z(this,ho)===0&&((t=z(this,hu))==null||t.call(this),we(this,hu,void 0),(e=z(this,fu))==null||e.call(this),we(this,fu,void 0))}isFetching(t){return z(this,Et).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return z(this,co).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=z(this,Et).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=z(this,Et).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime($k(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return z(this,Et).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=z(this,Et).get(r.queryHash),i=s==null?void 0:s.state.data,o=iie(e,i);if(o!==void 0)return z(this,Et).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return In.batch(()=>z(this,Et).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=z(this,Et).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=z(this,Et);In.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=z(this,Et),r={type:"active",...t};return In.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=In.batch(()=>z(this,Et).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Br).catch(Br)}invalidateQueries(t,e={}){return In.batch(()=>{if(z(this,Et).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none")return Promise.resolve();const n={...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"};return this.refetchQueries(n,e)})}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=In.batch(()=>z(this,Et).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Br)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Br)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=z(this,Et).build(this,e);return n.isStaleByTime($k(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Br).catch(Br)}fetchInfiniteQuery(t){return t.behavior=Wk(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Br).catch(Br)}ensureInfiniteQueryData(t){return t.behavior=Wk(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Dv.isOnline()?z(this,co).resumePausedMutations():Promise.resolve()}getQueryCache(){return z(this,Et)}getMutationCache(){return z(this,co)}getDefaultOptions(){return z(this,uo)}setDefaultOptions(t){we(this,uo,t)}setQueryDefaults(t,e){z(this,uu).set(Yf(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...z(this,uu).values()],n={};return e.forEach(r=>{Xf(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){z(this,du).set(Yf(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...z(this,du).values()];let n={};return e.forEach(r=>{Xf(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...z(this,uo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=RC(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===AC&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...z(this,uo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){z(this,Et).clear(),z(this,co).clear()}},Et=new WeakMap,co=new WeakMap,uo=new WeakMap,uu=new WeakMap,du=new WeakMap,ho=new WeakMap,hu=new WeakMap,fu=new WeakMap,tD),Iie=g.createContext(void 0),Pie=({client:t,children:e})=>(g.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),c.jsx(Iie.Provider,{value:t,children:e}));const Kk=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Qk=T3,Mp=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return Qk(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const p=Kk(d)||Kk(h);return s[u][p]}),a=n&&Object.entries(n).reduce((u,d)=>{let[h,p]=d;return p===void 0||(u[h]=p),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:p,...m}=d;return Object.entries(m).every(y=>{let[_,b]=y;return Array.isArray(b)?b.includes({...i,...a}[_]):{...i,...a}[_]===b})?[...u,h,p]:u},[]);return Qk(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},Rie=Mp("inline-flex items-center justify-center whitespace-nowrap rounded-full text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-[#1DB954] text-black hover:bg-[#1ed760] hover:scale-105",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-white bg-transparent text-white hover:border-[#1DB954] hover:text-[#1DB954]",secondary:"bg-[#3E3E3E] text-white hover:bg-[#4f4f4f]",ghost:"hover:bg-[#282828] hover:text-white",link:"text-white underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-full px-3",lg:"h-11 rounded-full px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),te=g.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?bl:"button";return c.jsx(o,{className:oe(Rie({variant:e,size:n,className:t})),ref:i,...s})});te.displayName="Button";function NC(t){const e=t+"CollectionProvider",[n,r]=mr(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:y,children:_}=m,b=H.useRef(null),x=H.useRef(new Map).current;return c.jsx(s,{scope:y,itemMap:x,collectionRef:b,children:_})};o.displayName=e;const a=t+"CollectionSlot",l=H.forwardRef((m,y)=>{const{scope:_,children:b}=m,x=i(a,_),E=Ve(y,x.collectionRef);return c.jsx(bl,{ref:E,children:b})});l.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",h=H.forwardRef((m,y)=>{const{scope:_,children:b,...x}=m,E=H.useRef(null),w=Ve(y,E),I=i(u,_);return H.useEffect(()=>(I.itemMap.set(E,{ref:E,...x}),()=>void I.itemMap.delete(E))),c.jsx(bl,{[d]:"",ref:w,children:b})});h.displayName=u;function p(m){const y=i(t+"CollectionConsumer",m);return H.useCallback(()=>{const b=y.collectionRef.current;if(!b)return[];const x=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(y.itemMap.values()).sort((I,k)=>x.indexOf(I.ref.current)-x.indexOf(k.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:l,ItemSlot:h},p,r]}var Aie=g.createContext(void 0);function Lp(t){const e=g.useContext(Aie);return t||e||"ltr"}var nw=0;function L3(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Yk()),document.body.insertAdjacentElement("beforeend",t[1]??Yk()),nw++,()=>{nw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),nw--}},[])}function Yk(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var rw="focusScope.autoFocusOnMount",sw="focusScope.autoFocusOnUnmount",Xk={bubbles:!1,cancelable:!0},Nie="FocusScope",kC=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=g.useState(null),u=Lt(s),d=Lt(i),h=g.useRef(null),p=Ve(e,_=>l(_)),m=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let _=function(w){if(m.paused||!a)return;const I=w.target;a.contains(I)?h.current=I:Yi(h.current,{select:!0})},b=function(w){if(m.paused||!a)return;const I=w.relatedTarget;I!==null&&(a.contains(I)||Yi(h.current,{select:!0}))},x=function(w){if(document.activeElement===document.body)for(const k of w)k.removedNodes.length>0&&Yi(a)};document.addEventListener("focusin",_),document.addEventListener("focusout",b);const E=new MutationObserver(x);return a&&E.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",b),E.disconnect()}}},[r,a,m.paused]),g.useEffect(()=>{if(a){Zk.add(m);const _=document.activeElement;if(!a.contains(_)){const x=new CustomEvent(rw,Xk);a.addEventListener(rw,u),a.dispatchEvent(x),x.defaultPrevented||(kie(Lie(F3(a)),{select:!0}),document.activeElement===_&&Yi(a))}return()=>{a.removeEventListener(rw,u),setTimeout(()=>{const x=new CustomEvent(sw,Xk);a.addEventListener(sw,d),a.dispatchEvent(x),x.defaultPrevented||Yi(_??document.body,{select:!0}),a.removeEventListener(sw,d),Zk.remove(m)},0)}}},[a,u,d,m]);const y=g.useCallback(_=>{if(!n&&!r||m.paused)return;const b=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,x=document.activeElement;if(b&&x){const E=_.currentTarget,[w,I]=Oie(E);w&&I?!_.shiftKey&&x===I?(_.preventDefault(),n&&Yi(w,{select:!0})):_.shiftKey&&x===w&&(_.preventDefault(),n&&Yi(I,{select:!0})):x===E&&_.preventDefault()}},[n,r,m.paused]);return c.jsx(_e.div,{tabIndex:-1,...o,ref:p,onKeyDown:y})});kC.displayName=Nie;function kie(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Yi(r,{select:e}),document.activeElement!==n)return}function Oie(t){const e=F3(t),n=Jk(e,t),r=Jk(e.reverse(),t);return[n,r]}function F3(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Jk(t,e){for(const n of t)if(!Die(n,{upTo:e}))return n}function Die(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function jie(t){return t instanceof HTMLInputElement&&"select"in t}function Yi(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&jie(t)&&e&&t.select()}}var Zk=Mie();function Mie(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=e2(t,e),t.unshift(e)},remove(e){var n;t=e2(t,e),(n=t[0])==null||n.resume()}}}function e2(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Lie(t){return t.filter(e=>e.tagName!=="A")}var iw="rovingFocusGroup.onEntryFocus",Fie={bubbles:!1,cancelable:!0},d0="RovingFocusGroup",[eT,V3,Vie]=NC(d0),[Uie,h0]=mr(d0,[Vie]),[$ie,Bie]=Uie(d0),U3=g.forwardRef((t,e)=>c.jsx(eT.Provider,{scope:t.__scopeRovingFocusGroup,children:c.jsx(eT.Slot,{scope:t.__scopeRovingFocusGroup,children:c.jsx(zie,{...t,ref:e})})}));U3.displayName=d0;var zie=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,p=g.useRef(null),m=Ve(e,p),y=Lp(i),[_=null,b]=Ml({prop:o,defaultProp:a,onChange:l}),[x,E]=g.useState(!1),w=Lt(u),I=V3(n),k=g.useRef(!1),[M,C]=g.useState(0);return g.useEffect(()=>{const S=p.current;if(S)return S.addEventListener(iw,w),()=>S.removeEventListener(iw,w)},[w]),c.jsx($ie,{scope:n,orientation:r,dir:y,loop:s,currentTabStopId:_,onItemFocus:g.useCallback(S=>b(S),[b]),onItemShiftTab:g.useCallback(()=>E(!0),[]),onFocusableItemAdd:g.useCallback(()=>C(S=>S+1),[]),onFocusableItemRemove:g.useCallback(()=>C(S=>S-1),[]),children:c.jsx(_e.div,{tabIndex:x||M===0?-1:0,"data-orientation":r,...h,ref:m,style:{outline:"none",...t.style},onMouseDown:ae(t.onMouseDown,()=>{k.current=!0}),onFocus:ae(t.onFocus,S=>{const P=!k.current;if(S.target===S.currentTarget&&P&&!x){const R=new CustomEvent(iw,Fie);if(S.currentTarget.dispatchEvent(R),!R.defaultPrevented){const O=I().filter(Y=>Y.focusable),D=O.find(Y=>Y.active),N=O.find(Y=>Y.id===_),de=[D,N,...O].filter(Boolean).map(Y=>Y.ref.current);z3(de,d)}}k.current=!1}),onBlur:ae(t.onBlur,()=>E(!1))})})}),$3="RovingFocusGroupItem",B3=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...o}=t,a=Do(),l=i||a,u=Bie($3,n),d=u.currentTabStopId===l,h=V3(n),{onFocusableItemAdd:p,onFocusableItemRemove:m}=u;return g.useEffect(()=>{if(r)return p(),()=>m()},[r,p,m]),c.jsx(eT.ItemSlot,{scope:n,id:l,focusable:r,active:s,children:c.jsx(_e.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:ae(t.onMouseDown,y=>{r?u.onItemFocus(l):y.preventDefault()}),onFocus:ae(t.onFocus,()=>u.onItemFocus(l)),onKeyDown:ae(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){u.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const _=Wie(y,u.orientation,u.dir);if(_!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let x=h().filter(E=>E.focusable).map(E=>E.ref.current);if(_==="last")x.reverse();else if(_==="prev"||_==="next"){_==="prev"&&x.reverse();const E=x.indexOf(y.currentTarget);x=u.loop?Hie(x,E+1):x.slice(E+1)}setTimeout(()=>z3(x))}})})})});B3.displayName=$3;var Gie={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function qie(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Wie(t,e,n){const r=qie(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Gie[r]}function z3(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Hie(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var G3=U3,q3=B3,Kie=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},rc=new WeakMap,Gm=new WeakMap,qm={},ow=0,W3=function(t){return t&&(t.host||W3(t.parentNode))},Qie=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=W3(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Yie=function(t,e,n,r){var s=Qie(e,Array.isArray(t)?t:[t]);qm[n]||(qm[n]=new WeakMap);var i=qm[n],o=[],a=new Set,l=new Set(s),u=function(h){!h||a.has(h)||(a.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(p){if(a.has(p))d(p);else try{var m=p.getAttribute(r),y=m!==null&&m!=="false",_=(rc.get(p)||0)+1,b=(i.get(p)||0)+1;rc.set(p,_),i.set(p,b),o.push(p),_===1&&y&&Gm.set(p,!0),b===1&&p.setAttribute(n,"true"),y||p.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",p,x)}})};return d(e),a.clear(),ow++,function(){o.forEach(function(h){var p=rc.get(h)-1,m=i.get(h)-1;rc.set(h,p),i.set(h,m),p||(Gm.has(h)||h.removeAttribute(r),Gm.delete(h)),m||h.removeAttribute(n)}),ow--,ow||(rc=new WeakMap,rc=new WeakMap,Gm=new WeakMap,qm={})}},H3=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=Kie(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),Yie(r,s,n,"aria-hidden")):function(){return null}},Zg="right-scroll-bar-position",ey="width-before-scroll-bar",Xie="with-scroll-bars-hidden",Jie="--removed-body-scroll-bar-size";function aw(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Zie(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var eoe=typeof window<"u"?g.useLayoutEffect:g.useEffect,t2=new WeakMap;function toe(t,e){var n=Zie(null,function(r){return t.forEach(function(s){return aw(s,r)})});return eoe(function(){var r=t2.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||aw(a,null)}),i.forEach(function(a){s.has(a)||aw(a,o)})}t2.set(n,t)},[t]),n}function noe(t){return t}function roe(t,e){e===void 0&&(e=noe);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return s}function soe(t){t===void 0&&(t={});var e=roe(null);return e.options=bs({async:!0,ssr:!1},t),e}var K3=function(t){var e=t.sideCar,n=mp(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,bs({},n))};K3.isSideCarExport=!0;function ioe(t,e){return t.useMedium(e),K3}var Q3=soe(),lw=function(){},f0=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:lw,onWheelCapture:lw,onTouchMoveCapture:lw}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,p=t.sideCar,m=t.noIsolation,y=t.inert,_=t.allowPinchZoom,b=t.as,x=b===void 0?"div":b,E=t.gapMode,w=mp(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=p,k=toe([n,e]),M=bs(bs({},w),s);return g.createElement(g.Fragment,null,d&&g.createElement(I,{sideCar:Q3,removeScrollBar:u,shards:h,noIsolation:m,inert:y,setCallbacks:i,allowPinchZoom:!!_,lockRef:n,gapMode:E}),o?g.cloneElement(g.Children.only(a),bs(bs({},M),{ref:k})):g.createElement(x,bs({},M,{className:l,ref:k}),a))});f0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};f0.classNames={fullWidth:ey,zeroRight:Zg};var ooe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function aoe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=ooe();return e&&t.setAttribute("nonce",e),t}function loe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function coe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var uoe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=aoe())&&(loe(e,n),coe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},doe=function(){var t=uoe();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},Y3=function(){var t=doe(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},hoe={left:0,top:0,right:0,gap:0},cw=function(t){return parseInt(t||"",10)||0},foe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[cw(n),cw(r),cw(s)]},poe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return hoe;var e=foe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},moe=Y3(),eu="data-scroll-locked",goe=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Xie,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(eu,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Zg,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(ey,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Zg," .").concat(Zg,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ey," .").concat(ey,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(eu,`] {
    `).concat(Jie,": ").concat(a,`px;
  }
`)},n2=function(){var t=parseInt(document.body.getAttribute(eu)||"0",10);return isFinite(t)?t:0},yoe=function(){g.useEffect(function(){return document.body.setAttribute(eu,(n2()+1).toString()),function(){var t=n2()-1;t<=0?document.body.removeAttribute(eu):document.body.setAttribute(eu,t.toString())}},[])},voe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;yoe();var i=g.useMemo(function(){return poe(s)},[s]);return g.createElement(moe,{styles:goe(i,!e,s,n?"":"!important")})},tT=!1;if(typeof window<"u")try{var Wm=Object.defineProperty({},"passive",{get:function(){return tT=!0,!0}});window.addEventListener("test",Wm,Wm),window.removeEventListener("test",Wm,Wm)}catch{tT=!1}var sc=tT?{passive:!1}:!1,_oe=function(t){return t.tagName==="TEXTAREA"},X3=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!_oe(t)&&n[e]==="visible")},xoe=function(t){return X3(t,"overflowY")},woe=function(t){return X3(t,"overflowX")},r2=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=J3(t,r);if(s){var i=Z3(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},boe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Eoe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},J3=function(t,e){return t==="v"?xoe(e):woe(e)},Z3=function(t,e){return t==="v"?boe(e):Eoe(e)},Toe=function(t,e){return t==="h"&&e==="rtl"?-1:1},Soe=function(t,e,n,r,s){var i=Toe(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),u=!1,d=o>0,h=0,p=0;do{var m=Z3(t,a),y=m[0],_=m[1],b=m[2],x=_-b-i*y;(y||x)&&J3(t,a)&&(h+=x,p+=y),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(h)<1||!d&&Math.abs(p)<1)&&(u=!0),u},Hm=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},s2=function(t){return[t.deltaX,t.deltaY]},i2=function(t){return t&&"current"in t?t.current:t},Coe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Ioe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Poe=0,ic=[];function Roe(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),s=g.useState(Poe++)[0],i=g.useState(Y3)[0],o=g.useRef(t);g.useEffect(function(){o.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var _=rW([t.lockRef.current],(t.shards||[]).map(i2),!0).filter(Boolean);return _.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),_.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=g.useCallback(function(_,b){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!o.current.allowPinchZoom;var x=Hm(_),E=n.current,w="deltaX"in _?_.deltaX:E[0]-x[0],I="deltaY"in _?_.deltaY:E[1]-x[1],k,M=_.target,C=Math.abs(w)>Math.abs(I)?"h":"v";if("touches"in _&&C==="h"&&M.type==="range")return!1;var S=r2(C,M);if(!S)return!0;if(S?k=C:(k=C==="v"?"h":"v",S=r2(C,M)),!S)return!1;if(!r.current&&"changedTouches"in _&&(w||I)&&(r.current=k),!k)return!0;var P=r.current||k;return Soe(P,b,_,P==="h"?w:I)},[]),l=g.useCallback(function(_){var b=_;if(!(!ic.length||ic[ic.length-1]!==i)){var x="deltaY"in b?s2(b):Hm(b),E=e.current.filter(function(k){return k.name===b.type&&(k.target===b.target||b.target===k.shadowParent)&&Coe(k.delta,x)})[0];if(E&&E.should){b.cancelable&&b.preventDefault();return}if(!E){var w=(o.current.shards||[]).map(i2).filter(Boolean).filter(function(k){return k.contains(b.target)}),I=w.length>0?a(b,w[0]):!o.current.noIsolation;I&&b.cancelable&&b.preventDefault()}}},[]),u=g.useCallback(function(_,b,x,E){var w={name:_,delta:b,target:x,should:E,shadowParent:Aoe(x)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(I){return I!==w})},1)},[]),d=g.useCallback(function(_){n.current=Hm(_),r.current=void 0},[]),h=g.useCallback(function(_){u(_.type,s2(_),_.target,a(_,t.lockRef.current))},[]),p=g.useCallback(function(_){u(_.type,Hm(_),_.target,a(_,t.lockRef.current))},[]);g.useEffect(function(){return ic.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",l,sc),document.addEventListener("touchmove",l,sc),document.addEventListener("touchstart",d,sc),function(){ic=ic.filter(function(_){return _!==i}),document.removeEventListener("wheel",l,sc),document.removeEventListener("touchmove",l,sc),document.removeEventListener("touchstart",d,sc)}},[]);var m=t.removeScrollBar,y=t.inert;return g.createElement(g.Fragment,null,y?g.createElement(i,{styles:Ioe(s)}):null,m?g.createElement(voe,{gapMode:t.gapMode}):null)}function Aoe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Noe=ioe(Q3,Roe);var OC=g.forwardRef(function(t,e){return g.createElement(f0,bs({},t,{ref:e,sideCar:Noe}))});OC.classNames=f0.classNames;var nT=["Enter"," "],koe=["ArrowDown","PageUp","Home"],eU=["ArrowUp","PageDown","End"],Ooe=[...koe,...eU],Doe={ltr:[...nT,"ArrowRight"],rtl:[...nT,"ArrowLeft"]},joe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Fp="Menu",[Jf,Moe,Loe]=NC(Fp),[Ll,tU]=mr(Fp,[Loe,s0,h0]),p0=s0(),nU=h0(),[Foe,Fl]=Ll(Fp),[Voe,Vp]=Ll(Fp),rU=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=t,a=p0(e),[l,u]=g.useState(null),d=g.useRef(!1),h=Lt(i),p=Lp(s);return g.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),c.jsx(u3,{...a,children:c.jsx(Foe,{scope:e,open:n,onOpenChange:h,content:l,onContentChange:u,children:c.jsx(Voe,{scope:e,onClose:g.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:p,modal:o,children:r})})})};rU.displayName=Fp;var Uoe="MenuAnchor",DC=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=p0(n);return c.jsx(d3,{...s,...r,ref:e})});DC.displayName=Uoe;var jC="MenuPortal",[$oe,sU]=Ll(jC,{forceMount:void 0}),iU=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=Fl(jC,e);return c.jsx($oe,{scope:e,forceMount:n,children:c.jsx(Dn,{present:n||i.open,children:c.jsx(CC,{asChild:!0,container:s,children:r})})})};iU.displayName=jC;var Cr="MenuContent",[Boe,MC]=Ll(Cr),oU=g.forwardRef((t,e)=>{const n=sU(Cr,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=Fl(Cr,t.__scopeMenu),o=Vp(Cr,t.__scopeMenu);return c.jsx(Jf.Provider,{scope:t.__scopeMenu,children:c.jsx(Dn,{present:r||i.open,children:c.jsx(Jf.Slot,{scope:t.__scopeMenu,children:o.modal?c.jsx(zoe,{...s,ref:e}):c.jsx(Goe,{...s,ref:e})})})})}),zoe=g.forwardRef((t,e)=>{const n=Fl(Cr,t.__scopeMenu),r=g.useRef(null),s=Ve(e,r);return g.useEffect(()=>{const i=r.current;if(i)return H3(i)},[]),c.jsx(LC,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ae(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Goe=g.forwardRef((t,e)=>{const n=Fl(Cr,t.__scopeMenu);return c.jsx(LC,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),LC=g.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:p,onDismiss:m,disableOutsideScroll:y,..._}=t,b=Fl(Cr,n),x=Vp(Cr,n),E=p0(n),w=nU(n),I=Moe(n),[k,M]=g.useState(null),C=g.useRef(null),S=Ve(e,C,b.onContentChange),P=g.useRef(0),R=g.useRef(""),O=g.useRef(0),D=g.useRef(null),N=g.useRef("right"),Z=g.useRef(0),de=y?OC:g.Fragment,Y=y?{as:bl,allowPinchZoom:!0}:void 0,ee=V=>{var xe,jr;const W=R.current+V,fe=I().filter(At=>!At.disabled),re=document.activeElement,pe=(xe=fe.find(At=>At.ref.current===re))==null?void 0:xe.textValue,Ee=fe.map(At=>At.textValue),Be=nae(Ee,W,pe),at=(jr=fe.find(At=>At.textValue===Be))==null?void 0:jr.ref.current;(function At(Tn){R.current=Tn,window.clearTimeout(P.current),Tn!==""&&(P.current=window.setTimeout(()=>At(""),1e3))})(W),at&&setTimeout(()=>at.focus())};g.useEffect(()=>()=>window.clearTimeout(P.current),[]),L3();const $=g.useCallback(V=>{var fe,re;return N.current===((fe=D.current)==null?void 0:fe.side)&&sae(V,(re=D.current)==null?void 0:re.area)},[]);return c.jsx(Boe,{scope:n,searchRef:R,onItemEnter:g.useCallback(V=>{$(V)&&V.preventDefault()},[$]),onItemLeave:g.useCallback(V=>{var W;$(V)||((W=C.current)==null||W.focus(),M(null))},[$]),onTriggerLeave:g.useCallback(V=>{$(V)&&V.preventDefault()},[$]),pointerGraceTimerRef:O,onPointerGraceIntentChange:g.useCallback(V=>{D.current=V},[]),children:c.jsx(de,{...Y,children:c.jsx(kC,{asChild:!0,trapped:s,onMountAutoFocus:ae(i,V=>{var W;V.preventDefault(),(W=C.current)==null||W.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:c.jsx(e0,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:p,onDismiss:m,children:c.jsx(G3,{asChild:!0,...w,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:M,onEntryFocus:ae(l,V=>{x.isUsingKeyboardRef.current||V.preventDefault()}),preventScrollOnEntryFocus:!0,children:c.jsx(h3,{role:"menu","aria-orientation":"vertical","data-state":bU(b.open),"data-radix-menu-content":"",dir:x.dir,...E,..._,ref:S,style:{outline:"none",..._.style},onKeyDown:ae(_.onKeyDown,V=>{const fe=V.target.closest("[data-radix-menu-content]")===V.currentTarget,re=V.ctrlKey||V.altKey||V.metaKey,pe=V.key.length===1;fe&&(V.key==="Tab"&&V.preventDefault(),!re&&pe&&ee(V.key));const Ee=C.current;if(V.target!==Ee||!Ooe.includes(V.key))return;V.preventDefault();const at=I().filter(xe=>!xe.disabled).map(xe=>xe.ref.current);eU.includes(V.key)&&at.reverse(),eae(at)}),onBlur:ae(t.onBlur,V=>{V.currentTarget.contains(V.target)||(window.clearTimeout(P.current),R.current="")}),onPointerMove:ae(t.onPointerMove,Zf(V=>{const W=V.target,fe=Z.current!==V.clientX;if(V.currentTarget.contains(W)&&fe){const re=V.clientX>Z.current?"right":"left";N.current=re,Z.current=V.clientX}}))})})})})})})});oU.displayName=Cr;var qoe="MenuGroup",FC=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return c.jsx(_e.div,{role:"group",...r,ref:e})});FC.displayName=qoe;var Woe="MenuLabel",aU=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return c.jsx(_e.div,{...r,ref:e})});aU.displayName=Woe;var jv="MenuItem",o2="menu.itemSelect",m0=g.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=g.useRef(null),o=Vp(jv,t.__scopeMenu),a=MC(jv,t.__scopeMenu),l=Ve(e,i),u=g.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const p=new CustomEvent(o2,{bubbles:!0,cancelable:!0});h.addEventListener(o2,m=>r==null?void 0:r(m),{once:!0}),$5(h,p),p.defaultPrevented?u.current=!1:o.onClose()}};return c.jsx(lU,{...s,ref:l,disabled:n,onClick:ae(t.onClick,d),onPointerDown:h=>{var p;(p=t.onPointerDown)==null||p.call(t,h),u.current=!0},onPointerUp:ae(t.onPointerUp,h=>{var p;u.current||(p=h.currentTarget)==null||p.click()}),onKeyDown:ae(t.onKeyDown,h=>{const p=a.searchRef.current!=="";n||p&&h.key===" "||nT.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});m0.displayName=jv;var lU=g.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,o=MC(jv,n),a=nU(n),l=g.useRef(null),u=Ve(e,l),[d,h]=g.useState(!1),[p,m]=g.useState("");return g.useEffect(()=>{const y=l.current;y&&m((y.textContent??"").trim())},[i.children]),c.jsx(Jf.ItemSlot,{scope:n,disabled:r,textValue:s??p,children:c.jsx(q3,{asChild:!0,...a,focusable:!r,children:c.jsx(_e.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:ae(t.onPointerMove,Zf(y=>{r?o.onItemLeave(y):(o.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ae(t.onPointerLeave,Zf(y=>o.onItemLeave(y))),onFocus:ae(t.onFocus,()=>h(!0)),onBlur:ae(t.onBlur,()=>h(!1))})})})}),Hoe="MenuCheckboxItem",cU=g.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return c.jsx(pU,{scope:t.__scopeMenu,checked:n,children:c.jsx(m0,{role:"menuitemcheckbox","aria-checked":Mv(n)?"mixed":n,...s,ref:e,"data-state":UC(n),onSelect:ae(s.onSelect,()=>r==null?void 0:r(Mv(n)?!0:!n),{checkForDefaultPrevented:!1})})})});cU.displayName=Hoe;var uU="MenuRadioGroup",[Koe,Qoe]=Ll(uU,{value:void 0,onValueChange:()=>{}}),dU=g.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=Lt(r);return c.jsx(Koe,{scope:t.__scopeMenu,value:n,onValueChange:i,children:c.jsx(FC,{...s,ref:e})})});dU.displayName=uU;var hU="MenuRadioItem",fU=g.forwardRef((t,e)=>{const{value:n,...r}=t,s=Qoe(hU,t.__scopeMenu),i=n===s.value;return c.jsx(pU,{scope:t.__scopeMenu,checked:i,children:c.jsx(m0,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":UC(i),onSelect:ae(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});fU.displayName=hU;var VC="MenuItemIndicator",[pU,Yoe]=Ll(VC,{checked:!1}),mU=g.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=Yoe(VC,n);return c.jsx(Dn,{present:r||Mv(i.checked)||i.checked===!0,children:c.jsx(_e.span,{...s,ref:e,"data-state":UC(i.checked)})})});mU.displayName=VC;var Xoe="MenuSeparator",gU=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return c.jsx(_e.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});gU.displayName=Xoe;var Joe="MenuArrow",yU=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=p0(n);return c.jsx(f3,{...s,...r,ref:e})});yU.displayName=Joe;var Zoe="MenuSub",[Z_e,vU]=Ll(Zoe),kh="MenuSubTrigger",_U=g.forwardRef((t,e)=>{const n=Fl(kh,t.__scopeMenu),r=Vp(kh,t.__scopeMenu),s=vU(kh,t.__scopeMenu),i=MC(kh,t.__scopeMenu),o=g.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,u={__scopeMenu:t.__scopeMenu},d=g.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return g.useEffect(()=>d,[d]),g.useEffect(()=>{const h=a.current;return()=>{window.clearTimeout(h),l(null)}},[a,l]),c.jsx(DC,{asChild:!0,...u,children:c.jsx(lU,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":bU(n.open),...t,ref:Z_(e,s.onTriggerChange),onClick:h=>{var p;(p=t.onClick)==null||p.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ae(t.onPointerMove,Zf(h=>{i.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:ae(t.onPointerLeave,Zf(h=>{var m,y;d();const p=(m=n.content)==null?void 0:m.getBoundingClientRect();if(p){const _=(y=n.content)==null?void 0:y.dataset.side,b=_==="right",x=b?-5:5,E=p[b?"left":"right"],w=p[b?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:E,y:p.top},{x:w,y:p.top},{x:w,y:p.bottom},{x:E,y:p.bottom}],side:_}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ae(t.onKeyDown,h=>{var m;const p=i.searchRef.current!=="";t.disabled||p&&h.key===" "||Doe[r.dir].includes(h.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),h.preventDefault())})})})});_U.displayName=kh;var xU="MenuSubContent",wU=g.forwardRef((t,e)=>{const n=sU(Cr,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=Fl(Cr,t.__scopeMenu),o=Vp(Cr,t.__scopeMenu),a=vU(xU,t.__scopeMenu),l=g.useRef(null),u=Ve(e,l);return c.jsx(Jf.Provider,{scope:t.__scopeMenu,children:c.jsx(Dn,{present:r||i.open,children:c.jsx(Jf.Slot,{scope:t.__scopeMenu,children:c.jsx(LC,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=l.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:ae(t.onFocusOutside,d=>{d.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ae(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:ae(t.onKeyDown,d=>{var m;const h=d.currentTarget.contains(d.target),p=joe[o.dir].includes(d.key);h&&p&&(i.onOpenChange(!1),(m=a.trigger)==null||m.focus(),d.preventDefault())})})})})})});wU.displayName=xU;function bU(t){return t?"open":"closed"}function Mv(t){return t==="indeterminate"}function UC(t){return Mv(t)?"indeterminate":t?"checked":"unchecked"}function eae(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function tae(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function nae(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=tae(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function rae(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,u=e[o].x,d=e[o].y;l>r!=d>r&&n<(u-a)*(r-l)/(d-l)+a&&(s=!s)}return s}function sae(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return rae(n,e)}function Zf(t){return e=>e.pointerType==="mouse"?t(e):void 0}var iae=rU,oae=DC,aae=iU,lae=oU,cae=FC,uae=aU,dae=m0,hae=cU,fae=dU,pae=fU,mae=mU,gae=gU,yae=yU,vae=_U,_ae=wU,$C="DropdownMenu",[xae,e0e]=mr($C,[tU]),jn=tU(),[wae,EU]=xae($C),TU=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:a=!0}=t,l=jn(e),u=g.useRef(null),[d=!1,h]=Ml({prop:s,defaultProp:i,onChange:o});return c.jsx(wae,{scope:e,triggerId:Do(),triggerRef:u,contentId:Do(),open:d,onOpenChange:h,onOpenToggle:g.useCallback(()=>h(p=>!p),[h]),modal:a,children:c.jsx(iae,{...l,open:d,onOpenChange:h,dir:r,modal:a,children:n})})};TU.displayName=$C;var SU="DropdownMenuTrigger",CU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=EU(SU,n),o=jn(n);return c.jsx(oae,{asChild:!0,...o,children:c.jsx(_e.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Z_(e,i.triggerRef),onPointerDown:ae(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:ae(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});CU.displayName=SU;var bae="DropdownMenuPortal",IU=t=>{const{__scopeDropdownMenu:e,...n}=t,r=jn(e);return c.jsx(aae,{...r,...n})};IU.displayName=bae;var PU="DropdownMenuContent",RU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=EU(PU,n),i=jn(n),o=g.useRef(!1);return c.jsx(lae,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:ae(t.onCloseAutoFocus,a=>{var l;o.current||(l=s.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ae(t.onInteractOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;(!s.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});RU.displayName=PU;var Eae="DropdownMenuGroup",Tae=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=jn(n);return c.jsx(cae,{...s,...r,ref:e})});Tae.displayName=Eae;var Sae="DropdownMenuLabel",AU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=jn(n);return c.jsx(uae,{...s,...r,ref:e})});AU.displayName=Sae;var Cae="DropdownMenuItem",NU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=jn(n);return c.jsx(dae,{...s,...r,ref:e})});NU.displayName=Cae;var Iae="DropdownMenuCheckboxItem",kU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=jn(n);return c.jsx(hae,{...s,...r,ref:e})});kU.displayName=Iae;var Pae="DropdownMenuRadioGroup",Rae=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=jn(n);return c.jsx(fae,{...s,...r,ref:e})});Rae.displayName=Pae;var Aae="DropdownMenuRadioItem",OU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=jn(n);return c.jsx(pae,{...s,...r,ref:e})});OU.displayName=Aae;var Nae="DropdownMenuItemIndicator",DU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=jn(n);return c.jsx(mae,{...s,...r,ref:e})});DU.displayName=Nae;var kae="DropdownMenuSeparator",jU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=jn(n);return c.jsx(gae,{...s,...r,ref:e})});jU.displayName=kae;var Oae="DropdownMenuArrow",Dae=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=jn(n);return c.jsx(yae,{...s,...r,ref:e})});Dae.displayName=Oae;var jae="DropdownMenuSubTrigger",MU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=jn(n);return c.jsx(vae,{...s,...r,ref:e})});MU.displayName=jae;var Mae="DropdownMenuSubContent",LU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=jn(n);return c.jsx(_ae,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});LU.displayName=Mae;var Lae=TU,Fae=CU,Vae=IU,FU=RU,VU=AU,UU=NU,$U=kU,BU=OU,zU=DU,GU=jU,qU=MU,WU=LU;/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uae=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HU=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $ae={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bae=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>g.createElement("svg",{ref:l,...$ae,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:HU("lucide",s),...a},[...o.map(([u,d])=>g.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=(t,e)=>{const n=g.forwardRef(({className:r,...s},i)=>g.createElement(Bae,{ref:i,iconNode:e,className:HU(`lucide-${Uae(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zae=ne("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gae=ne("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=ne("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=ne("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=ne("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qae=ne("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wae=ne("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=ne("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hae=ne("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kae=ne("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=ne("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qae=ne("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yae=ne("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=ne("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xae=ne("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=ne("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jae=ne("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=ne("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zae=ne("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ele=ne("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=ne("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=ne("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=ne("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tle=ne("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nle=ne("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rle=ne("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sle=ne("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=ne("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=ne("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ile=ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ole=ne("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ale=ne("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e$=ne("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lle=ne("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t$=ne("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n$=ne("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=ne("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cle=ne("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ule=ne("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r$=ne("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=ne("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dle=ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hle=ne("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s$=ne("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fle=ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=ne("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ple=ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mle=ne("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gle=ne("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i$=ne("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=ne("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=ne("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=ne("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=ne("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yle=ne("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=ne("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vle=ne("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _le=ne("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$=ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xle=ne("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wle=ne("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l$=ne("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=ne("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),ble=Lae,Ele=Fae,Tle=g.forwardRef(({className:t,inset:e,children:n,...r},s)=>c.jsxs(qU,{ref:s,className:oe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,c.jsx(BC,{className:"ml-auto h-4 w-4"})]}));Tle.displayName=qU.displayName;const Sle=g.forwardRef(({className:t,...e},n)=>c.jsx(WU,{ref:n,className:oe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));Sle.displayName=WU.displayName;const c$=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>c.jsx(Vae,{children:c.jsx(FU,{ref:r,sideOffset:e,className:oe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));c$.displayName=FU.displayName;const Oh=g.forwardRef(({className:t,inset:e,...n},r)=>c.jsx(UU,{ref:r,className:oe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Oh.displayName=UU.displayName;const Cle=g.forwardRef(({className:t,children:e,checked:n,...r},s)=>c.jsxs($U,{ref:s,className:oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(zU,{children:c.jsx(md,{className:"h-4 w-4"})})}),e]}));Cle.displayName=$U.displayName;const Ile=g.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(BU,{ref:r,className:oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(zU,{children:c.jsx(Xae,{className:"h-2 w-2 fill-current"})})}),e]}));Ile.displayName=BU.displayName;const u$=g.forwardRef(({className:t,inset:e,...n},r)=>c.jsx(VU,{ref:r,className:oe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));u$.displayName=VU.displayName;const rT=g.forwardRef(({className:t,...e},n)=>c.jsx(GU,{ref:n,className:oe("-mx-1 my-1 h-px bg-muted",t),...e}));rT.displayName=GU.displayName;var HC="Avatar",[Ple,t0e]=mr(HC),[Rle,d$]=Ple(HC),h$=g.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=g.useState("idle");return c.jsx(Rle,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:c.jsx(_e.span,{...r,ref:e})})});h$.displayName=HC;var f$="AvatarImage",p$=g.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=d$(f$,n),a=Ale(r,i.referrerPolicy),l=Lt(u=>{s(u),o.onImageLoadingStatusChange(u)});return Os(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?c.jsx(_e.img,{...i,ref:e,src:r}):null});p$.displayName=f$;var m$="AvatarFallback",g$=g.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=d$(m$,n),[o,a]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),o&&i.imageLoadingStatus!=="loaded"?c.jsx(_e.span,{...s,ref:e}):null});g$.displayName=m$;function Ale(t,e){const[n,r]=g.useState("idle");return Os(()=>{if(!t){r("error");return}let s=!0;const i=new window.Image,o=a=>()=>{s&&r(a)};return r("loading"),i.onload=o("loaded"),i.onerror=o("error"),i.src=t,e&&(i.referrerPolicy=e),()=>{s=!1}},[t,e]),n}var y$=h$,v$=p$,_$=g$;const $p=g.forwardRef(({className:t,...e},n)=>c.jsx(y$,{ref:n,className:oe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));$p.displayName=y$.displayName;const x0=g.forwardRef(({className:t,...e},n)=>c.jsx(v$,{ref:n,className:oe("aspect-square h-full w-full",t),...e}));x0.displayName=v$.displayName;const Bp=g.forwardRef(({className:t,...e},n)=>c.jsx(_$,{ref:n,className:oe("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Bp.displayName=_$.displayName;var KC="Dialog",[x$,n0e]=mr(KC),[Nle,is]=x$(KC),w$=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=g.useRef(null),l=g.useRef(null),[u=!1,d]=Ml({prop:r,defaultProp:s,onChange:i});return c.jsx(Nle,{scope:e,triggerRef:a,contentRef:l,contentId:Do(),titleId:Do(),descriptionId:Do(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};w$.displayName=KC;var b$="DialogTrigger",kle=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=is(b$,n),i=Ve(e,s.triggerRef);return c.jsx(_e.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":XC(s.open),...r,ref:i,onClick:ae(t.onClick,s.onOpenToggle)})});kle.displayName=b$;var QC="DialogPortal",[Ole,E$]=x$(QC,{forceMount:void 0}),T$=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=is(QC,e);return c.jsx(Ole,{scope:e,forceMount:n,children:g.Children.map(r,o=>c.jsx(Dn,{present:n||i.open,children:c.jsx(CC,{asChild:!0,container:s,children:o})}))})};T$.displayName=QC;var Lv="DialogOverlay",S$=g.forwardRef((t,e)=>{const n=E$(Lv,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=is(Lv,t.__scopeDialog);return i.modal?c.jsx(Dn,{present:r||i.open,children:c.jsx(Dle,{...s,ref:e})}):null});S$.displayName=Lv;var Dle=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=is(Lv,n);return c.jsx(OC,{as:bl,allowPinchZoom:!0,shards:[s.contentRef],children:c.jsx(_e.div,{"data-state":XC(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Cl="DialogContent",C$=g.forwardRef((t,e)=>{const n=E$(Cl,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=is(Cl,t.__scopeDialog);return c.jsx(Dn,{present:r||i.open,children:i.modal?c.jsx(jle,{...s,ref:e}):c.jsx(Mle,{...s,ref:e})})});C$.displayName=Cl;var jle=g.forwardRef((t,e)=>{const n=is(Cl,t.__scopeDialog),r=g.useRef(null),s=Ve(e,n.contentRef,r);return g.useEffect(()=>{const i=r.current;if(i)return H3(i)},[]),c.jsx(I$,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ae(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ae(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:ae(t.onFocusOutside,i=>i.preventDefault())})}),Mle=g.forwardRef((t,e)=>{const n=is(Cl,t.__scopeDialog),r=g.useRef(!1),s=g.useRef(!1);return c.jsx(I$,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,u;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),I$=g.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=is(Cl,n),l=g.useRef(null),u=Ve(e,l);return L3(),c.jsxs(c.Fragment,{children:[c.jsx(kC,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:c.jsx(e0,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":XC(a.open),...o,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(Lle,{titleId:a.titleId}),c.jsx(Vle,{contentRef:l,descriptionId:a.descriptionId})]})]})}),YC="DialogTitle",P$=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=is(YC,n);return c.jsx(_e.h2,{id:s.titleId,...r,ref:e})});P$.displayName=YC;var R$="DialogDescription",A$=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=is(R$,n);return c.jsx(_e.p,{id:s.descriptionId,...r,ref:e})});A$.displayName=R$;var N$="DialogClose",k$=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=is(N$,n);return c.jsx(_e.button,{type:"button",...r,ref:e,onClick:ae(t.onClick,()=>s.onOpenChange(!1))})});k$.displayName=N$;function XC(t){return t?"open":"closed"}var O$="DialogTitleWarning",[r0e,D$]=Dne(O$,{contentName:Cl,titleName:YC,docsSlug:"dialog"}),Lle=({titleId:t})=>{const e=D$(O$),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return g.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Fle="DialogDescriptionWarning",Vle=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${D$(Fle).contentName}}.`;return g.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},j$=w$,M$=T$,w0=S$,b0=C$,E0=P$,T0=A$,L$=k$;const F$=j$,Ule=M$,V$=g.forwardRef(({className:t,...e},n)=>c.jsx(w0,{className:oe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));V$.displayName=w0.displayName;const $le=Mp("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),JC=g.forwardRef(({side:t="right",className:e,children:n,...r},s)=>c.jsxs(Ule,{children:[c.jsx(V$,{}),c.jsxs(b0,{ref:s,className:oe($le({side:t}),e),...r,children:[n,c.jsxs(L$,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[c.jsx(_0,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));JC.displayName=b0.displayName;const ZC=({className:t,...e})=>c.jsx("div",{className:oe("flex flex-col space-y-2 text-center sm:text-left",t),...e});ZC.displayName="SheetHeader";const eI=g.forwardRef(({className:t,...e},n)=>c.jsx(E0,{ref:n,className:oe("text-lg font-semibold text-foreground",t),...e}));eI.displayName=E0.displayName;const tI=g.forwardRef(({className:t,...e},n)=>c.jsx(T0,{ref:n,className:oe("text-sm text-muted-foreground",t),...e}));tI.displayName=T0.displayName;const Se=g.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:oe("group relative rounded-[32px]","bg-gradient-to-b from-black/80 to-black/60","before:absolute before:inset-0 before:-z-10 before:rounded-[32px] before:p-0.5","before:bg-gradient-to-b before:from-blue-500/20 before:via-blue-400/10 before:to-transparent","after:absolute after:inset-0 after:-z-20 after:rounded-[32px]","after:bg-gradient-to-b after:from-blue-500/20 after:via-blue-400/10 after:to-transparent","backdrop-blur-xl backdrop-saturate-150","border border-white/5 shadow-xl shadow-blue-400/20","transition-all duration-300","hover:shadow-2xl hover:border-white/10 hover:shadow-blue-400/30",t),...e}));Se.displayName="Card";const S0=g.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:oe("flex flex-col space-y-1.5 p-6",t),...e}));S0.displayName="CardHeader";const C0=g.forwardRef(({className:t,...e},n)=>c.jsx("h3",{ref:n,className:oe("font-semibold leading-none tracking-tight",t),...e}));C0.displayName="CardTitle";const U$=g.forwardRef(({className:t,...e},n)=>c.jsx("p",{ref:n,className:oe("text-sm text-muted-foreground",t),...e}));U$.displayName="CardDescription";const I0=g.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:oe("p-6 pt-0",t),...e}));I0.displayName="CardContent";const $$=g.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:oe("flex items-center p-6 pt-0",t),...e}));$$.displayName="CardFooter";const Ble=Mp("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",premium:"border-transparent bg-gradient-to-r from-amber-500 to-amber-600 text-white hover:from-amber-600 hover:to-amber-700"}},defaultVariants:{variant:"default"}});function qn({className:t,variant:e,...n}){return c.jsx("div",{className:oe(Ble({variant:e}),t),...n})}const zle=[{id:"free",name:"Free Plan",price:"$0",description:"Basic access to learning resources",features:["Access to free courses","Basic quizzes","Community support","Limited flashcards"],badge:"",icon:WC},{id:"pro",name:"Pro Plan",price:"$9.99",period:"monthly",description:"Enhanced learning experience",features:["All free features","Access to premium courses","Advanced quizzes","Unlimited flashcards","Priority support","Progress tracking"],badge:"Popular",icon:Sl},{id:"premium",name:"Premium Plan",price:"$89.99",period:"yearly",description:"Complete learning suite",features:["All pro features","1-on-1 mentoring","Career guidance","Certificate of completion","Custom learning path","Team collaboration"],badge:"Best Value",icon:Sl}];function B$(){const{userProfile:t,updateUserPremium:e}=Yt(),[n,r]=g.useState(null),[s,i]=g.useState(!1),o=(t==null?void 0:t.isPremium)||!1,a=async l=>{i(!0);try{await e(l!=="free")&&r(l)}catch(u){console.error("Failed to process subscription:",u)}finally{i(!1)}};return c.jsxs("div",{className:"space-y-8",children:[c.jsx("div",{className:"grid gap-8",children:zle.map(l=>{const u=l.icon,d=n===l.id,h=o?l.id!=="free":l.id==="free";return c.jsxs(Se,{className:`p-6 space-y-6 cursor-pointer transition-all hover:shadow-lg ${d?"ring-2 ring-amber-500 shadow-lg":""} ${h?"bg-muted/50":""}`,onClick:()=>!s&&r(l.id),children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(u,{className:`h-5 w-5 ${l.id!=="free"?"text-amber-500":""}`}),c.jsx("h3",{className:"text-xl font-bold",children:l.name})]}),l.badge&&c.jsx(qn,{className:l.id==="premium"?"bg-gradient-to-r from-amber-500 to-amber-600":"",children:l.badge})]}),c.jsxs("div",{className:"flex items-baseline gap-1",children:[c.jsx("span",{className:"text-3xl font-bold",children:l.price}),l.period&&c.jsxs("span",{className:"text-muted-foreground",children:["/",l.period]})]}),c.jsx("p",{className:"text-muted-foreground",children:l.description})]}),c.jsx("ul",{className:"space-y-2",children:l.features.map((p,m)=>c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx(md,{className:"h-4 w-4 text-green-500"}),c.jsx("span",{children:p})]},m))}),c.jsx("div",{className:"pt-4",children:c.jsx(te,{className:`w-full ${l.id!=="free"?"bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white":""}`,variant:l.id==="free"?"outline":"default",onClick:p=>{p.stopPropagation(),a(l.id)},disabled:s||h,children:s&&d?"Processing...":h?"Current Plan":l.id==="free"?"Switch to Free Plan":`Buy ${l.name} ${l.period?`(${l.price}/${l.period==="monthly"?"mo":"yr"})`:""}`})})]},l.id)})}),n&&!s&&c.jsxs("p",{className:"text-sm text-center text-muted-foreground",children:["Click the button above to ",n==="free"?"switch to":"purchase"," your selected plan"]})]})}function Gle(){var l;const t=Qe(),{currentUser:e,userProfile:n,logout:r}=Yt(),[s,i]=g.useState(!1),o=(n==null?void 0:n.isPremium)||!1,a=async()=>{try{await r(),t("/")}catch(u){console.error("Failed to log out",u)}};return c.jsx("nav",{className:"fixed top-0 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 z-50",children:c.jsxs("div",{className:"container flex h-14 items-center justify-between",children:[c.jsx(Nne,{to:"/",className:"font-bold text-xl",children:"Questly"}),e?c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs(F$,{open:s,onOpenChange:i,children:[c.jsxs(te,{onClick:()=>i(!0),className:`flex items-center gap-2 ${o?"bg-gradient-to-r from-amber-500 to-amber-600 text-white":""}`,variant:o?"outline":"default",children:[c.jsx(Sl,{className:"h-4 w-4"}),o?"Premium Member":"Get Premium Access"]}),c.jsxs(JC,{side:"right",className:"w-full sm:w-[540px] overflow-y-auto",children:[c.jsxs(ZC,{className:"mb-4",children:[c.jsx(eI,{children:"Choose Your Plan"}),c.jsx(tI,{children:"Select the plan that best fits your learning goals"})]}),c.jsx(B$,{})]})]}),c.jsxs(ble,{children:[c.jsx(Ele,{asChild:!0,children:c.jsx(te,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:c.jsxs($p,{className:"h-8 w-8",children:[c.jsx(x0,{src:e.photoURL||"",alt:e.email||""}),c.jsx(Bp,{children:(l=e.email)==null?void 0:l[0].toUpperCase()})]})})}),c.jsxs(c$,{className:"w-56",align:"end",forceMount:!0,children:[c.jsx(u$,{className:"font-normal",children:c.jsxs("div",{className:"flex flex-col space-y-1",children:[c.jsx("p",{className:"text-sm font-medium leading-none",children:(n==null?void 0:n.name)||"User"}),c.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e.email})]})}),c.jsx(rT,{}),c.jsxs(Oh,{onClick:()=>t("/profile"),children:[c.jsx(a$,{className:"mr-2 h-4 w-4"}),"Profile"]}),c.jsxs(Oh,{onClick:()=>i(!0),children:[c.jsx(Sl,{className:"mr-2 h-4 w-4"}),"Subscription"]}),c.jsxs(Oh,{onClick:()=>t("/settings"),children:[c.jsx(ple,{className:"mr-2 h-4 w-4"}),"Settings"]}),c.jsx(rT,{}),c.jsxs(Oh,{className:"text-red-600",onClick:a,children:[c.jsx(ZU,{className:"mr-2 h-4 w-4"}),"Log out"]})]})]})]}):c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(te,{variant:"ghost",onClick:()=>t("/login"),children:"Login"}),c.jsx(te,{onClick:()=>t("/register"),children:"Sign Up"})]})]})})}const qle=1,Wle=1e6;let uw=0;function Hle(){return uw=(uw+1)%Number.MAX_SAFE_INTEGER,uw.toString()}const dw=new Map,a2=t=>{if(dw.has(t))return;const e=setTimeout(()=>{dw.delete(t),nf({type:"REMOVE_TOAST",toastId:t})},Wle);dw.set(t,e)},Kle=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,qle)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?a2(n):t.toasts.forEach(r=>{a2(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},ty=[];let ny={toasts:[]};function nf(t){ny=Kle(ny,t),ty.forEach(e=>{e(ny)})}function Qle({...t}){const e=Hle(),n=s=>nf({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>nf({type:"DISMISS_TOAST",toastId:e});return nf({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function gr(){const[t,e]=g.useState(ny);return g.useEffect(()=>(ty.push(e),()=>{const n=ty.indexOf(e);n>-1&&ty.splice(n,1)}),[t]),{...t,toast:Qle,dismiss:n=>nf({type:"DISMISS_TOAST",toastId:n})}}const Yle=t=>{localStorage.setItem("userPreferences",JSON.stringify(t))},Yd=[{id:"interests",question:"What topics are you most interested in? (e.g., Web Development, AI, Mobile Apps)",type:"interests"},{id:"experience",question:"What is your current experience level in this field?",type:"experience",options:["Beginner","Intermediate","Advanced"]},{id:"goals",question:"What are your main learning goals?",type:"goals"},{id:"learningStyle",question:"How do you prefer to learn?",type:"preferredLearningStyle",options:["Video Tutorials","Reading Documentation","Interactive Exercises","Project-Based"]},{id:"timeCommitment",question:"How much time can you dedicate to learning per week?",type:"timeCommitment",options:["1-2 hours","3-5 hours","5-10 hours","10+ hours"]}],Xle=async t=>(`${t.interests.join(", ")}${t.experience}${t.goals.join(", ")}${t.preferredLearningStyle}${t.timeCommitment}`,{topic:"Web Development",steps:[{title:"HTML & CSS Fundamentals",description:"Learn the basics of web structure and styling",resources:["MDN Web Docs","FreeCodeCamp HTML/CSS Course"],estimatedTime:"2 weeks",difficulty:"beginner"}],totalDuration:"2 weeks",prerequisites:["Basic computer skills"]}),Jle=()=>{const[t,e]=g.useState(!1),[n,r]=g.useState(""),[s,i]=g.useState([]),[o,a]=g.useState(-1),[l,u]=g.useState({}),[d,h]=g.useState(!1),{toast:p}=gr(),m=x=>x.trim().endsWith("?")?x:x.split(new RegExp("(?<=[.!?])\\s+")).filter(w=>w.trim()).map(w=>` ${w.trim()}`).join(`
`),y=m("Hi! I'm Chitti AI Assistant, your learning assistant. I can help you create a personalized learning path. Type 'learning path' to get started, or ask me any other questions!");g.useEffect(()=>{i(x=>[...x,{text:y,isUser:!1}])},[]);const _=async x=>{var E,w;if(o===-1&&x.toLowerCase()==="learning path"){a(0);const I=Yd[0].question;return i(k=>[...k,{text:I,isUser:!1}]),!0}if(o>=0&&o<Yd.length){const I=Yd[o];if(u(M=>({...M,[I.type]:x})),o===Yd.length-1){h(!0);try{const M={interests:((E=l.interests)==null?void 0:E.split(",").map(P=>P.trim()))||[],experience:l.experience,goals:((w=l.goals)==null?void 0:w.split(",").map(P=>P.trim()))||[],preferredLearningStyle:l.preferredLearningStyle,timeCommitment:l.timeCommitment};Yle(M);const C=await Xle(M),S=`Here's your personalized learning path for ${C.topic}:

`+C.steps.map((P,R)=>` ${P.title} (${P.difficulty})
  - Description: ${P.description}
  - Time: ${P.estimatedTime}
  - Resources: ${P.resources.join(", ")}
`).join(`
`)+`
 Total Duration: ${C.totalDuration}
 Prerequisites: ${C.prerequisites.join(", ")}`;i(P=>[...P,{text:S,isUser:!1}]),a(-1)}catch(M){console.error("Error generating learning path:",M),i(C=>[...C,{text:m("Sorry, I encountered an error generating your learning path. Please try again."),isUser:!1}])}return h(!1),!0}a(M=>M+1);const k=Yd[o+1].question;return i(M=>[...M,{text:k,isUser:!1}]),!0}return!1},b=async x=>{if(x.preventDefault(),!!n.trim()){i(E=>[...E,{text:n,isUser:!0}]);try{if(!await _(n)){const w=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:n})});if(!w.ok)throw new Error(`HTTP error! status: ${w.status}`);const I=await w.json();i(k=>[...k,{text:m(I.response),isUser:!1}])}}catch(E){console.error("Error:",E),p({title:"Error",description:"Failed to get response. Please try again.",variant:"destructive"})}r("")}};return c.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:t?c.jsxs("div",{className:"w-80 h-96 bg-neon-purple/90 backdrop-blur-lg border border-neon-orange/20 rounded-lg shadow-lg flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neon-orange/20",children:[c.jsx("h3",{className:"text-white font-semibold",children:"Chitti AI Assistant"}),c.jsx("button",{onClick:()=>e(!1),className:"text-white hover:text-neon-orange transition-colors",children:c.jsx(_0,{className:"w-5 h-5"})})]}),c.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:s.map((x,E)=>c.jsx("div",{className:`mb-2 ${x.isUser?"text-right":"text-left"}`,children:c.jsx("div",{className:`inline-block rounded-lg p-2 ${x.isUser?"bg-neon-orange text-white":"bg-white/10 text-white"}`,children:x.text})},E))}),c.jsx("form",{onSubmit:b,className:"p-4 border-t border-neon-orange/20",children:c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("input",{type:"text",value:n,onChange:x=>r(x.target.value),placeholder:"Type your message...",className:"flex-1 bg-white/10 text-white rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-neon-orange/50"}),c.jsx("button",{type:"submit",className:"bg-neon-orange/20 hover:bg-neon-orange/30 text-white rounded-lg p-2 transition-colors",children:c.jsx(y0,{className:"w-5 h-5"})})]})})]}):c.jsx("button",{onClick:()=>e(!0),className:"bg-neon-orange text-white rounded-full p-2 hover:scale-105 transition-transform",children:"Chat"})})},Zle=({children:t})=>c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-black",children:c.jsx("div",{className:"container mx-auto p-6",children:t})});function me({children:t}){const{currentUser:e,loading:n}=Yt(),r=Ai();return n?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-neon-purple to-black",children:c.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-emerald-500"})}):e?c.jsx(c.Fragment,{children:t}):c.jsx(mC,{to:"/login",state:{from:r},replace:!0})}const kt=g.forwardRef(({className:t,type:e,...n},r)=>c.jsx("input",{type:e,className:oe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));kt.displayName="Input";const ece=t=>t.length<6?"Password must be at least 6 characters":null,tce=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?null:"Please enter a valid email address",nI=(t,e)=>{switch(console.error("Auth error:",t),t.code){case"auth/weak-password":return"Password should be at least 6 characters";case"auth/email-already-in-use":return"Email already registered";case"auth/invalid-email":return"Invalid email address";case"auth/operation-not-allowed":return"Operation not allowed";case"auth/user-not-found":return"User not found";case"auth/wrong-password":return"Incorrect password";default:return t.message||"An error occurred during authentication"}},nce=async(t,e)=>{try{const n=ece(e);if(n)throw new Error(n);const r=tce(t);if(r)throw new Error(r);const s=await tH(ui,t,e);return await Iv(s.user.uid,{email:s.user.email||"",name:t.split("@")[0],createdAt:new Date().toISOString(),role:"Learner",level:1,xp:{current:0,nextLevel:1e3},stats:{coursesCompleted:0,quizzesTaken:0,averageScore:0,streak:0}}),s.user}catch(n){throw new Error(nI(n))}},rce=async(t,e)=>{try{return(await nH(ui,t,e)).user}catch(n){throw console.error("Email login error:",n),new Error(nI(n))}},z$=async()=>{try{const t=new Xs;return t.setCustomParameters({prompt:"select_account"}),(await TH(ui,t)).user}catch(t){throw console.error("Google login error:",t),t.code==="auth/popup-closed-by-user"?new Error("Sign in was cancelled. Please try again."):new Error(nI(t))}};function sce(){const[t,e]=g.useState(""),[n,r]=g.useState(""),[s,i]=g.useState(!1),o=Qe(),a=Ai(),{toast:l}=gr(),{currentUser:u}=Yt();g.useEffect(()=>{var p,m;if(u){const y=((m=(p=a.state)==null?void 0:p.from)==null?void 0:m.pathname)||"/dashboard";o(y,{replace:!0})}},[u,a.state,o]);const d=async p=>{var m,y;p.preventDefault();try{i(!0);const _=await rce(t,n);console.log("Login successful:",_),l({title:"Success!",description:"You have been logged in successfully."});const b=((y=(m=a.state)==null?void 0:m.from)==null?void 0:y.pathname)||"/dashboard";o(b,{replace:!0})}catch(_){console.error("Login error:",_),l({title:"Error",description:_.message||"Failed to log in. Please check your credentials.",variant:"destructive"})}finally{i(!1)}},h=async()=>{var p,m;try{i(!0);const y=await z$();if(console.log("Google login successful:",y),y){l({title:"Success!",description:"You have been logged in successfully."});const _=((m=(p=a.state)==null?void 0:p.from)==null?void 0:m.pathname)||"/dashboard";o(_,{replace:!0})}}catch(y){console.error("Google login error:",y),l({title:"Error",description:y.message||"Failed to log in with Google.",variant:"destructive"})}finally{i(!1)}};return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-neon-purple to-black p-8",children:c.jsx("div",{className:"max-w-md mx-auto",children:c.jsxs(Se,{className:"p-6 bg-black/40 border-emerald-500/20",children:[c.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Login to Questly"}),c.jsxs("form",{onSubmit:d,className:"space-y-4",children:[c.jsx("div",{children:c.jsx(kt,{type:"email",placeholder:"Email",value:t,onChange:p=>e(p.target.value),className:"bg-black/40 border-emerald-500/20 text-white",required:!0})}),c.jsx("div",{children:c.jsx(kt,{type:"password",placeholder:"Password",value:n,onChange:p=>r(p.target.value),className:"bg-black/40 border-emerald-500/20 text-white",required:!0})}),c.jsx(te,{type:"submit",disabled:s,className:"w-full bg-emerald-500 text-black hover:bg-emerald-600",children:s?"Logging in...":"Login"})]}),c.jsx("div",{className:"mt-4",children:c.jsx(te,{type:"button",onClick:h,disabled:s,className:"w-full bg-white text-black hover:bg-gray-100",children:"Continue with Google"})}),c.jsxs("p",{className:"mt-4 text-center text-zinc-400",children:["Don't have an account?"," ",c.jsx(te,{variant:"link",className:"text-emerald-500 hover:text-emerald-400",onClick:()=>o("/register"),children:"Register"})]})]})})})}function ice({onComplete:t}){const[e,n]=g.useState(""),[r,s]=g.useState(""),[i,o]=g.useState(""),[a,l]=g.useState(!1),{toast:u}=gr(),d=Qe(),h=async m=>{if(m.preventDefault(),r!==i){u({title:"Error",description:"Passwords do not match.",variant:"destructive"});return}try{l(!0),await nce(e,r),t(e)}catch(y){console.error("Registration error:",y),u({title:"Error",description:y.message||"Failed to create account. Please try again.",variant:"destructive"})}finally{l(!1)}},p=async()=>{var m;try{l(!0);const y=await z$();if((m=y==null?void 0:y.user)!=null&&m.email)t(y.user.email);else throw new Error("No email found from Google login")}catch(y){console.error("Google registration error:",y),u({title:"Error",description:y.message||"Failed to create account with Google.",variant:"destructive"})}finally{l(!1)}};return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-neon-purple to-black p-8",children:c.jsx("div",{className:"max-w-md mx-auto",children:c.jsxs(Se,{className:"p-6 bg-black/40 border-emerald-500/20",children:[c.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Create Account"}),c.jsxs("form",{onSubmit:h,className:"space-y-4",children:[c.jsx("div",{children:c.jsx(kt,{type:"email",placeholder:"Email",value:e,onChange:m=>n(m.target.value),className:"bg-black/40 border-emerald-500/20 text-white",required:!0})}),c.jsx("div",{children:c.jsx(kt,{type:"password",placeholder:"Password",value:r,onChange:m=>s(m.target.value),className:"bg-black/40 border-emerald-500/20 text-white",required:!0})}),c.jsx("div",{children:c.jsx(kt,{type:"password",placeholder:"Confirm Password",value:i,onChange:m=>o(m.target.value),className:"bg-black/40 border-emerald-500/20 text-white",required:!0})}),c.jsx(te,{type:"submit",disabled:a,className:"w-full bg-emerald-500 text-black hover:bg-emerald-600",children:a?"Creating Account...":"Create Account"})]}),c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("span",{className:"w-full border-t border-emerald-500/20"})}),c.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:c.jsx("span",{className:"bg-black px-2 text-muted-foreground",children:"Or continue with"})})]}),c.jsx(te,{type:"button",onClick:p,disabled:a,className:"w-full mt-4 bg-white text-black hover:bg-gray-100",children:"Continue with Google"})]}),c.jsxs("p",{className:"mt-4 text-center text-zinc-400",children:["Already have an account?"," ",c.jsx(te,{variant:"link",className:"text-emerald-500 hover:text-emerald-400",onClick:()=>d("/login"),children:"Login"})]})]})})})}var oce="Label",G$=g.forwardRef((t,e)=>c.jsx(_e.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));G$.displayName=oce;var q$=G$;const ace=Mp("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Js=g.forwardRef(({className:t,...e},n)=>c.jsx(q$,{ref:n,className:oe(ace(),t),...e}));Js.displayName=q$.displayName;const nu=g.forwardRef(({className:t,...e},n)=>c.jsx("textarea",{className:oe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));nu.displayName="Textarea";function lce({onComplete:t,initialData:e}){var h,p,m,y,_,b,x,E;const{toast:n}=gr(),[r,s]=g.useState(0),[i,o]=g.useState({name:(e==null?void 0:e.name)||"",bio:(e==null?void 0:e.bio)||"",interests:(e==null?void 0:e.interests)||"",goals:(e==null?void 0:e.goals)||"",profileImage:(e==null?void 0:e.profileImage)||null,socials:{github:((h=e==null?void 0:e.socials)==null?void 0:h.github)||"",linkedin:((p=e==null?void 0:e.socials)==null?void 0:p.linkedin)||"",instagram:((m=e==null?void 0:e.socials)==null?void 0:m.instagram)||"",twitter:((y=e==null?void 0:e.socials)==null?void 0:y.twitter)||""}}),a=[{title:"What's your name?",description:"This is how you'll appear to other learners",field:"name",component:c.jsx(kt,{placeholder:"Enter your name",value:i.name,onChange:w=>o({...i,name:w.target.value})})},{title:"Tell us about yourself",description:"Share a brief bio with the community",field:"bio",component:c.jsx(nu,{placeholder:"Write a short bio...",value:i.bio,onChange:w=>o({...i,bio:w.target.value})})},{title:"What are your interests?",description:"What topics are you most excited to learn about?",field:"interests",component:c.jsx(nu,{placeholder:"E.g., Web Development, Machine Learning, Data Science...",value:i.interests,onChange:w=>o({...i,interests:w.target.value})})},{title:"What are your learning goals?",description:"What do you hope to achieve?",field:"goals",component:c.jsx(nu,{placeholder:"Share your learning goals...",value:i.goals,onChange:w=>o({...i,goals:w.target.value})})},{title:"Add your social media links",description:"Connect with other learners through your social profiles",field:"socials",component:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(Js,{htmlFor:"github",children:"GitHub"}),c.jsx(kt,{id:"github",placeholder:"https://github.com/yourusername",value:(_=i.socials)==null?void 0:_.github,onChange:w=>o({...i,socials:{...i.socials,github:w.target.value}})})]}),c.jsxs("div",{children:[c.jsx(Js,{htmlFor:"linkedin",children:"LinkedIn"}),c.jsx(kt,{id:"linkedin",placeholder:"https://linkedin.com/in/yourusername",value:(b=i.socials)==null?void 0:b.linkedin,onChange:w=>o({...i,socials:{...i.socials,linkedin:w.target.value}})})]}),c.jsxs("div",{children:[c.jsx(Js,{htmlFor:"instagram",children:"Instagram"}),c.jsx(kt,{id:"instagram",placeholder:"https://instagram.com/yourusername",value:(x=i.socials)==null?void 0:x.instagram,onChange:w=>o({...i,socials:{...i.socials,instagram:w.target.value}})})]}),c.jsxs("div",{children:[c.jsx(Js,{htmlFor:"twitter",children:"Twitter"}),c.jsx(kt,{id:"twitter",placeholder:"https://twitter.com/yourusername",value:(E=i.socials)==null?void 0:E.twitter,onChange:w=>o({...i,socials:{...i.socials,twitter:w.target.value}})})]})]})},{title:"Add a profile picture",description:"Upload a photo of yourself",field:"profileImage",component:c.jsxs("div",{className:"flex flex-col items-center gap-4",children:[c.jsx($p,{className:"w-32 h-32",children:i.profileImage?c.jsx(x0,{src:i.profileImage}):c.jsx(Bp,{children:c.jsx(_le,{className:"w-8 h-8"})})}),c.jsx(kt,{type:"file",accept:"image/*",onChange:w=>{var k;const I=(k=w.target.files)==null?void 0:k[0];if(I){const M=new FileReader;M.onloadend=()=>{o({...i,profileImage:M.result})},M.readAsDataURL(I)}}})]})}],l=()=>{r<a.length-1?s(r+1):(t(i),n({title:"Profile updated!",description:"Your profile has been successfully updated."}))},u=()=>{r>0&&s(r-1)},d=a[r];return c.jsxs(Se,{className:"max-w-2xl mx-auto p-6 space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h2",{className:"text-2xl font-bold",children:d.title}),c.jsx("p",{className:"text-muted-foreground",children:d.description})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Js,{htmlFor:d.field,children:d.title}),d.component]}),c.jsxs("div",{className:"flex justify-between pt-4",children:[c.jsx(te,{variant:"outline",onClick:u,disabled:r===0,children:"Back"}),c.jsx(te,{onClick:l,children:r===a.length-1?"Complete":"Next"})]}),c.jsx("div",{className:"flex justify-center gap-2 pt-4",children:a.map((w,I)=>c.jsx("div",{className:`h-2 w-2 rounded-full ${I===r?"bg-primary":I<r?"bg-primary/50":"bg-muted"}`},I))})]})]})}function cce(){const t=Qe(),[e,n]=g.useState(1),[r,s]=g.useState(""),i=async a=>{s(a),n(2)},o=async a=>{try{const l=ui.currentUser;if(!l)throw new Error("No user found");await Iv(l.uid,{...a,email:r,createdAt:new Date().toISOString()}),t("/profile")}catch(l){console.error("Error saving profile:",l)}};return c.jsx("div",{className:"container mx-auto px-4 py-8",children:e===1?c.jsx(ice,{onComplete:i}):c.jsx(lce,{onComplete:o})})}const uce=[{name:"Basic",id:"basic",priceMonthly:"Free",description:"Perfect for getting started",features:["Access to basic flashcards","Limited quiz generation","Basic progress tracking","2 mock tests per month"]},{name:"Pro",id:"pro",priceMonthly:"$9.99",description:"For serious learners",features:["Unlimited AI-powered flashcards","Advanced quiz customization","Detailed analytics","Unlimited mock tests","Priority support"]},{name:"Enterprise",id:"enterprise",priceMonthly:"$29.99",description:"For teams and organizations",features:["Everything in Pro","Team management","Custom learning paths","API access","Dedicated support","Custom integrations"]}];function dce(){const t=Qe();return c.jsx("div",{className:"py-24 sm:py-32",children:c.jsxs("div",{className:"mx-auto max-w-7xl px-6 lg:px-8",children:[c.jsxs("div",{className:"mx-auto max-w-4xl text-center",children:[c.jsx("h2",{className:"text-base font-semibold leading-7 text-primary",children:"Pricing"}),c.jsx("p",{className:"mt-2 text-4xl font-bold tracking-tight sm:text-5xl",children:"Choose the right plan for you"})]}),c.jsx("p",{className:"mx-auto mt-6 max-w-2xl text-center text-lg leading-8 text-muted-foreground",children:"Start for free and upgrade as you grow. All plans include a 14-day free trial."}),c.jsx("div",{className:"isolate mx-auto mt-16 grid max-w-md grid-cols-1 gap-y-8 sm:mt-20 lg:mx-0 lg:max-w-none lg:grid-cols-3",children:uce.map((e,n)=>c.jsxs("div",{className:`flex flex-col justify-between rounded-3xl bg-card p-8 ring-1 ring-muted ${n===1?"lg:z-10 lg:rounded-b-none":""} ${n===0?"lg:rounded-r-none":""} ${n===2?"lg:rounded-l-none":""}`,children:[c.jsxs("div",{children:[c.jsx("div",{className:"flex items-center justify-between gap-x-4",children:c.jsx("h3",{className:"text-lg font-semibold leading-8",children:e.name})}),c.jsx("p",{className:"mt-4 text-sm leading-6 text-muted-foreground",children:e.description}),c.jsxs("p",{className:"mt-6 flex items-baseline gap-x-1",children:[c.jsx("span",{className:"text-4xl font-bold tracking-tight",children:e.priceMonthly}),e.priceMonthly!=="Free"&&c.jsx("span",{className:"text-sm font-semibold leading-6 text-muted-foreground",children:"/month"})]}),c.jsx("ul",{role:"list",className:"mt-8 space-y-3 text-sm leading-6 text-muted-foreground",children:e.features.map(r=>c.jsxs("li",{className:"flex gap-x-3",children:[c.jsx(md,{className:"h-6 w-5 flex-none text-primary","aria-hidden":"true"}),r]},r))})]}),c.jsx(te,{className:"mt-8",variant:n===1?"default":"outline",onClick:()=>t("/register"),children:"Get started"})]},e.id))})]})})}function hce(){return c.jsx("div",{className:"py-24 sm:py-32 bg-muted/50",children:c.jsxs("div",{className:"mx-auto max-w-7xl px-6 lg:px-8",children:[c.jsxs("div",{className:"mx-auto max-w-2xl lg:text-center",children:[c.jsx("h2",{className:"text-3xl font-bold tracking-tight sm:text-4xl",children:"About Me"}),c.jsx("p",{className:"mt-6 text-lg leading-8 text-muted-foreground",children:"Hi, I'm Gaurav Kulkarni, a passionate developer dedicated to creating innovative learning solutions."})]}),c.jsxs("div",{className:"mx-auto mt-16 max-w-2xl text-center",children:[c.jsx("p",{className:"text-lg leading-8 text-muted-foreground",children:"I created Questly with the vision of making learning more engaging and effective through AI-powered tools. With experience in educational technology, I understand the challenges students face and build solutions to address them."}),c.jsxs("div",{className:"mt-10 flex justify-center gap-6",children:[c.jsx(te,{variant:"ghost",size:"icon",asChild:!0,children:c.jsx("a",{href:"https://github.com/yourusername",target:"_blank",rel:"noopener noreferrer",children:c.jsx(YU,{className:"h-5 w-5"})})}),c.jsx(te,{variant:"ghost",size:"icon",asChild:!0,children:c.jsx("a",{href:"https://linkedin.com/in/yourusername",target:"_blank",rel:"noopener noreferrer",children:c.jsx(JU,{className:"h-5 w-5"})})}),c.jsx(te,{variant:"ghost",size:"icon",asChild:!0,children:c.jsx("a",{href:"mailto:your.email@example.com",children:c.jsx(ole,{className:"h-5 w-5"})})})]})]})]})})}const fce=[{title:"AI-Powered Flashcards",description:"Create and study with intelligent flashcards that adapt to your learning style",icon:sle,color:"text-blue-500"},{title:"Smart Quiz Generation",description:"Take personalized quizzes generated by AI based on your study materials",icon:js,color:"text-green-500"},{title:"Mock Tests",description:"Practice with realistic mock tests that simulate exam conditions",icon:XU,color:"text-purple-500"},{title:"Progress Tracking",description:"Monitor your learning progress with detailed analytics and insights",icon:qae,color:"text-yellow-500"},{title:"AI Study Assistant",description:"Get help from our AI assistant for any questions or clarifications",icon:oi,color:"text-pink-500"},{title:"Leaderboard",description:"Compete with others and track your ranking on the leaderboard",icon:Kt,color:"text-orange-500"}];function pce(){const{currentUser:t}=Yt();return Qe(),c.jsxs("main",{children:[c.jsx("section",{className:"py-20",children:c.jsxs("div",{className:"container px-4 md:px-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-4xl font-bold tracking-tight sm:text-6xl mb-4",children:"Welcome to Questly"}),c.jsx("p",{className:"text-xl text-muted-foreground mb-16",children:"Transform your learning experience with AI-powered tools"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:fce.map(e=>c.jsxs(Se,{className:"transition-all hover:shadow-lg",children:[c.jsxs(S0,{children:[c.jsx(e.icon,{className:`h-8 w-8 ${e.color}`}),c.jsx(C0,{className:"mt-4",children:e.title}),c.jsx(U$,{children:e.description})]}),c.jsx(I0,{})]},e.title))})]})}),c.jsx("section",{className:"bg-muted/30",children:c.jsx(dce,{})}),c.jsx(hce,{})]})}function ia({theme:t="green",children:e,className:n,...r}){return c.jsx("div",{className:oe("group relative overflow-hidden transition-all duration-300","rounded-[32px] md:rounded-[32px]","bg-gradient-to-b from-[#1E1E1E]/40 to-[#252525]/40","hover:from-[#1E1E1E] hover:to-[#252525]","backdrop-blur-[2px]","border border-white/5 hover:border-white/10",{"hover:border-emerald-500/30":t==="green","hover:border-blue-500/30":t==="blue","hover:border-purple-500/30":t==="purple","hover:border-orange-500/30":t==="orange","hover:border-red-500/30":t==="red"},"before:absolute before:inset-0 before:opacity-0 before:transition-opacity","before:duration-300 group-hover:before:opacity-100","before:bg-gradient-to-b before:from-transparent before:to-black/10",{"before:from-emerald-500/5 before:to-transparent":t==="green","before:from-blue-500/5 before:to-transparent":t==="blue","before:from-purple-500/5 before:to-transparent":t==="purple","before:from-orange-500/5 before:to-transparent":t==="orange","before:from-red-500/5 before:to-transparent":t==="red"},n),...r,children:e})}var rI="Progress",sI=100,[mce,s0e]=mr(rI),[gce,yce]=mce(rI),W$=g.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=vce,...o}=t;(s||s===0)&&!l2(s)&&console.error(_ce(`${s}`,"Progress"));const a=l2(s)?s:sI;r!==null&&!c2(r,a)&&console.error(xce(`${r}`,"Progress"));const l=c2(r,a)?r:null,u=Fv(l)?i(l,a):void 0;return c.jsx(gce,{scope:n,value:l,max:a,children:c.jsx(_e.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":Fv(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":Q$(l,a),"data-value":l??void 0,"data-max":a,...o,ref:e})})});W$.displayName=rI;var H$="ProgressIndicator",K$=g.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=yce(H$,n);return c.jsx(_e.div,{"data-state":Q$(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});K$.displayName=H$;function vce(t,e){return`${Math.round(t/e*100)}%`}function Q$(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Fv(t){return typeof t=="number"}function l2(t){return Fv(t)&&!isNaN(t)&&t>0}function c2(t,e){return Fv(t)&&!isNaN(t)&&t<=e&&t>=0}function _ce(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${sI}\`.`}function xce(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${sI} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Y$=W$,wce=K$;const kr=g.forwardRef(({className:t,value:e,indicatorClassName:n,...r},s)=>c.jsx(Y$,{ref:s,className:oe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:c.jsx(wce,{className:oe("h-full w-full flex-1 bg-primary transition-all",n),style:{transform:`translateX(-${100-(e||0)}%)`}})}));kr.displayName=Y$.displayName;function bce({currentXP:t,requiredXP:e,level:n,className:r}){const s=Math.min(t/e*100,100);return c.jsxs(ia,{theme:"green",className:oe("group relative overflow-hidden",r),children:[c.jsxs("div",{className:"relative z-10 space-y-4 p-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-2xl font-semibold text-white",children:["Level ",n]}),c.jsx("p",{className:"text-[#B3B3B3]",children:"Keep going! You're doing great!"})]}),c.jsx(Kt,{className:"h-8 w-8 text-emerald-400"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsxs("span",{className:"font-medium text-white",children:[t.toLocaleString()," XP"]}),c.jsxs("span",{className:"text-[#B3B3B3]",children:[e.toLocaleString()," XP"]})]}),c.jsxs("div",{className:"relative",children:[c.jsx(kr,{value:s,className:"h-3 bg-[#1E1E1E]",indicatorClassName:"bg-gradient-to-r from-emerald-500 to-emerald-400"}),c.jsx("div",{className:"absolute inset-0 rounded-full shadow-[0_0_10px_rgba(16,185,129,0.3)] transition-opacity duration-300 group-hover:shadow-[0_0_15px_rgba(16,185,129,0.4)]"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"rounded-lg bg-[#1E1E1E] p-4 transition-all hover:bg-emerald-500/10",children:[c.jsx("div",{className:"text-sm text-[#B3B3B3]",children:"Next Level"}),c.jsx("div",{className:"text-2xl font-bold text-white",children:n+1})]}),c.jsxs("div",{className:"rounded-lg bg-[#1E1E1E] p-4 transition-all hover:bg-emerald-500/10",children:[c.jsx("div",{className:"text-sm text-[#B3B3B3]",children:"XP Needed"}),c.jsx("div",{className:"text-2xl font-bold text-white",children:(e-t).toLocaleString()})]})]})]}),c.jsx("div",{className:"absolute -right-8 -top-8 h-48 w-48 opacity-[0.05]",children:c.jsx(Kt,{className:"h-full w-full text-emerald-500"})})]})}function Ece({challenges:t,completedCount:e,totalCount:n,className:r}){const s=e/n*100;return c.jsxs(ia,{theme:"green",className:oe("group relative overflow-hidden",r),children:[c.jsxs("div",{className:"relative z-10 space-y-6 p-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-semibold text-white",children:"Daily Challenges"}),c.jsxs("p",{className:"text-[#B3B3B3]",children:[e," of ",n," challenges completed"]})]}),c.jsx(tu,{className:"h-8 w-8 text-emerald-400"})]}),c.jsx("div",{className:"space-y-2",children:c.jsxs("div",{className:"relative",children:[c.jsx(kr,{value:s,className:"h-3 bg-[#1E1E1E]",indicatorClassName:"bg-gradient-to-r from-emerald-500 to-emerald-400"}),c.jsx("div",{className:"absolute inset-0 rounded-full shadow-[0_0_10px_rgba(16,185,129,0.3)] transition-opacity duration-300 group-hover:shadow-[0_0_15px_rgba(16,185,129,0.4)]"})]})}),c.jsx("div",{className:"space-y-4",children:t.map((i,o)=>c.jsxs("div",{className:oe("group/item rounded-lg bg-[#1E1E1E] p-4 transition-all",i.completed?"border border-emerald-500/20 bg-emerald-500/5":"hover:bg-emerald-500/10"),children:[c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{className:"flex-1 space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h4",{className:"font-medium text-white",children:i.title}),i.completed&&c.jsx("div",{className:"rounded-full bg-emerald-500/20 p-1",children:c.jsx(md,{className:"h-3 w-3 text-emerald-400"})})]}),c.jsx("p",{className:"text-sm text-[#B3B3B3]",children:i.description}),i.timeLeft&&c.jsx("p",{className:"text-sm text-emerald-400",children:i.timeLeft})]}),c.jsxs("div",{className:"flex items-center gap-1 rounded-full bg-emerald-500/10 px-2 py-1 text-sm text-emerald-400",children:[c.jsx(tu,{className:"h-4 w-4"}),c.jsxs("span",{children:["+",i.xpReward," XP"]})]})]}),i.progress!==void 0&&c.jsxs("div",{className:"mt-3 space-y-1",children:[c.jsxs("div",{className:"relative",children:[c.jsx(kr,{value:i.progress,className:"h-2 bg-[#1E1E1E]",indicatorClassName:"bg-gradient-to-r from-emerald-500 to-emerald-400"}),c.jsx("div",{className:"absolute inset-0 rounded-full shadow-[0_0_5px_rgba(16,185,129,0.2)] transition-opacity duration-300 group-hover/item:shadow-[0_0_8px_rgba(16,185,129,0.3)]"})]}),c.jsx("div",{className:"flex justify-end",children:c.jsxs("span",{className:"text-xs text-[#B3B3B3]",children:[i.progress,"%"]})})]})]},o))})]}),c.jsx("div",{className:"absolute -right-8 -top-8 h-48 w-48 opacity-[0.05]",children:c.jsx(tu,{className:"h-full w-full text-emerald-500"})})]})}function Tce({currentStreak:t,longestStreak:e,weekActivity:n,className:r}){return c.jsxs(ia,{theme:"green",className:oe("group relative overflow-hidden",r),children:[c.jsxs("div",{className:"relative z-10 space-y-6 p-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-semibold text-white",children:"Learning Streak"}),c.jsx("p",{className:"text-[#B3B3B3]",children:"Keep the momentum going!"})]}),c.jsx(Fc,{className:"h-8 w-8 text-emerald-400"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"rounded-lg bg-[#1E1E1E] p-4 transition-all hover:bg-emerald-500/10",children:[c.jsx("div",{className:"text-sm text-[#B3B3B3]",children:"Current Streak"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Fc,{className:"h-5 w-5 text-emerald-400"}),c.jsx("span",{className:"text-2xl font-bold text-white",children:t}),c.jsx("span",{className:"text-sm text-[#B3B3B3]",children:"days"})]})]}),c.jsxs("div",{className:"rounded-lg bg-[#1E1E1E] p-4 transition-all hover:bg-emerald-500/10",children:[c.jsx("div",{className:"text-sm text-[#B3B3B3]",children:"Longest Streak"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Fc,{className:"h-5 w-5 text-emerald-400"}),c.jsx("span",{className:"text-2xl font-bold text-white",children:e}),c.jsx("span",{className:"text-sm text-[#B3B3B3]",children:"days"})]})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"mb-4 font-medium text-white",children:"Weekly Activity"}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:n.map((s,i)=>c.jsxs("div",{className:"space-y-2 text-center",children:[c.jsx("div",{className:oe("mx-auto h-8 w-8 rounded-lg transition-all",s.active?"bg-gradient-to-r from-emerald-500 to-emerald-400 shadow-[0_0_10px_rgba(16,185,129,0.3)]":"bg-[#1E1E1E]")}),c.jsx("span",{className:"text-xs text-[#B3B3B3]",children:s.day})]},i))})]})]}),c.jsx("div",{className:"absolute -right-8 -top-8 h-48 w-48 opacity-[0.05]",children:c.jsx(Fc,{className:"h-full w-full text-emerald-500"})})]})}function Km({title:t,value:e,subtitle:n,icon:r,theme:s="green",className:i}){const o=a=>{const l={green:"text-emerald-400 bg-emerald-500/10",blue:"text-blue-400 bg-blue-500/10",purple:"text-purple-400 bg-purple-500/10",orange:"text-orange-400 bg-orange-500/10"};return l[a]||l.green};return c.jsx(ia,{theme:s,className:oe("group",i),children:c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("h3",{className:"text-2xl font-semibold text-white group-hover:text-white transition-colors",children:e}),c.jsx("p",{className:"text-[#B3B3B3] group-hover:text-[#B3B3B3] transition-colors",children:t})]}),c.jsx("div",{className:oe("flex h-14 w-14 items-center justify-center rounded-2xl transition-colors duration-300","bg-[#252525]/40 border border-white/5","group-hover:bg-[#252525]",{"group-hover:border-emerald-500/30":s==="green","group-hover:border-blue-500/30":s==="blue","group-hover:border-purple-500/30":s==="purple","group-hover:border-orange-500/30":s==="orange"},o(s)),children:c.jsx(r,{className:"h-7 w-7"})})]}),c.jsx("p",{className:"text-sm text-[#B3B3B3] group-hover:text-[#B3B3B3] transition-colors",children:n})]})})}function Sce(){const t=g.useRef(null),[e,n]=g.useState(!1),[r,s]=g.useState({x:0,y:0}),[i,o]=g.useState(0);return{divRef:t,position:r,opacity:i,handlers:{onMouseMove:p=>{if(!t.current||e)return;const m=t.current.getBoundingClientRect();s({x:p.clientX-m.left,y:p.clientY-m.top})},onFocus:()=>{n(!0),o(.6)},onBlur:()=>{n(!1),o(0)},onMouseEnter:()=>{o(.6)},onMouseLeave:()=>{o(0)}}}}function Cce({title:t,description:e,icon:n,iconColor:r="#1DB954",iconBgColor:s="rgba(29, 185, 84, 0.1)",onClick:i,className:o,style:a,borderGlow:l}){const{divRef:u,position:d,opacity:h,handlers:p}=Sce();return c.jsxs("div",{ref:u,...p,onClick:i,className:`group relative overflow-hidden rounded-lg p-8 transition-all duration-300 hover:-translate-y-2 h-[300px] border border-[#333333] hover:border-[rgba(16,185,129,0.5)] ${o}`,style:{...a,background:"linear-gradient(145deg, rgba(30, 30, 30, 0.9), rgba(20, 20, 20, 0.95))",backdropFilter:"blur(10px)",boxShadow:"0 4px 24px -4px rgba(0, 0, 0, 0.3)"},children:[c.jsx("div",{className:"pointer-events-none absolute inset-0 opacity-0 transition-opacity duration-500",style:{opacity:h,background:`radial-gradient(600px circle at ${d.x}px ${d.y}px, ${l||"rgba(16,185,129,0.15)"}, transparent 40%)`}}),c.jsxs("div",{className:"relative z-10 flex flex-col justify-between h-full",children:[c.jsxs("div",{children:[c.jsx("div",{className:"mb-6 flex h-14 w-14 items-center justify-center rounded-xl transition-colors duration-300 group-hover:bg-[rgba(16,185,129,0.15)]",style:{backgroundColor:"rgba(30, 30, 30, 0.8)",border:"1px solid rgba(51, 51, 51, 0.8)"},children:n}),c.jsx("h3",{className:"mb-2 text-xl font-semibold text-white group-hover:text-emerald-400 transition-colors duration-300",children:t}),c.jsx("p",{className:"text-[#B3B3B3] text-sm leading-relaxed",children:e})]}),c.jsx("div",{className:"mt-auto pt-6",children:c.jsxs("button",{className:"inline-flex items-center text-[#B3B3B3] hover:text-emerald-400 transition-colors duration-300",children:[c.jsx("span",{className:"mr-2",children:"Get Started"}),c.jsx("svg",{className:"h-4 w-4 transform transition-transform duration-300 group-hover:translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})]}),c.jsx("div",{className:"absolute -right-8 -top-8 h-48 w-48 opacity-[0.03] transition-opacity duration-300 group-hover:opacity-[0.05]",children:c.jsx("div",{className:"h-full w-full",style:{color:r},children:n})}),c.jsx("div",{className:"absolute inset-0 rounded-lg transition-opacity duration-500 group-hover:opacity-100 opacity-0",style:{boxShadow:`inset 0 0 0 1px ${l||"rgba(255, 255, 255, 0.1)"}`}})]})}function Ice(){const t=Qe(),e=[{title:"Flashcards",description:"Create and study with interactive flashcards. Perfect for memorization and quick review.",icon:c.jsx(js,{className:"w-7 h-7 text-[#60DFFF]"}),path:"/flashcards",borderGlow:"rgba(96, 223, 255, 0.2)"},{title:"Quiz",description:"Test your knowledge with targeted quizzes. Track your progress and identify areas for improvement.",icon:c.jsx(v0,{className:"w-7 h-7 text-emerald-400"}),path:"/quiz",borderGlow:"rgba(16, 185, 129, 0.2)"},{title:"Mock Tests",description:"Practice with full-length mock exams. Get exam-ready with timed tests and detailed analysis.",icon:c.jsx(XU,{className:"w-7 h-7 text-purple-400"}),path:"/mock-test",borderGlow:"rgba(167, 139, 250, 0.2)"},{title:"Summary Generator",description:"Generate concise summaries of your study material. Save time and focus on key concepts.",icon:c.jsx(ele,{className:"w-7 h-7 text-orange-400"}),path:"/summary",borderGlow:"rgba(251, 146, 60, 0.2)"}];return c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map(n=>c.jsx(Cce,{title:n.title,description:n.description,icon:n.icon,borderGlow:n.borderGlow,onClick:()=>t(n.path)},n.title))})}const Vv=j$,Pce=M$,X$=g.forwardRef(({className:t,...e},n)=>c.jsx(w0,{ref:n,className:oe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));X$.displayName=w0.displayName;const tp=g.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(Pce,{children:[c.jsx(X$,{}),c.jsxs(b0,{ref:r,className:oe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,c.jsxs(L$,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[c.jsx(_0,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));tp.displayName=b0.displayName;const Uv=({className:t,...e})=>c.jsx("div",{className:oe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Uv.displayName="DialogHeader";const $v=g.forwardRef(({className:t,...e},n)=>c.jsx(E0,{ref:n,className:oe("text-lg font-semibold leading-none tracking-tight",t),...e}));$v.displayName=E0.displayName;const Rce=g.forwardRef(({className:t,...e},n)=>c.jsx(T0,{ref:n,className:oe("text-sm text-muted-foreground",t),...e}));Rce.displayName=T0.displayName;const zr=[{id:1,name:"Lee Taeyong",xp:258244,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=1"},{id:2,name:"Mark Lee",xp:258242,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=2"},{id:3,name:"Xiao Dejun",xp:258223,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=3"},{id:4,name:"Liu YangYang",xp:257890,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=4"},{id:5,name:"Qian Kun",xp:257456,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=5"}],Ace=["John Smith","Emma Davis","Michael Chen","Sarah Wilson","David Kim","Lisa Park","James Brown","Maria Garcia","Robert Lee","Anna Wang","Thomas Nguyen","Jennifer Wu","William Liu","Elizabeth Zhang","Richard Tan","Jessica Lin","Daniel Wong","Michelle Zhao","Kevin Choi","Rachel Kim","Joseph Park","Emily Chen","Christopher Lee","Amanda Liu","Brian Wang","Sophie Zhang","Ryan Wu","Olivia Yang","Justin Chen","Grace Kim","Steven Park","Catherine Lee","Matthew Wong","Victoria Lin","Andrew Liu","Hannah Chen","Benjamin Kim","Samantha Wu","Alexander Park","Nicole Zhang"],Nce=Array(40).fill(null).map((t,e)=>e<zr.length?zr[e]:{id:e+1,name:Ace[e],xp:Math.floor(257e3-e*1e3),avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${e+1}`});function kce(){const[t,e]=g.useState(!1),n=r=>{switch(r){case 1:return"bg-gradient-to-r from-yellow-400/20 to-yellow-600/20 text-yellow-400";case 2:return"bg-gradient-to-r from-gray-300/20 to-gray-400/20 text-gray-300";case 3:return"bg-gradient-to-r from-amber-600/20 to-amber-700/20 text-amber-600";default:return"bg-[#252525]/40 text-[#B3B3B3]"}};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"rounded-xl border border-white/5 bg-[#252525]/40 p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Kt,{className:"h-5 w-5 text-[#B3B3B3]"}),c.jsx("h2",{className:"text-xl font-semibold text-white",children:"Leaderboard"})]}),c.jsx(te,{variant:"link",className:"text-[#B3B3B3] hover:text-white",onClick:()=>e(!0),children:"View Full Ranking"})]}),c.jsx("div",{className:"space-y-4",children:zr.map((r,s)=>c.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl border border-white/5 hover:border-purple-500/30 bg-[#252525]/40 hover:bg-[#252525] transition-all",children:[c.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[c.jsx("div",{className:n(s+1)+" flex h-8 w-8 items-center justify-center rounded-xl font-semibold shrink-0",children:s+1}),c.jsx("img",{src:r.avatar,alt:r.name,className:"h-8 w-8 rounded-xl bg-[#252525]/40 shrink-0"}),c.jsx("div",{className:"overflow-x-auto min-w-0",children:c.jsx("span",{className:"font-medium text-white whitespace-nowrap",children:r.name})})]}),c.jsxs("div",{className:"flex items-center gap-2 shrink-0 ml-4",children:[c.jsx(Kt,{className:"h-4 w-4 text-[#B3B3B3]"}),c.jsxs("span",{className:"text-[#B3B3B3] whitespace-nowrap",children:[r.xp.toLocaleString()," XP"]})]})]},r.id))})]}),c.jsx(Vv,{open:t,onOpenChange:e,children:c.jsx(tp,{className:"!rounded-[32px] bg-[#252525]/40 border-white/5 p-6 max-w-2xl max-h-[80vh] rounded-3xl",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[c.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-[#252525]/40 border border-white/5",children:c.jsx(Kt,{className:"h-6 w-6 text-[#B3B3B3]"})}),c.jsx("h2",{className:"text-2xl font-bold text-white",children:"Full Leaderboard"})]}),c.jsx("div",{className:"space-y-3 overflow-y-auto max-h-[60vh] pr-2",children:Nce.map((r,s)=>c.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl border border-white/5 hover:border-white/10 bg-[#252525]/40 hover:bg-[#252525] transition-all",children:[c.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[c.jsx("div",{className:n(s+1)+" flex h-8 w-8 items-center justify-center rounded-xl font-semibold shrink-0",children:s+1}),c.jsx("img",{src:r.avatar,alt:r.name,className:"h-8 w-8 rounded-xl bg-[#252525]/40 shrink-0"}),c.jsx("div",{className:"overflow-x-auto min-w-0",children:c.jsx("span",{className:"font-medium text-white whitespace-nowrap",children:r.name})})]}),c.jsxs("div",{className:"flex items-center gap-2 shrink-0 ml-4",children:[c.jsx(Kt,{className:"h-4 w-4 text-[#B3B3B3]"}),c.jsxs("span",{className:"text-[#B3B3B3] whitespace-nowrap",children:[r.xp.toLocaleString()," XP"]})]})]},r.id))})]})})})]})}const u2=[{id:"1",name:"Web Dev Masters",topic:"React & TypeScript",members:8,activeNow:3,nextSession:"Today, 7:00 PM",image:"https://images.unsplash.com/photo-1633356122544-f134324a6cee?auto=format&fit=crop&w=800&q=80"},{id:"2",name:"Algorithm Study Circle",topic:"Data Structures",members:6,activeNow:2,nextSession:"Tomorrow, 6:30 PM",image:"https://images.unsplash.com/photo-1509228468518-180dd4864904?auto=format&fit=crop&w=800&q=80"}];function Oce({group:t}){const e=Qe();return c.jsx(ia,{theme:"blue",className:"group cursor-pointer transition-all hover:scale-[1.02]",onClick:()=>e(`/study-groups/${t.id}`),children:c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsxs("div",{className:"relative h-40 overflow-hidden rounded-lg",children:[c.jsx("img",{src:t.image,alt:t.name,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-110"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),c.jsxs(qn,{className:"absolute top-3 right-3 bg-green-500/90 text-white",variant:"secondary",children:[t.activeNow," Active Now"]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-semibold text-white",children:t.name}),c.jsx("p",{className:"text-sm text-[#B3B3B3]",children:t.topic})]}),c.jsxs("div",{className:"flex items-center gap-4 text-sm text-[#B3B3B3]",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Ho,{className:"h-4 w-4"}),c.jsxs("span",{children:[t.members," members"]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Up,{className:"h-4 w-4"}),c.jsx("span",{children:t.nextSession})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(qn,{variant:"secondary",className:"bg-blue-500/20 text-blue-400",children:[c.jsx(g0,{className:"mr-1 h-3 w-3"})," Voice Chat"]}),c.jsxs(qn,{variant:"secondary",className:"bg-purple-500/20 text-purple-400",children:[c.jsx(t$,{className:"mr-1 h-3 w-3"})," Text Chat"]}),c.jsxs(qn,{variant:"secondary",className:"bg-green-500/20 text-green-400",children:[c.jsx(js,{className:"mr-1 h-3 w-3"})," Study Tools"]})]})]}),c.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(BC,{className:"h-6 w-6 text-white"})})]})})}function Dce(){const t=Qe();return c.jsxs("div",{className:"w-full space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"rounded-full bg-blue-500/20 p-2.5",children:c.jsx(Ho,{className:"h-6 w-6 text-blue-500"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Study Groups"}),c.jsx("p",{className:"text-sm text-[#B3B3B3]",children:"Learn together, grow together"})]})]}),c.jsx("button",{onClick:()=>t("/study-groups/create"),className:"bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 text-white font-semibold py-2.5 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 hover:shadow-lg",children:"Create New Group"})]}),u2.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:u2.map(e=>c.jsx(Oce,{group:e},e.id))}):c.jsx(ia,{theme:"blue",className:"p-12 text-center cursor-pointer hover:scale-[1.02] transition-transform",onClick:()=>t("/study-groups/create"),children:c.jsxs("div",{className:"flex flex-col items-center gap-4",children:[c.jsx("div",{className:"rounded-full bg-blue-500/20 p-4",children:c.jsx(Ho,{className:"h-8 w-8 text-blue-500"})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"text-xl font-semibold text-white",children:"No study groups yet"}),c.jsx("p",{className:"text-[#B3B3B3]",children:"Create or join a group to start learning together!"})]}),c.jsx(qn,{className:"mt-4 bg-blue-500/20 text-blue-400",children:"Click to Create a Group"})]})})]})}function iI(t,[e,n]){return Math.min(n,Math.max(e,t))}function jce(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var oI="ScrollArea",[J$,i0e]=mr(oI),[Mce,Dr]=J$(oI),Z$=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=t,[a,l]=g.useState(null),[u,d]=g.useState(null),[h,p]=g.useState(null),[m,y]=g.useState(null),[_,b]=g.useState(null),[x,E]=g.useState(0),[w,I]=g.useState(0),[k,M]=g.useState(!1),[C,S]=g.useState(!1),P=Ve(e,O=>l(O)),R=Lp(s);return c.jsx(Mce,{scope:n,type:r,dir:R,scrollHideDelay:i,scrollArea:a,viewport:u,onViewportChange:d,content:h,onContentChange:p,scrollbarX:m,onScrollbarXChange:y,scrollbarXEnabled:k,onScrollbarXEnabledChange:M,scrollbarY:_,onScrollbarYChange:b,scrollbarYEnabled:C,onScrollbarYEnabledChange:S,onCornerWidthChange:E,onCornerHeightChange:I,children:c.jsx(_e.div,{dir:R,...o,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":w+"px",...t.style}})})});Z$.displayName=oI;var eB="ScrollAreaViewport",tB=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,o=Dr(eB,n),a=g.useRef(null),l=Ve(e,a,o.onViewportChange);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),c.jsx(_e.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:c.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});tB.displayName=eB;var Fs="ScrollAreaScrollbar",aI=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Dr(Fs,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,a=t.orientation==="horizontal";return g.useEffect(()=>(a?i(!0):o(!0),()=>{a?i(!1):o(!1)}),[a,i,o]),s.type==="hover"?c.jsx(Lce,{...r,ref:e,forceMount:n}):s.type==="scroll"?c.jsx(Fce,{...r,ref:e,forceMount:n}):s.type==="auto"?c.jsx(nB,{...r,ref:e,forceMount:n}):s.type==="always"?c.jsx(lI,{...r,ref:e}):null});aI.displayName=Fs;var Lce=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Dr(Fs,t.__scopeScrollArea),[i,o]=g.useState(!1);return g.useEffect(()=>{const a=s.scrollArea;let l=0;if(a){const u=()=>{window.clearTimeout(l),o(!0)},d=()=>{l=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",u),a.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",u),a.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),c.jsx(Dn,{present:n||i,children:c.jsx(nB,{"data-state":i?"visible":"hidden",...r,ref:e})})}),Fce=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Dr(Fs,t.__scopeScrollArea),i=t.orientation==="horizontal",o=R0(()=>l("SCROLL_END"),100),[a,l]=jce("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(a==="idle"){const u=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[a,s.scrollHideDelay,l]),g.useEffect(()=>{const u=s.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const p=()=>{const m=u[d];h!==m&&(l("SCROLL"),o()),h=m};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,i,l,o]),c.jsx(Dn,{present:n||a!=="hidden",children:c.jsx(lI,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:ae(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:ae(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),nB=g.forwardRef((t,e)=>{const n=Dr(Fs,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,o]=g.useState(!1),a=t.orientation==="horizontal",l=R0(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?u:d)}},10);return Gu(n.viewport,l),Gu(n.content,l),c.jsx(Dn,{present:r||i,children:c.jsx(lI,{"data-state":i?"visible":"hidden",...s,ref:e})})}),lI=g.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=Dr(Fs,t.__scopeScrollArea),i=g.useRef(null),o=g.useRef(0),[a,l]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=aB(a.viewport,a.content),d={...r,sizes:a,onSizesChange:l,hasThumb:u>0&&u<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function h(p,m){return Gce(p,o.current,a,m)}return n==="horizontal"?c.jsx(Vce,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollLeft,m=d2(p,a,s.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=h(p,s.dir))}}):n==="vertical"?c.jsx(Uce,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollTop,m=d2(p,a);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=h(p))}}):null}),Vce=g.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=Dr(Fs,t.__scopeScrollArea),[o,a]=g.useState(),l=g.useRef(null),u=Ve(e,l,i.onScrollbarXChange);return g.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),c.jsx(sB,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":P0(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const p=i.viewport.scrollLeft+d.deltaX;t.onWheelScroll(p),cB(p,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:zv(o.paddingLeft),paddingEnd:zv(o.paddingRight)}})}})}),Uce=g.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=Dr(Fs,t.__scopeScrollArea),[o,a]=g.useState(),l=g.useRef(null),u=Ve(e,l,i.onScrollbarYChange);return g.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),c.jsx(sB,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":P0(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const p=i.viewport.scrollTop+d.deltaY;t.onWheelScroll(p),cB(p,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:zv(o.paddingTop),paddingEnd:zv(o.paddingBottom)}})}})}),[$ce,rB]=J$(Fs),sB=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:d,onResize:h,...p}=t,m=Dr(Fs,n),[y,_]=g.useState(null),b=Ve(e,P=>_(P)),x=g.useRef(null),E=g.useRef(""),w=m.viewport,I=r.content-r.viewport,k=Lt(d),M=Lt(l),C=R0(h,10);function S(P){if(x.current){const R=P.clientX-x.current.left,O=P.clientY-x.current.top;u({x:R,y:O})}}return g.useEffect(()=>{const P=R=>{const O=R.target;(y==null?void 0:y.contains(O))&&k(R,I)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[w,y,I,k]),g.useEffect(M,[r,M]),Gu(y,C),Gu(m.content,C),c.jsx($ce,{scope:n,scrollbar:y,hasThumb:s,onThumbChange:Lt(i),onThumbPointerUp:Lt(o),onThumbPositionChange:M,onThumbPointerDown:Lt(a),children:c.jsx(_e.div,{...p,ref:b,style:{position:"absolute",...p.style},onPointerDown:ae(t.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),x.current=y.getBoundingClientRect(),E.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),S(P))}),onPointerMove:ae(t.onPointerMove,S),onPointerUp:ae(t.onPointerUp,P=>{const R=P.target;R.hasPointerCapture(P.pointerId)&&R.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=E.current,m.viewport&&(m.viewport.style.scrollBehavior=""),x.current=null})})})}),Bv="ScrollAreaThumb",iB=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=rB(Bv,t.__scopeScrollArea);return c.jsx(Dn,{present:n||s.hasThumb,children:c.jsx(Bce,{ref:e,...r})})}),Bce=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=Dr(Bv,n),o=rB(Bv,n),{onThumbPositionChange:a}=o,l=Ve(e,h=>o.onThumbChange(h)),u=g.useRef(void 0),d=R0(()=>{u.current&&(u.current(),u.current=void 0)},100);return g.useEffect(()=>{const h=i.viewport;if(h){const p=()=>{if(d(),!u.current){const m=qce(h,a);u.current=m,a()}};return a(),h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[i.viewport,d,a]),c.jsx(_e.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ae(t.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),y=h.clientX-m.left,_=h.clientY-m.top;o.onThumbPointerDown({x:y,y:_})}),onPointerUp:ae(t.onPointerUp,o.onThumbPointerUp)})});iB.displayName=Bv;var cI="ScrollAreaCorner",oB=g.forwardRef((t,e)=>{const n=Dr(cI,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?c.jsx(zce,{...t,ref:e}):null});oB.displayName=cI;var zce=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=Dr(cI,n),[i,o]=g.useState(0),[a,l]=g.useState(0),u=!!(i&&a);return Gu(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),l(d)}),Gu(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),o(d)}),u?c.jsx(_e.div,{...r,ref:e,style:{width:i,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function zv(t){return t?parseInt(t,10):0}function aB(t,e){const n=t/e;return isNaN(n)?0:n}function P0(t){const e=aB(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function Gce(t,e,n,r="ltr"){const s=P0(n),i=s/2,o=e||i,a=s-o,l=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-a,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return lB([l,u],h)(t)}function d2(t,e,n="ltr"){const r=P0(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,a=i-r,l=n==="ltr"?[0,o]:[o*-1,0],u=iI(t,l);return lB([0,o],[0,a])(u)}function lB(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function cB(t,e){return t>0&&t<e}var qce=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},o=n.left!==i.left,a=n.top!==i.top;(o||a)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function R0(t,e){const n=Lt(t),r=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),g.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Gu(t,e){const n=Lt(e);Os(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var uB=Z$,Wce=tB,Hce=oB;const np=g.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(uB,{ref:r,className:oe("relative overflow-hidden",t),...n,children:[c.jsx(Wce,{className:"h-full w-full rounded-[inherit]",children:e}),c.jsx(dB,{}),c.jsx(Hce,{})]}));np.displayName=uB.displayName;const dB=g.forwardRef(({className:t,orientation:e="vertical",...n},r)=>c.jsx(aI,{ref:r,orientation:e,className:oe("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:c.jsx(iB,{className:"relative flex-1 rounded-full bg-border"})}));dB.displayName=aI.displayName;var h2;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(h2||(h2={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f2;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(f2||(f2={}));var p2;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(p2||(p2={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=["user","model","function","system"];var g2;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(g2||(g2={}));var y2;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(y2||(y2={}));var v2;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(v2||(v2={}));var _2;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(_2||(_2={}));var rf;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER"})(rf||(rf={}));var x2;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(x2||(x2={}));var w2;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(w2||(w2={}));var b2;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(b2||(b2={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class oc extends Un{constructor(e,n){super(e),this.response=n}}class hB extends Un{constructor(e,n,r,s){super(e),this.status=n,this.statusText=r,this.errorDetails=s}}class jo extends Un{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kce="https://generativelanguage.googleapis.com",Qce="v1beta",Yce="0.21.0",Xce="genai-js";var Il;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Il||(Il={}));class Jce{constructor(e,n,r,s,i){this.model=e,this.task=n,this.apiKey=r,this.stream=s,this.requestOptions=i}toString(){var e,n;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||Qce;let i=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||Kce}/${r}/${this.model}:${this.task}`;return this.stream&&(i+="?alt=sse"),i}}function Zce(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${Xce}/${Yce}`),e.join(" ")}async function eue(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",Zce(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let r=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(s){throw new jo(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${s.message}`)}for(const[s,i]of r.entries()){if(s==="x-goog-api-key")throw new jo(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new jo(`Header name ${s} can only be set using the apiClient field`);n.append(s,i)}}return n}async function tue(t,e,n,r,s,i){const o=new Jce(t,e,n,r,i);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},iue(i)),{method:"POST",headers:await eue(o),body:s})}}async function zp(t,e,n,r,s,i={},o=fetch){const{url:a,fetchOptions:l}=await tue(t,e,n,r,s,i);return nue(a,l,o)}async function nue(t,e,n=fetch){let r;try{r=await n(t,e)}catch(s){rue(s,t)}return r.ok||await sue(r,t),r}function rue(t,e){let n=t;throw t instanceof hB||t instanceof jo||(n=new Un(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function sue(t,e){let n="",r;try{const s=await t.json();n=s.error.message,s.error.details&&(n+=` ${JSON.stringify(s.error.details)}`,r=s.error.details)}catch{}throw new hB(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,r)}function iue(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),ry(t.candidates[0]))throw new oc(`${eo(t)}`,t);return oue(t)}else if(t.promptFeedback)throw new oc(`Text not available. ${eo(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),ry(t.candidates[0]))throw new oc(`${eo(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),E2(t)[0]}else if(t.promptFeedback)throw new oc(`Function call not available. ${eo(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),ry(t.candidates[0]))throw new oc(`${eo(t)}`,t);return E2(t)}else if(t.promptFeedback)throw new oc(`Function call not available. ${eo(t)}`,t)},t}function oue(t){var e,n,r,s;const i=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const o of(s=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)o.text&&i.push(o.text),o.executableCode&&i.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&i.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}function E2(t){var e,n,r,s;const i=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const o of(s=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||s===void 0?void 0:s.parts)o.functionCall&&i.push(o.functionCall);if(i.length>0)return i}const aue=[rf.RECITATION,rf.SAFETY,rf.LANGUAGE];function ry(t){return!!t.finishReason&&aue.includes(t.finishReason)}function eo(t){var e,n,r;let s="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)s+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(s+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((r=t.candidates)===null||r===void 0)&&r[0]){const i=t.candidates[0];ry(i)&&(s+=`Candidate was blocked due to ${i.finishReason}`,i.finishMessage&&(s+=`: ${i.finishMessage}`))}return s}function rp(t){return this instanceof rp?(this.v=t,this):new rp(t)}function lue(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(p){r[p]&&(s[p]=function(m){return new Promise(function(y,_){i.push([p,m,y,_])>1||a(p,m)})})}function a(p,m){try{l(r[p](m))}catch(y){h(i[0][3],y)}}function l(p){p.value instanceof rp?Promise.resolve(p.value.v).then(u,d):h(i[0][2],p)}function u(p){a("next",p)}function d(p){a("throw",p)}function h(p,m){p(m),i.shift(),i.length&&a(i[0][0],i[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function cue(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=hue(e),[r,s]=n.tee();return{stream:due(r),response:uue(s)}}async function uue(t){const e=[],n=t.getReader();for(;;){const{done:r,value:s}=await n.read();if(r)return uI(fue(e));e.push(s)}}function due(t){return lue(this,arguments,function*(){const n=t.getReader();for(;;){const{value:r,done:s}=yield rp(n.read());if(s)break;yield yield rp(uI(r))}})}function hue(t){const e=t.getReader();return new ReadableStream({start(r){let s="";return i();function i(){return e.read().then(({value:o,done:a})=>{if(a){if(s.trim()){r.error(new Un("Failed to parse stream"));return}r.close();return}s+=o;let l=s.match(T2),u;for(;l;){try{u=JSON.parse(l[1])}catch{r.error(new Un(`Error parsing JSON response: "${l[1]}"`));return}r.enqueue(u),s=s.substring(l[0].length),l=s.match(T2)}return i()})}}})}function fue(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of t){if(r.candidates)for(const s of r.candidates){const i=s.index;if(n.candidates||(n.candidates=[]),n.candidates[i]||(n.candidates[i]={index:s.index}),n.candidates[i].citationMetadata=s.citationMetadata,n.candidates[i].groundingMetadata=s.groundingMetadata,n.candidates[i].finishReason=s.finishReason,n.candidates[i].finishMessage=s.finishMessage,n.candidates[i].safetyRatings=s.safetyRatings,s.content&&s.content.parts){n.candidates[i].content||(n.candidates[i].content={role:s.content.role||"user",parts:[]});const o={};for(const a of s.content.parts)a.text&&(o.text=a.text),a.functionCall&&(o.functionCall=a.functionCall),a.executableCode&&(o.executableCode=a.executableCode),a.codeExecutionResult&&(o.codeExecutionResult=a.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),n.candidates[i].content.parts.push(o)}}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fB(t,e,n,r){const s=await zp(e,Il.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),r);return cue(s)}async function pB(t,e,n,r){const i=await(await zp(e,Il.GENERATE_CONTENT,t,!1,JSON.stringify(n),r)).json();return{response:uI(i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mB(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function sp(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return pue(e)}function pue(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,s=!1;for(const i of t)"functionResponse"in i?(n.parts.push(i),s=!0):(e.parts.push(i),r=!0);if(r&&s)throw new Un("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!s)throw new Un("No content is provided for sending chat message.");return r?e:n}function mue(t,e){var n;let r={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const s=t.generateContentRequest!=null;if(t.contents){if(s)throw new jo("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=t.contents}else if(s)r=Object.assign(Object.assign({},r),t.generateContentRequest);else{const i=sp(t);r.contents=[i]}return{generateContentRequest:r}}function S2(t){let e;return t.contents?e=t:e={contents:[sp(t)]},t.systemInstruction&&(e.systemInstruction=mB(t.systemInstruction)),e}function gue(t){return typeof t=="string"||Array.isArray(t)?{content:sp(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],yue={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function vue(t){let e=!1;for(const n of t){const{role:r,parts:s}=n;if(!e&&r!=="user")throw new Un(`First content should be with role 'user', got ${r}`);if(!m2.includes(r))throw new Un(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(m2)}`);if(!Array.isArray(s))throw new Un("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new Un("Each Content should have at least one part");const i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const a of s)for(const l of C2)l in a&&(i[l]+=1);const o=yue[r];for(const a of C2)if(!o.includes(a)&&i[a]>0)throw new Un(`Content with role '${r}' can't contain '${a}' part`);e=!0}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="SILENT_ERROR";class _ue{constructor(e,n,r,s={}){this.model=n,this.params=r,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(vue(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,s,i,o,a,l;await this._sendPromise;const u=sp(e),d={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},h=Object.assign(Object.assign({},this._requestOptions),n);let p;return this._sendPromise=this._sendPromise.then(()=>pB(this._apiKey,this.model,d,h)).then(m=>{var y;if(m.response.candidates&&m.response.candidates.length>0){this._history.push(u);const _=Object.assign({parts:[],role:"model"},(y=m.response.candidates)===null||y===void 0?void 0:y[0].content);this._history.push(_)}else{const _=eo(m.response);_&&console.warn(`sendMessage() was unsuccessful. ${_}. Inspect response object for details.`)}p=m}),await this._sendPromise,p}async sendMessageStream(e,n={}){var r,s,i,o,a,l;await this._sendPromise;const u=sp(e),d={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(i=this.params)===null||i===void 0?void 0:i.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},h=Object.assign(Object.assign({},this._requestOptions),n),p=fB(this._apiKey,this.model,d,h);return this._sendPromise=this._sendPromise.then(()=>p).catch(m=>{throw new Error(I2)}).then(m=>m.response).then(m=>{if(m.candidates&&m.candidates.length>0){this._history.push(u);const y=Object.assign({},m.candidates[0].content);y.role||(y.role="model"),this._history.push(y)}else{const y=eo(m);y&&console.warn(`sendMessageStream() was unsuccessful. ${y}. Inspect response object for details.`)}}).catch(m=>{m.message!==I2&&console.error(m)}),p}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xue(t,e,n,r){return(await zp(e,Il.COUNT_TOKENS,t,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wue(t,e,n,r){return(await zp(e,Il.EMBED_CONTENT,t,!1,JSON.stringify(n),r)).json()}async function bue(t,e,n,r){const s=n.requests.map(o=>Object.assign(Object.assign({},o),{model:e}));return(await zp(e,Il.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:s}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=mB(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;const s=S2(e),i=Object.assign(Object.assign({},this._requestOptions),n);return pB(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),i)}async generateContentStream(e,n={}){var r;const s=S2(e),i=Object.assign(Object.assign({},this._requestOptions),n);return fB(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},s),i)}startChat(e){var n;return new _ue(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const r=mue(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),n);return xue(this.apiKey,this.model,r,s)}async embedContent(e,n={}){const r=gue(e),s=Object.assign(Object.assign({},this._requestOptions),n);return wue(this.apiKey,this.model,r,s)}async batchEmbedContents(e,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return bue(this.apiKey,this.model,e,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new Un("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new P2(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new jo("Cached content must contain a `name` field.");if(!e.model)throw new jo("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const o of s)if(n!=null&&n[o]&&e[o]&&(n==null?void 0:n[o])!==e[o]){if(o==="model"){const a=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,l=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(a===l)continue}throw new jo(`Different value for "${o}" specified in modelParams (${n[o]}) and cachedContent (${e[o]})`)}const i=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new P2(this.apiKey,i,r)}}const Eue=new A0("AIzaSyDiItOTczdKCepW0lK00uOWPT0_Hnxeil0"),Tue=Eue.getGenerativeModel({model:"gemini-1.5-flash"});async function gB(t){try{console.log("Sending to Gemini:",t);const r=(await(await Tue.generateContent(t)).response).text();return console.log("Received from Gemini:",r),r}catch(e){return console.error("Error:",e),"I'm having trouble right now. Please try again."}}const Sue=[{icon:c.jsx(QU,{className:"h-3 w-3"}),text:"Help me understand React hooks",category:"Development"},{icon:c.jsx(s$,{className:"h-3 w-3"}),text:"Explain blockchain technology",category:"Technology"},{icon:c.jsx(js,{className:"h-3 w-3"}),text:"What are design patterns?",category:"Concepts"},{icon:c.jsx(WC,{className:"h-3 w-3"}),text:"How to improve code quality?",category:"Best Practices"}],Cue=[{icon:c.jsx(Tl,{className:"h-5 w-5"}),title:"Learning Concepts",description:"Clear explanations of complex topics"},{icon:c.jsx(QU,{className:"h-5 w-5"}),title:"Code Help",description:"Debug and improve your code"},{icon:c.jsx(js,{className:"h-5 w-5"}),title:"Problem Solving",description:"Step-by-step solution guidance"},{icon:c.jsx(s$,{className:"h-5 w-5"}),title:"Best Practices",description:"Industry-standard recommendations"}];function yB({className:t,position:e="bottom-right"}){const[n,r]=g.useState(!1),[s,i]=g.useState(!1),[o,a]=g.useState([{role:"assistant",content:" Hi! I'm Chitti, your AI learning assistant powered by Gemini.",timestamp:new Date}]),[l,u]=g.useState(""),[d,h]=g.useState(!1),p=g.useRef(null);g.useEffect(()=>{p.current&&(p.current.scrollTop=p.current.scrollHeight)},[o]);const m=w=>{if(w.startsWith("")||w.startsWith("")||w.startsWith(""))return w;const I=S=>{let P=S;return P=P.replace(/^([^:]+):/g,"**$1**:"),P=P.replace(/\(([^)]+)\)/g,"(**$1**)"),["Creational Patterns","Structural Patterns","Behavioral Patterns","Singleton","Factory Method","Abstract Factory","Adapter","Decorator","Facade","Observer","Strategy","Command"].forEach(O=>{const D=new RegExp(`\\b${O}\\b(?![^<]*>)`,"g");P=P.replace(D,`**${O}**`)}),P=P.replace(/\*{4}/g,"**"),P=P.replace(/\*\*\s*\*\*/g,"**"),P},k=w.split(`
`);let M=1,C=!1;return k.map(S=>{const P=S.trim();if(!P)return C=!1,"";if(P.includes("patterns are usually categorized")||P.startsWith("These patterns")||P.startsWith("It's important"))return C=!1,`
${P}`;let R=P.replace(/^[\d.)\]]+\s*/,"").trim();return R=I(R),R.includes("**")||C?(C=!0,`${M++}. ${R}`):R}).join(`
`).replace(/\n{3,}/g,`

`)},y=async w=>{if(!w.trim()||d)return;const I={role:"user",content:w.trim(),timestamp:new Date};a(k=>[...k,I]),u(""),h(!0);try{const M=await gB(w.trim(),"Please provide your responses in plain text with numbered points. Use colons to separate concepts from their explanations. Don't use any special formatting or markdown."),C={role:"assistant",content:m(M),timestamp:new Date};a(S=>[...S,C])}catch(k){console.error("Error:",k),a(M=>[...M,{role:"assistant",content:" Sorry, I encountered an error. Please try again.",timestamp:new Date}])}finally{h(!1)}},_=w=>{w.preventDefault(),y(l)},b=()=>{a([{role:"assistant",content:" Chat cleared. How can I help you?",timestamp:new Date}])},x={"top-right":"top-4 right-4","bottom-right":"bottom-4 right-4"},E=w=>w.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return c.jsxs(c.Fragment,{children:[c.jsx(Ah,{children:c.jsxs($m,{children:[c.jsx(Bm,{asChild:!0,children:c.jsx(te,{onClick:()=>r(!0),className:oe("fixed h-14 w-14 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 bg-gradient-to-r from-primary to-primary/80 hover:scale-110",x[e],t),size:"icon",children:c.jsx(oi,{className:"h-7 w-7 text-primary-foreground"})})}),c.jsx(Nh,{children:c.jsx("p",{children:"Chat with Chitti AI"})})]})}),c.jsx(Vv,{open:n,onOpenChange:r,children:c.jsxs(tp,{className:oe("flex flex-col gap-0 p-0 rounded-xl transition-all duration-300",s?"w-screen h-screen max-w-none !max-h-none rounded-none":"sm:max-w-[500px] h-[700px]"),children:[c.jsx(Uv,{className:"p-6 pb-4 border-b bg-gradient-to-r from-primary/10 to-primary/5",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-primary to-primary/50 rounded-full blur opacity-75"}),c.jsx(oi,{className:"h-8 w-8 text-primary-foreground relative"})]}),c.jsxs("div",{children:[c.jsxs($v,{className:"flex items-center gap-2 text-xl",children:["Chitti AI",c.jsxs(qn,{variant:"secondary",className:"ml-2 bg-primary/10",children:[c.jsx(i$,{className:"h-3 w-3 mr-1 text-primary"}),"Gemini"]})]}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Your intelligent learning companion"})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ah,{children:c.jsxs($m,{children:[c.jsx(Bm,{asChild:!0,children:c.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-primary/10",onClick:b,children:c.jsx(Zae,{className:"h-4 w-4"})})}),c.jsx(Nh,{children:c.jsx("p",{children:"Clear chat"})})]})}),c.jsx(Ah,{children:c.jsxs($m,{children:[c.jsx(Bm,{asChild:!0,children:c.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-primary/10",onClick:()=>i(!s),children:s?c.jsx(cle,{className:"h-4 w-4"}):c.jsx(ale,{className:"h-4 w-4"})})}),c.jsx(Nh,{children:c.jsx("p",{children:s?"Minimize":"Maximize"})})]})}),c.jsx(te,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-destructive/10",onClick:()=>{r(!1),i(!1)},children:c.jsx(_0,{className:"h-4 w-4"})})]})]})}),o.length===1&&c.jsxs("div",{className:"p-6 border-b bg-gradient-to-r from-primary/5 to-transparent",children:[c.jsx("h3",{className:"font-semibold mb-4",children:"I can help you with:"}),c.jsx("div",{className:"grid grid-cols-2 gap-4",children:Cue.map((w,I)=>c.jsx(Se,{className:"p-4 hover:bg-primary/5 transition-colors cursor-pointer",onClick:()=>y(`Tell me about ${w.title}`),children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"text-primary",children:w.icon}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium",children:w.title}),c.jsx("p",{className:"text-sm text-muted-foreground",children:w.description})]})]})},I))})]}),c.jsx(np,{className:"flex-1 p-6",ref:p,children:c.jsxs("div",{className:"space-y-6",children:[o.map((w,I)=>c.jsxs("div",{className:oe("flex flex-col gap-2",w.role==="user"?"items-end":"items-start"),children:[c.jsxs("div",{className:oe("flex items-start gap-3 max-w-[85%] group",w.role==="user"?"flex-row-reverse":"flex-row"),children:[c.jsx("div",{className:oe("h-9 w-9 rounded-full flex items-center justify-center",w.role==="user"?"bg-gradient-to-r from-primary to-primary/80":"bg-gradient-to-r from-secondary to-secondary/80"),children:w.role==="user"?c.jsx(lle,{className:"h-5 w-5 text-primary-foreground"}):c.jsx(oi,{className:"h-5 w-5"})}),c.jsx("div",{className:oe("rounded-2xl px-4 py-2.5 text-sm leading-relaxed whitespace-pre-wrap",w.role==="user"?"bg-gradient-to-r from-primary to-primary/90 text-primary-foreground":"bg-secondary"),children:w.content})]}),c.jsx("span",{className:"text-xs text-muted-foreground px-12",children:E(w.timestamp)})]},I)),d&&c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-r from-secondary to-secondary/80 flex items-center justify-center",children:c.jsx(oi,{className:"h-5 w-5"})}),c.jsx("div",{className:"bg-secondary rounded-2xl px-4 py-2.5 text-sm",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(hle,{className:"h-4 w-4 animate-spin"}),"Thinking..."]})})]})]})}),o.length===1&&c.jsxs("div",{className:"px-6 py-4 border-t bg-gradient-to-r from-primary/5 to-transparent",children:[c.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Quick questions:"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:Sue.map((w,I)=>c.jsxs(te,{variant:"outline",className:"text-sm bg-background hover:bg-primary/5",onClick:()=>y(w.text),children:[w.icon,c.jsx("span",{className:"ml-2",children:w.text}),c.jsx(qn,{variant:"secondary",className:"ml-2 bg-primary/10",children:w.category})]},I))})]}),c.jsxs("form",{onSubmit:_,className:oe("border-t p-4 flex gap-2 items-center bg-gradient-to-r from-primary/5 to-transparent",s&&"px-6"),children:[c.jsx(kt,{placeholder:"Ask me anything...",value:l,onChange:w=>u(w.target.value),className:"flex-1 bg-background border-primary/20 focus-visible:ring-primary/20"}),c.jsx(Ah,{children:c.jsxs($m,{children:[c.jsx(Bm,{asChild:!0,children:c.jsx(te,{type:"submit",size:"icon",disabled:d,className:"bg-gradient-to-r from-primary to-primary/80 hover:from-primary/90 hover:to-primary/70",children:c.jsx(y0,{className:"h-4 w-4 text-primary-foreground"})})}),c.jsx(Nh,{children:c.jsx("p",{children:"Send message"})})]})})]})]})})]})}const Iue=[{id:1,title:"Web Development Fundamentals",description:"Learn the basics of web development, including HTML, CSS, and JavaScript.",progress:0,image:"https://images.unsplash.com/photo-1547658719-da2b51169166?auto=format&fit=crop&w=800&q=80",path:"/courses/web-development",chapters:4,duration:"8 hours",xp:2600},{id:2,title:"Data Structures and Algorithms",description:"Master the fundamental data structures and algorithms.",progress:0,image:"https://images.unsplash.com/photo-1516116216624-53e697fedbea?auto=format&fit=crop&w=800&q=80",path:"/courses/data-structures-and-algorithms",chapters:4,duration:"10 hours",xp:2600},{id:3,title:"Machine Learning Basics",description:"Introduction to machine learning concepts and algorithms.",progress:0,image:"https://images.unsplash.com/photo-1527430253228-e93688616381?auto=format&fit=crop&w=800&q=80",path:"/courses/machine-learning-basics",chapters:4,duration:"12 hours",xp:2600},{id:4,title:"System Design",description:"Learn how to design scalable systems and architectures.",progress:0,image:"https://images.unsplash.com/photo-1451187580459-43490279c0fa?auto=format&fit=crop&w=800&q=80",path:"/courses/system-design",chapters:4,duration:"10 hours",xp:2600}];function Pue({course:t,className:e}){const n=Qe(),r=()=>{n(t.path)};return c.jsx(ia,{theme:"teal",className:oe("group h-full cursor-pointer transition-all hover:scale-[1.02]",e),onClick:r,children:c.jsxs("div",{className:"flex h-full flex-col gap-4",children:[c.jsxs("div",{className:"relative h-48 overflow-hidden rounded-lg",children:[c.jsx("img",{src:t.image,alt:t.title,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-110"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),t.progress>0&&c.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-[#1E1E1E]",children:c.jsx("div",{className:"h-full bg-gradient-to-r from-[#2DD4BF] to-[#14B8A6]",style:{width:`${t.progress}%`}})})]}),c.jsxs("div",{className:"flex flex-1 flex-col gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"text-xl font-semibold text-white",children:t.title}),c.jsx("p",{className:"text-sm text-[#B3B3B3]",children:t.description})]}),c.jsxs("div",{className:"mt-auto flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-1 text-sm text-[#B3B3B3]",children:[c.jsx(Tl,{className:"h-4 w-4"}),c.jsxs("span",{children:[t.chapters," chapters"]})]}),c.jsxs("div",{className:"flex items-center gap-1 text-sm text-[#B3B3B3]",children:[c.jsx(Up,{className:"h-4 w-4"}),c.jsx("span",{children:t.duration})]}),c.jsxs("div",{className:"ml-auto flex items-center gap-1 rounded-full bg-[#2DD4BF]/20 px-2 py-1 text-sm text-[#2DD4BF]",children:[c.jsx(WC,{className:"h-4 w-4"}),c.jsxs("span",{children:["+",t.xp," XP"]})]})]})]})]})})}function Rue(){const t=Qe(),{user:e}=Yt(),n=0,r=0,s=0,i=0,o=100,a=()=>{t("/courses")};return c.jsxs("div",{className:"container space-y-8 py-8",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsxs("h2",{className:"text-3xl font-bold tracking-tight",children:["Welcome back, ",e==null?void 0:e.displayName,"!"]}),c.jsx("p",{className:"text-[#B3B3B3]",children:"Track your progress and keep learning"})]}),c.jsx(yB,{position:"top-right",className:"relative h-10 w-10 top-0 right-0"})]}),c.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[c.jsx(Km,{title:"Total XP",value:n,subtitle:"Experience Points",icon:Kt,theme:"green"}),c.jsx(Km,{title:"Daily Streak",value:s,subtitle:"Days",icon:Fc,theme:"orange"}),c.jsx(Km,{title:"Courses Completed",value:i,subtitle:"Courses",icon:e$,theme:"purple"}),c.jsx(Km,{title:"Daily Goal",value:`${Math.min(n,o)}/${o}`,subtitle:"XP Today",icon:v0,theme:"blue"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Learning Tools"}),c.jsx("p",{className:"text-[#B3B3B3]",children:"Choose your learning method"})]}),c.jsx(Ice,{})]}),c.jsx(Dce,{}),c.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[c.jsx(bce,{currentXP:n,requiredXP:1e3,level:r,className:"w-full"}),c.jsx(kce,{})]}),c.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[c.jsx(Ece,{challenges:[{title:"Complete Python Basics",description:"Finish Chapter 1 of Python course",xpReward:200,progress:75,timeLeft:"2 hours left"},{title:"Daily Quiz Challenge",description:"Score 80% or higher on today's quiz",xpReward:150,completed:!0},{title:"Practice Problems",description:"Complete 5 practice problems",xpReward:300}],completedCount:3,totalCount:5,className:"w-full"}),c.jsx(Tce,{currentStreak:s,longestStreak:s,weekActivity:[{day:"Mon",active:!1},{day:"Tue",active:!1},{day:"Wed",active:!0},{day:"Thu",active:!0},{day:"Fri",active:!0},{day:"Sat",active:!1},{day:"Sun",active:!0}],className:"w-full"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Study Groups"}),c.jsx("p",{className:"text-[#B3B3B3]",children:"Join a study group to collaborate with others"})]}),c.jsxs(ia,{className:"col-span-2",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ho,{className:"w-5 h-5"}),c.jsx("h2",{className:"text-lg font-semibold",children:"Study Groups"})]}),c.jsx("div",{children:c.jsx("button",{onClick:()=>{console.log("Create group clicked from Dashboard"),t("/study-groups/create")},className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Create New Group"})})]}),c.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[c.jsx("p",{children:"No study groups yet"}),c.jsx("p",{className:"text-sm",children:"Create or join a group to study together!"})]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Featured Courses"}),c.jsx("p",{className:"text-[#B3B3B3]",children:"Continue learning with these recommended courses"})]}),c.jsx(qn,{variant:"outline",className:"cursor-pointer hover:bg-[#2DD4BF]/10",onClick:a,children:"View All"})]}),c.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:Iue.map(l=>c.jsx(Pue,{course:l},l.id))})]})]})}const Xd=Array(50).fill(null).map((t,e)=>({id:e<zr.length?zr[e].id:`user-${e+1}`,name:e<zr.length?zr[e].name:`Player ${e+1} with a very long name that should scroll horizontally`,xp:e<zr.length?zr[e].xp:Math.floor(2e4-e*300),avatar:e<zr.length?zr[e].avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${e}`}));function Aue(){const t=Qe(),e=n=>{switch(n){case 1:return"bg-gradient-to-r from-yellow-400/20 to-yellow-600/20 text-yellow-400";case 2:return"bg-gradient-to-r from-gray-300/20 to-gray-400/20 text-gray-300";case 3:return"bg-gradient-to-r from-amber-600/20 to-amber-700/20 text-amber-600";default:return"bg-[#252525]/40 text-[#B3B3B3]"}};return c.jsx("div",{className:"min-h-screen bg-gradient-to-b from-[#0F0F0F] to-[#151515] text-white",children:c.jsxs("div",{className:"container mx-auto px-4 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsxs("button",{onClick:()=>t(-1),className:"flex items-center gap-2 text-[#B3B3B3] hover:text-white transition-colors mb-4",children:[c.jsx(zae,{className:"w-5 h-5"}),"Back"]}),c.jsx("h1",{className:"text-3xl font-bold",children:"Leaderboard"}),c.jsx("p",{className:"text-[#B3B3B3] mt-2",children:"View all top performers"})]}),c.jsxs("div",{className:"mb-8 p-6 rounded-xl border border-white/5 bg-[#252525]/40",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Quick View"}),c.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl border border-white/5 bg-[#252525]/40",children:[c.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl font-semibold shrink-0 bg-yellow-400/20 text-yellow-400",children:"1"}),c.jsx("img",{src:Xd[0].avatar,alt:Xd[0].name,className:"h-10 w-10 rounded-xl bg-[#252525]/40 shrink-0"}),c.jsx("div",{className:"flex-1 overflow-x-auto min-w-0 scrollbar-thin scrollbar-thumb-purple-500/20 scrollbar-track-transparent",children:c.jsx("div",{className:"flex gap-4 min-w-max px-2",children:Xd.map(n=>c.jsx("span",{className:"font-medium text-white whitespace-nowrap",children:n.name},n.id))})}),c.jsxs("div",{className:"flex items-center gap-2 shrink-0 ml-4",children:[c.jsx(Kt,{className:"h-5 w-5 text-yellow-400"}),c.jsxs("span",{className:"text-yellow-400 whitespace-nowrap font-semibold",children:[Xd[0].xp.toLocaleString()," XP"]})]})]})]}),c.jsx("div",{className:"space-y-4 max-w-4xl mx-auto",children:Xd.map((n,r)=>c.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl border border-white/5 hover:border-purple-500/30 bg-[#252525]/40 hover:bg-[#252525] transition-all",children:[c.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[c.jsx("div",{className:oe("flex h-10 w-10 items-center justify-center rounded-xl font-semibold shrink-0",e(r+1)),children:r+1}),c.jsx("img",{src:n.avatar,alt:n.name,className:"h-10 w-10 rounded-xl bg-[#252525]/40 shrink-0"}),c.jsx("div",{className:"overflow-x-auto min-w-0",children:c.jsx("span",{className:"font-medium text-white whitespace-nowrap",children:n.name})})]}),c.jsx("div",{className:"flex items-center gap-2 shrink-0 ml-4",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Kt,{className:"h-5 w-5 text-[#B3B3B3]"}),c.jsxs("span",{className:"text-[#B3B3B3] whitespace-nowrap",children:[n.xp.toLocaleString()," XP"]})]})})]},n.id))})]})})}const Nue={learningStreak:[2,4,3,5,4,6,4],topicPerformance:[{topic:"JavaScript",score:85,total:100},{topic:"React",score:92,total:100},{topic:"TypeScript",score:78,total:100},{topic:"Node.js",score:88,total:100}],weeklyActivity:[{day:"Mon",hours:2.5},{day:"Tue",hours:1.8},{day:"Wed",hours:3.2},{day:"Thu",hours:2},{day:"Fri",hours:2.7},{day:"Sat",hours:4.1},{day:"Sun",hours:3.5}],strengthAreas:[{topic:"Problem Solving",percentage:92},{topic:"Code Quality",percentage:88},{topic:"Debugging",percentage:85},{topic:"Testing",percentage:78}],recentScores:[{quiz:"JavaScript Basics",score:95,date:"2025-01-10"},{quiz:"React Hooks",score:88,date:"2025-01-09"},{quiz:"TypeScript Types",score:92,date:"2025-01-08"},{quiz:"Node.js Fundamentals",score:85,date:"2025-01-07"}]};function kue(){var i,o,a,l,u,d,h,p,m,y,_,b,x,E,w,I,k;const[t,e]=g.useState(null),[n,r]=g.useState(!0);if(g.useEffect(()=>{(async()=>{try{const C=ui.currentUser;if(!C)return;const S=await UE(C.uid);S&&!S.analysis&&(S.analysis=Nue),e(S)}catch(C){console.error("Error loading profile:",C)}finally{r(!1)}})()},[]),n)return c.jsx("div",{className:"flex justify-center items-center h-screen",children:"Loading..."});if(!t)return c.jsx("div",{className:"text-center p-8",children:"Profile not found"});const s=M=>c.jsx("div",{className:"w-full bg-[#2a324b]/40 rounded-2xl h-2",children:c.jsx("div",{className:"bg-emerald-400/80 h-2 rounded-2xl transition-all duration-300",style:{width:`${M}%`}})});return c.jsxs("div",{className:"container mx-auto px-4 py-8",children:[c.jsx(Se,{className:"p-6 mb-6 bg-[#0B1120] border-0 shadow-lg",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx($p,{className:"w-24 h-24",children:t.profileImage?c.jsx(x0,{src:t.profileImage,alt:t.name}):c.jsx(Bp,{children:t.name.slice(0,2).toUpperCase()})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-white",children:t.name}),c.jsx("p",{className:"text-emerald-400/80",children:t.role}),t.bio&&c.jsx("p",{className:"mt-2 text-gray-400",children:t.bio})]})]})}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs(Se,{className:"relative p-6 bg-[#0B1120] border-0 shadow-lg group hover:bg-[#0d1328] transition-all duration-300",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4 text-white",children:"Stats"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"p-2.5 rounded-xl bg-[#1e2432] group-hover:bg-[#232937] transition-colors duration-300",children:c.jsx(Kt,{className:"text-yellow-500/90 h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-400",children:"Level"}),c.jsx("p",{className:"text-lg font-semibold text-white",children:t.level})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"p-2.5 rounded-xl bg-[#1e2432] group-hover:bg-[#232937] transition-colors duration-300",children:c.jsx(Tl,{className:"text-blue-400/90 h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-400",children:"Courses"}),c.jsx("p",{className:"text-lg font-semibold text-white",children:((i=t.stats)==null?void 0:i.coursesCompleted)||0})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"p-2.5 rounded-xl bg-[#1e2432] group-hover:bg-[#232937] transition-colors duration-300",children:c.jsx(js,{className:"text-purple-400/90 h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-400",children:"Quizzes"}),c.jsx("p",{className:"text-lg font-semibold text-white",children:((o=t.stats)==null?void 0:o.quizzesTaken)||0})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"p-2.5 rounded-xl bg-[#1e2432] group-hover:bg-[#232937] transition-colors duration-300",children:c.jsx(Fc,{className:"text-orange-400/90 h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-gray-400",children:"Streak"}),c.jsx("p",{className:"text-lg font-semibold text-white",children:((a=t.stats)==null?void 0:a.streak)||0})]})]})]})]}),c.jsxs(Se,{className:"relative p-6 bg-[#0B1120] border-0 shadow-lg group hover:bg-[#0d1328] transition-all duration-300",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4 text-white",children:"Connect"}),c.jsxs("div",{className:"space-y-3",children:[((l=t.socials)==null?void 0:l.github)&&c.jsxs("a",{href:t.socials.github,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors group/link",children:[c.jsx("div",{className:"p-2.5 rounded-xl bg-[#1e2432] group-hover/link:bg-[#232937] transition-colors duration-300",children:c.jsx(YU,{className:"h-5 w-5"})}),"GitHub"]}),((u=t.socials)==null?void 0:u.linkedin)&&c.jsxs("a",{href:t.socials.linkedin,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors group/link",children:[c.jsx("div",{className:"p-2.5 rounded-xl bg-[#1e2432] group-hover/link:bg-[#232937] transition-colors duration-300",children:c.jsx(JU,{className:"h-5 w-5 text-blue-400/90"})}),"LinkedIn"]}),((d=t.socials)==null?void 0:d.instagram)&&c.jsxs("a",{href:t.socials.instagram,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors group/link",children:[c.jsx("div",{className:"p-2.5 rounded-xl bg-[#1e2432] group-hover/link:bg-[#232937] transition-colors duration-300",children:c.jsx(tle,{className:"h-5 w-5 text-pink-400/90"})}),"Instagram"]}),((h=t.socials)==null?void 0:h.twitter)&&c.jsxs("a",{href:t.socials.twitter,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors group/link",children:[c.jsx("div",{className:"p-2.5 rounded-xl bg-[#1e2432] group-hover/link:bg-[#232937] transition-colors duration-300",children:c.jsx(vle,{className:"h-5 w-5 text-blue-400/90"})}),"Twitter"]}),!((p=t.socials)!=null&&p.github)&&!((m=t.socials)!=null&&m.linkedin)&&!((y=t.socials)!=null&&y.instagram)&&!((_=t.socials)!=null&&_.twitter)&&c.jsx("p",{className:"text-gray-500",children:"No social links added yet"})]})]}),c.jsxs(Se,{className:"relative p-6 bg-[#0B1120] border-0 shadow-lg lg:col-span-3",children:[c.jsx("h2",{className:"text-xl font-semibold mb-6 text-white",children:"Learning Analysis"}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-medium mb-4 text-white flex items-center gap-2",children:[c.jsx("div",{className:"p-2.5 rounded-xl bg-[#1e2432]",children:c.jsx(o$,{className:"text-emerald-400/90 h-5 w-5"})}),"Topic Performance"]}),c.jsx("div",{className:"space-y-4",children:(b=t.analysis)==null?void 0:b.topicPerformance.map((M,C)=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between mb-1",children:[c.jsx("span",{className:"text-gray-400",children:M.topic}),c.jsxs("span",{className:"text-emerald-400/90",children:[M.score,"%"]})]}),s(M.score/M.total*100)]},C))})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-medium mb-4 text-white flex items-center gap-2",children:[c.jsx("div",{className:"p-2.5 rounded-xl bg-[#1e2432]",children:c.jsx(Up,{className:"text-emerald-400/90 h-5 w-5"})}),"Weekly Activity"]}),c.jsx("div",{className:"flex items-end justify-between h-40",children:(x=t.analysis)==null?void 0:x.weeklyActivity.map((M,C)=>c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("div",{className:"w-8 bg-emerald-400/20 rounded-t-2xl",style:{height:`${M.hours*20}px`}}),c.jsx("span",{className:"text-gray-400 text-sm mt-2",children:M.day})]},C))})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-medium mb-4 text-white flex items-center gap-2",children:[c.jsx("div",{className:"p-2.5 rounded-xl bg-[#1e2432]",children:c.jsx(v0,{className:"text-emerald-400/90 h-5 w-5"})}),"Strength Areas"]}),c.jsx("div",{className:"space-y-4",children:(E=t.analysis)==null?void 0:E.strengthAreas.map((M,C)=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between mb-1",children:[c.jsx("span",{className:"text-gray-400",children:M.topic}),c.jsxs("span",{className:"text-emerald-400/90",children:[M.percentage,"%"]})]}),s(M.percentage)]},C))})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-medium mb-4 text-white flex items-center gap-2",children:[c.jsx("div",{className:"p-2.5 rounded-xl bg-[#1e2432]",children:c.jsx(Gae,{className:"text-emerald-400/90 h-5 w-5"})}),"Recent Quiz Scores"]}),c.jsx("div",{className:"space-y-3",children:(w=t.analysis)==null?void 0:w.recentScores.map((M,C)=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#0d1328] rounded-2xl",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-white",children:M.quiz}),c.jsx("p",{className:"text-sm text-gray-400",children:new Date(M.date).toLocaleDateString()})]}),c.jsxs("div",{className:"text-xl font-bold text-emerald-400/90",children:[M.score,"%"]})]},C))})]})]})]}),c.jsx(Se,{className:"relative p-6 bg-[#0B1120] border-0 shadow-lg lg:col-span-3",children:c.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold mb-4 text-white",children:"Interests"}),c.jsx("p",{className:"text-gray-400",children:t.interests||"No interests added yet"})]}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold mb-4 text-white",children:"Learning Goals"}),c.jsx("p",{className:"text-gray-400",children:t.goals||"No goals added yet"})]})]})}),c.jsxs(Se,{className:"relative p-6 bg-[#0B1120] border-0 shadow-lg lg:col-span-2",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4 text-white",children:"Recent Activity"}),c.jsx("div",{className:"space-y-4",children:(I=t.recentActivity)==null?void 0:I.map((M,C)=>c.jsxs("div",{className:"flex items-center gap-4 p-3 bg-[#0d1328] rounded-2xl",children:[c.jsxs("div",{className:"p-2.5 rounded-xl bg-[#0d1328] group-hover:bg-[#111a35]",children:[M.type==="quiz"&&c.jsx(js,{className:"text-purple-400/90 h-5 w-5"}),M.type==="course"&&c.jsx(Tl,{className:"text-blue-400/90 h-5 w-5"}),M.type==="achievement"&&c.jsx(Kt,{className:"text-yellow-500/90 h-5 w-5"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-white",children:M.description}),c.jsx("p",{className:"text-sm text-gray-400",children:new Date(M.date).toLocaleDateString()})]})]},C))})]}),c.jsxs(Se,{className:"relative p-6 bg-[#0B1120] border-0 shadow-lg",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4 text-white",children:"Achievements"}),c.jsx("div",{className:"space-y-4",children:(k=t.achievements)==null?void 0:k.map((M,C)=>c.jsxs("div",{className:"flex items-center gap-4 p-3 bg-[#0d1328] rounded-2xl",children:[c.jsx("div",{className:"p-2.5 rounded-xl bg-[#0d1328] group-hover:bg-[#111a35]",children:c.jsx(e$,{className:"text-yellow-500/90 h-5 w-5"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-white",children:M.title}),c.jsx("p",{className:"text-sm text-gray-400",children:M.description})]})]},C))})]})]})]})}const hw=({isResponding:t=!1})=>c.jsxs("div",{className:`relative w-10 h-10 ${t?"animate-pulse":""}`,children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-blue-600 rounded-full opacity-20"}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-blue-700 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-white text-lg font-bold",children:"C"})})})]}),Oue=()=>{const[t,e]=g.useState([{id:"welcome",text:"Hi! I'm Chitti AI Assistant. I can help you create quizzes and learn new things. What would you like to learn about?",sender:"chitty",timestamp:new Date}]),[n,r]=g.useState(""),[s,i]=g.useState(!1),{toast:o}=gr(),a=async()=>{if(!n.trim()||s)return;const u={id:Date.now().toString(),text:n.trim(),sender:"user",timestamp:new Date};try{e(p=>[...p,u]),r(""),i(!0);const d=await gB(u.text),h={id:(Date.now()+1).toString(),text:d,sender:"chitty",timestamp:new Date};e(p=>[...p,h])}catch(d){console.error("Error getting AI response:",d),o({title:"Error",description:"Failed to get AI response. Please try again.",variant:"destructive"})}finally{i(!1)}},l=u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),a())};return c.jsx("div",{className:"container mx-auto p-6",children:c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx("h1",{className:"text-3xl font-bold text-white",children:"Chitti AI Assistant"}),c.jsx("p",{className:"text-gray-400",children:"Your personal AI assistant for quiz creation and learning"})]}),c.jsxs(Se,{className:"bg-gradient-to-br from-gray-900 to-black border-blue-500/20",children:[c.jsx(S0,{className:"border-b border-blue-500/20 bg-gradient-to-r from-blue-600/10 to-blue-800/10",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(hw,{isResponding:s}),c.jsx(C0,{className:"text-xl bg-gradient-to-r from-blue-400 to-blue-600 bg-clip-text text-transparent",children:"Chat with Chitti AI Assistant"})]})}),c.jsxs(I0,{className:"p-0",children:[c.jsxs("div",{className:"h-[400px] overflow-y-auto p-4 space-y-4",children:[t.length===0?c.jsxs("div",{className:"text-center text-gray-500 mt-8",children:[c.jsx(Tl,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),c.jsx("p",{children:"Start chatting with Chitti AI Assistant to create your quiz!"})]}):t.map(u=>c.jsxs("div",{className:`flex ${u.sender==="user"?"justify-end":"justify-start"} items-start gap-2`,children:[u.sender==="chitty"&&c.jsx(hw,{}),c.jsx("div",{className:`max-w-[80%] rounded-2xl px-4 py-2 ${u.sender==="user"?"bg-blue-600 text-white":"bg-blue-600/20 text-white"}`,children:u.text})]},u.id)),s&&c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx(hw,{isResponding:!0}),c.jsx("div",{className:"bg-blue-600/20 rounded-2xl px-4 py-2",children:c.jsxs("div",{className:"flex gap-1",children:[c.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0ms"}}),c.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"150ms"}}),c.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]})]}),c.jsx("div",{className:"p-4 border-t border-blue-500/20 bg-gradient-to-t from-blue-900/20 to-transparent",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(te,{variant:"ghost",size:"icon",className:"text-blue-400 hover:text-blue-300 hover:bg-blue-500/20",disabled:s,children:c.jsx(g0,{className:"w-5 h-5"})}),c.jsx(kt,{value:n,onChange:u=>r(u.target.value),onKeyDown:l,placeholder:"Ask Chitti AI Assistant to help you create a quiz...",className:"bg-blue-900/20 border-blue-500/30 text-white placeholder-blue-300/50 focus-visible:ring-1 focus-visible:ring-blue-500",disabled:s}),c.jsx(te,{onClick:a,className:"bg-gradient-to-r from-blue-500 to-blue-700 text-white hover:from-blue-600 hover:to-blue-800",disabled:s||!n.trim(),children:c.jsx(y0,{className:"w-5 h-5"})})]})})]})]})]})})},Due=g.forwardRef(({children:t,className:e="",spotlightColor:n="rgba(29, 185, 84, 0.25)",style:r,...s},i)=>{const o=g.useRef(null),[a,l]=g.useState(!1),[u,d]=g.useState({x:0,y:0}),[h,p]=g.useState(0),m=E=>{if(!o.current||a)return;const w=o.current.getBoundingClientRect();d({x:E.clientX-w.left,y:E.clientY-w.top})},y=()=>{l(!0),p(.6)},_=()=>{l(!1),p(0)},b=()=>{p(.6)},x=()=>{p(0)};return c.jsxs("div",{ref:i,onMouseMove:m,onFocus:y,onBlur:_,onMouseEnter:b,onMouseLeave:x,className:oe("group relative overflow-hidden rounded-xl border bg-card p-6 transition-colors hover:bg-muted/50",e),style:{...r,"--spotlight-color":n,"--spotlight-x":`${u.x}px`,"--spotlight-y":`${u.y}px`,"--spotlight-opacity":h},...s,children:[c.jsx("div",{className:"pointer-events-none absolute inset-0 transition-opacity duration-300",style:{background:"radial-gradient(600px circle at var(--spotlight-x) var(--spotlight-y), var(--spotlight-color), transparent 40%)",opacity:"var(--spotlight-opacity)"}}),c.jsx("div",{className:"relative z-10",children:t}),c.jsx("div",{className:"absolute inset-0 rounded-xl transition-opacity duration-500 group-hover:opacity-100 opacity-0",style:{boxShadow:"inset 0 0 0 1px rgba(255, 255, 255, 0.1)"}})]})});var vB="https://js.stripe.com/v3",jue=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var Mue=function(){for(var e=document.querySelectorAll('script[src^="'.concat(vB,'"]')),n=0;n<e.length;n++){var r=e[n];if(jue.test(r.src))return r}return null},R2=function(e){var n="",r=document.createElement("script");r.src="".concat(vB).concat(n);var s=document.head||document.body;if(!s)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return s.appendChild(r),r},Lue=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"5.6.0",startTime:n})},Jd=null,Qm=null,Ym=null,Fue=function(e){return function(){e(new Error("Failed to load Stripe.js"))}},Vue=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},Uue=function(e){return Jd!==null?Jd:(Jd=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var s=Mue();if(!(s&&e)){if(!s)s=R2(e);else if(s&&Ym!==null&&Qm!==null){var i;s.removeEventListener("load",Ym),s.removeEventListener("error",Qm),(i=s.parentNode)===null||i===void 0||i.removeChild(s),s=R2(e)}}Ym=Vue(n,r),Qm=Fue(r),s.addEventListener("load",Ym),s.addEventListener("error",Qm)}catch(o){r(o);return}}),Jd.catch(function(n){return Jd=null,Promise.reject(n)}))},$ue=function(e,n,r){if(e===null)return null;var s=e.apply(void 0,n);return Lue(s,r),s},Zd,_B=!1,xB=function(){return Zd||(Zd=Uue(null).catch(function(e){return Zd=null,Promise.reject(e)}),Zd)};Promise.resolve().then(function(){return xB()}).catch(function(t){_B||console.warn(t)});var Bue=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];_B=!0;var s=Date.now();return xB().then(function(i){return $ue(i,n,s)})};const zue=Bue(""),Gue=[{id:"price_basic",name:"Basic",price:"$0",priceId:"free_tier",description:"Perfect for getting started",features:["5 quizzes per month","Basic analytics","Community support"],icon:Jae,popular:!1},{id:"price_premium",name:"Premium",price:"$15",priceId:void 0,description:"Great for regular learners",features:["Unlimited quizzes","Detailed analytics","Priority support","Ad-free experience"],icon:tu,popular:!0},{id:"price_pro",name:"Pro",price:"$30",priceId:void 0,description:"For professional educators",features:["Everything in Premium","Custom branding","API access","Team collaboration","Advanced analytics"],icon:Sl,popular:!1}],que=()=>{const[t,e]=g.useState(null),[n,r]=g.useState(null),{toast:s}=gr(),{user:i}=Yt(),o=async a=>{if(!i){s({title:"Login Required",description:"Please login to subscribe to a plan.",variant:"destructive"});return}try{if(r(a.id),a.priceId==="free_tier"){s({title:"Free Plan Selected",description:"You're now on the Basic plan. Enjoy!"}),e(a.name);return}if(!a.priceId)throw new Error("Invalid price ID");const l=await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await i.getIdToken()}`},body:JSON.stringify({priceId:a.priceId,planName:a.name,email:i.email})});if(!l.ok){const p=await l.text();throw new Error(p||"Network response was not ok")}const{sessionId:u}=await l.json(),d=await zue;if(!d)throw new Error("Stripe failed to load");const{error:h}=await d.redirectToCheckout({sessionId:u});if(h)throw h}catch(l){console.error("Error:",l),s({title:"Error",description:l instanceof Error?l.message:"Something went wrong. Please try again later.",variant:"destructive"})}finally{r(null)}};return c.jsxs("div",{className:"container py-8",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Choose Your Plan"}),c.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Select the perfect plan for your learning journey. All plans include access to our core features."})]}),c.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:Gue.map(a=>c.jsxs(Due,{className:a.popular?"border-primary":"",children:[c.jsxs(S0,{children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx(a.icon,{className:"h-8 w-8 text-primary"}),a.popular&&c.jsx("span",{className:"px-3 py-1 text-xs font-semibold bg-primary/10 text-primary rounded-full",children:"Most Popular"})]}),c.jsx(C0,{className:"text-2xl font-bold mt-4",children:a.name}),c.jsxs("div",{className:"mt-2",children:[c.jsx("span",{className:"text-3xl font-bold",children:a.price}),a.price!=="$0"&&c.jsx("span",{className:"text-muted-foreground",children:"/month"})]}),c.jsx("p",{className:"text-muted-foreground mt-2",children:a.description})]}),c.jsx(I0,{className:"mt-4",children:c.jsx("ul",{className:"space-y-3",children:a.features.map((l,u)=>c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx(md,{className:"h-4 w-4 text-primary"}),c.jsx("span",{children:l})]},u))})}),c.jsx($$,{children:c.jsx(te,{className:"w-full",variant:a.popular?"default":"outline",onClick:()=>o(a),disabled:n===a.id||t===a.name,children:n===a.id?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-current border-t-transparent"}),"Processing..."]}):t===a.name?"Current Plan":"Subscribe"})})]},a.id))})]})};class Tr{getClientName(){throw new Error("getClientName not implemented.")}makeRequest(e,n,r,s,i,o,a,l){throw new Error("makeRequest not implemented.")}static makeTimeoutError(){const e=new TypeError(Tr.TIMEOUT_ERROR_CODE);return e.code=Tr.TIMEOUT_ERROR_CODE,e}}Tr.CONNECTION_CLOSED_ERROR_CODES=["ECONNRESET","EPIPE"];Tr.TIMEOUT_ERROR_CODE="ETIMEDOUT";class wB{constructor(e,n){this._statusCode=e,this._headers=n}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}getRawResponse(){throw new Error("getRawResponse not implemented.")}toStream(e){throw new Error("toStream not implemented.")}toJSON(){throw new Error("toJSON not implemented.")}}class Gv extends Tr{constructor(e){if(super(),!e){if(!globalThis.fetch)throw new Error("fetch() function not provided and is not defined in the global scope. You must provide a fetch implementation.");e=globalThis.fetch}globalThis.AbortController?this._fetchFn=Gv.makeFetchWithAbortTimeout(e):this._fetchFn=Gv.makeFetchWithRaceTimeout(e)}static makeFetchWithRaceTimeout(e){return(n,r,s)=>{let i;const o=new Promise((l,u)=>{i=setTimeout(()=>{i=null,u(Tr.makeTimeoutError())},s)}),a=e(n,r);return Promise.race([a,o]).finally(()=>{i&&clearTimeout(i)})}}static makeFetchWithAbortTimeout(e){return async(n,r,s)=>{const i=new AbortController;let o=setTimeout(()=>{o=null,i.abort(Tr.makeTimeoutError())},s);try{return await e(n,Object.assign(Object.assign({},r),{signal:i.signal}))}catch(a){throw a.name==="AbortError"?Tr.makeTimeoutError():a}finally{o&&clearTimeout(o)}}}getClientName(){return"fetch"}async makeRequest(e,n,r,s,i,o,a,l){const u=a==="http",d=new URL(r,`${u?"http":"https"}://${e}`);d.port=n;const h=s=="POST"||s=="PUT"||s=="PATCH",p=o||(h?"":void 0),m=await this._fetchFn(d.toString(),{method:s,headers:i,body:p},l);return new dI(m)}}class dI extends wB{constructor(e){super(e.status,dI._transformHeadersToObject(e.headers)),this._res=e}getRawResponse(){return this._res}toStream(e){return e(),this._res.body}toJSON(){return this._res.json()}static _transformHeadersToObject(e){const n={};for(const r of e){if(!Array.isArray(r)||r.length!=2)throw new Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");n[r[0]]=r[1]}return n}}class bB{computeHMACSignature(e,n){throw new Error("computeHMACSignature not implemented.")}computeHMACSignatureAsync(e,n){throw new Error("computeHMACSignatureAsync not implemented.")}computeSHA256Async(e){throw new Error("computeSHA256 not implemented.")}}class EB extends Error{}class Wue extends bB{constructor(e){super(),this.subtleCrypto=e||crypto.subtle}computeHMACSignature(e,n){throw new EB("SubtleCryptoProvider cannot be used in a synchronous context.")}async computeHMACSignatureAsync(e,n){const r=new TextEncoder,s=await this.subtleCrypto.importKey("raw",r.encode(n),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),i=await this.subtleCrypto.sign("hmac",s,r.encode(e)),o=new Uint8Array(i),a=new Array(o.length);for(let l=0;l<o.length;l++)a[l]=sT[o[l]];return a.join("")}async computeSHA256Async(e){return new Uint8Array(await this.subtleCrypto.digest("SHA-256",e))}}const sT=new Array(256);for(let t=0;t<sT.length;t++)sT[t]=t.toString(16).padStart(2,"0");class Hue{constructor(){this._fetchFn=null,this._agent=null}getUname(){throw new Error("getUname not implemented.")}uuid4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const n=Math.random()*16|0;return(e==="x"?n:n&3|8).toString(16)})}secureCompare(e,n){if(e.length!==n.length)return!1;const r=e.length;let s=0;for(let i=0;i<r;++i)s|=e.charCodeAt(i)^n.charCodeAt(i);return s===0}createEmitter(){throw new Error("createEmitter not implemented.")}tryBufferData(e){throw new Error("tryBufferData not implemented.")}createNodeHttpClient(e){throw new Error("createNodeHttpClient not implemented.")}createFetchHttpClient(e){return new Gv(e)}createDefaultHttpClient(){throw new Error("createDefaultHttpClient not implemented.")}createNodeCryptoProvider(){throw new Error("createNodeCryptoProvider not implemented.")}createSubtleCryptoProvider(e){return new Wue(e)}createDefaultCryptoProvider(){throw new Error("createDefaultCryptoProvider not implemented.")}}class Kue extends Event{constructor(e,n){super(e),this.data=n}}class Que{constructor(){this.eventTarget=new EventTarget,this.listenerMapping=new Map}on(e,n){const r=s=>{n(s.data)};return this.listenerMapping.set(n,r),this.eventTarget.addEventListener(e,r)}removeListener(e,n){const r=this.listenerMapping.get(n);return this.listenerMapping.delete(n),this.eventTarget.removeEventListener(e,r)}once(e,n){const r=s=>{n(s.data)};return this.listenerMapping.set(n,r),this.eventTarget.addEventListener(e,r,{once:!0})}emit(e,n){return this.eventTarget.dispatchEvent(new Kue(e,n))}}class Yue extends Hue{getUname(){return Promise.resolve(null)}createEmitter(){return new Que}tryBufferData(e){if(e.file.data instanceof ReadableStream)throw new Error("Uploading a file as a stream is not supported in non-Node environments. Please open or upvote an issue at github.com/stripe/stripe-node if you use this, detailing your use-case.");return Promise.resolve(e)}createNodeHttpClient(){throw new Error("Stripe: `createNodeHttpClient()` is not available in non-Node environments. Please use `createFetchHttpClient()` instead.")}createDefaultHttpClient(){return super.createFetchHttpClient()}createNodeCryptoProvider(){throw new Error("Stripe: `createNodeCryptoProvider()` is not available in non-Node environments. Please use `createSubtleCryptoProvider()` instead.")}createDefaultCryptoProvider(){return this.createSubtleCryptoProvider()}}const N0=t=>{switch(t.type){case"card_error":return new SB(t);case"invalid_request_error":return new hI(t);case"api_error":return new fI(t);case"authentication_error":return new pI(t);case"rate_limit_error":return new mI(t);case"idempotency_error":return new PB(t);case"invalid_grant":return new RB(t);default:return new AB(t)}},TB=t=>{switch(t.type){case"temporary_session_expired":return new NB(t)}switch(t.code){case"invalid_fields":return new hI(t)}return N0(t)};class En extends Error{constructor(e={},n=null){super(e.message),this.type=n||this.constructor.name,this.raw=e,this.rawType=e.type,this.code=e.code,this.doc_url=e.doc_url,this.param=e.param,this.detail=e.detail,this.headers=e.headers,this.requestId=e.requestId,this.statusCode=e.statusCode,this.message=e.message,this.userMessage=e.user_message,this.charge=e.charge,this.decline_code=e.decline_code,this.payment_intent=e.payment_intent,this.payment_method=e.payment_method,this.payment_method_type=e.payment_method_type,this.setup_intent=e.setup_intent,this.source=e.source}}En.generate=N0;class SB extends En{constructor(e={}){super(e,"StripeCardError")}}class hI extends En{constructor(e={}){super(e,"StripeInvalidRequestError")}}class fI extends En{constructor(e={}){super(e,"StripeAPIError")}}class pI extends En{constructor(e={}){super(e,"StripeAuthenticationError")}}class CB extends En{constructor(e={}){super(e,"StripePermissionError")}}class mI extends En{constructor(e={}){super(e,"StripeRateLimitError")}}class IB extends En{constructor(e={}){super(e,"StripeConnectionError")}}class Xi extends En{constructor(e,n,r={}){super(r,"StripeSignatureVerificationError"),this.header=e,this.payload=n}}class PB extends En{constructor(e={}){super(e,"StripeIdempotencyError")}}class RB extends En{constructor(e={}){super(e,"StripeInvalidGrantError")}}class AB extends En{constructor(e={}){super(e,"StripeUnknownError")}}class NB extends En{constructor(e={}){super(e,"TemporarySessionExpiredError")}}const A2=Object.freeze(Object.defineProperty({__proto__:null,StripeAPIError:fI,StripeAuthenticationError:pI,StripeCardError:SB,StripeConnectionError:IB,StripeError:En,StripeIdempotencyError:PB,StripeInvalidGrantError:RB,StripeInvalidRequestError:hI,StripePermissionError:CB,StripeRateLimitError:mI,StripeSignatureVerificationError:Xi,StripeUnknownError:AB,TemporarySessionExpiredError:NB,generateV1Error:N0,generateV2Error:TB},Symbol.toStringTag,{value:"Module"}));var gd=TypeError;const Xue={},Jue=Object.freeze(Object.defineProperty({__proto__:null,default:Xue},Symbol.toStringTag,{value:"Module"})),Zue=Yz(Jue);var gI=typeof Map=="function"&&Map.prototype,fw=Object.getOwnPropertyDescriptor&&gI?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,qv=gI&&fw&&typeof fw.get=="function"?fw.get:null,N2=gI&&Map.prototype.forEach,yI=typeof Set=="function"&&Set.prototype,pw=Object.getOwnPropertyDescriptor&&yI?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Wv=yI&&pw&&typeof pw.get=="function"?pw.get:null,k2=yI&&Set.prototype.forEach,ede=typeof WeakMap=="function"&&WeakMap.prototype,sf=ede?WeakMap.prototype.has:null,tde=typeof WeakSet=="function"&&WeakSet.prototype,of=tde?WeakSet.prototype.has:null,nde=typeof WeakRef=="function"&&WeakRef.prototype,O2=nde?WeakRef.prototype.deref:null,rde=Boolean.prototype.valueOf,sde=Object.prototype.toString,ide=Function.prototype.toString,ode=String.prototype.match,vI=String.prototype.slice,yo=String.prototype.replace,ade=String.prototype.toUpperCase,D2=String.prototype.toLowerCase,kB=RegExp.prototype.test,j2=Array.prototype.concat,xs=Array.prototype.join,lde=Array.prototype.slice,M2=Math.floor,iT=typeof BigInt=="function"?BigInt.prototype.valueOf:null,mw=Object.getOwnPropertySymbols,oT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,qu=typeof Symbol=="function"&&typeof Symbol.iterator=="object",af=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===qu||!0)?Symbol.toStringTag:null,OB=Object.prototype.propertyIsEnumerable,L2=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function F2(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||kB.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var r=t<0?-M2(-t):M2(t);if(r!==t){var s=String(r),i=vI.call(e,s.length+1);return yo.call(s,n,"$&_")+"."+yo.call(yo.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return yo.call(e,n,"$&_")}var aT=Zue,V2=aT.custom,U2=MB(V2)?V2:null,DB={__proto__:null,double:'"',single:"'"},cde={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},k0=function t(e,n,r,s){var i=n||{};if(Ks(i,"quoteStyle")&&!Ks(DB,i.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Ks(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Ks(i,"customInspect")?i.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Ks(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Ks(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=i.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return FB(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?F2(e,l):l}if(typeof e=="bigint"){var u=String(e)+"n";return a?F2(e,u):u}var d=typeof i.depth>"u"?5:i.depth;if(typeof r>"u"&&(r=0),r>=d&&d>0&&typeof e=="object")return lT(e)?"[Array]":"[Object]";var h=Ide(i,r);if(typeof s>"u")s=[];else if(LB(s,e)>=0)return"[Circular]";function p(N,Z,de){if(Z&&(s=lde.call(s),s.push(Z)),de){var Y={depth:i.depth};return Ks(i,"quoteStyle")&&(Y.quoteStyle=i.quoteStyle),t(N,Y,r+1,s)}return t(N,i,r+1,s)}if(typeof e=="function"&&!$2(e)){var m=vde(e),y=Xm(e,p);return"[Function"+(m?": "+m:" (anonymous)")+"]"+(y.length>0?" { "+xs.call(y,", ")+" }":"")}if(MB(e)){var _=qu?yo.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):oT.call(e);return typeof e=="object"&&!qu?eh(_):_}if(Tde(e)){for(var b="<"+D2.call(String(e.nodeName)),x=e.attributes||[],E=0;E<x.length;E++)b+=" "+x[E].name+"="+jB(ude(x[E].value),"double",i);return b+=">",e.childNodes&&e.childNodes.length&&(b+="..."),b+="</"+D2.call(String(e.nodeName))+">",b}if(lT(e)){if(e.length===0)return"[]";var w=Xm(e,p);return h&&!Cde(w)?"["+cT(w,h)+"]":"[ "+xs.call(w,", ")+" ]"}if(hde(e)){var I=Xm(e,p);return!("cause"in Error.prototype)&&"cause"in e&&!OB.call(e,"cause")?"{ ["+String(e)+"] "+xs.call(j2.call("[cause]: "+p(e.cause),I),", ")+" }":I.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+xs.call(I,", ")+" }"}if(typeof e=="object"&&o){if(U2&&typeof e[U2]=="function"&&aT)return aT(e,{depth:d-r});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(_de(e)){var k=[];return N2&&N2.call(e,function(N,Z){k.push(p(Z,e,!0)+" => "+p(N,e))}),B2("Map",qv.call(e),k,h)}if(bde(e)){var M=[];return k2&&k2.call(e,function(N){M.push(p(N,e))}),B2("Set",Wv.call(e),M,h)}if(xde(e))return gw("WeakMap");if(Ede(e))return gw("WeakSet");if(wde(e))return gw("WeakRef");if(pde(e))return eh(p(Number(e)));if(gde(e))return eh(p(iT.call(e)));if(mde(e))return eh(rde.call(e));if(fde(e))return eh(p(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof yP<"u"&&e===yP)return"{ [object globalThis] }";if(!dde(e)&&!$2(e)){var C=Xm(e,p),S=L2?L2(e)===Object.prototype:e instanceof Object||e.constructor===Object,P=e instanceof Object?"":"null prototype",R=!S&&af&&Object(e)===e&&af in e?vI.call(oa(e),8,-1):P?"Object":"",O=S||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",D=O+(R||P?"["+xs.call(j2.call([],R||[],P||[]),": ")+"] ":"");return C.length===0?D+"{}":h?D+"{"+cT(C,h)+"}":D+"{ "+xs.call(C,", ")+" }"}return String(e)};function jB(t,e,n){var r=n.quoteStyle||e,s=DB[r];return s+t+s}function ude(t){return yo.call(String(t),/"/g,"&quot;")}function Vl(t){return!af||!(typeof t=="object"&&(af in t||typeof t[af]<"u"))}function lT(t){return oa(t)==="[object Array]"&&Vl(t)}function dde(t){return oa(t)==="[object Date]"&&Vl(t)}function $2(t){return oa(t)==="[object RegExp]"&&Vl(t)}function hde(t){return oa(t)==="[object Error]"&&Vl(t)}function fde(t){return oa(t)==="[object String]"&&Vl(t)}function pde(t){return oa(t)==="[object Number]"&&Vl(t)}function mde(t){return oa(t)==="[object Boolean]"&&Vl(t)}function MB(t){if(qu)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!oT)return!1;try{return oT.call(t),!0}catch{}return!1}function gde(t){if(!t||typeof t!="object"||!iT)return!1;try{return iT.call(t),!0}catch{}return!1}var yde=Object.prototype.hasOwnProperty||function(t){return t in this};function Ks(t,e){return yde.call(t,e)}function oa(t){return sde.call(t)}function vde(t){if(t.name)return t.name;var e=ode.call(ide.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function LB(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function _de(t){if(!qv||!t||typeof t!="object")return!1;try{qv.call(t);try{Wv.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function xde(t){if(!sf||!t||typeof t!="object")return!1;try{sf.call(t,sf);try{of.call(t,of)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function wde(t){if(!O2||!t||typeof t!="object")return!1;try{return O2.call(t),!0}catch{}return!1}function bde(t){if(!Wv||!t||typeof t!="object")return!1;try{Wv.call(t);try{qv.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function Ede(t){if(!of||!t||typeof t!="object")return!1;try{of.call(t,of);try{sf.call(t,sf)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function Tde(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function FB(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return FB(vI.call(t,0,e.maxStringLength),e)+r}var s=cde[e.quoteStyle||"single"];s.lastIndex=0;var i=yo.call(yo.call(t,s,"\\$1"),/[\x00-\x1f]/g,Sde);return jB(i,"single",e)}function Sde(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+ade.call(e.toString(16))}function eh(t){return"Object("+t+")"}function gw(t){return t+" { ? }"}function B2(t,e,n,r){var s=r?cT(n,r):xs.call(n,", ");return t+" ("+e+") {"+s+"}"}function Cde(t){for(var e=0;e<t.length;e++)if(LB(t[e],`
`)>=0)return!1;return!0}function Ide(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=xs.call(Array(t.indent+1)," ");else return null;return{base:n,prev:xs.call(Array(e+1),n)}}function cT(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+xs.call(t,","+n)+`
`+e.prev}function Xm(t,e){var n=lT(t),r=[];if(n){r.length=t.length;for(var s=0;s<t.length;s++)r[s]=Ks(t,s)?e(t[s],t):""}var i=typeof mw=="function"?mw(t):[],o;if(qu){o={};for(var a=0;a<i.length;a++)o["$"+i[a]]=i[a]}for(var l in t)Ks(t,l)&&(n&&String(Number(l))===l&&l<t.length||qu&&o["$"+l]instanceof Symbol||(kB.call(/[^\w$]/,l)?r.push(e(l,t)+": "+e(t[l],t)):r.push(l+": "+e(t[l],t))));if(typeof mw=="function")for(var u=0;u<i.length;u++)OB.call(t,i[u])&&r.push("["+e(i[u])+"]: "+e(t[i[u]],t));return r}var Pde=k0,Rde=gd,O0=function(t,e,n){for(var r=t,s;(s=r.next)!=null;r=s)if(s.key===e)return r.next=s.next,n||(s.next=t.next,t.next=s),s},Ade=function(t,e){if(t){var n=O0(t,e);return n&&n.value}},Nde=function(t,e,n){var r=O0(t,e);r?r.value=n:t.next={key:e,next:t.next,value:n}},kde=function(t,e){return t?!!O0(t,e):!1},Ode=function(t,e){if(t)return O0(t,e,!0)},Dde=function(){var e,n={assert:function(r){if(!n.has(r))throw new Rde("Side channel does not contain "+Pde(r))},delete:function(r){var s=e&&e.next,i=Ode(e,r);return i&&s&&s===i&&(e=void 0),!!i},get:function(r){return Ade(e,r)},has:function(r){return kde(e,r)},set:function(r,s){e||(e={next:void 0}),Nde(e,r,s)}};return n},VB=Object,jde=Error,Mde=EvalError,Lde=RangeError,Fde=ReferenceError,Vde=SyntaxError,Ude=URIError,$de=Math.abs,Bde=Math.floor,zde=Math.max,Gde=Math.min,qde=Math.pow,Wde=Math.round,Hde=Number.isNaN||function(e){return e!==e},Kde=Hde,Qde=function(e){return Kde(e)||e===0?e:e<0?-1:1},Yde=Object.getOwnPropertyDescriptor,sy=Yde;if(sy)try{sy([],"length")}catch{sy=null}var UB=sy,iy=Object.defineProperty||!1;if(iy)try{iy({},"a",{value:1})}catch{iy=!1}var Xde=iy,yw,z2;function Jde(){return z2||(z2=1,yw=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var s=42;e[n]=s;for(var i in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,n);if(a.value!==s||a.enumerable!==!0)return!1}return!0}),yw}var vw,G2;function Zde(){if(G2)return vw;G2=1;var t=typeof Symbol<"u"&&Symbol,e=Jde();return vw=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},vw}var _w,q2;function $B(){return q2||(q2=1,_w=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),_w}var xw,W2;function BB(){if(W2)return xw;W2=1;var t=VB;return xw=t.getPrototypeOf||null,xw}var ehe="Function.prototype.bind called on incompatible ",the=Object.prototype.toString,nhe=Math.max,rhe="[object Function]",H2=function(e,n){for(var r=[],s=0;s<e.length;s+=1)r[s]=e[s];for(var i=0;i<n.length;i+=1)r[i+e.length]=n[i];return r},she=function(e,n){for(var r=[],s=n,i=0;s<e.length;s+=1,i+=1)r[i]=e[s];return r},ihe=function(t,e){for(var n="",r=0;r<t.length;r+=1)n+=t[r],r+1<t.length&&(n+=e);return n},ohe=function(e){var n=this;if(typeof n!="function"||the.apply(n)!==rhe)throw new TypeError(ehe+n);for(var r=she(arguments,1),s,i=function(){if(this instanceof s){var d=n.apply(this,H2(r,arguments));return Object(d)===d?d:this}return n.apply(e,H2(r,arguments))},o=nhe(0,n.length-r.length),a=[],l=0;l<o;l++)a[l]="$"+l;if(s=Function("binder","return function ("+ihe(a,",")+"){ return binder.apply(this,arguments); }")(i),n.prototype){var u=function(){};u.prototype=n.prototype,s.prototype=new u,u.prototype=null}return s},ahe=ohe,D0=Function.prototype.bind||ahe,_I=Function.prototype.call,ww,K2;function zB(){return K2||(K2=1,ww=Function.prototype.apply),ww}var lhe=typeof Reflect<"u"&&Reflect&&Reflect.apply,che=D0,uhe=zB(),dhe=_I,hhe=lhe,fhe=hhe||che.call(dhe,uhe),phe=D0,mhe=gd,ghe=_I,yhe=fhe,GB=function(e){if(e.length<1||typeof e[0]!="function")throw new mhe("a function is required");return yhe(phe,ghe,e)},bw,Q2;function vhe(){if(Q2)return bw;Q2=1;var t=GB,e=UB,n;try{n=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var r=!!n&&e&&e(Object.prototype,"__proto__"),s=Object,i=s.getPrototypeOf;return bw=r&&typeof r.get=="function"?t([r.get]):typeof i=="function"?function(a){return i(a==null?a:s(a))}:!1,bw}var Ew,Y2;function _he(){if(Y2)return Ew;Y2=1;var t=$B(),e=BB(),n=vhe();return Ew=t?function(s){return t(s)}:e?function(s){if(!s||typeof s!="object"&&typeof s!="function")throw new TypeError("getProto: not an object");return e(s)}:n?function(s){return n(s)}:null,Ew}var Tw,X2;function xhe(){if(X2)return Tw;X2=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,n=D0;return Tw=n.call(t,e),Tw}var Re,whe=VB,bhe=jde,Ehe=Mde,The=Lde,She=Fde,Wu=Vde,ru=gd,Che=Ude,Ihe=$de,Phe=Bde,Rhe=zde,Ahe=Gde,Nhe=qde,khe=Wde,Ohe=Qde,qB=Function,Sw=function(t){try{return qB('"use strict"; return ('+t+").constructor;")()}catch{}},ip=UB,Dhe=Xde,Cw=function(){throw new ru},jhe=ip?function(){try{return arguments.callee,Cw}catch{try{return ip(arguments,"callee").get}catch{return Cw}}}():Cw,ac=Zde()(),$t=_he(),Mhe=BB(),Lhe=$B(),WB=zB(),Gp=_I,Ec={},Fhe=typeof Uint8Array>"u"||!$t?Re:$t(Uint8Array),Xa={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Re:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Re:ArrayBuffer,"%ArrayIteratorPrototype%":ac&&$t?$t([][Symbol.iterator]()):Re,"%AsyncFromSyncIteratorPrototype%":Re,"%AsyncFunction%":Ec,"%AsyncGenerator%":Ec,"%AsyncGeneratorFunction%":Ec,"%AsyncIteratorPrototype%":Ec,"%Atomics%":typeof Atomics>"u"?Re:Atomics,"%BigInt%":typeof BigInt>"u"?Re:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Re:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Re:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Re:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":bhe,"%eval%":eval,"%EvalError%":Ehe,"%Float32Array%":typeof Float32Array>"u"?Re:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Re:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Re:FinalizationRegistry,"%Function%":qB,"%GeneratorFunction%":Ec,"%Int8Array%":typeof Int8Array>"u"?Re:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Re:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Re:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ac&&$t?$t($t([][Symbol.iterator]())):Re,"%JSON%":typeof JSON=="object"?JSON:Re,"%Map%":typeof Map>"u"?Re:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ac||!$t?Re:$t(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":whe,"%Object.getOwnPropertyDescriptor%":ip,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Re:Promise,"%Proxy%":typeof Proxy>"u"?Re:Proxy,"%RangeError%":The,"%ReferenceError%":She,"%Reflect%":typeof Reflect>"u"?Re:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Re:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ac||!$t?Re:$t(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Re:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ac&&$t?$t(""[Symbol.iterator]()):Re,"%Symbol%":ac?Symbol:Re,"%SyntaxError%":Wu,"%ThrowTypeError%":jhe,"%TypedArray%":Fhe,"%TypeError%":ru,"%Uint8Array%":typeof Uint8Array>"u"?Re:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Re:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Re:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Re:Uint32Array,"%URIError%":Che,"%WeakMap%":typeof WeakMap>"u"?Re:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Re:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Re:WeakSet,"%Function.prototype.call%":Gp,"%Function.prototype.apply%":WB,"%Object.defineProperty%":Dhe,"%Object.getPrototypeOf%":Mhe,"%Math.abs%":Ihe,"%Math.floor%":Phe,"%Math.max%":Rhe,"%Math.min%":Ahe,"%Math.pow%":Nhe,"%Math.round%":khe,"%Math.sign%":Ohe,"%Reflect.getPrototypeOf%":Lhe};if($t)try{null.error}catch(t){var Vhe=$t($t(t));Xa["%Error.prototype%"]=Vhe}var Uhe=function t(e){var n;if(e==="%AsyncFunction%")n=Sw("async function () {}");else if(e==="%GeneratorFunction%")n=Sw("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=Sw("async function* () {}");else if(e==="%AsyncGenerator%"){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var s=t("%AsyncGenerator%");s&&$t&&(n=$t(s.prototype))}return Xa[e]=n,n},J2={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},qp=D0,Hv=xhe(),$he=qp.call(Gp,Array.prototype.concat),Bhe=qp.call(WB,Array.prototype.splice),Z2=qp.call(Gp,String.prototype.replace),Kv=qp.call(Gp,String.prototype.slice),zhe=qp.call(Gp,RegExp.prototype.exec),Ghe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,qhe=/\\(\\)?/g,Whe=function(e){var n=Kv(e,0,1),r=Kv(e,-1);if(n==="%"&&r!=="%")throw new Wu("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new Wu("invalid intrinsic syntax, expected opening `%`");var s=[];return Z2(e,Ghe,function(i,o,a,l){s[s.length]=a?Z2(l,qhe,"$1"):o||i}),s},Hhe=function(e,n){var r=e,s;if(Hv(J2,r)&&(s=J2[r],r="%"+s[0]+"%"),Hv(Xa,r)){var i=Xa[r];if(i===Ec&&(i=Uhe(r)),typeof i>"u"&&!n)throw new ru("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:s,name:r,value:i}}throw new Wu("intrinsic "+e+" does not exist!")},xI=function(e,n){if(typeof e!="string"||e.length===0)throw new ru("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new ru('"allowMissing" argument must be a boolean');if(zhe(/^%?[^%]*%?$/,e)===null)throw new Wu("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=Whe(e),s=r.length>0?r[0]:"",i=Hhe("%"+s+"%",n),o=i.name,a=i.value,l=!1,u=i.alias;u&&(s=u[0],Bhe(r,$he([0,1],u)));for(var d=1,h=!0;d<r.length;d+=1){var p=r[d],m=Kv(p,0,1),y=Kv(p,-1);if((m==='"'||m==="'"||m==="`"||y==='"'||y==="'"||y==="`")&&m!==y)throw new Wu("property names with quotes must have matching quotes");if((p==="constructor"||!h)&&(l=!0),s+="."+p,o="%"+s+"%",Hv(Xa,o))a=Xa[o];else if(a!=null){if(!(p in a)){if(!n)throw new ru("base intrinsic for "+e+" exists, but the property is not available.");return}if(ip&&d+1>=r.length){var _=ip(a,p);h=!!_,h&&"get"in _&&!("originalValue"in _.get)?a=_.get:a=a[p]}else h=Hv(a,p),a=a[p];h&&!l&&(Xa[o]=a)}}return a},HB=xI,KB=GB,Khe=KB([HB("%String.prototype.indexOf%")]),QB=function(e,n){var r=HB(e,!!n);return typeof r=="function"&&Khe(e,".prototype.")>-1?KB([r]):r},Qhe=xI,Wp=QB,Yhe=k0,Xhe=gd,eO=Qhe("%Map%",!0),Jhe=Wp("Map.prototype.get",!0),Zhe=Wp("Map.prototype.set",!0),efe=Wp("Map.prototype.has",!0),tfe=Wp("Map.prototype.delete",!0),nfe=Wp("Map.prototype.size",!0),YB=!!eO&&function(){var e,n={assert:function(r){if(!n.has(r))throw new Xhe("Side channel does not contain "+Yhe(r))},delete:function(r){if(e){var s=tfe(e,r);return nfe(e)===0&&(e=void 0),s}return!1},get:function(r){if(e)return Jhe(e,r)},has:function(r){return e?efe(e,r):!1},set:function(r,s){e||(e=new eO),Zhe(e,r,s)}};return n},rfe=xI,j0=QB,sfe=k0,Jm=YB,ife=gd,lc=rfe("%WeakMap%",!0),ofe=j0("WeakMap.prototype.get",!0),afe=j0("WeakMap.prototype.set",!0),lfe=j0("WeakMap.prototype.has",!0),cfe=j0("WeakMap.prototype.delete",!0),ufe=lc?function(){var e,n,r={assert:function(s){if(!r.has(s))throw new ife("Side channel does not contain "+sfe(s))},delete:function(s){if(lc&&s&&(typeof s=="object"||typeof s=="function")){if(e)return cfe(e,s)}else if(Jm&&n)return n.delete(s);return!1},get:function(s){return lc&&s&&(typeof s=="object"||typeof s=="function")&&e?ofe(e,s):n&&n.get(s)},has:function(s){return lc&&s&&(typeof s=="object"||typeof s=="function")&&e?lfe(e,s):!!n&&n.has(s)},set:function(s,i){lc&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new lc),afe(e,s,i)):Jm&&(n||(n=Jm()),n.set(s,i))}};return r}:Jm,dfe=gd,hfe=k0,ffe=Dde,pfe=YB,mfe=ufe,gfe=mfe||pfe||ffe,yfe=function(){var e,n={assert:function(r){if(!n.has(r))throw new dfe("Side channel does not contain "+hfe(r))},delete:function(r){return!!e&&e.delete(r)},get:function(r){return e&&e.get(r)},has:function(r){return!!e&&e.has(r)},set:function(r,s){e||(e=gfe()),e.set(r,s)}};return n},vfe=String.prototype.replace,_fe=/%20/g,Iw={RFC1738:"RFC1738",RFC3986:"RFC3986"},wI={default:Iw.RFC3986,formatters:{RFC1738:function(t){return vfe.call(t,_fe,"+")},RFC3986:function(t){return String(t)}},RFC1738:Iw.RFC1738,RFC3986:Iw.RFC3986},xfe=wI,Pw=Object.prototype.hasOwnProperty,Oa=Array.isArray,cs=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),wfe=function(e){for(;e.length>1;){var n=e.pop(),r=n.obj[n.prop];if(Oa(r)){for(var s=[],i=0;i<r.length;++i)typeof r[i]<"u"&&s.push(r[i]);n.obj[n.prop]=s}}},XB=function(e,n){for(var r=n&&n.plainObjects?Object.create(null):{},s=0;s<e.length;++s)typeof e[s]<"u"&&(r[s]=e[s]);return r},bfe=function t(e,n,r){if(!n)return e;if(typeof n!="object"){if(Oa(e))e.push(n);else if(e&&typeof e=="object")(r&&(r.plainObjects||r.allowPrototypes)||!Pw.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var s=e;return Oa(e)&&!Oa(n)&&(s=XB(e,r)),Oa(e)&&Oa(n)?(n.forEach(function(i,o){if(Pw.call(e,o)){var a=e[o];a&&typeof a=="object"&&i&&typeof i=="object"?e[o]=t(a,i,r):e.push(i)}else e[o]=i}),e):Object.keys(n).reduce(function(i,o){var a=n[o];return Pw.call(i,o)?i[o]=t(i[o],a,r):i[o]=a,i},s)},Efe=function(e,n){return Object.keys(n).reduce(function(r,s){return r[s]=n[s],r},e)},Tfe=function(t,e,n){var r=t.replace(/\+/g," ");if(n==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},Rw=1024,Sfe=function(e,n,r,s,i){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),r==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(m){return"%26%23"+parseInt(m.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;l+=Rw){for(var u=o.length>=Rw?o.slice(l,l+Rw):o,d=[],h=0;h<u.length;++h){var p=u.charCodeAt(h);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||i===xfe.RFC1738&&(p===40||p===41)){d[d.length]=u.charAt(h);continue}if(p<128){d[d.length]=cs[p];continue}if(p<2048){d[d.length]=cs[192|p>>6]+cs[128|p&63];continue}if(p<55296||p>=57344){d[d.length]=cs[224|p>>12]+cs[128|p>>6&63]+cs[128|p&63];continue}h+=1,p=65536+((p&1023)<<10|u.charCodeAt(h)&1023),d[d.length]=cs[240|p>>18]+cs[128|p>>12&63]+cs[128|p>>6&63]+cs[128|p&63]}a+=d.join("")}return a},Cfe=function(e){for(var n=[{obj:{o:e},prop:"o"}],r=[],s=0;s<n.length;++s)for(var i=n[s],o=i.obj[i.prop],a=Object.keys(o),l=0;l<a.length;++l){var u=a[l],d=o[u];typeof d=="object"&&d!==null&&r.indexOf(d)===-1&&(n.push({obj:o,prop:u}),r.push(d))}return wfe(n),e},Ife=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Pfe=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Rfe=function(e,n){return[].concat(e,n)},Afe=function(e,n){if(Oa(e)){for(var r=[],s=0;s<e.length;s+=1)r.push(n(e[s]));return r}return n(e)},JB={arrayToObject:XB,assign:Efe,combine:Rfe,compact:Cfe,decode:Tfe,encode:Sfe,isBuffer:Pfe,isRegExp:Ife,maybeMap:Afe,merge:bfe},ZB=yfe,oy=JB,lf=wI,Nfe=Object.prototype.hasOwnProperty,e6={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},ms=Array.isArray,kfe=Array.prototype.push,t6=function(t,e){kfe.apply(t,ms(e)?e:[e])},Ofe=Date.prototype.toISOString,tO=lf.default,jt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:oy.encode,encodeValuesOnly:!1,format:tO,formatter:lf.formatters[tO],indices:!1,serializeDate:function(e){return Ofe.call(e)},skipNulls:!1,strictNullHandling:!1},Dfe=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Aw={},jfe=function t(e,n,r,s,i,o,a,l,u,d,h,p,m,y,_,b,x,E){for(var w=e,I=E,k=0,M=!1;(I=I.get(Aw))!==void 0&&!M;){var C=I.get(e);if(k+=1,typeof C<"u"){if(C===k)throw new RangeError("Cyclic object value");M=!0}typeof I.get(Aw)>"u"&&(k=0)}if(typeof d=="function"?w=d(n,w):w instanceof Date?w=m(w):r==="comma"&&ms(w)&&(w=oy.maybeMap(w,function(W){return W instanceof Date?m(W):W})),w===null){if(o)return u&&!b?u(n,jt.encoder,x,"key",y):n;w=""}if(Dfe(w)||oy.isBuffer(w)){if(u){var S=b?n:u(n,jt.encoder,x,"key",y);return[_(S)+"="+_(u(w,jt.encoder,x,"value",y))]}return[_(n)+"="+_(String(w))]}var P=[];if(typeof w>"u")return P;var R;if(r==="comma"&&ms(w))b&&u&&(w=oy.maybeMap(w,u)),R=[{value:w.length>0?w.join(",")||null:void 0}];else if(ms(d))R=d;else{var O=Object.keys(w);R=h?O.sort(h):O}var D=l?n.replace(/\./g,"%2E"):n,N=s&&ms(w)&&w.length===1?D+"[]":D;if(i&&ms(w)&&w.length===0)return N+"[]";for(var Z=0;Z<R.length;++Z){var de=R[Z],Y=typeof de=="object"&&typeof de.value<"u"?de.value:w[de];if(!(a&&Y===null)){var ee=p&&l?de.replace(/\./g,"%2E"):de,$=ms(w)?typeof r=="function"?r(N,ee):N:N+(p?"."+ee:"["+ee+"]");E.set(e,k);var V=ZB();V.set(Aw,E),t6(P,t(Y,$,r,s,i,o,a,l,r==="comma"&&b&&ms(w)?null:u,d,h,p,m,y,_,b,x,V))}}return P},Mfe=function(e){if(!e)return jt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||jt.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=lf.default;if(typeof e.format<"u"){if(!Nfe.call(lf.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var s=lf.formatters[r],i=jt.filter;(typeof e.filter=="function"||ms(e.filter))&&(i=e.filter);var o;if(e.arrayFormat in e6?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=jt.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:jt.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:jt.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:jt.allowEmptyArrays,arrayFormat:o,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:jt.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?jt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:jt.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:jt.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:jt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:jt.encodeValuesOnly,filter:i,format:r,formatter:s,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:jt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:jt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:jt.strictNullHandling}},Lfe=function(t,e){var n=t,r=Mfe(e),s,i;typeof r.filter=="function"?(i=r.filter,n=i("",n)):ms(r.filter)&&(i=r.filter,s=i);var o=[];if(typeof n!="object"||n===null)return"";var a=e6[r.arrayFormat],l=a==="comma"&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);for(var u=ZB(),d=0;d<s.length;++d){var h=s[d];r.skipNulls&&n[h]===null||t6(o,jfe(n[h],h,a,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}var p=o.join(r.delimiter),m=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),p.length>0?m+p:""},Hu=JB,uT=Object.prototype.hasOwnProperty,Ffe=Array.isArray,bt={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:Hu.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},Vfe=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},n6=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},Ufe="utf8=%26%2310003%3B",$fe="utf8=%E2%9C%93",Bfe=function(e,n){var r={__proto__:null},s=n.ignoreQueryPrefix?e.replace(/^\?/,""):e;s=s.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var i=n.parameterLimit===1/0?void 0:n.parameterLimit,o=s.split(n.delimiter,i),a=-1,l,u=n.charset;if(n.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===$fe?u="utf-8":o[l]===Ufe&&(u="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var d=o[l],h=d.indexOf("]="),p=h===-1?d.indexOf("="):h+1,m,y;p===-1?(m=n.decoder(d,bt.decoder,u,"key"),y=n.strictNullHandling?null:""):(m=n.decoder(d.slice(0,p),bt.decoder,u,"key"),y=Hu.maybeMap(n6(d.slice(p+1),n),function(b){return n.decoder(b,bt.decoder,u,"value")})),y&&n.interpretNumericEntities&&u==="iso-8859-1"&&(y=Vfe(y)),d.indexOf("[]=")>-1&&(y=Ffe(y)?[y]:y);var _=uT.call(r,m);_&&n.duplicates==="combine"?r[m]=Hu.combine(r[m],y):(!_||n.duplicates==="last")&&(r[m]=y)}return r},zfe=function(t,e,n,r){for(var s=r?e:n6(e,n),i=t.length-1;i>=0;--i){var o,a=t[i];if(a==="[]"&&n.parseArrays)o=n.allowEmptyArrays&&(s===""||n.strictNullHandling&&s===null)?[]:[].concat(s);else{o=n.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,u=n.decodeDotInKeys?l.replace(/%2E/g,"."):l,d=parseInt(u,10);!n.parseArrays&&u===""?o={0:s}:!isNaN(d)&&a!==u&&String(d)===u&&d>=0&&n.parseArrays&&d<=n.arrayLimit?(o=[],o[d]=s):u!=="__proto__"&&(o[u]=s)}s=o}return s},Gfe=function(e,n,r,s){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=r.depth>0&&o.exec(i),u=l?i.slice(0,l.index):i,d=[];if(u){if(!r.plainObjects&&uT.call(Object.prototype,u)&&!r.allowPrototypes)return;d.push(u)}for(var h=0;r.depth>0&&(l=a.exec(i))!==null&&h<r.depth;){if(h+=1,!r.plainObjects&&uT.call(Object.prototype,l[1].slice(1,-1))&&!r.allowPrototypes)return;d.push(l[1])}if(l){if(r.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+r.depth+" and strictDepth is true");d.push("["+i.slice(l.index)+"]")}return zfe(d,n,r,s)}},qfe=function(e){if(!e)return bt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof e.charset>"u"?bt.charset:e.charset,r=typeof e.duplicates>"u"?bt.duplicates:e.duplicates;if(r!=="combine"&&r!=="first"&&r!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var s=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:bt.allowDots:!!e.allowDots;return{allowDots:s,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:bt.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:bt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:bt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:bt.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:bt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:bt.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:bt.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:bt.decoder,delimiter:typeof e.delimiter=="string"||Hu.isRegExp(e.delimiter)?e.delimiter:bt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:bt.depth,duplicates:r,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:bt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:bt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:bt.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:bt.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:bt.strictNullHandling}},Wfe=function(t,e){var n=qfe(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?Object.create(null):{};for(var r=typeof t=="string"?Bfe(t,n):t,s=n.plainObjects?Object.create(null):{},i=Object.keys(r),o=0;o<i.length;++o){var a=i[o],l=Gfe(a,r[a],n,typeof t=="string");s=Hu.merge(s,l,n)}return n.allowSparse===!0?s:Hu.compact(s)},Hfe=Lfe,Kfe=Wfe,Qfe=wI,Yfe={formats:Qfe,parse:Kfe,stringify:Hfe};const bI=["apiKey","idempotencyKey","stripeAccount","apiVersion","maxNetworkRetries","timeout","host","authenticator","stripeContext","additionalHeaders"];function r6(t){return t&&typeof t=="object"&&bI.some(e=>Object.prototype.hasOwnProperty.call(t,e))}function M0(t,e){return Yfe.stringify(t,{serializeDate:n=>Math.floor(n.getTime()/1e3).toString(),arrayFormat:e=="v2"?"repeat":"indices"}).replace(/%5B/g,"[").replace(/%5D/g,"]")}const dT=(()=>{const t={"\n":"\\n",'"':'\\"',"\u2028":"\\u2028","\u2029":"\\u2029"};return e=>{const n=e.replace(/["\n\r\u2028\u2029]/g,r=>t[r]);return r=>n.replace(/\{([\s\S]+?)\}/g,(s,i)=>encodeURIComponent(r[i]||""))}})();function Xfe(t){const e=t.match(/\{\w+\}/g);return e?e.map(n=>n.replace(/[{}]/g,"")):[]}function EI(t){if(!Array.isArray(t)||!t[0]||typeof t[0]!="object")return{};if(!r6(t[0]))return t.shift();const e=Object.keys(t[0]),n=e.filter(r=>bI.includes(r));return n.length>0&&n.length!==e.length&&Qv(`Options found in arguments (${n.join(", ")}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options.`),{}}function s6(t){const e={host:null,headers:{},settings:{}};if(t.length>0){const n=t[t.length-1];if(typeof n=="string")e.authenticator=hT(t.pop());else if(r6(n)){const r=Object.assign({},t.pop()),s=Object.keys(r).filter(i=>!bI.includes(i));if(s.length&&Qv(`Invalid options found (${s.join(", ")}); ignoring.`),r.apiKey&&(e.authenticator=hT(r.apiKey)),r.idempotencyKey&&(e.headers["Idempotency-Key"]=r.idempotencyKey),r.stripeAccount&&(e.headers["Stripe-Account"]=r.stripeAccount),r.stripeContext){if(e.headers["Stripe-Account"])throw new Error("Can't specify both stripeAccount and stripeContext.");e.headers["Stripe-Context"]=r.stripeContext}if(r.apiVersion&&(e.headers["Stripe-Version"]=r.apiVersion),Number.isInteger(r.maxNetworkRetries)&&(e.settings.maxNetworkRetries=r.maxNetworkRetries),Number.isInteger(r.timeout)&&(e.settings.timeout=r.timeout),r.host&&(e.host=r.host),r.authenticator){if(r.apiKey)throw new Error("Can't specify both apiKey and authenticator.");if(typeof r.authenticator!="function")throw new Error("The authenticator must be a function receiving a request as the first parameter.");e.authenticator=r.authenticator}r.additionalHeaders&&(e.headers=r.additionalHeaders)}}return e}function Jfe(t){const e=this,n=Object.prototype.hasOwnProperty.call(t,"constructor")?t.constructor:function(...r){e.apply(this,r)};return Object.assign(n,e),n.prototype=Object.create(e.prototype),Object.assign(n.prototype,t),n}function Nw(t){if(typeof t!="object")throw new Error("Argument must be an object");return Object.keys(t).reduce((e,n)=>(t[n]!=null&&(e[n]=t[n]),e),{})}function Zfe(t){return t&&typeof t=="object"?Object.keys(t).reduce((e,n)=>(e[epe(n)]=t[n],e),{}):t}function epe(t){return t.split("-").map(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()).join("-")}function TI(t,e){return e?t.then(n=>{setTimeout(()=>{e(null,n)},0)},n=>{setTimeout(()=>{e(n,null)},0)}):t}function tpe(t){return t==="OAuth"?"oauth":t[0].toLowerCase()+t.substring(1)}function Qv(t){return typeof process.emitWarning!="function"?console.warn(`Stripe: ${t}`):process.emitWarning(t,"Stripe")}function npe(t){const e=typeof t;return(e==="function"||e==="object")&&!!t}function rpe(t){const e={},n=(r,s)=>{Object.entries(r).forEach(([i,o])=>{const a=s?`${s}[${i}]`:i;if(npe(o)){if(!(o instanceof Uint8Array)&&!Object.prototype.hasOwnProperty.call(o,"data"))return n(o,a);e[a]=o}else e[a]=String(o)})};return n(t,null),e}function kw(t,e,n){if(!Number.isInteger(e)){if(n!==void 0)return n;throw new Error(`${t} must be an integer`)}return e}function spe(){return typeof process>"u"?{}:{lang_version:process.version,platform:process.platform}}function hT(t){const e=n=>(n.headers.Authorization="Bearer "+t,Promise.resolve());return e._apiKey=t,e}function ipe(t,e){return this[t]instanceof Date?Math.floor(this[t].getTime()/1e3).toString():e}function ope(t){return JSON.stringify(t,ipe)}function SI(t){return t&&t.startsWith("/v2")?"v2":"v1"}const ape=60;class cf{constructor(e,n){this._stripe=e,this._maxBufferedRequestMetric=n}_addHeadersDirectlyToObject(e,n){e.requestId=n["request-id"],e.stripeAccount=e.stripeAccount||n["stripe-account"],e.apiVersion=e.apiVersion||n["stripe-version"],e.idempotencyKey=e.idempotencyKey||n["idempotency-key"]}_makeResponseEvent(e,n,r){const s=Date.now(),i=s-e.request_start_time;return Nw({api_version:r["stripe-version"],account:r["stripe-account"],idempotency_key:r["idempotency-key"],method:e.method,path:e.path,status:n,request_id:this._getRequestId(r),elapsed:i,request_start_time:e.request_start_time,request_end_time:s})}_getRequestId(e){return e["request-id"]}_streamingResponseHandler(e,n,r){return s=>{const i=s.getHeaders(),o=()=>{const l=this._makeResponseEvent(e,s.getStatusCode(),i);this._stripe._emitter.emit("response",l),this._recordRequestMetrics(this._getRequestId(i),l.elapsed,n)},a=s.toStream(o);return this._addHeadersDirectlyToObject(a,i),r(null,a)}}_jsonResponseHandler(e,n,r,s){return i=>{const o=i.getHeaders(),a=this._getRequestId(o),l=i.getStatusCode(),u=this._makeResponseEvent(e,l,o);this._stripe._emitter.emit("response",u),i.toJSON().then(d=>{if(d.error){let h;throw typeof d.error=="string"&&(d.error={type:d.error,message:d.error_description}),d.error.headers=o,d.error.statusCode=l,d.error.requestId=a,l===401?h=new pI(d.error):l===403?h=new CB(d.error):l===429?h=new mI(d.error):n==="v2"?h=TB(d.error):h=N0(d.error),h}return d},d=>{throw new fI({message:"Invalid JSON received from the Stripe API",exception:d,requestId:o["request-id"]})}).then(d=>{this._recordRequestMetrics(a,u.elapsed,r);const h=i.getRawResponse();this._addHeadersDirectlyToObject(h,o),Object.defineProperty(d,"lastResponse",{enumerable:!1,writable:!1,value:h}),s(null,d)},d=>s(d,null))}}static _generateConnectionErrorMessage(e){return`An error occurred with our connection to Stripe.${e>0?` Request was retried ${e} times.`:""}`}static _shouldRetry(e,n,r,s){return s&&n===0&&Tr.CONNECTION_CLOSED_ERROR_CODES.includes(s.code)?!0:n>=r?!1:e?e.getHeaders()["stripe-should-retry"]==="false"?!1:e.getHeaders()["stripe-should-retry"]==="true"||e.getStatusCode()===409||e.getStatusCode()>=500:!0}_getSleepTimeInMS(e,n=null){const r=this._stripe.getInitialNetworkRetryDelay(),s=this._stripe.getMaxNetworkRetryDelay();let i=Math.min(r*Math.pow(2,e-1),s);return i*=.5*(1+Math.random()),i=Math.max(r,i),Number.isInteger(n)&&n<=ape&&(i=Math.max(i,n)),i*1e3}_getMaxNetworkRetries(e={}){return e.maxNetworkRetries!==void 0&&Number.isInteger(e.maxNetworkRetries)?e.maxNetworkRetries:this._stripe.getMaxNetworkRetries()}_defaultIdempotencyKey(e,n,r){const s=this._getMaxNetworkRetries(n),i=()=>`stripe-node-retry-${this._stripe._platformFunctions.uuid4()}`;if(r==="v2"){if(e==="POST"||e==="DELETE")return i()}else if(r==="v1"&&e==="POST"&&s>0)return i();return null}_makeHeaders({contentType:e,contentLength:n,apiVersion:r,clientUserAgent:s,method:i,userSuppliedHeaders:o,userSuppliedSettings:a,stripeAccount:l,stripeContext:u,apiMode:d}){const h={Accept:"application/json","Content-Type":e,"User-Agent":this._getUserAgentString(d),"X-Stripe-Client-User-Agent":s,"X-Stripe-Client-Telemetry":this._getTelemetryHeader(),"Stripe-Version":r,"Stripe-Account":l,"Stripe-Context":u,"Idempotency-Key":this._defaultIdempotencyKey(i,a,d)},p=i=="POST"||i=="PUT"||i=="PATCH";return(p||n)&&(p||Qv(`${i} method had non-zero contentLength but no payload is expected for this verb`),h["Content-Length"]=n),Object.assign(Nw(h),Zfe(o))}_getUserAgentString(e){const n=this._stripe.getConstant("PACKAGE_VERSION"),r=this._stripe._appInfo?this._stripe.getAppInfoAsString():"";return`Stripe/${e} NodeBindings/${n} ${r}`.trim()}_getTelemetryHeader(){if(this._stripe.getTelemetryEnabled()&&this._stripe._prevRequestMetrics.length>0){const e=this._stripe._prevRequestMetrics.shift();return JSON.stringify({last_request_metrics:e})}}_recordRequestMetrics(e,n,r){if(this._stripe.getTelemetryEnabled()&&e)if(this._stripe._prevRequestMetrics.length>this._maxBufferedRequestMetric)Qv("Request metrics buffer is full, dropping telemetry message.");else{const s={request_id:e,request_duration_ms:n};r&&r.length>0&&(s.usage=r),this._stripe._prevRequestMetrics.push(s)}}_rawRequest(e,n,r,s){return new Promise((o,a)=>{let l;try{const m=e.toUpperCase();if(m!=="POST"&&r&&Object.keys(r).length!==0)throw new Error("rawRequest only supports params on POST requests. Please pass null and add your parameters to path.");const y=[].slice.call([r,s]),_=EI(y),b=Object.assign({},_),x=s6(y),E=x.headers,w=x.authenticator;l={requestMethod:m,requestPath:n,bodyData:b,queryData:{},authenticator:w,headers:E,host:null,streaming:!1,settings:{},usage:["raw_request"]}}catch(m){a(m);return}function u(m,y){m?a(m):o(y)}const{headers:d,settings:h}=l,p=l.authenticator;this._request(l.requestMethod,l.host,n,l.bodyData,p,{headers:d,settings:h,streaming:l.streaming},l.usage,u)})}_request(e,n,r,s,i,o,a=[],l,u=null){var d;let h;i=(d=i??this._stripe._authenticator)!==null&&d!==void 0?d:null;const p=SI(r),m=(b,x,E,w,I)=>setTimeout(b,this._getSleepTimeInMS(w,I),x,E,w+1),y=(b,x,E)=>{const w=o.settings&&o.settings.timeout&&Number.isInteger(o.settings.timeout)&&o.settings.timeout>=0?o.settings.timeout:this._stripe.getApiField("timeout"),I={host:n||this._stripe.getApiField("host"),port:this._stripe.getApiField("port"),path:r,method:e,headers:Object.assign({},x),body:h,protocol:this._stripe.getApiField("protocol")};i(I).then(()=>{const k=this._stripe.getApiField("httpClient").makeRequest(I.host,I.port,I.path,I.method,I.headers,I.body,I.protocol,w),M=Date.now(),C=Nw({api_version:b,account:x["Stripe-Account"],idempotency_key:x["Idempotency-Key"],method:e,path:r,request_start_time:M}),S=E||0,P=this._getMaxNetworkRetries(o.settings||{});this._stripe._emitter.emit("request",C),k.then(R=>cf._shouldRetry(R,S,P)?m(y,b,x,S,R.getHeaders()["retry-after"]):o.streaming&&R.getStatusCode()<400?this._streamingResponseHandler(C,a,l)(R):this._jsonResponseHandler(C,p,a,l)(R)).catch(R=>{if(cf._shouldRetry(null,S,P,R))return m(y,b,x,S,null);{const O=R.code&&R.code===Tr.TIMEOUT_ERROR_CODE;return l(new IB({message:O?`Request aborted due to timeout being reached (${w}ms)`:cf._generateConnectionErrorMessage(S),detail:R}))}})}).catch(k=>{throw new En({message:"Unable to authenticate the request",exception:k})})},_=(b,x)=>{if(b)return l(b);h=x,this._stripe.getClientUserAgent(E=>{const w=this._stripe.getApiField("version"),I=this._makeHeaders({contentType:p=="v2"?"application/json":"application/x-www-form-urlencoded",contentLength:h.length,apiVersion:w,clientUserAgent:E,method:e,userSuppliedHeaders:o.headers,userSuppliedSettings:o.settings,stripeAccount:p=="v2"?null:this._stripe.getApiField("stripeAccount"),stripeContext:p=="v2"?this._stripe.getApiField("stripeContext"):null,apiMode:p});y(w,I,0)})};if(u)u(e,s,o.headers,_);else{let b;p=="v2"?b=s?ope(s):"":b=M0(s||{},p),_(null,b)}}}class i6{constructor(e,n,r,s){this.index=0,this.pagePromise=e,this.promiseCache={currentPromise:null},this.requestArgs=n,this.spec=r,this.stripeResource=s}async iterate(e){if(!(e&&e.data&&typeof e.data.length=="number"))throw Error("Unexpected: Stripe API response does not have a well-formed `data` array.");const n=o6(this.requestArgs);if(this.index<e.data.length){const r=n?e.data.length-1-this.index:this.index,s=e.data[r];return this.index+=1,{value:s,done:!1}}else if(e.has_more){this.index=0,this.pagePromise=this.getNextPage(e);const r=await this.pagePromise;return this.iterate(r)}return{done:!0,value:void 0}}getNextPage(e){throw new Error("Unimplemented")}async _next(){return this.iterate(await this.pagePromise)}next(){if(this.promiseCache.currentPromise)return this.promiseCache.currentPromise;const e=(async()=>{const n=await this._next();return this.promiseCache.currentPromise=null,n})();return this.promiseCache.currentPromise=e,e}}class lpe extends i6{getNextPage(e){const n=o6(this.requestArgs),r=mpe(e,n);return this.stripeResource._makeRequest(this.requestArgs,this.spec,{[n?"ending_before":"starting_after"]:r})}}class cpe extends i6{getNextPage(e){if(!e.next_page)throw Error("Unexpected: Stripe API response does not have a well-formed `next_page` field, but `has_more` was true.");return this.stripeResource._makeRequest(this.requestArgs,this.spec,{page:e.next_page})}}class upe{constructor(e,n,r,s){this.currentPageIterator=(async()=>(await e).data[Symbol.iterator]())(),this.nextPageUrl=(async()=>(await e).next_page_url||null)(),this.requestArgs=n,this.spec=r,this.stripeResource=s}async turnPage(){const e=await this.nextPageUrl;if(!e)return null;this.spec.fullPath=e;const n=await this.stripeResource._makeRequest([],this.spec,{});return this.nextPageUrl=Promise.resolve(n.next_page_url),this.currentPageIterator=Promise.resolve(n.data[Symbol.iterator]()),this.currentPageIterator}async next(){{const r=(await this.currentPageIterator).next();if(!r.done)return{done:!1,value:r.value}}const e=await this.turnPage();if(!e)return{done:!0,value:void 0};const n=e.next();return n.done?{done:!0,value:void 0}:{done:!1,value:n.value}}}const dpe=(t,e,n,r)=>{const s=SI(n.fullPath||n.path);return s!=="v2"&&n.methodType==="search"?Ow(new cpe(r,e,n,t)):s!=="v2"&&n.methodType==="list"?Ow(new lpe(r,e,n,t)):s==="v2"&&n.methodType==="list"?Ow(new upe(r,e,n,t)):null},Ow=t=>{const e=gpe((...s)=>t.next(...s)),n=ype(e),r={autoPagingEach:e,autoPagingToArray:n,next:()=>t.next(),return:()=>({}),[hpe()]:()=>r};return r};function hpe(){return typeof Symbol<"u"&&Symbol.asyncIterator?Symbol.asyncIterator:"@@asyncIterator"}function fpe(t){if(t.length<2)return null;const e=t[1];if(typeof e!="function")throw Error(`The second argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);return e}function ppe(t){if(t.length===0)return;const e=t[0];if(typeof e!="function")throw Error(`The first argument to autoPagingEach, if present, must be a callback function; received ${typeof e}`);if(e.length===2)return e;if(e.length>2)throw Error(`The \`onItem\` callback function passed to autoPagingEach must accept at most two arguments; got ${e}`);return function(r,s){const i=e(r);s(i)}}function mpe(t,e){const n=e?0:t.data.length-1,r=t.data[n],s=r&&r.id;if(!s)throw Error("Unexpected: No `id` found on the last item while auto-paging a list.");return s}function gpe(t){return function(){const n=[].slice.call(arguments),r=ppe(n),s=fpe(n);if(n.length>2)throw Error(`autoPagingEach takes up to two arguments; received ${n}`);const i=vpe(t,r);return TI(i,s)}}function ype(t){return function(n,r){const s=n&&n.limit;if(!s)throw Error("You must pass a `limit` option to autoPagingToArray, e.g., `autoPagingToArray({limit: 1000});`.");if(s>1e4)throw Error("You cannot specify a limit of more than 10,000 items to fetch in `autoPagingToArray`; use `autoPagingEach` to iterate through longer lists.");const i=new Promise((o,a)=>{const l=[];t(u=>{if(l.push(u),l.length>=s)return!1}).then(()=>{o(l)}).catch(a)});return TI(i,r)}}function vpe(t,e){return new Promise((n,r)=>{function s(i){if(i.done){n();return}const o=i.value;return new Promise(a=>{e(o,a)}).then(a=>a===!1?s({done:!0,value:void 0}):t().then(s))}t().then(s).catch(r)})}function o6(t){const e=[].slice.call(t);return!!EI(e).ending_before}function _pe(t){if(t.path!==void 0&&t.fullPath!==void 0)throw new Error(`Method spec specified both a 'path' (${t.path}) and a 'fullPath' (${t.fullPath}).`);return function(...e){const n=typeof e[e.length-1]=="function"&&e.pop();t.urlParams=Xfe(t.fullPath||this.createResourcePathWithSymbols(t.path||""));const r=TI(this._makeRequest(e,t,{}),n);return Object.assign(r,dpe(this,e,t,r)),r}}j.extend=Jfe;j.method=_pe;j.MAX_BUFFERED_REQUEST_METRICS=100;function j(t,e){if(this._stripe=t,e)throw new Error("Support for curried url params was dropped in stripe-node v7.0.0. Instead, pass two ids.");this.basePath=dT(this.basePath||t.getApiField("basePath")),this.resourcePath=this.path,this.path=dT(this.path),this.initialize(...arguments)}j.prototype={_stripe:null,path:"",resourcePath:"",basePath:null,initialize(){},requestDataProcessor:null,validateRequest:null,createFullPath(t,e){const n=[this.basePath(e),this.path(e)];if(typeof t=="function"){const r=t(e);r&&n.push(r)}else n.push(t);return this._joinUrlParts(n)},createResourcePathWithSymbols(t){return t?`/${this._joinUrlParts([this.resourcePath,t])}`:`/${this.resourcePath}`},_joinUrlParts(t){return t.join("/").replace(/\/{2,}/g,"/")},_getRequestOpts(t,e,n){var r;const s=(e.method||"GET").toUpperCase(),i=e.usage||[],o=e.urlParams||[],a=e.encode||(C=>C),l=!!e.fullPath,u=dT(l?e.fullPath:e.path||""),d=l?e.fullPath:this.createResourcePathWithSymbols(e.path),h=[].slice.call(t),p=o.reduce((C,S)=>{const P=h.shift();if(typeof P!="string")throw new Error(`Stripe: Argument "${S}" must be a string, but got: ${P} (on API request to \`${s} ${d}\`)`);return C[S]=P,C},{}),m=EI(h),y=a(Object.assign({},m,n)),_=s6(h),b=_.host||e.host,x=!!e.streaming;if(h.filter(C=>C!=null).length)throw new Error(`Stripe: Unknown arguments (${h}). Did you mean to pass an options object? See https://github.com/stripe/stripe-node/wiki/Passing-Options. (on API request to ${s} \`${d}\`)`);const E=l?u(p):this.createFullPath(u,p),w=Object.assign(_.headers,e.headers);e.validator&&e.validator(y,{headers:w});const I=e.method==="GET"||e.method==="DELETE";return{requestMethod:s,requestPath:E,bodyData:I?null:y,queryData:I?y:{},authenticator:(r=_.authenticator)!==null&&r!==void 0?r:null,headers:w,host:b??null,streaming:x,settings:_.settings,usage:i}},_makeRequest(t,e,n){return new Promise((r,s)=>{var i;let o;try{o=this._getRequestOpts(t,e,n)}catch(p){s(p);return}function a(p,m){p?s(p):r(e.transformResponseData?e.transformResponseData(m):m)}const l=Object.keys(o.queryData).length===0,u=[o.requestPath,l?"":"?",M0(o.queryData,SI(o.requestPath))].join(""),{headers:d,settings:h}=o;this._stripe._requestSender._request(o.requestMethod,o.host,u,o.bodyData,o.authenticator,{headers:d,settings:h,streaming:o.streaming},o.usage,a,(i=this.requestDataProcessor)===null||i===void 0?void 0:i.bind(this))})}};function nO(t){const e={DEFAULT_TOLERANCE:300,signature:null,constructEvent(d,h,p,m,y,_){try{this.signature.verifyHeader(d,h,p,m||e.DEFAULT_TOLERANCE,y,_)}catch(x){throw x instanceof EB&&(x.message+="\nUse `await constructEventAsync(...)` instead of `constructEvent(...)`"),x}return d instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(d)):JSON.parse(d)},async constructEventAsync(d,h,p,m,y,_){return await this.signature.verifyHeaderAsync(d,h,p,m||e.DEFAULT_TOLERANCE,y,_),d instanceof Uint8Array?JSON.parse(new TextDecoder("utf8").decode(d)):JSON.parse(d)},generateTestHeaderString:function(d){const h=u(d),p=h.signature||h.cryptoProvider.computeHMACSignature(h.payloadString,h.secret);return h.generateHeaderString(p)},generateTestHeaderStringAsync:async function(d){const h=u(d),p=h.signature||await h.cryptoProvider.computeHMACSignatureAsync(h.payloadString,h.secret);return h.generateHeaderString(p)}},n={EXPECTED_SCHEME:"v1",verifyHeader(d,h,p,m,y,_){const{decodedHeader:b,decodedPayload:x,details:E,suspectPayloadType:w}=s(d,h,this.EXPECTED_SCHEME),I=/\s/.test(p);y=y||l();const k=y.computeHMACSignature(r(x,E),p);return i(x,b,E,k,m,w,I,_),!0},async verifyHeaderAsync(d,h,p,m,y,_){const{decodedHeader:b,decodedPayload:x,details:E,suspectPayloadType:w}=s(d,h,this.EXPECTED_SCHEME),I=/\s/.test(p);y=y||l();const k=await y.computeHMACSignatureAsync(r(x,E),p);return i(x,b,E,k,m,w,I,_)}};function r(d,h){return`${h.timestamp}.${d}`}function s(d,h,p){if(!d)throw new Xi(h,d,{message:"No webhook payload was provided."});const m=typeof d!="string"&&!(d instanceof Uint8Array),y=new TextDecoder("utf8"),_=d instanceof Uint8Array?y.decode(d):d;if(Array.isArray(h))throw new Error("Unexpected: An array was passed as a header, which should not be possible for the stripe-signature header.");if(h==null||h=="")throw new Xi(h,d,{message:"No stripe-signature header value was provided."});const b=h instanceof Uint8Array?y.decode(h):h,x=o(b,p);if(!x||x.timestamp===-1)throw new Xi(b,_,{message:"Unable to extract timestamp and signatures from header"});if(!x.signatures.length)throw new Xi(b,_,{message:"No signatures found with expected scheme"});return{decodedPayload:_,decodedHeader:b,details:x,suspectPayloadType:m}}function i(d,h,p,m,y,_,b,x){const E=!!p.signatures.filter(t.secureCompare.bind(t,m)).length,w=`
Learn more about webhook signing and explore webhook integration examples for various frameworks at https://docs.stripe.com/webhooks/signature`,I=b?`

Note: The provided signing secret contains whitespace. This often indicates an extra newline or space is in the value`:"";if(!E)throw _?new Xi(h,d,{message:`Webhook payload must be provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead. 
Signature verification is impossible without access to the original signed material. 
`+w+`
`+I}):new Xi(h,d,{message:`No signatures found matching the expected signature for payload. Are you passing the raw request body you received from Stripe? 
 If a webhook request is being forwarded by a third-party tool, ensure that the exact request body, including JSON formatting and new line style, is preserved.
`+w+`
`+I});const k=Math.floor((typeof x=="number"?x:Date.now())/1e3)-p.timestamp;if(y>0&&k>y)throw new Xi(h,d,{message:"Timestamp outside the tolerance zone"});return!0}function o(d,h){return typeof d!="string"?null:d.split(",").reduce((p,m)=>{const y=m.split("=");return y[0]==="t"&&(p.timestamp=parseInt(y[1],10)),y[0]===h&&p.signatures.push(y[1]),p},{timestamp:-1,signatures:[]})}let a=null;function l(){return a||(a=t.createDefaultCryptoProvider()),a}function u(d){if(!d)throw new En({message:"Options are required"});const h=Math.floor(d.timestamp)||Math.floor(Date.now()/1e3),p=d.scheme||n.EXPECTED_SCHEME,m=d.cryptoProvider||l(),y=`${h}.${d.payload}`,_=b=>`t=${h},${p}=${b}`;return Object.assign(Object.assign({},d),{timestamp:h,scheme:p,cryptoProvider:m,payloadString:y,generateHeaderString:_})}return e.signature=n,e}const xpe="2025-01-27.acacia";function wpe(t,e){for(const n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;const r=n[0].toLowerCase()+n.substring(1),s=new e[n](t);this[r]=s}}function ft(t,e){return function(n){return new wpe(n,e)}}const ya=j.method,bpe=j.extend({retrieve:ya({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}"}),list:ya({method:"GET",fullPath:"/v1/financial_connections/accounts",methodType:"list"}),disconnect:ya({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/disconnect"}),listOwners:ya({method:"GET",fullPath:"/v1/financial_connections/accounts/{account}/owners",methodType:"list"}),refresh:ya({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/refresh"}),subscribe:ya({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/subscribe"}),unsubscribe:ya({method:"POST",fullPath:"/v1/financial_connections/accounts/{account}/unsubscribe"})}),rO=j.method,Epe=j.extend({retrieve:rO({method:"GET",fullPath:"/v1/entitlements/active_entitlements/{id}"}),list:rO({method:"GET",fullPath:"/v1/entitlements/active_entitlements",methodType:"list"})}),cc=j.method,Tpe=j.extend({create:cc({method:"POST",fullPath:"/v1/billing/alerts"}),retrieve:cc({method:"GET",fullPath:"/v1/billing/alerts/{id}"}),list:cc({method:"GET",fullPath:"/v1/billing/alerts",methodType:"list"}),activate:cc({method:"POST",fullPath:"/v1/billing/alerts/{id}/activate"}),archive:cc({method:"POST",fullPath:"/v1/billing/alerts/{id}/archive"}),deactivate:cc({method:"POST",fullPath:"/v1/billing/alerts/{id}/deactivate"})}),va=j.method,Spe=j.extend({create:va({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations"}),capture:va({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/capture"}),expire:va({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/expire"}),finalizeAmount:va({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/finalize_amount"}),increment:va({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/increment"}),respond:va({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/fraud_challenges/respond"}),reverse:va({method:"POST",fullPath:"/v1/test_helpers/issuing/authorizations/{authorization}/reverse"})}),th=j.method,Cpe=j.extend({retrieve:th({method:"GET",fullPath:"/v1/issuing/authorizations/{authorization}"}),update:th({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}"}),list:th({method:"GET",fullPath:"/v1/issuing/authorizations",methodType:"list"}),approve:th({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/approve"}),decline:th({method:"POST",fullPath:"/v1/issuing/authorizations/{authorization}/decline"})}),Dw=j.method,Ipe=j.extend({create:Dw({method:"POST",fullPath:"/v1/tax/calculations"}),retrieve:Dw({method:"GET",fullPath:"/v1/tax/calculations/{calculation}"}),listLineItems:Dw({method:"GET",fullPath:"/v1/tax/calculations/{calculation}/line_items",methodType:"list"})}),Zm=j.method,Ppe=j.extend({create:Zm({method:"POST",fullPath:"/v1/issuing/cardholders"}),retrieve:Zm({method:"GET",fullPath:"/v1/issuing/cardholders/{cardholder}"}),update:Zm({method:"POST",fullPath:"/v1/issuing/cardholders/{cardholder}"}),list:Zm({method:"GET",fullPath:"/v1/issuing/cardholders",methodType:"list"})}),nh=j.method,Rpe=j.extend({deliverCard:nh({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/deliver"}),failCard:nh({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/fail"}),returnCard:nh({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/return"}),shipCard:nh({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/ship"}),submitCard:nh({method:"POST",fullPath:"/v1/test_helpers/issuing/cards/{card}/shipping/submit"})}),eg=j.method,Ape=j.extend({create:eg({method:"POST",fullPath:"/v1/issuing/cards"}),retrieve:eg({method:"GET",fullPath:"/v1/issuing/cards/{card}"}),update:eg({method:"POST",fullPath:"/v1/issuing/cards/{card}"}),list:eg({method:"GET",fullPath:"/v1/issuing/cards",methodType:"list"})}),tg=j.method,Npe=j.extend({create:tg({method:"POST",fullPath:"/v1/billing_portal/configurations"}),retrieve:tg({method:"GET",fullPath:"/v1/billing_portal/configurations/{configuration}"}),update:tg({method:"POST",fullPath:"/v1/billing_portal/configurations/{configuration}"}),list:tg({method:"GET",fullPath:"/v1/billing_portal/configurations",methodType:"list"})}),rh=j.method,kpe=j.extend({create:rh({method:"POST",fullPath:"/v1/terminal/configurations"}),retrieve:rh({method:"GET",fullPath:"/v1/terminal/configurations/{configuration}"}),update:rh({method:"POST",fullPath:"/v1/terminal/configurations/{configuration}"}),list:rh({method:"GET",fullPath:"/v1/terminal/configurations",methodType:"list"}),del:rh({method:"DELETE",fullPath:"/v1/terminal/configurations/{configuration}"})}),Ope=j.method,Dpe=j.extend({create:Ope({method:"POST",fullPath:"/v1/test_helpers/confirmation_tokens"})}),jpe=j.method,Mpe=j.extend({create:jpe({method:"POST",fullPath:"/v1/terminal/connection_tokens"})}),Lpe=j.method,Fpe=j.extend({retrieve:Lpe({method:"GET",fullPath:"/v1/billing/credit_balance_summary"})}),sO=j.method,Vpe=j.extend({retrieve:sO({method:"GET",fullPath:"/v1/billing/credit_balance_transactions/{id}"}),list:sO({method:"GET",fullPath:"/v1/billing/credit_balance_transactions",methodType:"list"})}),uc=j.method,Upe=j.extend({create:uc({method:"POST",fullPath:"/v1/billing/credit_grants"}),retrieve:uc({method:"GET",fullPath:"/v1/billing/credit_grants/{id}"}),update:uc({method:"POST",fullPath:"/v1/billing/credit_grants/{id}"}),list:uc({method:"GET",fullPath:"/v1/billing/credit_grants",methodType:"list"}),expire:uc({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/expire"}),voidGrant:uc({method:"POST",fullPath:"/v1/billing/credit_grants/{id}/void"})}),jw=j.method,$pe=j.extend({create:jw({method:"POST",fullPath:"/v1/treasury/credit_reversals"}),retrieve:jw({method:"GET",fullPath:"/v1/treasury/credit_reversals/{credit_reversal}"}),list:jw({method:"GET",fullPath:"/v1/treasury/credit_reversals",methodType:"list"})}),Bpe=j.method,zpe=j.extend({fundCashBalance:Bpe({method:"POST",fullPath:"/v1/test_helpers/customers/{customer}/fund_cash_balance"})}),Mw=j.method,Gpe=j.extend({create:Mw({method:"POST",fullPath:"/v1/treasury/debit_reversals"}),retrieve:Mw({method:"GET",fullPath:"/v1/treasury/debit_reversals/{debit_reversal}"}),list:Mw({method:"GET",fullPath:"/v1/treasury/debit_reversals",methodType:"list"})}),sh=j.method,qpe=j.extend({create:sh({method:"POST",fullPath:"/v1/issuing/disputes"}),retrieve:sh({method:"GET",fullPath:"/v1/issuing/disputes/{dispute}"}),update:sh({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}"}),list:sh({method:"GET",fullPath:"/v1/issuing/disputes",methodType:"list"}),submit:sh({method:"POST",fullPath:"/v1/issuing/disputes/{dispute}/submit"})}),iO=j.method,Wpe=j.extend({retrieve:iO({method:"GET",fullPath:"/v1/radar/early_fraud_warnings/{early_fraud_warning}"}),list:iO({method:"GET",fullPath:"/v1/radar/early_fraud_warnings",methodType:"list"})}),qi=j.method,Hpe=j.extend({create:qi({method:"POST",fullPath:"/v2/core/event_destinations"}),retrieve:qi({method:"GET",fullPath:"/v2/core/event_destinations/{id}"}),update:qi({method:"POST",fullPath:"/v2/core/event_destinations/{id}"}),list:qi({method:"GET",fullPath:"/v2/core/event_destinations",methodType:"list"}),del:qi({method:"DELETE",fullPath:"/v2/core/event_destinations/{id}"}),disable:qi({method:"POST",fullPath:"/v2/core/event_destinations/{id}/disable"}),enable:qi({method:"POST",fullPath:"/v2/core/event_destinations/{id}/enable"}),ping:qi({method:"POST",fullPath:"/v2/core/event_destinations/{id}/ping"})}),Lw=j.method,Kpe=j.extend({retrieve(...t){return Lw({method:"GET",fullPath:"/v2/core/events/{id}",transformResponseData:n=>this.addFetchRelatedObjectIfNeeded(n)}).apply(this,t)},list(...t){return Lw({method:"GET",fullPath:"/v2/core/events",methodType:"list",transformResponseData:n=>Object.assign(Object.assign({},n),{data:n.data.map(this.addFetchRelatedObjectIfNeeded.bind(this))})}).apply(this,t)},addFetchRelatedObjectIfNeeded(t){return!t.related_object||!t.related_object.url?t:Object.assign(Object.assign({},t),{fetchRelatedObject:()=>Lw({method:"GET",fullPath:t.related_object.url}).apply(this,[{stripeAccount:t.context}])})}}),ng=j.method,Qpe=j.extend({create:ng({method:"POST",fullPath:"/v1/entitlements/features"}),retrieve:ng({method:"GET",fullPath:"/v1/entitlements/features/{id}"}),update:ng({method:"POST",fullPath:"/v1/entitlements/features/{id}"}),list:ng({method:"GET",fullPath:"/v1/entitlements/features",methodType:"list"})}),_a=j.method,Ype=j.extend({create:_a({method:"POST",fullPath:"/v1/treasury/financial_accounts"}),retrieve:_a({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),update:_a({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}"}),list:_a({method:"GET",fullPath:"/v1/treasury/financial_accounts",methodType:"list"}),close:_a({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/close"}),retrieveFeatures:_a({method:"GET",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"}),updateFeatures:_a({method:"POST",fullPath:"/v1/treasury/financial_accounts/{financial_account}/features"})}),Fw=j.method,Xpe=j.extend({fail:Fw({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/fail"}),returnInboundTransfer:Fw({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/return"}),succeed:Fw({method:"POST",fullPath:"/v1/test_helpers/treasury/inbound_transfers/{id}/succeed"})}),rg=j.method,Jpe=j.extend({create:rg({method:"POST",fullPath:"/v1/treasury/inbound_transfers"}),retrieve:rg({method:"GET",fullPath:"/v1/treasury/inbound_transfers/{id}"}),list:rg({method:"GET",fullPath:"/v1/treasury/inbound_transfers",methodType:"list"}),cancel:rg({method:"POST",fullPath:"/v1/treasury/inbound_transfers/{inbound_transfer}/cancel"})}),ih=j.method,Zpe=j.extend({create:ih({method:"POST",fullPath:"/v1/terminal/locations"}),retrieve:ih({method:"GET",fullPath:"/v1/terminal/locations/{location}"}),update:ih({method:"POST",fullPath:"/v1/terminal/locations/{location}"}),list:ih({method:"GET",fullPath:"/v1/terminal/locations",methodType:"list"}),del:ih({method:"DELETE",fullPath:"/v1/terminal/locations/{location}"})}),eme=j.method,tme=j.extend({create:eme({method:"POST",fullPath:"/v1/billing/meter_event_adjustments"})}),nme=j.method,rme=j.extend({create:nme({method:"POST",fullPath:"/v2/billing/meter_event_adjustments"})}),sme=j.method,ime=j.extend({create:sme({method:"POST",fullPath:"/v2/billing/meter_event_session"})}),ome=j.method,ame=j.extend({create:ome({method:"POST",fullPath:"/v2/billing/meter_event_stream",host:"meter-events.stripe.com"})}),lme=j.method,cme=j.extend({create:lme({method:"POST",fullPath:"/v1/billing/meter_events"})}),ume=j.method,dme=j.extend({create:ume({method:"POST",fullPath:"/v2/billing/meter_events"})}),xa=j.method,hme=j.extend({create:xa({method:"POST",fullPath:"/v1/billing/meters"}),retrieve:xa({method:"GET",fullPath:"/v1/billing/meters/{id}"}),update:xa({method:"POST",fullPath:"/v1/billing/meters/{id}"}),list:xa({method:"GET",fullPath:"/v1/billing/meters",methodType:"list"}),deactivate:xa({method:"POST",fullPath:"/v1/billing/meters/{id}/deactivate"}),listEventSummaries:xa({method:"GET",fullPath:"/v1/billing/meters/{id}/event_summaries",methodType:"list"}),reactivate:xa({method:"POST",fullPath:"/v1/billing/meters/{id}/reactivate"})}),oh=j.method,fme=j.extend({create:oh({method:"POST",fullPath:"/v1/climate/orders"}),retrieve:oh({method:"GET",fullPath:"/v1/climate/orders/{order}"}),update:oh({method:"POST",fullPath:"/v1/climate/orders/{order}"}),list:oh({method:"GET",fullPath:"/v1/climate/orders",methodType:"list"}),cancel:oh({method:"POST",fullPath:"/v1/climate/orders/{order}/cancel"})}),sg=j.method,pme=j.extend({update:sg({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}"}),fail:sg({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/fail"}),post:sg({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/post"}),returnOutboundPayment:sg({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_payments/{id}/return"})}),ig=j.method,mme=j.extend({create:ig({method:"POST",fullPath:"/v1/treasury/outbound_payments"}),retrieve:ig({method:"GET",fullPath:"/v1/treasury/outbound_payments/{id}"}),list:ig({method:"GET",fullPath:"/v1/treasury/outbound_payments",methodType:"list"}),cancel:ig({method:"POST",fullPath:"/v1/treasury/outbound_payments/{id}/cancel"})}),og=j.method,gme=j.extend({update:og({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}"}),fail:og({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/fail"}),post:og({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/post"}),returnOutboundTransfer:og({method:"POST",fullPath:"/v1/test_helpers/treasury/outbound_transfers/{outbound_transfer}/return"})}),ag=j.method,yme=j.extend({create:ag({method:"POST",fullPath:"/v1/treasury/outbound_transfers"}),retrieve:ag({method:"GET",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}"}),list:ag({method:"GET",fullPath:"/v1/treasury/outbound_transfers",methodType:"list"}),cancel:ag({method:"POST",fullPath:"/v1/treasury/outbound_transfers/{outbound_transfer}/cancel"})}),Vw=j.method,vme=j.extend({activate:Vw({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/activate"}),deactivate:Vw({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/deactivate"}),reject:Vw({method:"POST",fullPath:"/v1/test_helpers/issuing/personalization_designs/{personalization_design}/reject"})}),lg=j.method,_me=j.extend({create:lg({method:"POST",fullPath:"/v1/issuing/personalization_designs"}),retrieve:lg({method:"GET",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),update:lg({method:"POST",fullPath:"/v1/issuing/personalization_designs/{personalization_design}"}),list:lg({method:"GET",fullPath:"/v1/issuing/personalization_designs",methodType:"list"})}),oO=j.method,xme=j.extend({retrieve:oO({method:"GET",fullPath:"/v1/issuing/physical_bundles/{physical_bundle}"}),list:oO({method:"GET",fullPath:"/v1/issuing/physical_bundles",methodType:"list"})}),aO=j.method,wme=j.extend({retrieve:aO({method:"GET",fullPath:"/v1/climate/products/{product}"}),list:aO({method:"GET",fullPath:"/v1/climate/products",methodType:"list"})}),bme=j.method,Eme=j.extend({presentPaymentMethod:bme({method:"POST",fullPath:"/v1/test_helpers/terminal/readers/{reader}/present_payment_method"})}),us=j.method,Tme=j.extend({create:us({method:"POST",fullPath:"/v1/terminal/readers"}),retrieve:us({method:"GET",fullPath:"/v1/terminal/readers/{reader}"}),update:us({method:"POST",fullPath:"/v1/terminal/readers/{reader}"}),list:us({method:"GET",fullPath:"/v1/terminal/readers",methodType:"list"}),del:us({method:"DELETE",fullPath:"/v1/terminal/readers/{reader}"}),cancelAction:us({method:"POST",fullPath:"/v1/terminal/readers/{reader}/cancel_action"}),processPaymentIntent:us({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_payment_intent"}),processSetupIntent:us({method:"POST",fullPath:"/v1/terminal/readers/{reader}/process_setup_intent"}),refundPayment:us({method:"POST",fullPath:"/v1/terminal/readers/{reader}/refund_payment"}),setReaderDisplay:us({method:"POST",fullPath:"/v1/terminal/readers/{reader}/set_reader_display"})}),Sme=j.method,Cme=j.extend({create:Sme({method:"POST",fullPath:"/v1/test_helpers/treasury/received_credits"})}),lO=j.method,Ime=j.extend({retrieve:lO({method:"GET",fullPath:"/v1/treasury/received_credits/{id}"}),list:lO({method:"GET",fullPath:"/v1/treasury/received_credits",methodType:"list"})}),Pme=j.method,Rme=j.extend({create:Pme({method:"POST",fullPath:"/v1/test_helpers/treasury/received_debits"})}),cO=j.method,Ame=j.extend({retrieve:cO({method:"GET",fullPath:"/v1/treasury/received_debits/{id}"}),list:cO({method:"GET",fullPath:"/v1/treasury/received_debits",methodType:"list"})}),Nme=j.method,kme=j.extend({expire:Nme({method:"POST",fullPath:"/v1/test_helpers/refunds/{refund}/expire"})}),cg=j.method,Ome=j.extend({create:cg({method:"POST",fullPath:"/v1/tax/registrations"}),retrieve:cg({method:"GET",fullPath:"/v1/tax/registrations/{id}"}),update:cg({method:"POST",fullPath:"/v1/tax/registrations/{id}"}),list:cg({method:"GET",fullPath:"/v1/tax/registrations",methodType:"list"})}),Uw=j.method,Dme=j.extend({create:Uw({method:"POST",fullPath:"/v1/reporting/report_runs"}),retrieve:Uw({method:"GET",fullPath:"/v1/reporting/report_runs/{report_run}"}),list:Uw({method:"GET",fullPath:"/v1/reporting/report_runs",methodType:"list"})}),uO=j.method,jme=j.extend({retrieve:uO({method:"GET",fullPath:"/v1/reporting/report_types/{report_type}"}),list:uO({method:"GET",fullPath:"/v1/reporting/report_types",methodType:"list"})}),$w=j.method,Mme=j.extend({create:$w({method:"POST",fullPath:"/v1/forwarding/requests"}),retrieve:$w({method:"GET",fullPath:"/v1/forwarding/requests/{id}"}),list:$w({method:"GET",fullPath:"/v1/forwarding/requests",methodType:"list"})}),dO=j.method,Lme=j.extend({retrieve:dO({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs/{scheduled_query_run}"}),list:dO({method:"GET",fullPath:"/v1/sigma/scheduled_query_runs",methodType:"list"})}),ug=j.method,Fme=j.extend({create:ug({method:"POST",fullPath:"/v1/apps/secrets"}),list:ug({method:"GET",fullPath:"/v1/apps/secrets",methodType:"list"}),deleteWhere:ug({method:"POST",fullPath:"/v1/apps/secrets/delete"}),find:ug({method:"GET",fullPath:"/v1/apps/secrets/find"})}),Vme=j.method,Ume=j.extend({create:Vme({method:"POST",fullPath:"/v1/billing_portal/sessions"})}),dc=j.method,$me=j.extend({create:dc({method:"POST",fullPath:"/v1/checkout/sessions"}),retrieve:dc({method:"GET",fullPath:"/v1/checkout/sessions/{session}"}),update:dc({method:"POST",fullPath:"/v1/checkout/sessions/{session}"}),list:dc({method:"GET",fullPath:"/v1/checkout/sessions",methodType:"list"}),expire:dc({method:"POST",fullPath:"/v1/checkout/sessions/{session}/expire"}),listLineItems:dc({method:"GET",fullPath:"/v1/checkout/sessions/{session}/line_items",methodType:"list"})}),hO=j.method,Bme=j.extend({create:hO({method:"POST",fullPath:"/v1/financial_connections/sessions"}),retrieve:hO({method:"GET",fullPath:"/v1/financial_connections/sessions/{session}"})}),fO=j.method,zme=j.extend({retrieve:fO({method:"GET",fullPath:"/v1/tax/settings"}),update:fO({method:"POST",fullPath:"/v1/tax/settings"})}),pO=j.method,Gme=j.extend({retrieve:pO({method:"GET",fullPath:"/v1/climate/suppliers/{supplier}"}),list:pO({method:"GET",fullPath:"/v1/climate/suppliers",methodType:"list"})}),ah=j.method,qme=j.extend({create:ah({method:"POST",fullPath:"/v1/test_helpers/test_clocks"}),retrieve:ah({method:"GET",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),list:ah({method:"GET",fullPath:"/v1/test_helpers/test_clocks",methodType:"list"}),del:ah({method:"DELETE",fullPath:"/v1/test_helpers/test_clocks/{test_clock}"}),advance:ah({method:"POST",fullPath:"/v1/test_helpers/test_clocks/{test_clock}/advance"})}),Bw=j.method,Wme=j.extend({retrieve:Bw({method:"GET",fullPath:"/v1/issuing/tokens/{token}"}),update:Bw({method:"POST",fullPath:"/v1/issuing/tokens/{token}"}),list:Bw({method:"GET",fullPath:"/v1/issuing/tokens",methodType:"list"})}),mO=j.method,Hme=j.extend({retrieve:mO({method:"GET",fullPath:"/v1/treasury/transaction_entries/{id}"}),list:mO({method:"GET",fullPath:"/v1/treasury/transaction_entries",methodType:"list"})}),zw=j.method,Kme=j.extend({createForceCapture:zw({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_force_capture"}),createUnlinkedRefund:zw({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/create_unlinked_refund"}),refund:zw({method:"POST",fullPath:"/v1/test_helpers/issuing/transactions/{transaction}/refund"})}),gO=j.method,Qme=j.extend({retrieve:gO({method:"GET",fullPath:"/v1/financial_connections/transactions/{transaction}"}),list:gO({method:"GET",fullPath:"/v1/financial_connections/transactions",methodType:"list"})}),Gw=j.method,Yme=j.extend({retrieve:Gw({method:"GET",fullPath:"/v1/issuing/transactions/{transaction}"}),update:Gw({method:"POST",fullPath:"/v1/issuing/transactions/{transaction}"}),list:Gw({method:"GET",fullPath:"/v1/issuing/transactions",methodType:"list"})}),dg=j.method,Xme=j.extend({retrieve:dg({method:"GET",fullPath:"/v1/tax/transactions/{transaction}"}),createFromCalculation:dg({method:"POST",fullPath:"/v1/tax/transactions/create_from_calculation"}),createReversal:dg({method:"POST",fullPath:"/v1/tax/transactions/create_reversal"}),listLineItems:dg({method:"GET",fullPath:"/v1/tax/transactions/{transaction}/line_items",methodType:"list"})}),yO=j.method,Jme=j.extend({retrieve:yO({method:"GET",fullPath:"/v1/treasury/transactions/{id}"}),list:yO({method:"GET",fullPath:"/v1/treasury/transactions",methodType:"list"})}),hg=j.method,Zme=j.extend({create:hg({method:"POST",fullPath:"/v1/radar/value_list_items"}),retrieve:hg({method:"GET",fullPath:"/v1/radar/value_list_items/{item}"}),list:hg({method:"GET",fullPath:"/v1/radar/value_list_items",methodType:"list"}),del:hg({method:"DELETE",fullPath:"/v1/radar/value_list_items/{item}"})}),lh=j.method,ege=j.extend({create:lh({method:"POST",fullPath:"/v1/radar/value_lists"}),retrieve:lh({method:"GET",fullPath:"/v1/radar/value_lists/{value_list}"}),update:lh({method:"POST",fullPath:"/v1/radar/value_lists/{value_list}"}),list:lh({method:"GET",fullPath:"/v1/radar/value_lists",methodType:"list"}),del:lh({method:"DELETE",fullPath:"/v1/radar/value_lists/{value_list}"})}),vO=j.method,tge=j.extend({retrieve:vO({method:"GET",fullPath:"/v1/identity/verification_reports/{report}"}),list:vO({method:"GET",fullPath:"/v1/identity/verification_reports",methodType:"list"})}),hc=j.method,nge=j.extend({create:hc({method:"POST",fullPath:"/v1/identity/verification_sessions"}),retrieve:hc({method:"GET",fullPath:"/v1/identity/verification_sessions/{session}"}),update:hc({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}"}),list:hc({method:"GET",fullPath:"/v1/identity/verification_sessions",methodType:"list"}),cancel:hc({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/cancel"}),redact:hc({method:"POST",fullPath:"/v1/identity/verification_sessions/{session}/redact"})}),wt=j.method,_O=j.extend({create:wt({method:"POST",fullPath:"/v1/accounts"}),retrieve(t,...e){return typeof t=="string"?wt({method:"GET",fullPath:"/v1/accounts/{id}"}).apply(this,[t,...e]):(t==null&&[].shift.apply([t,...e]),wt({method:"GET",fullPath:"/v1/account"}).apply(this,[t,...e]))},update:wt({method:"POST",fullPath:"/v1/accounts/{account}"}),list:wt({method:"GET",fullPath:"/v1/accounts",methodType:"list"}),del:wt({method:"DELETE",fullPath:"/v1/accounts/{account}"}),createExternalAccount:wt({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts"}),createLoginLink:wt({method:"POST",fullPath:"/v1/accounts/{account}/login_links"}),createPerson:wt({method:"POST",fullPath:"/v1/accounts/{account}/persons"}),deleteExternalAccount:wt({method:"DELETE",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),deletePerson:wt({method:"DELETE",fullPath:"/v1/accounts/{account}/persons/{person}"}),listCapabilities:wt({method:"GET",fullPath:"/v1/accounts/{account}/capabilities",methodType:"list"}),listExternalAccounts:wt({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts",methodType:"list"}),listPersons:wt({method:"GET",fullPath:"/v1/accounts/{account}/persons",methodType:"list"}),reject:wt({method:"POST",fullPath:"/v1/accounts/{account}/reject"}),retrieveCurrent:wt({method:"GET",fullPath:"/v1/account"}),retrieveCapability:wt({method:"GET",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),retrieveExternalAccount:wt({method:"GET",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),retrievePerson:wt({method:"GET",fullPath:"/v1/accounts/{account}/persons/{person}"}),updateCapability:wt({method:"POST",fullPath:"/v1/accounts/{account}/capabilities/{capability}"}),updateExternalAccount:wt({method:"POST",fullPath:"/v1/accounts/{account}/external_accounts/{id}"}),updatePerson:wt({method:"POST",fullPath:"/v1/accounts/{account}/persons/{person}"})}),rge=j.method,sge=j.extend({create:rge({method:"POST",fullPath:"/v1/account_links"})}),ige=j.method,oge=j.extend({create:ige({method:"POST",fullPath:"/v1/account_sessions"})}),fg=j.method,age=j.extend({create:fg({method:"POST",fullPath:"/v1/apple_pay/domains"}),retrieve:fg({method:"GET",fullPath:"/v1/apple_pay/domains/{domain}"}),list:fg({method:"GET",fullPath:"/v1/apple_pay/domains",methodType:"list"}),del:fg({method:"DELETE",fullPath:"/v1/apple_pay/domains/{domain}"})}),fc=j.method,lge=j.extend({retrieve:fc({method:"GET",fullPath:"/v1/application_fees/{id}"}),list:fc({method:"GET",fullPath:"/v1/application_fees",methodType:"list"}),createRefund:fc({method:"POST",fullPath:"/v1/application_fees/{id}/refunds"}),listRefunds:fc({method:"GET",fullPath:"/v1/application_fees/{id}/refunds",methodType:"list"}),retrieveRefund:fc({method:"GET",fullPath:"/v1/application_fees/{fee}/refunds/{id}"}),updateRefund:fc({method:"POST",fullPath:"/v1/application_fees/{fee}/refunds/{id}"})}),cge=j.method,uge=j.extend({retrieve:cge({method:"GET",fullPath:"/v1/balance"})}),xO=j.method,dge=j.extend({retrieve:xO({method:"GET",fullPath:"/v1/balance_transactions/{id}"}),list:xO({method:"GET",fullPath:"/v1/balance_transactions",methodType:"list"})}),pc=j.method,hge=j.extend({create:pc({method:"POST",fullPath:"/v1/charges"}),retrieve:pc({method:"GET",fullPath:"/v1/charges/{charge}"}),update:pc({method:"POST",fullPath:"/v1/charges/{charge}"}),list:pc({method:"GET",fullPath:"/v1/charges",methodType:"list"}),capture:pc({method:"POST",fullPath:"/v1/charges/{charge}/capture"}),search:pc({method:"GET",fullPath:"/v1/charges/search",methodType:"search"})}),fge=j.method,pge=j.extend({retrieve:fge({method:"GET",fullPath:"/v1/confirmation_tokens/{confirmation_token}"})}),wO=j.method,mge=j.extend({retrieve:wO({method:"GET",fullPath:"/v1/country_specs/{country}"}),list:wO({method:"GET",fullPath:"/v1/country_specs",methodType:"list"})}),ch=j.method,gge=j.extend({create:ch({method:"POST",fullPath:"/v1/coupons"}),retrieve:ch({method:"GET",fullPath:"/v1/coupons/{coupon}"}),update:ch({method:"POST",fullPath:"/v1/coupons/{coupon}"}),list:ch({method:"GET",fullPath:"/v1/coupons",methodType:"list"}),del:ch({method:"DELETE",fullPath:"/v1/coupons/{coupon}"})}),Wi=j.method,yge=j.extend({create:Wi({method:"POST",fullPath:"/v1/credit_notes"}),retrieve:Wi({method:"GET",fullPath:"/v1/credit_notes/{id}"}),update:Wi({method:"POST",fullPath:"/v1/credit_notes/{id}"}),list:Wi({method:"GET",fullPath:"/v1/credit_notes",methodType:"list"}),listLineItems:Wi({method:"GET",fullPath:"/v1/credit_notes/{credit_note}/lines",methodType:"list"}),listPreviewLineItems:Wi({method:"GET",fullPath:"/v1/credit_notes/preview/lines",methodType:"list"}),preview:Wi({method:"GET",fullPath:"/v1/credit_notes/preview"}),voidCreditNote:Wi({method:"POST",fullPath:"/v1/credit_notes/{id}/void"})}),vge=j.method,_ge=j.extend({create:vge({method:"POST",fullPath:"/v1/customer_sessions"})}),He=j.method,xge=j.extend({create:He({method:"POST",fullPath:"/v1/customers"}),retrieve:He({method:"GET",fullPath:"/v1/customers/{customer}"}),update:He({method:"POST",fullPath:"/v1/customers/{customer}"}),list:He({method:"GET",fullPath:"/v1/customers",methodType:"list"}),del:He({method:"DELETE",fullPath:"/v1/customers/{customer}"}),createBalanceTransaction:He({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions"}),createFundingInstructions:He({method:"POST",fullPath:"/v1/customers/{customer}/funding_instructions"}),createSource:He({method:"POST",fullPath:"/v1/customers/{customer}/sources"}),createTaxId:He({method:"POST",fullPath:"/v1/customers/{customer}/tax_ids"}),deleteDiscount:He({method:"DELETE",fullPath:"/v1/customers/{customer}/discount"}),deleteSource:He({method:"DELETE",fullPath:"/v1/customers/{customer}/sources/{id}"}),deleteTaxId:He({method:"DELETE",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),listBalanceTransactions:He({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions",methodType:"list"}),listCashBalanceTransactions:He({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions",methodType:"list"}),listPaymentMethods:He({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods",methodType:"list"}),listSources:He({method:"GET",fullPath:"/v1/customers/{customer}/sources",methodType:"list"}),listTaxIds:He({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids",methodType:"list"}),retrieveBalanceTransaction:He({method:"GET",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),retrieveCashBalance:He({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance"}),retrieveCashBalanceTransaction:He({method:"GET",fullPath:"/v1/customers/{customer}/cash_balance_transactions/{transaction}"}),retrievePaymentMethod:He({method:"GET",fullPath:"/v1/customers/{customer}/payment_methods/{payment_method}"}),retrieveSource:He({method:"GET",fullPath:"/v1/customers/{customer}/sources/{id}"}),retrieveTaxId:He({method:"GET",fullPath:"/v1/customers/{customer}/tax_ids/{id}"}),search:He({method:"GET",fullPath:"/v1/customers/search",methodType:"search"}),updateBalanceTransaction:He({method:"POST",fullPath:"/v1/customers/{customer}/balance_transactions/{transaction}"}),updateCashBalance:He({method:"POST",fullPath:"/v1/customers/{customer}/cash_balance"}),updateSource:He({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}"}),verifySource:He({method:"POST",fullPath:"/v1/customers/{customer}/sources/{id}/verify"})}),pg=j.method,wge=j.extend({retrieve:pg({method:"GET",fullPath:"/v1/disputes/{dispute}"}),update:pg({method:"POST",fullPath:"/v1/disputes/{dispute}"}),list:pg({method:"GET",fullPath:"/v1/disputes",methodType:"list"}),close:pg({method:"POST",fullPath:"/v1/disputes/{dispute}/close"})}),bO=j.method,bge=j.extend({create:bO({method:"POST",fullPath:"/v1/ephemeral_keys",validator:(t,e)=>{if(!e.headers||!e.headers["Stripe-Version"])throw new Error("Passing apiVersion in a separate options hash is required to create an ephemeral key. See https://stripe.com/docs/api/versioning?lang=node")}}),del:bO({method:"DELETE",fullPath:"/v1/ephemeral_keys/{key}"})}),EO=j.method,Ege=j.extend({retrieve:EO({method:"GET",fullPath:"/v1/events/{id}"}),list:EO({method:"GET",fullPath:"/v1/events",methodType:"list"})}),TO=j.method,Tge=j.extend({retrieve:TO({method:"GET",fullPath:"/v1/exchange_rates/{rate_id}"}),list:TO({method:"GET",fullPath:"/v1/exchange_rates",methodType:"list"})}),mg=j.method,Sge=j.extend({create:mg({method:"POST",fullPath:"/v1/file_links"}),retrieve:mg({method:"GET",fullPath:"/v1/file_links/{link}"}),update:mg({method:"POST",fullPath:"/v1/file_links/{link}"}),list:mg({method:"GET",fullPath:"/v1/file_links",methodType:"list"})}),Cge=(t,e,n)=>{const r=(Math.round(Math.random()*1e16)+Math.round(Math.random()*1e16)).toString();n["Content-Type"]=`multipart/form-data; boundary=${r}`;const s=new TextEncoder;let i=new Uint8Array(0);const o=s.encode(`\r
`);function a(d){const h=i,p=d instanceof Uint8Array?d:new Uint8Array(s.encode(d));i=new Uint8Array(h.length+p.length+2),i.set(h),i.set(p,h.length),i.set(o,i.length-2)}function l(d){return`"${d.replace(/"|"/g,"%22").replace(/\r\n|\r|\n/g," ")}"`}const u=rpe(e);for(const d in u){if(!Object.prototype.hasOwnProperty.call(u,d))continue;const h=u[d];if(a(`--${r}`),Object.prototype.hasOwnProperty.call(h,"data")){const p=h;a(`Content-Disposition: form-data; name=${l(d)}; filename=${l(p.name||"blob")}`),a(`Content-Type: ${p.type||"application/octet-stream"}`),a(""),a(p.data)}else a(`Content-Disposition: form-data; name=${l(d)}`),a(""),a(h)}return a(`--${r}--`),i};function Ige(t,e,n,r){if(e=e||{},t!=="POST")return r(null,M0(e));this._stripe._platformFunctions.tryBufferData(e).then(s=>{const i=Cge(t,s,n);return r(null,i)}).catch(s=>r(s,null))}const qw=j.method,Pge=j.extend({create:qw({method:"POST",fullPath:"/v1/files",headers:{"Content-Type":"multipart/form-data"},host:"files.stripe.com"}),retrieve:qw({method:"GET",fullPath:"/v1/files/{file}"}),list:qw({method:"GET",fullPath:"/v1/files",methodType:"list"}),requestDataProcessor:Ige}),uh=j.method,Rge=j.extend({create:uh({method:"POST",fullPath:"/v1/invoiceitems"}),retrieve:uh({method:"GET",fullPath:"/v1/invoiceitems/{invoiceitem}"}),update:uh({method:"POST",fullPath:"/v1/invoiceitems/{invoiceitem}"}),list:uh({method:"GET",fullPath:"/v1/invoiceitems",methodType:"list"}),del:uh({method:"DELETE",fullPath:"/v1/invoiceitems/{invoiceitem}"})}),gg=j.method,Age=j.extend({retrieve:gg({method:"GET",fullPath:"/v1/invoice_rendering_templates/{template}"}),list:gg({method:"GET",fullPath:"/v1/invoice_rendering_templates",methodType:"list"}),archive:gg({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/archive"}),unarchive:gg({method:"POST",fullPath:"/v1/invoice_rendering_templates/{template}/unarchive"})}),Dt=j.method,Nge=j.extend({create:Dt({method:"POST",fullPath:"/v1/invoices"}),retrieve:Dt({method:"GET",fullPath:"/v1/invoices/{invoice}"}),update:Dt({method:"POST",fullPath:"/v1/invoices/{invoice}"}),list:Dt({method:"GET",fullPath:"/v1/invoices",methodType:"list"}),del:Dt({method:"DELETE",fullPath:"/v1/invoices/{invoice}"}),addLines:Dt({method:"POST",fullPath:"/v1/invoices/{invoice}/add_lines"}),createPreview:Dt({method:"POST",fullPath:"/v1/invoices/create_preview"}),finalizeInvoice:Dt({method:"POST",fullPath:"/v1/invoices/{invoice}/finalize"}),listLineItems:Dt({method:"GET",fullPath:"/v1/invoices/{invoice}/lines",methodType:"list"}),listUpcomingLines:Dt({method:"GET",fullPath:"/v1/invoices/upcoming/lines",methodType:"list"}),markUncollectible:Dt({method:"POST",fullPath:"/v1/invoices/{invoice}/mark_uncollectible"}),pay:Dt({method:"POST",fullPath:"/v1/invoices/{invoice}/pay"}),removeLines:Dt({method:"POST",fullPath:"/v1/invoices/{invoice}/remove_lines"}),retrieveUpcoming:Dt({method:"GET",fullPath:"/v1/invoices/upcoming"}),search:Dt({method:"GET",fullPath:"/v1/invoices/search",methodType:"search"}),sendInvoice:Dt({method:"POST",fullPath:"/v1/invoices/{invoice}/send"}),updateLines:Dt({method:"POST",fullPath:"/v1/invoices/{invoice}/update_lines"}),updateLineItem:Dt({method:"POST",fullPath:"/v1/invoices/{invoice}/lines/{line_item_id}"}),voidInvoice:Dt({method:"POST",fullPath:"/v1/invoices/{invoice}/void"})}),kge=j.method,Oge=j.extend({retrieve:kge({method:"GET",fullPath:"/v1/mandates/{mandate}"})}),SO=j.method,Ww="connect.stripe.com",Dge=j.extend({basePath:"/",authorizeUrl(t,e){t=t||{},e=e||{};let n="oauth/authorize";return e.express&&(n=`express/${n}`),t.response_type||(t.response_type="code"),t.client_id||(t.client_id=this._stripe.getClientId()),t.scope||(t.scope="read_write"),`https://${Ww}/${n}?${M0(t)}`},token:SO({method:"POST",path:"oauth/token",host:Ww}),deauthorize(t,...e){return t.client_id||(t.client_id=this._stripe.getClientId()),SO({method:"POST",path:"oauth/deauthorize",host:Ww}).apply(this,[t,...e])}}),Vr=j.method,jge=j.extend({create:Vr({method:"POST",fullPath:"/v1/payment_intents"}),retrieve:Vr({method:"GET",fullPath:"/v1/payment_intents/{intent}"}),update:Vr({method:"POST",fullPath:"/v1/payment_intents/{intent}"}),list:Vr({method:"GET",fullPath:"/v1/payment_intents",methodType:"list"}),applyCustomerBalance:Vr({method:"POST",fullPath:"/v1/payment_intents/{intent}/apply_customer_balance"}),cancel:Vr({method:"POST",fullPath:"/v1/payment_intents/{intent}/cancel"}),capture:Vr({method:"POST",fullPath:"/v1/payment_intents/{intent}/capture"}),confirm:Vr({method:"POST",fullPath:"/v1/payment_intents/{intent}/confirm"}),incrementAuthorization:Vr({method:"POST",fullPath:"/v1/payment_intents/{intent}/increment_authorization"}),search:Vr({method:"GET",fullPath:"/v1/payment_intents/search",methodType:"search"}),verifyMicrodeposits:Vr({method:"POST",fullPath:"/v1/payment_intents/{intent}/verify_microdeposits"})}),dh=j.method,Mge=j.extend({create:dh({method:"POST",fullPath:"/v1/payment_links"}),retrieve:dh({method:"GET",fullPath:"/v1/payment_links/{payment_link}"}),update:dh({method:"POST",fullPath:"/v1/payment_links/{payment_link}"}),list:dh({method:"GET",fullPath:"/v1/payment_links",methodType:"list"}),listLineItems:dh({method:"GET",fullPath:"/v1/payment_links/{payment_link}/line_items",methodType:"list"})}),yg=j.method,Lge=j.extend({create:yg({method:"POST",fullPath:"/v1/payment_method_configurations"}),retrieve:yg({method:"GET",fullPath:"/v1/payment_method_configurations/{configuration}"}),update:yg({method:"POST",fullPath:"/v1/payment_method_configurations/{configuration}"}),list:yg({method:"GET",fullPath:"/v1/payment_method_configurations",methodType:"list"})}),hh=j.method,Fge=j.extend({create:hh({method:"POST",fullPath:"/v1/payment_method_domains"}),retrieve:hh({method:"GET",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),update:hh({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}"}),list:hh({method:"GET",fullPath:"/v1/payment_method_domains",methodType:"list"}),validate:hh({method:"POST",fullPath:"/v1/payment_method_domains/{payment_method_domain}/validate"})}),mc=j.method,Vge=j.extend({create:mc({method:"POST",fullPath:"/v1/payment_methods"}),retrieve:mc({method:"GET",fullPath:"/v1/payment_methods/{payment_method}"}),update:mc({method:"POST",fullPath:"/v1/payment_methods/{payment_method}"}),list:mc({method:"GET",fullPath:"/v1/payment_methods",methodType:"list"}),attach:mc({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/attach"}),detach:mc({method:"POST",fullPath:"/v1/payment_methods/{payment_method}/detach"})}),gc=j.method,Uge=j.extend({create:gc({method:"POST",fullPath:"/v1/payouts"}),retrieve:gc({method:"GET",fullPath:"/v1/payouts/{payout}"}),update:gc({method:"POST",fullPath:"/v1/payouts/{payout}"}),list:gc({method:"GET",fullPath:"/v1/payouts",methodType:"list"}),cancel:gc({method:"POST",fullPath:"/v1/payouts/{payout}/cancel"}),reverse:gc({method:"POST",fullPath:"/v1/payouts/{payout}/reverse"})}),fh=j.method,$ge=j.extend({create:fh({method:"POST",fullPath:"/v1/plans"}),retrieve:fh({method:"GET",fullPath:"/v1/plans/{plan}"}),update:fh({method:"POST",fullPath:"/v1/plans/{plan}"}),list:fh({method:"GET",fullPath:"/v1/plans",methodType:"list"}),del:fh({method:"DELETE",fullPath:"/v1/plans/{plan}"})}),ph=j.method,Bge=j.extend({create:ph({method:"POST",fullPath:"/v1/prices"}),retrieve:ph({method:"GET",fullPath:"/v1/prices/{price}"}),update:ph({method:"POST",fullPath:"/v1/prices/{price}"}),list:ph({method:"GET",fullPath:"/v1/prices",methodType:"list"}),search:ph({method:"GET",fullPath:"/v1/prices/search",methodType:"search"})}),ds=j.method,zge=j.extend({create:ds({method:"POST",fullPath:"/v1/products"}),retrieve:ds({method:"GET",fullPath:"/v1/products/{id}"}),update:ds({method:"POST",fullPath:"/v1/products/{id}"}),list:ds({method:"GET",fullPath:"/v1/products",methodType:"list"}),del:ds({method:"DELETE",fullPath:"/v1/products/{id}"}),createFeature:ds({method:"POST",fullPath:"/v1/products/{product}/features"}),deleteFeature:ds({method:"DELETE",fullPath:"/v1/products/{product}/features/{id}"}),listFeatures:ds({method:"GET",fullPath:"/v1/products/{product}/features",methodType:"list"}),retrieveFeature:ds({method:"GET",fullPath:"/v1/products/{product}/features/{id}"}),search:ds({method:"GET",fullPath:"/v1/products/search",methodType:"search"})}),vg=j.method,Gge=j.extend({create:vg({method:"POST",fullPath:"/v1/promotion_codes"}),retrieve:vg({method:"GET",fullPath:"/v1/promotion_codes/{promotion_code}"}),update:vg({method:"POST",fullPath:"/v1/promotion_codes/{promotion_code}"}),list:vg({method:"GET",fullPath:"/v1/promotion_codes",methodType:"list"})}),hs=j.method,qge=j.extend({create:hs({method:"POST",fullPath:"/v1/quotes"}),retrieve:hs({method:"GET",fullPath:"/v1/quotes/{quote}"}),update:hs({method:"POST",fullPath:"/v1/quotes/{quote}"}),list:hs({method:"GET",fullPath:"/v1/quotes",methodType:"list"}),accept:hs({method:"POST",fullPath:"/v1/quotes/{quote}/accept"}),cancel:hs({method:"POST",fullPath:"/v1/quotes/{quote}/cancel"}),finalizeQuote:hs({method:"POST",fullPath:"/v1/quotes/{quote}/finalize"}),listComputedUpfrontLineItems:hs({method:"GET",fullPath:"/v1/quotes/{quote}/computed_upfront_line_items",methodType:"list"}),listLineItems:hs({method:"GET",fullPath:"/v1/quotes/{quote}/line_items",methodType:"list"}),pdf:hs({method:"GET",fullPath:"/v1/quotes/{quote}/pdf",host:"files.stripe.com",streaming:!0})}),mh=j.method,Wge=j.extend({create:mh({method:"POST",fullPath:"/v1/refunds"}),retrieve:mh({method:"GET",fullPath:"/v1/refunds/{refund}"}),update:mh({method:"POST",fullPath:"/v1/refunds/{refund}"}),list:mh({method:"GET",fullPath:"/v1/refunds",methodType:"list"}),cancel:mh({method:"POST",fullPath:"/v1/refunds/{refund}/cancel"})}),Hw=j.method,Hge=j.extend({retrieve:Hw({method:"GET",fullPath:"/v1/reviews/{review}"}),list:Hw({method:"GET",fullPath:"/v1/reviews",methodType:"list"}),approve:Hw({method:"POST",fullPath:"/v1/reviews/{review}/approve"})}),Kge=j.method,Qge=j.extend({list:Kge({method:"GET",fullPath:"/v1/setup_attempts",methodType:"list"})}),wa=j.method,Yge=j.extend({create:wa({method:"POST",fullPath:"/v1/setup_intents"}),retrieve:wa({method:"GET",fullPath:"/v1/setup_intents/{intent}"}),update:wa({method:"POST",fullPath:"/v1/setup_intents/{intent}"}),list:wa({method:"GET",fullPath:"/v1/setup_intents",methodType:"list"}),cancel:wa({method:"POST",fullPath:"/v1/setup_intents/{intent}/cancel"}),confirm:wa({method:"POST",fullPath:"/v1/setup_intents/{intent}/confirm"}),verifyMicrodeposits:wa({method:"POST",fullPath:"/v1/setup_intents/{intent}/verify_microdeposits"})}),_g=j.method,Xge=j.extend({create:_g({method:"POST",fullPath:"/v1/shipping_rates"}),retrieve:_g({method:"GET",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),update:_g({method:"POST",fullPath:"/v1/shipping_rates/{shipping_rate_token}"}),list:_g({method:"GET",fullPath:"/v1/shipping_rates",methodType:"list"})}),gh=j.method,Jge=j.extend({create:gh({method:"POST",fullPath:"/v1/sources"}),retrieve:gh({method:"GET",fullPath:"/v1/sources/{source}"}),update:gh({method:"POST",fullPath:"/v1/sources/{source}"}),listSourceTransactions:gh({method:"GET",fullPath:"/v1/sources/{source}/source_transactions",methodType:"list"}),verify:gh({method:"POST",fullPath:"/v1/sources/{source}/verify"})}),ba=j.method,Zge=j.extend({create:ba({method:"POST",fullPath:"/v1/subscription_items"}),retrieve:ba({method:"GET",fullPath:"/v1/subscription_items/{item}"}),update:ba({method:"POST",fullPath:"/v1/subscription_items/{item}"}),list:ba({method:"GET",fullPath:"/v1/subscription_items",methodType:"list"}),del:ba({method:"DELETE",fullPath:"/v1/subscription_items/{item}"}),createUsageRecord:ba({method:"POST",fullPath:"/v1/subscription_items/{subscription_item}/usage_records"}),listUsageRecordSummaries:ba({method:"GET",fullPath:"/v1/subscription_items/{subscription_item}/usage_record_summaries",methodType:"list"})}),yc=j.method,eye=j.extend({create:yc({method:"POST",fullPath:"/v1/subscription_schedules"}),retrieve:yc({method:"GET",fullPath:"/v1/subscription_schedules/{schedule}"}),update:yc({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}"}),list:yc({method:"GET",fullPath:"/v1/subscription_schedules",methodType:"list"}),cancel:yc({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/cancel"}),release:yc({method:"POST",fullPath:"/v1/subscription_schedules/{schedule}/release"})}),Hi=j.method,tye=j.extend({create:Hi({method:"POST",fullPath:"/v1/subscriptions"}),retrieve:Hi({method:"GET",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),update:Hi({method:"POST",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),list:Hi({method:"GET",fullPath:"/v1/subscriptions",methodType:"list"}),cancel:Hi({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}"}),deleteDiscount:Hi({method:"DELETE",fullPath:"/v1/subscriptions/{subscription_exposed_id}/discount"}),resume:Hi({method:"POST",fullPath:"/v1/subscriptions/{subscription}/resume"}),search:Hi({method:"GET",fullPath:"/v1/subscriptions/search",methodType:"search"})}),CO=j.method,nye=j.extend({retrieve:CO({method:"GET",fullPath:"/v1/tax_codes/{id}"}),list:CO({method:"GET",fullPath:"/v1/tax_codes",methodType:"list"})}),xg=j.method,rye=j.extend({create:xg({method:"POST",fullPath:"/v1/tax_ids"}),retrieve:xg({method:"GET",fullPath:"/v1/tax_ids/{id}"}),list:xg({method:"GET",fullPath:"/v1/tax_ids",methodType:"list"}),del:xg({method:"DELETE",fullPath:"/v1/tax_ids/{id}"})}),wg=j.method,sye=j.extend({create:wg({method:"POST",fullPath:"/v1/tax_rates"}),retrieve:wg({method:"GET",fullPath:"/v1/tax_rates/{tax_rate}"}),update:wg({method:"POST",fullPath:"/v1/tax_rates/{tax_rate}"}),list:wg({method:"GET",fullPath:"/v1/tax_rates",methodType:"list"})}),IO=j.method,iye=j.extend({create:IO({method:"POST",fullPath:"/v1/tokens"}),retrieve:IO({method:"GET",fullPath:"/v1/tokens/{token}"})}),yh=j.method,oye=j.extend({create:yh({method:"POST",fullPath:"/v1/topups"}),retrieve:yh({method:"GET",fullPath:"/v1/topups/{topup}"}),update:yh({method:"POST",fullPath:"/v1/topups/{topup}"}),list:yh({method:"GET",fullPath:"/v1/topups",methodType:"list"}),cancel:yh({method:"POST",fullPath:"/v1/topups/{topup}/cancel"})}),Ki=j.method,aye=j.extend({create:Ki({method:"POST",fullPath:"/v1/transfers"}),retrieve:Ki({method:"GET",fullPath:"/v1/transfers/{transfer}"}),update:Ki({method:"POST",fullPath:"/v1/transfers/{transfer}"}),list:Ki({method:"GET",fullPath:"/v1/transfers",methodType:"list"}),createReversal:Ki({method:"POST",fullPath:"/v1/transfers/{id}/reversals"}),listReversals:Ki({method:"GET",fullPath:"/v1/transfers/{id}/reversals",methodType:"list"}),retrieveReversal:Ki({method:"GET",fullPath:"/v1/transfers/{transfer}/reversals/{id}"}),updateReversal:Ki({method:"POST",fullPath:"/v1/transfers/{transfer}/reversals/{id}"})}),vh=j.method,lye=j.extend({create:vh({method:"POST",fullPath:"/v1/webhook_endpoints"}),retrieve:vh({method:"GET",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),update:vh({method:"POST",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"}),list:vh({method:"GET",fullPath:"/v1/webhook_endpoints",methodType:"list"}),del:vh({method:"DELETE",fullPath:"/v1/webhook_endpoints/{webhook_endpoint}"})}),cye=ft("apps",{Secrets:Fme}),uye=ft("billing",{Alerts:Tpe,CreditBalanceSummary:Fpe,CreditBalanceTransactions:Vpe,CreditGrants:Upe,MeterEventAdjustments:tme,MeterEvents:cme,Meters:hme}),dye=ft("billingPortal",{Configurations:Npe,Sessions:Ume}),hye=ft("checkout",{Sessions:$me}),fye=ft("climate",{Orders:fme,Products:wme,Suppliers:Gme}),pye=ft("entitlements",{ActiveEntitlements:Epe,Features:Qpe}),mye=ft("financialConnections",{Accounts:bpe,Sessions:Bme,Transactions:Qme}),gye=ft("forwarding",{Requests:Mme}),yye=ft("identity",{VerificationReports:tge,VerificationSessions:nge}),vye=ft("issuing",{Authorizations:Cpe,Cardholders:Ppe,Cards:Ape,Disputes:qpe,PersonalizationDesigns:_me,PhysicalBundles:xme,Tokens:Wme,Transactions:Yme}),_ye=ft("radar",{EarlyFraudWarnings:Wpe,ValueListItems:Zme,ValueLists:ege}),xye=ft("reporting",{ReportRuns:Dme,ReportTypes:jme}),wye=ft("sigma",{ScheduledQueryRuns:Lme}),bye=ft("tax",{Calculations:Ipe,Registrations:Ome,Settings:zme,Transactions:Xme}),Eye=ft("terminal",{Configurations:kpe,ConnectionTokens:Mpe,Locations:Zpe,Readers:Tme}),Tye=ft("testHelpers",{ConfirmationTokens:Dpe,Customers:zpe,Refunds:kme,TestClocks:qme,Issuing:ft("issuing",{Authorizations:Spe,Cards:Rpe,PersonalizationDesigns:vme,Transactions:Kme}),Terminal:ft("terminal",{Readers:Eme}),Treasury:ft("treasury",{InboundTransfers:Xpe,OutboundPayments:pme,OutboundTransfers:gme,ReceivedCredits:Cme,ReceivedDebits:Rme})}),Sye=ft("treasury",{CreditReversals:$pe,DebitReversals:Gpe,FinancialAccounts:Ype,InboundTransfers:Jpe,OutboundPayments:mme,OutboundTransfers:yme,ReceivedCredits:Ime,ReceivedDebits:Ame,TransactionEntries:Hme,Transactions:Jme}),Cye=ft("v2",{Billing:ft("billing",{MeterEventAdjustments:rme,MeterEventSession:ime,MeterEventStream:ame,MeterEvents:dme}),Core:ft("core",{EventDestinations:Hpe,Events:Kpe})}),bg=Object.freeze(Object.defineProperty({__proto__:null,Account:_O,AccountLinks:sge,AccountSessions:oge,Accounts:_O,ApplePayDomains:age,ApplicationFees:lge,Apps:cye,Balance:uge,BalanceTransactions:dge,Billing:uye,BillingPortal:dye,Charges:hge,Checkout:hye,Climate:fye,ConfirmationTokens:pge,CountrySpecs:mge,Coupons:gge,CreditNotes:yge,CustomerSessions:_ge,Customers:xge,Disputes:wge,Entitlements:pye,EphemeralKeys:bge,Events:Ege,ExchangeRates:Tge,FileLinks:Sge,Files:Pge,FinancialConnections:mye,Forwarding:gye,Identity:yye,InvoiceItems:Rge,InvoiceRenderingTemplates:Age,Invoices:Nge,Issuing:vye,Mandates:Oge,OAuth:Dge,PaymentIntents:jge,PaymentLinks:Mge,PaymentMethodConfigurations:Lge,PaymentMethodDomains:Fge,PaymentMethods:Vge,Payouts:Uge,Plans:$ge,Prices:Bge,Products:zge,PromotionCodes:Gge,Quotes:qge,Radar:_ye,Refunds:Wge,Reporting:xye,Reviews:Hge,SetupAttempts:Qge,SetupIntents:Yge,ShippingRates:Xge,Sigma:wye,Sources:Jge,SubscriptionItems:Zge,SubscriptionSchedules:eye,Subscriptions:tye,Tax:bye,TaxCodes:nye,TaxIds:rye,TaxRates:sye,Terminal:Eye,TestHelpers:Tye,Tokens:iye,Topups:oye,Transfers:aye,Treasury:Sye,V2:Cye,WebhookEndpoints:lye},Symbol.toStringTag,{value:"Module"})),PO="api.stripe.com",RO="443",AO="/v1/",NO=xpe,kO=8e4,OO=5,DO=.5,Iye=["name","version","url","partner_id"],jO=["authenticator","apiVersion","typescript","maxNetworkRetries","httpAgent","httpClient","timeout","host","port","protocol","telemetry","appInfo","stripeAccount","stripeContext"],Pye=t=>new cf(t,j.MAX_BUFFERED_REQUEST_METRICS);function Rye(t,e=Pye){r.PACKAGE_VERSION="17.6.0",r.USER_AGENT=Object.assign({bindings_version:r.PACKAGE_VERSION,lang:"node",publisher:"stripe",uname:null,typescript:!1},spe()),r.StripeResource=j,r.resources=bg,r.HttpClient=Tr,r.HttpClientResponse=wB,r.CryptoProvider=bB;function n(s=t){return nO(s)}r.webhooks=Object.assign(n,nO(t));function r(s,i={}){if(!(this instanceof r))return new r(s,i);const o=this._getPropsFromConfig(i);this._platformFunctions=t,Object.defineProperty(this,"_emitter",{value:this._platformFunctions.createEmitter(),enumerable:!1,configurable:!1,writable:!1}),this.VERSION=r.PACKAGE_VERSION,this.on=this._emitter.on.bind(this._emitter),this.once=this._emitter.once.bind(this._emitter),this.off=this._emitter.removeListener.bind(this._emitter);const a=o.httpAgent||null;this._api={host:o.host||PO,port:o.port||RO,protocol:o.protocol||"https",basePath:AO,version:o.apiVersion||NO,timeout:kw("timeout",o.timeout,kO),maxNetworkRetries:kw("maxNetworkRetries",o.maxNetworkRetries,2),agent:a,httpClient:o.httpClient||(a?this._platformFunctions.createNodeHttpClient(a):this._platformFunctions.createDefaultHttpClient()),dev:!1,stripeAccount:o.stripeAccount||null,stripeContext:o.stripeContext||null};const l=o.typescript||!1;l!==r.USER_AGENT.typescript&&(r.USER_AGENT.typescript=l),o.appInfo&&this._setAppInfo(o.appInfo),this._prepResources(),this._setAuthenticator(s,o.authenticator),this.errors=A2,this.webhooks=n(),this._prevRequestMetrics=[],this._enableTelemetry=o.telemetry!==!1,this._requestSender=e(this),this.StripeResource=r.StripeResource}return r.errors=A2,r.createNodeHttpClient=t.createNodeHttpClient,r.createFetchHttpClient=t.createFetchHttpClient,r.createNodeCryptoProvider=t.createNodeCryptoProvider,r.createSubtleCryptoProvider=t.createSubtleCryptoProvider,r.prototype={_appInfo:void 0,on:null,off:null,once:null,VERSION:null,StripeResource:null,webhooks:null,errors:null,_api:null,_prevRequestMetrics:null,_emitter:null,_enableTelemetry:null,_requestSender:null,_platformFunctions:null,rawRequest(s,i,o,a){return this._requestSender._rawRequest(s,i,o,a)},_setAuthenticator(s,i){if(s&&i)throw new Error("Can't specify both apiKey and authenticator");if(!s&&!i)throw new Error("Neither apiKey nor config.authenticator provided");this._authenticator=s?hT(s):i},_setAppInfo(s){if(s&&typeof s!="object")throw new Error("AppInfo must be an object.");if(s&&!s.name)throw new Error("AppInfo.name is required");s=s||{},this._appInfo=Iye.reduce((i,o)=>(typeof s[o]=="string"&&(i=i||{},i[o]=s[o]),i),void 0)},_setApiField(s,i){this._api[s]=i},getApiField(s){return this._api[s]},setClientId(s){this._clientId=s},getClientId(){return this._clientId},getConstant:s=>{switch(s){case"DEFAULT_HOST":return PO;case"DEFAULT_PORT":return RO;case"DEFAULT_BASE_PATH":return AO;case"DEFAULT_API_VERSION":return NO;case"DEFAULT_TIMEOUT":return kO;case"MAX_NETWORK_RETRY_DELAY_SEC":return OO;case"INITIAL_NETWORK_RETRY_DELAY_SEC":return DO}return r[s]},getMaxNetworkRetries(){return this.getApiField("maxNetworkRetries")},_setApiNumberField(s,i,o){const a=kw(s,i,o);this._setApiField(s,a)},getMaxNetworkRetryDelay(){return OO},getInitialNetworkRetryDelay(){return DO},getClientUserAgent(s){return this.getClientUserAgentSeeded(r.USER_AGENT,s)},getClientUserAgentSeeded(s,i){this._platformFunctions.getUname().then(o=>{var a;const l={};for(const d in s)Object.prototype.hasOwnProperty.call(s,d)&&(l[d]=encodeURIComponent((a=s[d])!==null&&a!==void 0?a:"null"));l.uname=encodeURIComponent(o||"UNKNOWN");const u=this.getApiField("httpClient");u&&(l.httplib=encodeURIComponent(u.getClientName())),this._appInfo&&(l.application=this._appInfo),i(JSON.stringify(l))})},getAppInfoAsString(){if(!this._appInfo)return"";let s=this._appInfo.name;return this._appInfo.version&&(s+=`/${this._appInfo.version}`),this._appInfo.url&&(s+=` (${this._appInfo.url})`),s},getTelemetryEnabled(){return this._enableTelemetry},_prepResources(){for(const s in bg)Object.prototype.hasOwnProperty.call(bg,s)&&(this[tpe(s)]=new bg[s](this))},_getPropsFromConfig(s){if(!s)return{};const i=typeof s=="string";if(!(s===Object(s)&&!Array.isArray(s))&&!i)throw new Error("Config must either be an object or a string");if(i)return{apiVersion:s};if(Object.keys(s).filter(l=>!jO.includes(l)).length>0)throw new Error(`Config object may only contain the following: ${jO.join(", ")}`);return s},parseThinEvent(s,i,o,a,l,u){return this.webhooks.constructEvent(s,i,o,a,l,u)}},r}const Aye=Rye(new Yue),Nye=new Aye("",{apiVersion:"2024-12-18.acacia"}),kye=async t=>{try{return(await Nye.checkout.sessions.retrieve(t)).payment_status==="paid"}catch(e){return console.error("Error checking subscription status:",e),!1}};function Oye(){const t=Qe(),{toast:e}=gr(),[n]=One(),{user:r,refreshUser:s}=Yt(),[i,o]=g.useState(!0);return g.useEffect(()=>{(async()=>{try{const l=n.get("session_id");if(!l)throw new Error("No session ID found");if(!await kye(l))throw new Error("Payment verification failed");s&&await s(),e({title:"Subscription Successful!",description:"Thank you for subscribing. Your account has been upgraded."}),setTimeout(()=>{t("/dashboard")},3e3)}catch(l){console.error("Subscription verification error:",l),e({title:"Verification Failed",description:"There was an issue verifying your subscription. Please contact support.",variant:"destructive"}),setTimeout(()=>{t("/subscription")},3e3)}finally{o(!1)}})()},[t,e,n,s]),c.jsx("div",{className:"container py-16",children:c.jsx("div",{className:"max-w-md mx-auto text-center",children:i?c.jsxs(c.Fragment,{children:[c.jsx(GC,{className:"w-16 h-16 text-primary mx-auto mb-6 animate-spin"}),c.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Verifying Your Subscription"}),c.jsx("p",{className:"text-muted-foreground",children:"Please wait while we verify your payment..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(zC,{className:"w-16 h-16 text-primary mx-auto mb-6 animate-bounce"}),c.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Subscription Successful!"}),c.jsx("p",{className:"text-muted-foreground mb-6",children:"Thank you for subscribing. You will be redirected to the dashboard shortly."})]})})})}function Dye(){const t=Qe(),{toast:e}=gr();return g.useEffect(()=>{e({title:"Subscription Cancelled",description:"Your subscription was not completed. You can try again anytime.",variant:"destructive"})},[e]),c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-neon-purple to-black p-8 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(KU,{className:"w-24 h-24 text-red-500 mx-auto mb-8"}),c.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Subscription Cancelled"}),c.jsx("p",{className:"text-white/60 text-lg mb-8",children:"Your subscription was not completed. You can try again anytime."}),c.jsx(te,{onClick:()=>t("/subscription"),className:"bg-neon-green hover:bg-neon-green/90 text-black",children:"Try Again"})]})})}const jye=void 0;console.error("Gemini API key is not configured");console.error("YouTube API key is not configured");const Mye=new A0(jye),a6=Mye.getGenerativeModel({model:"gemini-pro"}),Lye=t=>{try{if(console.log("Extracting video ID from URL:",t),!t.startsWith("http://")&&!t.startsWith("https://"))throw new Error("URL must start with http:// or https://");const e=new URL(t);let n="";if(e.hostname==="youtu.be"?(n=e.pathname.slice(1),console.log("Extracted video ID from youtu.be format:",n)):e.hostname.includes("youtube.com")&&e.pathname.startsWith("/embed/")?(n=e.pathname.split("/embed/")[1],console.log("Extracted video ID from embed format:",n)):e.hostname.includes("youtube.com")&&(n=e.searchParams.get("v")||"",console.log("Extracted video ID from youtube.com format:",n)),n=n.split("&")[0],n=n.split("?")[0],n=n.split("#")[0],!n||!/^[a-zA-Z0-9_-]{11}$/.test(n))throw new Error("Invalid YouTube video ID. Please check your URL format.");return n}catch(e){throw console.error("Error extracting video ID:",e),e instanceof Error?e.message.includes("Invalid URL")?new Error("Please enter a complete URL including https:// or http://"):e:new Error("Failed to extract video ID from URL")}},Fye=async t=>{throw new Error("YouTube API key is not configured. Please set VITE_YOUTUBE_API_KEY in your .env file.")},Vye=async t=>{throw new Error("Gemini API key is not configured. Please check your environment variables.")},Uye=async t=>{try{const e=Lye(t),n=await Fye(e),r=`Create educational flashcards based on this YouTube video:
    Title: ${n.title}
    Channel: ${n.channelTitle}
    Description: ${n.description}

    Create 5 flashcards that test understanding of the key concepts from this video.
    Format the response as a valid JSON array with exactly this format, no markdown or code blocks:
    [{"term": "question here", "definition": "answer here"}]`,o=(await(await a6.generateContent(r)).response).text();try{const a=o.replace(/```json\n|\n```/g,"").trim(),l=JSON.parse(a);if(!Array.isArray(l)||!l.every(u=>typeof u=="object"&&"term"in u&&"definition"in u))throw new Error("Invalid response format");return l}catch(a){throw console.error("Error parsing flashcards:",a),new Error("Failed to generate valid flashcards. Please try again.")}}catch(e){throw console.error("Error generating flashcards from YouTube:",e),e instanceof Error?e:new Error("Failed to generate flashcards. Please try again.")}},$ye=async t=>{throw new Error("Gemini API key is not configured")},Bye=async t=>{if(!t)throw new Error("No text provided for summarization");try{const e=`Summarize the following text in a clear and concise way: ${t}`;return(await(await a6.generateContent(e)).response).text()}catch(e){throw console.error("Error generating summary:",e),new Error("Failed to generate summary. Please try again.")}},zye=async(t,e)=>{throw new Error("Gemini API key is not configured. Please check your environment variables.")},Gye=void 0,qye=new A0(Gye),Wye=qye.getGenerativeModel({model:"gemini-pro"});async function Hye(t,e=3){try{const n=t.performance.filter(l=>l.score<70).map(l=>l.topic),r=t.performance.filter(l=>l.score>=70).map(l=>l.topic),s=`You are an AI tutor creating personalized flashcards. Generate ${e} flashcards based on this student profile:

Learning Profile:
- Goals: ${t.goals.map(l=>`${l.topic} (${l.level})`).join(", ")}
- Areas needing improvement: ${n.join(", ")||"None identified"}
- Strong areas: ${r.join(", ")||"None identified"}

Generate flashcards that will help the student learn effectively. Focus more on weak topics if any are identified.

Return the response in this exact JSON format:
{
  "flashcards": [
    {
      "term": "question or concept",
      "definition": "detailed explanation or answer",
      "difficulty": "easy|medium|hard",
      "topic": "relevant subject area"
    }
  ]
}

Make sure the JSON is valid and properly formatted.`,a=(await(await Wye.generateContent(s)).response).text();try{const u=JSON.parse(a).flashcards||[];if(!Array.isArray(u)||u.length===0)throw new Error("Invalid flashcards format");return u.map(d=>({term:String(d.term||""),definition:String(d.definition||""),difficulty:d.difficulty||"medium",topic:String(d.topic||"General"),relevanceScore:Qye(d,t)}))}catch(l){return console.error("Error parsing AI response:",l),console.log("Raw AI response:",a),Kye(e,t)}}catch(n){throw console.error("Error generating personalized flashcards:",n),new Error("Failed to generate personalized flashcards")}}function Kye(t,e){const n=e.goals[0]||{topic:"General Learning"};return Array.from({length:t},(r,s)=>({term:`${n.topic} Concept ${s+1}`,definition:`This is a basic concept in ${n.topic}. Please try generating flashcards again for more specific content.`,difficulty:"medium",topic:n.topic,relevanceScore:50}))}function Qye(t,e){let n=50;const r=e.performance.find(i=>i.topic===t.topic);r?n-=r.score/2:n+=20;const s={easy:e.engagementMetrics.preferredLevel==="beginner"?20:-10,medium:e.engagementMetrics.preferredLevel==="intermediate"?20:0,hard:e.engagementMetrics.preferredLevel==="advanced"?20:-10};return n+=s[t.difficulty]||0,Math.max(0,Math.min(100,n))}const Yye=void 0,Xye=new A0(Yye);async function Jye(t){try{const e=Xye.getGenerativeModel({model:"gemini-pro"}),n=`Based on the user's context, generate 5 personalized topic recommendations.
    User Context:
    - Current Level: ${t.currentLevel}
    - Primary Interests: ${t.userInterests.primaryInterests.join(", ")}
    - Struggling Topics: ${t.userInterests.strugglingTopics.join(", ")}
    - Strong Topics: ${t.userInterests.strongTopics.join(", ")}
    
    Return the recommendations in this exact JSON format without any markdown or code blocks:
    [{"title": "Topic Title", "description": "Topic Description", "matchScore": 85, "difficulty": "medium", "prerequisites": ["topic1", "topic2"], "estimatedTimeMinutes": 30}]`,i=(await(await e.generateContent(n)).response).text();try{const o=i.replace(/```json\n|\n```/g,"").trim(),a=JSON.parse(o);if(!Array.isArray(a)||!a.every(l=>typeof l=="object"&&"title"in l&&"description"in l&&"matchScore"in l&&"difficulty"in l&&"prerequisites"in l&&"estimatedTimeMinutes"in l))throw new Error("Invalid recommendation format");return a.map(l=>({...l,matchScore:Math.min(100,Math.max(0,l.matchScore)),difficulty:l.difficulty}))}catch(o){return console.error("Error parsing recommendations:",o),MO(t)}}catch(e){return console.error("Error generating topic recommendations:",e),MO(t)}}function MO(t){return[{id:"1",name:t.userInterests.primaryInterests[0]||"Getting Started",description:"Introduction to key concepts and fundamentals",matchScore:90,difficulty:"easy",prerequisites:[],estimatedTimeMinutes:30},{id:"2",name:"Building Blocks",description:"Essential components and patterns",matchScore:85,difficulty:"easy",prerequisites:["Getting Started"],estimatedTimeMinutes:45},{id:"3",name:"Common Challenges",description:"Addressing frequent problems and solutions",matchScore:80,difficulty:"medium",prerequisites:["Building Blocks"],estimatedTimeMinutes:60},{id:"4",name:"Advanced Concepts",description:"Deep dive into complex topics",matchScore:75,difficulty:"hard",prerequisites:["Common Challenges"],estimatedTimeMinutes:90}]}const Zye={id:"1",goals:[{topic:"Programming",level:"intermediate",description:"Learn Python programming fundamentals and intermediate concepts"}],performance:[{topic:"Variables",score:90,attempts:3,timeSpent:1200,lastAttempt:"2024-01-10T10:00:00Z"},{topic:"Loops",score:60,attempts:2,timeSpent:1800,lastAttempt:"2024-01-09T15:00:00Z"},{topic:"Functions",score:50,attempts:1,timeSpent:900,lastAttempt:"2024-01-08T14:00:00Z"}],engagementMetrics:{totalTimeSpent:3900,preferredLevel:"beginner",completedTopics:["Variables"],skippedTopics:["Classes"]}},eve=({card:t,isFlipped:e,onFlip:n,isPersonalized:r=!1})=>{const s=i=>{switch(i){case"easy":return"text-green-500";case"medium":return"text-yellow-500";case"hard":return"text-red-500";default:return""}};return c.jsx("div",{className:"flashcard-container",onClick:n,children:c.jsxs("div",{className:`flashcard ${e?"flipped":""}`,children:[c.jsx("div",{className:"card-face card-front",children:c.jsxs("div",{className:"card-content",children:[c.jsx("h3",{className:"card-title",children:"Question"}),c.jsx("p",{className:"card-text",children:t.term}),r&&"difficulty"in t&&c.jsxs("span",{className:`mt-4 ${s(t.difficulty)}`,children:["Difficulty: ",t.difficulty]})]})}),c.jsx("div",{className:"card-face card-back",children:c.jsxs("div",{className:"card-content",children:[c.jsx("h3",{className:"card-title",children:"Answer"}),c.jsx("p",{className:"card-text",children:t.definition}),r&&"topic"in t&&c.jsxs("p",{className:"mt-4 text-white/60",children:["Topic: ",t.topic]})]})})]})})},tve=()=>{Qe();const[t,e]=g.useState(!1),[n,r]=g.useState(""),[s,i]=g.useState(""),[o,a]=g.useState([]),[l,u]=g.useState(0),[d,h]=g.useState(!1),[p,m]=g.useState(!1),[y,_]=g.useState(3),[b,x]=g.useState([]),[E,w]=g.useState(!1),[I,k]=g.useState(""),[M,C]=g.useState(!1),[S,P]=g.useState(3),{toast:R}=gr();g.useEffect(()=>{p&&O()},[p]);const O=async()=>{try{const Y={learningGoals:[{id:"1",title:n||"Learning",description:`Master ${n||"the subject"}`,priority:"high",status:"in_progress"}],topicEngagement:[],userInterests:{primaryInterests:n?[n]:[],secondaryInterests:[],strugglingTopics:[],strongTopics:[]},completedTopics:[],currentLevel:"beginner"},ee=await Jye(Y);x(ee)}catch(Y){console.error("Error loading recommendations:",Y),R({title:"Error",description:"Failed to load recommendations",variant:"destructive"})}},D=async Y=>{Y.preventDefault();try{if(!I.trim()&&!p){R({title:"Error",description:"Please enter some text to generate flashcards.",variant:"destructive"});return}e(!0);let ee;if(p)ee=await Hye(Zye,S);else if(M){if(!I.includes("youtube.com")&&!I.includes("youtu.be"))throw new Error("Please enter a valid YouTube URL");ee=await Uye(I),ee=ee.slice(0,S)}else ee=await Vye(I),ee=ee.slice(0,S);a(ee),p||k(""),u(0),h(!1),R({title:"Success!",description:"Flashcards generated successfully."})}catch(ee){console.error("Error generating flashcards:",ee),R({title:"Error",description:ee instanceof Error?ee.message:"Failed to generate flashcards. Please try again.",variant:"destructive"}),a([])}finally{e(!1)}},N=()=>{h(!1),u(Y=>(Y+1)%o.length)},Z=()=>{h(!1),u(Y=>(Y-1+o.length)%o.length)},de=()=>{h(!d)};return c.jsx("div",{className:"container mx-auto px-4 py-8",children:c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-8 text-center",children:[c.jsx("h1",{className:"text-4xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-purple-500",children:"Flashcards"}),c.jsx("p",{className:"text-lg text-white/60 mb-8",children:"Generate and study flashcards using AI"})]}),c.jsxs("div",{className:"mode-toggles",children:[c.jsxs("button",{className:`mode-toggle ${!p&&!M?"active":""}`,onClick:()=>{m(!1),C(!1)},children:[c.jsx(js,{className:"w-5 h-5"}),"Text Mode"]}),c.jsxs("button",{className:`mode-toggle ${M?"active":""}`,onClick:()=>{C(!0),m(!1)},children:[c.jsx(l$,{className:"w-5 h-5"}),"YouTube Mode"]}),c.jsxs("button",{className:`mode-toggle ${p?"active":""}`,onClick:()=>{m(!0),C(!1)},children:[c.jsx(i$,{className:"w-5 h-5"}),"Personalized Mode"]})]}),c.jsxs("form",{onSubmit:D,className:"input-container mb-8",children:[!p&&c.jsxs("div",{className:"space-y-4",children:[c.jsx(Js,{htmlFor:"input",children:M?"YouTube Video URL":"Enter text to generate flashcards"}),c.jsx(kt,{id:"input",value:I,onChange:Y=>k(Y.target.value),placeholder:M?"Paste YouTube URL here...":"Enter text or paste content here...",className:"input-field"})]}),c.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[c.jsx(Js,{children:"Number of cards:"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(te,{type:"button",variant:"outline",size:"icon",onClick:()=>P(Math.max(1,S-1)),disabled:S<=1,children:c.jsx(ule,{className:"w-4 h-4"})}),c.jsx("span",{className:"w-8 text-center",children:S}),c.jsx(te,{type:"button",variant:"outline",size:"icon",onClick:()=>P(Math.min(10,S+1)),disabled:S>=10,children:c.jsx(dle,{className:"w-4 h-4"})})]})]}),c.jsx(te,{type:"submit",className:"w-full mt-4",disabled:t||!I&&!p,children:t?c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-primary border-t-transparent"}),"Generating..."]}):c.jsxs("span",{className:"flex items-center gap-2",children:[c.jsx(oi,{className:"w-5 h-5"}),"Generate Flashcards"]})})]}),o.length>0&&c.jsxs("div",{className:"mt-8",children:[c.jsx("div",{className:"flex justify-center mb-8",children:c.jsx("div",{className:"w-full max-w-2xl",children:c.jsx(eve,{card:o[l],isFlipped:d,onFlip:de,isPersonalized:p},`card-${l}`)})}),c.jsxs("div",{className:"flex justify-center gap-4 mt-4",children:[c.jsxs(te,{onClick:Z,disabled:l===0,variant:"outline",children:[c.jsx(Hae,{className:"w-4 h-4 mr-2"}),"Previous"]}),c.jsxs(te,{onClick:N,disabled:l===o.length-1,variant:"outline",children:["Next",c.jsx(BC,{className:"w-4 h-4 ml-2"})]})]}),c.jsx("div",{className:"mt-4",children:c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:c.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${(l+1)/o.length*100}%`}})})})]}),p&&b.length>0&&c.jsxs("div",{className:"mt-12",children:[c.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center gap-2",children:[c.jsx(o$,{className:"w-5 h-5"}),"Recommended Topics"]}),c.jsx("div",{className:"recommendations",children:b.map((Y,ee)=>c.jsxs("div",{className:"recommendation-card",onClick:()=>{r(Y.topic),D(new Event("submit"))},children:[c.jsx("h3",{className:"font-semibold mb-2",children:Y.topic}),c.jsx("p",{className:"text-sm text-muted-foreground",children:Y.reason})]},`${Y.topic}-${ee}`))})]})]})})},nve=({onSubmit:t,placeholder:e,maxLength:n,maxWords:r,isLink:s,difficulty:i})=>{const[o,a]=g.useState(""),[l,u]=g.useState([]),[d,h]=g.useState("medium"),[p,m]=g.useState(!1),y=b=>r?b.trim().split(/\s+/).length<=r:n?b.length<=n:s?b.startsWith("http://")||b.startsWith("https://"):!0,_=async()=>{if(!o.trim())return;if(!y(o)){alert(r?`Please limit your input to ${r} words`:n?`Please limit your input to ${n} characters`:"Please enter a valid URL");return}const b={role:"user",content:o};u(x=>[...x,b]),a(""),m(!0);try{let x;i?x=await t(o+"|"+d):x=await t(o);const E={role:"assistant",content:x};u(w=>[...w,E])}catch(x){console.error("Error in chat:",x);const E={role:"assistant",content:"Sorry, I encountered an error. Please try again."};u(w=>[...w,E])}finally{m(!1)}};return c.jsxs("div",{className:"flex flex-col h-[80vh] max-w-4xl mx-auto space-y-4",children:[c.jsxs("div",{className:"flex-1 overflow-auto space-y-4 scrollbar-thin scrollbar-thumb-emerald-500/20 scrollbar-track-black/20 p-4",children:[l.map((b,x)=>c.jsx(Se,{className:`p-4 ${b.role==="assistant"?"bg-black/40 border-emerald-500/20":"bg-emerald-500/10 border-emerald-500/30"}`,children:c.jsxs("div",{className:"flex items-start space-x-3",children:[b.role==="assistant"?c.jsx(oi,{className:"w-6 h-6 text-emerald-400 mt-1"}):c.jsx(a$,{className:"w-6 h-6 text-emerald-400 mt-1"}),c.jsx("div",{className:"flex-1",children:c.jsx("p",{className:"text-zinc-200 whitespace-pre-line",children:b.content})})]})},x)),p&&c.jsx(Se,{className:"p-4 bg-black/40 border-emerald-500/20",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx(oi,{className:"w-6 h-6 text-emerald-400"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(GC,{className:"w-4 h-4 text-emerald-400 animate-spin"}),c.jsx("p",{className:"text-zinc-400",children:"Thinking..."})]})]})})]}),c.jsxs("div",{className:"space-y-4 p-4 bg-black/20 rounded-lg",children:[i&&c.jsx("div",{className:"flex space-x-4",children:["easy","medium","hard"].map(b=>c.jsx(te,{variant:d===b?"default":"outline",onClick:()=>h(b),className:`capitalize ${d===b?"bg-emerald-500 text-black":"border-emerald-500/20 text-emerald-400"}`,children:b},b))}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx(nu,{value:o,onChange:b=>a(b.target.value),placeholder:e,className:"flex-1 bg-black/40 border-emerald-500/20 text-zinc-200 placeholder:text-zinc-500 min-h-[100px]"}),c.jsx(te,{onClick:_,disabled:p,className:"bg-emerald-500 text-black hover:bg-emerald-600 self-end h-10",children:"Send"})]}),(r||n)&&c.jsx("div",{className:"text-sm text-zinc-400 text-right",children:r?`${o.trim().split(/\s+/).length}/${r} words`:`${o.length}/${n} characters`})]})]})},rve=()=>{const{toast:t}=gr(),e=async n=>{if(!n.trim())return t({title:"Empty Text",description:"Please enter some text to summarize.",variant:"destructive"}),"Please enter some text to summarize.";try{return await Bye(n)}catch(r){return console.error("Error in handleSubmit:",r),t({title:"Error",description:"Failed to generate summary. Please try again.",variant:"destructive"}),"Sorry, I couldn't generate a summary. Please try again."}};return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-neon-purple to-black p-4",children:c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-2 text-center",children:"AI Summary"}),c.jsx("p",{className:"text-zinc-400 text-center mb-8",children:"Enter your text and I'll create a concise summary"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[c.jsxs(Se,{className:"p-4 bg-black/40 border-emerald-500/20 hover:border-emerald-500/40 transition-colors",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-emerald-400 mb-2",children:[c.jsx(Tl,{className:"w-5 h-5"}),c.jsx("h3",{className:"font-semibold",children:"Smart Summary"})]}),c.jsx("p",{className:"text-zinc-400 text-sm",children:"I'll analyze and summarize your text"})]}),c.jsxs(Se,{className:"p-4 bg-black/40 border-emerald-500/20 hover:border-emerald-500/40 transition-colors",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-emerald-400 mb-2",children:[c.jsx(rle,{className:"w-5 h-5"}),c.jsx("h3",{className:"font-semibold",children:"Clear & Concise"})]}),c.jsx("p",{className:"text-zinc-400 text-sm",children:"Get straight to the main points"})]}),c.jsxs(Se,{className:"p-4 bg-black/40 border-emerald-500/20 hover:border-emerald-500/40 transition-colors",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-emerald-400 mb-2",children:[c.jsx(nle,{className:"w-5 h-5"}),c.jsx("h3",{className:"font-semibold",children:"Easy to Read"})]}),c.jsx("p",{className:"text-zinc-400 text-sm",children:"Simple and straightforward summaries"})]})]}),c.jsx(nve,{onSubmit:e,placeholder:"Paste your text here (max 250 words)...",maxWords:250})]})})},LO="quiz_performance",sve=t=>{const e=localStorage.getItem(LO),n=e?JSON.parse(e):[];n.push(t),localStorage.setItem(LO,JSON.stringify(n))};function l6({attempt:t,onRetry:e}){const n=t.correctAnswers/t.totalQuestions*100,r=s=>{const i=Math.floor(s/60),o=s%60;return`${i}m ${o}s`};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs(Se,{className:"p-6 bg-black/40 border-emerald-500/20",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-zinc-200",children:"Quiz Results"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Kt,{className:"text-yellow-500"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-zinc-400",children:"Score"}),c.jsxs("p",{className:"text-xl font-bold text-zinc-200",children:[t.score,"/",t.totalQuestions]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(v0,{className:"text-blue-500"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-zinc-400",children:"Accuracy"}),c.jsxs("p",{className:"text-xl font-bold text-zinc-200",children:[n.toFixed(1),"%"]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Up,{className:"text-green-500"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-zinc-400",children:"Time Taken"}),c.jsx("p",{className:"text-xl font-bold text-zinc-200",children:r(t.timeTaken)})]})]})]}),c.jsx(kr,{value:n,className:"h-2"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-xl font-semibold text-zinc-200",children:"Detailed Review"}),t.answers.map((s,i)=>c.jsxs(Se,{className:`p-4 border-l-4 bg-black/40 border-emerald-500/20 ${s.isCorrect?"border-l-green-500":"border-l-red-500"}`,children:[c.jsx("p",{className:"font-medium mb-2 text-zinc-200",children:s.question.question}),c.jsxs("div",{className:"space-y-1 text-sm",children:[c.jsxs("p",{className:"text-zinc-300",children:["Your answer: ",c.jsx("span",{className:s.isCorrect?"text-green-500":"text-red-500",children:s.userAnswer})]}),!s.isCorrect&&c.jsxs("p",{className:"text-green-500",children:["Correct answer: ",s.question.correctAnswer]}),c.jsx("p",{className:"text-zinc-400 mt-2",children:s.question.explanation})]})]},i))]}),c.jsx("div",{className:"flex gap-4",children:c.jsx(te,{onClick:e,variant:"outline",className:"border-emerald-500/20 text-zinc-200 hover:bg-emerald-500/10",children:"Try Another Quiz"})})]})}const ive=()=>{Qe();const{currentUser:t,userProfile:e}=Yt(),[n,r]=g.useState(""),[s,i]=g.useState(!1),[o,a]=g.useState([]),[l,u]=g.useState(0),[d,h]=g.useState(null),[p,m]=g.useState(0),[y,_]=g.useState(!1),[b,x]=g.useState(null),[E,w]=g.useState(null),{toast:I}=gr();g.useEffect(()=>{const C=localStorage.getItem("youtubeQuiz");if(C)try{const S=JSON.parse(C);if(Array.isArray(S)&&S.length>0){a(S),x(Date.now()),localStorage.removeItem("youtubeQuiz");return}}catch(S){console.error("Error parsing stored quiz:",S)}},[]);const k=async C=>{if(C.preventDefault(),!t){I({title:"Authentication Required",description:"Please sign in to generate quizzes.",variant:"destructive"});return}const S=n.trim();if(!S){I({title:"URL Required",description:"Please enter a valid YouTube URL",variant:"destructive"});return}i(!0);try{const P=await $ye(S);a(P),x(Date.now()),i(!1)}catch(P){console.error("Error generating quiz:",P),I({title:"Error",description:"Failed to generate quiz. Please try again.",variant:"destructive"}),i(!1)}},M=async()=>{if(!d)return;const C=o[l],S=d===C.correctAnswer;if(S&&m(P=>P+1),l<o.length-1)u(P=>P+1),h(null);else{const P=Date.now(),R=Math.floor((P-(b||P))/1e3),O={id:`${t==null?void 0:t.uid}-${Date.now()}`,userId:(t==null?void 0:t.uid)||"",timestamp:new Date().toISOString(),timeTaken:R,score:p+(S?1:0),totalQuestions:o.length,correctAnswers:p+(S?1:0),answers:o.map((D,N)=>({questionIndex:N,question:D,userAnswer:N===l?d:"",isCorrect:N===l?S:!1}))};try{await sve(O),w(O),_(!0)}catch(D){console.error("Error saving quiz attempt:",D),I({title:"Error",description:"Failed to save quiz results",variant:"destructive"})}}};return y&&E?c.jsx("div",{className:"container py-8 space-y-8",children:c.jsx(l6,{questions:o,score:p,totalTime:b?Math.floor((Date.now()-b)/1e3):0,attempt:E,onTryAgain:()=>{a([]),u(0),h(null),m(0),_(!1),x(null),w(null)}})}):c.jsx("div",{className:"container py-8 space-y-8",children:o.length?c.jsxs("div",{className:"max-w-3xl mx-auto",children:[c.jsxs("div",{className:"mb-8 space-y-2",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("h2",{className:"text-2xl font-semibold text-white",children:["Question ",l+1," of ",o.length]}),c.jsxs("div",{className:"flex items-center text-[#B3B3B3]",children:[c.jsx(qC,{className:"w-4 h-4 mr-2"}),c.jsxs("span",{children:[b?Math.floor((Date.now()-b)/1e3):0,"s"]})]})]}),c.jsx(kr,{value:(l+1)/o.length*100,className:"h-2",indicatorClassName:"bg-emerald-500"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs(Se,{className:"p-6 bg-[#1E1E1E] border-[#333333]",children:[c.jsx("h3",{className:"text-xl font-medium text-white mb-4",children:o[l].question}),c.jsx("div",{className:"space-y-3",children:o[l].options.map((C,S)=>c.jsx("button",{onClick:()=>h(C),className:`w-full p-4 text-left rounded-lg border transition-all ${d===C?"border-emerald-500 bg-emerald-500/10 text-white":"border-[#333333] hover:border-emerald-500/50 text-[#B3B3B3] hover:text-white"}`,children:C},S))})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx(te,{onClick:M,disabled:!d,className:"bg-emerald-500 hover:bg-emerald-600 text-white",children:l===o.length-1?"Finish Quiz":"Next Question"})})]})]}):c.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx("h1",{className:"text-4xl font-bold text-white",children:"AI Video Quiz"}),c.jsx("p",{className:"text-[#B3B3B3]",children:"Test your knowledge from the video content"})]}),c.jsxs("form",{onSubmit:k,className:"space-y-4",children:[c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"relative flex items-center",children:[c.jsx(kt,{type:"text",placeholder:"Paste YouTube URL here...",value:n,onChange:C=>r(C.target.value),className:"w-full pr-32 bg-[#1E1E1E] border-[#333333] text-white placeholder-[#666666]"}),c.jsxs(te,{type:"submit",disabled:s||!n,className:"absolute right-0 bg-emerald-500 hover:bg-emerald-600 text-white",children:[c.jsx(l$,{className:"w-4 h-4 mr-2"}),"Generate Quiz"]})]}),c.jsx("div",{className:"absolute inset-0 rounded-lg transition-opacity duration-500",style:{boxShadow:"0 0 15px rgba(16,185,129,0.1)",pointerEvents:"none",opacity:s?1:0}})]}),s&&c.jsxs("div",{className:"flex items-center justify-center p-8",children:[c.jsx(oi,{className:"w-8 h-8 text-emerald-500 animate-bounce"}),c.jsx("p",{className:"ml-3 text-[#B3B3B3]",children:"Generating quiz questions..."})]})]}),(e==null?void 0:e.recentQuizAttempts)&&e.recentQuizAttempts.length>0&&c.jsxs("div",{className:"mt-12 space-y-4",children:[c.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Recent Attempts"}),c.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.recentQuizAttempts.map((C,S)=>c.jsxs("div",{className:"p-6 rounded-lg bg-[#1E1E1E] border border-[#333333] hover:border-emerald-500/50 transition-colors",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("h3",{className:"font-medium text-white truncate",children:C.videoTitle||"YouTube Video Quiz"}),c.jsxs("p",{className:"text-sm text-[#B3B3B3]",children:["Score: ",C.score,"/",C.totalQuestions]})]}),C.score/C.totalQuestions>=.7?c.jsx(Qae,{className:"w-5 h-5 text-emerald-500"}):c.jsx(KU,{className:"w-5 h-5 text-red-500"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{value:C.score/C.totalQuestions*100,className:"h-2",indicatorClassName:C.score/C.totalQuestions>=.7?"bg-emerald-500":"bg-red-500"}),c.jsxs("div",{className:"flex justify-between text-xs text-[#B3B3B3]",children:[c.jsxs("span",{children:["Completed ",new Date(C.completedAt).toLocaleDateString()]}),c.jsxs("span",{children:[Math.round(C.score/C.totalQuestions*100),"%"]})]})]})]},S))})]})]})})};function c6(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var CI="Checkbox",[ove,o0e]=mr(CI),[ave,lve]=ove(CI),u6=g.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l="on",onCheckedChange:u,form:d,...h}=t,[p,m]=g.useState(null),y=Ve(e,I=>m(I)),_=g.useRef(!1),b=p?d||!!p.closest("form"):!0,[x=!1,E]=Ml({prop:s,defaultProp:i,onChange:u}),w=g.useRef(x);return g.useEffect(()=>{const I=p==null?void 0:p.form;if(I){const k=()=>E(w.current);return I.addEventListener("reset",k),()=>I.removeEventListener("reset",k)}},[p,E]),c.jsxs(ave,{scope:n,state:x,disabled:a,children:[c.jsx(_e.button,{type:"button",role:"checkbox","aria-checked":Mo(x)?"mixed":x,"aria-required":o,"data-state":f6(x),"data-disabled":a?"":void 0,disabled:a,value:l,...h,ref:y,onKeyDown:ae(t.onKeyDown,I=>{I.key==="Enter"&&I.preventDefault()}),onClick:ae(t.onClick,I=>{E(k=>Mo(k)?!0:!k),b&&(_.current=I.isPropagationStopped(),_.current||I.stopPropagation())})}),b&&c.jsx(cve,{control:p,bubbles:!_.current,name:r,value:l,checked:x,required:o,disabled:a,form:d,style:{transform:"translateX(-100%)"},defaultChecked:Mo(i)?!1:i})]})});u6.displayName=CI;var d6="CheckboxIndicator",h6=g.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=lve(d6,n);return c.jsx(Dn,{present:r||Mo(i.state)||i.state===!0,children:c.jsx(_e.span,{"data-state":f6(i.state),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});h6.displayName=d6;var cve=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:s,...i}=t,o=g.useRef(null),a=c6(n),l=EC(e);g.useEffect(()=>{const d=o.current,h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(a!==n&&m){const y=new Event("click",{bubbles:r});d.indeterminate=Mo(n),m.call(d,Mo(n)?!1:n),d.dispatchEvent(y)}},[a,n,r]);const u=g.useRef(Mo(n)?!1:n);return c.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??u.current,...i,tabIndex:-1,ref:o,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Mo(t){return t==="indeterminate"}function f6(t){return Mo(t)?"indeterminate":t?"checked":"unchecked"}var p6=u6,uve=h6;const m6=g.forwardRef(({className:t,...e},n)=>c.jsx(p6,{ref:n,className:oe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:c.jsx(uve,{className:oe("flex items-center justify-center text-current"),children:c.jsx(md,{className:"h-4 w-4"})})}));m6.displayName=p6.displayName;var g6=["PageUp","PageDown"],y6=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],v6={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},yd="Slider",[fT,dve,hve]=NC(yd),[_6,a0e]=mr(yd,[hve]),[fve,L0]=_6(yd),x6=g.forwardRef((t,e)=>{const{name:n,min:r=0,max:s=100,step:i=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[r],value:d,onValueChange:h=()=>{},onValueCommit:p=()=>{},inverted:m=!1,form:y,..._}=t,b=g.useRef(new Set),x=g.useRef(0),w=o==="horizontal"?pve:mve,[I=[],k]=Ml({prop:d,defaultProp:u,onChange:O=>{var N;(N=[...b.current][x.current])==null||N.focus(),h(O)}}),M=g.useRef(I);function C(O){const D=xve(I,O);R(O,D)}function S(O){R(O,x.current)}function P(){const O=M.current[x.current];I[x.current]!==O&&p(I)}function R(O,D,{commit:N}={commit:!1}){const Z=Tve(i),de=Sve(Math.round((O-r)/i)*i+r,Z),Y=iI(de,[r,s]);k((ee=[])=>{const $=vve(ee,Y,D);if(Eve($,l*i)){x.current=$.indexOf(Y);const V=String($)!==String(ee);return V&&N&&p($),V?$:ee}else return ee})}return c.jsx(fve,{scope:t.__scopeSlider,name:n,disabled:a,min:r,max:s,valueIndexToChangeRef:x,thumbs:b.current,values:I,orientation:o,form:y,children:c.jsx(fT.Provider,{scope:t.__scopeSlider,children:c.jsx(fT.Slot,{scope:t.__scopeSlider,children:c.jsx(w,{"aria-disabled":a,"data-disabled":a?"":void 0,..._,ref:e,onPointerDown:ae(_.onPointerDown,()=>{a||(M.current=I)}),min:r,max:s,inverted:m,onSlideStart:a?void 0:C,onSlideMove:a?void 0:S,onSlideEnd:a?void 0:P,onHomeKeyDown:()=>!a&&R(r,0,{commit:!0}),onEndKeyDown:()=>!a&&R(s,I.length-1,{commit:!0}),onStepKeyDown:({event:O,direction:D})=>{if(!a){const de=g6.includes(O.key)||O.shiftKey&&y6.includes(O.key)?10:1,Y=x.current,ee=I[Y],$=i*de*D;R(ee+$,Y,{commit:!0})}}})})})})});x6.displayName=yd;var[w6,b6]=_6(yd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),pve=g.forwardRef((t,e)=>{const{min:n,max:r,dir:s,inverted:i,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:u,...d}=t,[h,p]=g.useState(null),m=Ve(e,w=>p(w)),y=g.useRef(void 0),_=Lp(s),b=_==="ltr",x=b&&!i||!b&&i;function E(w){const I=y.current||h.getBoundingClientRect(),k=[0,I.width],C=II(k,x?[n,r]:[r,n]);return y.current=I,C(w-I.left)}return c.jsx(w6,{scope:t.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:c.jsx(E6,{dir:_,"data-orientation":"horizontal",...d,ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const I=E(w.clientX);o==null||o(I)},onSlideMove:w=>{const I=E(w.clientX);a==null||a(I)},onSlideEnd:()=>{y.current=void 0,l==null||l()},onStepKeyDown:w=>{const k=v6[x?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:k?-1:1})}})})}),mve=g.forwardRef((t,e)=>{const{min:n,max:r,inverted:s,onSlideStart:i,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...u}=t,d=g.useRef(null),h=Ve(e,d),p=g.useRef(void 0),m=!s;function y(_){const b=p.current||d.current.getBoundingClientRect(),x=[0,b.height],w=II(x,m?[r,n]:[n,r]);return p.current=b,w(_-b.top)}return c.jsx(w6,{scope:t.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:c.jsx(E6,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:_=>{const b=y(_.clientY);i==null||i(b)},onSlideMove:_=>{const b=y(_.clientY);o==null||o(b)},onSlideEnd:()=>{p.current=void 0,a==null||a()},onStepKeyDown:_=>{const x=v6[m?"from-bottom":"from-top"].includes(_.key);l==null||l({event:_,direction:x?-1:1})}})})}),E6=g.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...u}=t,d=L0(yd,n);return c.jsx(_e.span,{...u,ref:e,onKeyDown:ae(t.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(a(h),h.preventDefault()):g6.concat(y6).includes(h.key)&&(l(h),h.preventDefault())}),onPointerDown:ae(t.onPointerDown,h=>{const p=h.target;p.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(p)?p.focus():r(h)}),onPointerMove:ae(t.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&s(h)}),onPointerUp:ae(t.onPointerUp,h=>{const p=h.target;p.hasPointerCapture(h.pointerId)&&(p.releasePointerCapture(h.pointerId),i(h))})})}),T6="SliderTrack",S6=g.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=L0(T6,n);return c.jsx(_e.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:e})});S6.displayName=T6;var pT="SliderRange",C6=g.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=L0(pT,n),i=b6(pT,n),o=g.useRef(null),a=Ve(e,o),l=s.values.length,u=s.values.map(p=>P6(p,s.min,s.max)),d=l>1?Math.min(...u):0,h=100-Math.max(...u);return c.jsx(_e.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:a,style:{...t.style,[i.startEdge]:d+"%",[i.endEdge]:h+"%"}})});C6.displayName=pT;var mT="SliderThumb",I6=g.forwardRef((t,e)=>{const n=dve(t.__scopeSlider),[r,s]=g.useState(null),i=Ve(e,a=>s(a)),o=g.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return c.jsx(gve,{...t,ref:i,index:o})}),gve=g.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:s,...i}=t,o=L0(mT,n),a=b6(mT,n),[l,u]=g.useState(null),d=Ve(e,E=>u(E)),h=l?o.form||!!l.closest("form"):!0,p=EC(l),m=o.values[r],y=m===void 0?0:P6(m,o.min,o.max),_=_ve(r,o.values.length),b=p==null?void 0:p[a.size],x=b?wve(b,y,a.direction):0;return g.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),c.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${y}% + ${x}px)`},children:[c.jsx(fT.ItemSlot,{scope:t.__scopeSlider,children:c.jsx(_e.span,{role:"slider","aria-label":t["aria-label"]||_,"aria-valuemin":o.min,"aria-valuenow":m,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:d,style:m===void 0?{display:"none"}:t.style,onFocus:ae(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),h&&c.jsx(yve,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:m},r)]})});I6.displayName=mT;var yve=t=>{const{value:e,...n}=t,r=g.useRef(null),s=c6(e);return g.useEffect(()=>{const i=r.current,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(s!==e&&l){const u=new Event("input",{bubbles:!0});l.call(i,e),i.dispatchEvent(u)}},[s,e]),c.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:e})};function vve(t=[],e,n){const r=[...t];return r[n]=e,r.sort((s,i)=>s-i)}function P6(t,e,n){const i=100/(n-e)*(t-e);return iI(i,[0,100])}function _ve(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function xve(t,e){if(t.length===1)return 0;const n=t.map(s=>Math.abs(s-e)),r=Math.min(...n);return n.indexOf(r)}function wve(t,e,n){const r=t/2,i=II([0,50],[0,r]);return(r-i(e)*n)*n}function bve(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Eve(t,e){if(e>0){const n=bve(t);return Math.min(...n)>=e}return!0}function II(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function Tve(t){return(String(t).split(".")[1]||"").length}function Sve(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var R6=x6,Cve=S6,Ive=C6,Pve=I6;const A6=g.forwardRef(({className:t,...e},n)=>c.jsxs(R6,{ref:n,className:oe("relative flex w-full touch-none select-none items-center",t),...e,children:[c.jsx(Cve,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:c.jsx(Ive,{className:"absolute h-full bg-primary"})}),c.jsx(Pve,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));A6.displayName=R6.displayName;const Rve=[{id:"js",name:"JavaScript",description:"Core JavaScript concepts and modern features",subtopics:["Basics","ES6+","Async Programming","DOM Manipulation"]},{id:"react",name:"React",description:"React fundamentals and advanced concepts",subtopics:["Components","Hooks","State Management","Performance"]},{id:"ts",name:"TypeScript",description:"TypeScript fundamentals and best practices",subtopics:["Types","Interfaces","Generics","Advanced Types"]}];function Ave({onTestGenerated:t,isLoading:e}){const[n,r]=g.useState([]),[s,i]=g.useState(30),{toast:o}=gr(),a=()=>{if(n.length===0){o({title:"No Topics Selected",description:"Please select at least one topic for the test.",variant:"destructive"});return}t(n,s)};return c.jsx(Se,{className:"p-6",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(js,{className:"h-6 w-6"}),c.jsx("h2",{className:"text-2xl font-bold",children:"Generate Mock Test"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium mb-2",children:"Select Topics"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:Rve.map(l=>c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx(m6,{id:l.id,checked:n.includes(l.id),onCheckedChange:u=>{r(d=>u?[...d,l.id]:d.filter(h=>h!==l.id))},disabled:e}),c.jsxs("div",{className:"grid gap-1.5 leading-none",children:[c.jsx(Js,{htmlFor:l.id,children:l.name}),c.jsx("p",{className:"text-sm text-muted-foreground",children:l.description})]})]},l.id))})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(qC,{className:"h-5 w-5"}),c.jsxs("h3",{className:"text-lg font-medium",children:["Test Duration: ",s," minutes"]})]}),c.jsx(A6,{value:[s],onValueChange:([l])=>i(l),min:15,max:60,step:15,className:"w-full max-w-xs",disabled:e})]}),c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx(te,{onClick:a,disabled:n.length===0||e,className:"w-full max-w-xs",children:e?c.jsxs(c.Fragment,{children:[c.jsx(GC,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating Test..."]}):"Generate Test"}),n.length===0&&c.jsxs("div",{className:"flex items-center gap-2 text-yellow-500",children:[c.jsx(Kae,{className:"h-4 w-4"}),c.jsx("span",{children:"Select at least one topic to generate a test"})]})]})]})]})})}try{AY(rn).catch(t=>{t.code==="failed-precondition"?console.warn("Multiple tabs open, persistence can only be enabled in one tab at a time."):t.code==="unimplemented"&&console.warn("The current browser does not support persistence.")})}catch(t){console.warn("Error enabling persistence:",t)}const Nve="mockTests",kve="mockTestAttempts",Kw=async(t,e)=>{try{const r=await zye(t,{easy:e==="easy"?3:0,medium:e==="medium"?4:0,hard:e==="hard"?3:0});if(!r||r.length===0)throw new Error("Failed to generate questions");return r}catch(n){throw console.error("Error generating questions:",n),new Error("Failed to generate quiz questions. Please try again.")}},Ove=async(t,e,n)=>{try{const r=await Kw(t,"easy"),s=await Kw(t,"medium"),i=await Kw(t,"hard"),o=[...r.slice(0,3),...s.slice(0,4),...i.slice(0,3)],a={id:"",userId:n,title:`Mock Test - ${t.join(", ")}`,description:`A ${e}-minute mock test covering ${t.join(", ")}`,topics:t,questions:o,duration:e,createdAt:Date.now()},l=Xn(Fu(rn,Nve));return await Pp(l,{...a,id:l.id}),{...a,id:l.id}}catch(r){throw console.error("Error generating mock test:",r),r}},Dve=async t=>{try{const e=Xn(Fu(rn,kve));await Pp(e,{...t,id:e.id,timestamp:new Date().toISOString()})}catch(e){throw console.error("Error saving mock test attempt:",e),e}},jve=(t,e)=>{try{const n=new Map(e.map(s=>[s.questionId,s])),r=new Map;return t.forEach(s=>{const i=s.topic,o=n.get(s.id),a=r.get(i)||{total:0,correct:0,totalTime:0};a.total+=1,o&&(o.isCorrect&&(a.correct+=1),a.totalTime+=o.timeSpent),r.set(i,a)}),Array.from(r.entries()).map(([s,i])=>({topic:s,totalQuestions:i.total,correctAnswers:i.correct,accuracy:i.correct/i.total*100,averageTimePerQuestion:i.totalTime/i.total}))}catch(n){throw console.error("Error calculating topic performance:",n),new Error("Failed to calculate topic performance")}};function Mve(){const[t,e]=g.useState(null),[n,r]=g.useState(0),[s,i]=g.useState(null),[o,a]=g.useState([]),[l,u]=g.useState(null),[d,h]=g.useState(null),[p,m]=g.useState(!1),[y,_]=g.useState(null),[b,x]=g.useState(!1),{toast:E}=gr(),{currentUser:w,userProfile:I}=Yt();g.useEffect(()=>()=>{e(null),_(null),m(!1),a([]),i(null),u(null),h(null)},[]),g.useEffect(()=>{if(t&&l&&d!==null){const R=setInterval(()=>{const O=Date.now(),D=Math.floor((O-l)/1e3),N=Math.max(0,t.duration*60-D);h(N),N===0&&!p&&S()},1e3);return()=>clearInterval(R)}},[t,l,d,p]);const k=async(R,O)=>{if(!w){E({title:"Login Required",description:"Please log in to take a mock test.",variant:"destructive"});return}x(!0);try{const D=await Ove(R,O,w.uid);e(D),u(Date.now()),h(D.duration*60),r(0),i(null),a([]),m(!1),_(null),E({title:"Test Started",description:`You have ${D.duration} minutes to complete ${D.questions.length} questions.`})}catch(D){console.error("Error generating test:",D),E({title:"Error",description:"Failed to generate test. Please try again.",variant:"destructive"})}finally{x(!1)}},M=R=>{s||(i(R),E({title:"Answer Selected",description:"Click 'Next Question' to continue."}))},C=()=>{if(!t||s===null)return;const R=Date.now(),O=l+o.reduce((Z,de)=>Z+de.timeSpent*1e3,0),D=Math.floor((R-O)/1e3),N={questionId:t.questions[n].id,userAnswer:s,isCorrect:s===t.questions[n].correctAnswer,timeSpent:D};a(Z=>[...Z,N]),n<t.questions.length-1?(r(Z=>Z+1),i(null)):S()},S=async()=>{if(!t||!l||!w)return;const R=Date.now(),O=Math.floor((R-l)/1e3),D=t.questions.map((de,Y)=>{const ee=o[Y];return ee||{questionId:de.id,userAnswer:"",isCorrect:!1,timeSpent:0}}),N=D.filter(de=>de.isCorrect).length/t.questions.length*100,Z={id:"",userId:w.uid,testId:t.id,startTime:l,endTime:R,timestamp:Date.now(),score:N,questions:D,topicPerformance:jve(t.questions,D),overallScore:N,totalTime:O};try{await Dve(Z),_(Z),m(!0),E({title:"Test Completed!",description:`Your score: ${Math.round(N)}%`})}catch{E({title:"Error",description:"Failed to save test results. Please try again.",variant:"destructive"})}},P=R=>{if(R===null)return"--:--";const O=Math.floor(R/60),D=R%60;return`${O.toString().padStart(2,"0")}:${D.toString().padStart(2,"0")}`};return t?y?c.jsx("div",{className:"container mx-auto py-6 space-y-6",children:c.jsx(l6,{attempt:{id:y.id,timestamp:y.startTime,timeTaken:y.totalTime,score:y.overallScore,totalQuestions:t.questions.length,correctAnswers:y.questions.filter(R=>R.isCorrect).length,answers:y.questions.map((R,O)=>({questionIndex:O,userAnswer:R.userAnswer,isCorrect:R.isCorrect,question:t.questions[O]})),topicPerformance:y.topicPerformance},onRetry:()=>{e(null),_(null)}})}):c.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(qC,{className:"w-5 h-5"}),c.jsx("span",{className:"text-lg font-semibold",children:P(d)})]}),c.jsx(kr,{value:n/t.questions.length*100}),c.jsxs("span",{className:"text-sm",children:["Question ",n+1," of ",t.questions.length]})]}),c.jsxs(Se,{className:"p-6 space-y-6",children:[c.jsx("h3",{className:"text-lg font-semibold",children:t.questions[n].question}),c.jsx("div",{className:"space-y-4",children:t.questions[n].options.map((R,O)=>c.jsx(te,{variant:s===R?"default":"outline",className:"w-full justify-start text-left",onClick:()=>M(R),disabled:s!==null&&s!==R,children:R},O))}),s&&c.jsx(te,{className:"w-full",onClick:C,children:n<t.questions.length-1?"Next Question":"Finish Test"})]}),d!==null&&d<300&&c.jsxs("div",{className:"flex items-center space-x-2 text-yellow-500",children:[c.jsx(yle,{className:"w-5 h-5"}),c.jsx("span",{children:"Less than 5 minutes remaining!"})]})]}):c.jsx("div",{className:"container mx-auto py-6",children:c.jsx(Ave,{onTestGenerated:k,isLoading:b})})}var Lve=t=>{switch(t){case"success":return Uve;case"info":return Bve;case"warning":return $ve;case"error":return zve;default:return null}},Fve=Array(12).fill(0),Vve=({visible:t,className:e})=>H.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},H.createElement("div",{className:"sonner-spinner"},Fve.map((n,r)=>H.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Uve=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),$ve=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Bve=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),zve=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},H.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Gve=H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},H.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),H.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),qve=()=>{let[t,e]=H.useState(document.hidden);return H.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},gT=1,Wve=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,s=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:gT++,i=this.toasts.find(a=>a.id===s),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(a=>a.id===s?(this.publish({...a,...t,id:s,title:n}),{...a,...t,id:s,dismissible:o,title:n}):a):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),s=n!==void 0,i,o=r.then(async l=>{if(i=["resolve",l],H.isValidElement(l))s=!1,this.create({id:n,type:"default",message:l});else if(Kve(l)&&!l.ok){s=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:n,type:"error",message:u,description:d})}else if(e.success!==void 0){s=!1;let u=typeof e.success=="function"?await e.success(l):e.success,d=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async l=>{if(i=["reject",l],e.error!==void 0){s=!1;let u=typeof e.error=="function"?await e.error(l):e.error,d=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var l;s&&(this.dismiss(n),n=void 0),(l=e.finally)==null||l.call(e)}),a=()=>new Promise((l,u)=>o.then(()=>i[0]==="reject"?u(i[1]):l(i[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:a}:Object.assign(n,{unwrap:a})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||gT++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Fn=new Wve,Hve=(t,e)=>{let n=(e==null?void 0:e.id)||gT++;return Fn.addToast({title:t,...e,id:n}),n},Kve=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Qve=Hve,Yve=()=>Fn.toasts,Xve=()=>Fn.getActiveToasts(),Fe=Object.assign(Qve,{success:Fn.success,info:Fn.info,warning:Fn.warning,error:Fn.error,custom:Fn.custom,message:Fn.message,promise:Fn.promise,dismiss:Fn.dismiss,loading:Fn.loading},{getHistory:Yve,getToasts:Xve});function Jve(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}Jve(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Eg(t){return t.label!==void 0}var Zve=3,e_e="32px",t_e="16px",FO=4e3,n_e=356,r_e=14,s_e=20,i_e=200;function Ur(...t){return t.filter(Boolean).join(" ")}function o_e(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var a_e=t=>{var e,n,r,s,i,o,a,l,u,d,h;let{invert:p,toast:m,unstyled:y,interacting:_,setHeights:b,visibleToasts:x,heights:E,index:w,toasts:I,expanded:k,removeToast:M,defaultRichColors:C,closeButton:S,style:P,cancelButtonStyle:R,actionButtonStyle:O,className:D="",descriptionClassName:N="",duration:Z,position:de,gap:Y,loadingIcon:ee,expandByDefault:$,classNames:V,icons:W,closeButtonAriaLabel:fe="Close toast",pauseWhenPageIsHidden:re}=t,[pe,Ee]=H.useState(null),[Be,at]=H.useState(null),[xe,jr]=H.useState(!1),[At,Tn]=H.useState(!1),[Jn,os]=H.useState(!1),[yr,Ni]=H.useState(!1),[aa,la]=H.useState(!1),[vd,ca]=H.useState(0),[Vs,$l]=H.useState(0),ki=H.useRef(m.duration||Z||FO),Hp=H.useRef(null),Mr=H.useRef(null),_d=w===0,Kp=w+1<=x,ze=m.type,_t=m.dismissible!==!1,Bl=m.className||"",Qp=m.descriptionClassName||"",ua=H.useMemo(()=>E.findIndex(ye=>ye.toastId===m.id)||0,[E,m.id]),F0=H.useMemo(()=>{var ye;return(ye=m.closeButton)!=null?ye:S},[m.closeButton,S]),Oi=H.useMemo(()=>m.duration||Z||FO,[m.duration,Z]),zl=H.useRef(0),Us=H.useRef(0),Gl=H.useRef(0),Di=H.useRef(null),[V0,xd]=de.split("-"),wd=H.useMemo(()=>E.reduce((ye,De,Ye)=>Ye>=ua?ye:ye+De.height,0),[E,ua]),bd=qve(),da=m.invert||p,ha=ze==="loading";Us.current=H.useMemo(()=>ua*Y+wd,[ua,wd]),H.useEffect(()=>{ki.current=Oi},[Oi]),H.useEffect(()=>{jr(!0)},[]),H.useEffect(()=>{let ye=Mr.current;if(ye){let De=ye.getBoundingClientRect().height;return $l(De),b(Ye=>[{toastId:m.id,height:De,position:m.position},...Ye]),()=>b(Ye=>Ye.filter(Xt=>Xt.toastId!==m.id))}},[b,m.id]),H.useLayoutEffect(()=>{if(!xe)return;let ye=Mr.current,De=ye.style.height;ye.style.height="auto";let Ye=ye.getBoundingClientRect().height;ye.style.height=De,$l(Ye),b(Xt=>Xt.find(Mn=>Mn.toastId===m.id)?Xt.map(Mn=>Mn.toastId===m.id?{...Mn,height:Ye}:Mn):[{toastId:m.id,height:Ye,position:m.position},...Xt])},[xe,m.title,m.description,b,m.id]);let vr=H.useCallback(()=>{Tn(!0),ca(Us.current),b(ye=>ye.filter(De=>De.toastId!==m.id)),setTimeout(()=>{M(m)},i_e)},[m,M,b,Us]);H.useEffect(()=>{if(m.promise&&ze==="loading"||m.duration===1/0||m.type==="loading")return;let ye;return k||_||re&&bd?(()=>{if(Gl.current<zl.current){let De=new Date().getTime()-zl.current;ki.current=ki.current-De}Gl.current=new Date().getTime()})():ki.current!==1/0&&(zl.current=new Date().getTime(),ye=setTimeout(()=>{var De;(De=m.onAutoClose)==null||De.call(m,m),vr()},ki.current)),()=>clearTimeout(ye)},[k,_,m,ze,re,bd,vr]),H.useEffect(()=>{m.delete&&vr()},[vr,m.delete]);function $s(){var ye,De,Ye;return W!=null&&W.loading?H.createElement("div",{className:Ur(V==null?void 0:V.loader,(ye=m==null?void 0:m.classNames)==null?void 0:ye.loader,"sonner-loader"),"data-visible":ze==="loading"},W.loading):ee?H.createElement("div",{className:Ur(V==null?void 0:V.loader,(De=m==null?void 0:m.classNames)==null?void 0:De.loader,"sonner-loader"),"data-visible":ze==="loading"},ee):H.createElement(Vve,{className:Ur(V==null?void 0:V.loader,(Ye=m==null?void 0:m.classNames)==null?void 0:Ye.loader),visible:ze==="loading"})}return H.createElement("li",{tabIndex:0,ref:Mr,className:Ur(D,Bl,V==null?void 0:V.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,V==null?void 0:V.default,V==null?void 0:V[ze],(n=m==null?void 0:m.classNames)==null?void 0:n[ze]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:C,"data-styled":!(m.jsx||m.unstyled||y),"data-mounted":xe,"data-promise":!!m.promise,"data-swiped":aa,"data-removed":At,"data-visible":Kp,"data-y-position":V0,"data-x-position":xd,"data-index":w,"data-front":_d,"data-swiping":Jn,"data-dismissible":_t,"data-type":ze,"data-invert":da,"data-swipe-out":yr,"data-swipe-direction":Be,"data-expanded":!!(k||$&&xe),style:{"--index":w,"--toasts-before":w,"--z-index":I.length-w,"--offset":`${At?vd:Us.current}px`,"--initial-height":$?"auto":`${Vs}px`,...P,...m.style},onDragEnd:()=>{os(!1),Ee(null),Di.current=null},onPointerDown:ye=>{ha||!_t||(Hp.current=new Date,ca(Us.current),ye.target.setPointerCapture(ye.pointerId),ye.target.tagName!=="BUTTON"&&(os(!0),Di.current={x:ye.clientX,y:ye.clientY}))},onPointerUp:()=>{var ye,De,Ye,Xt;if(yr||!_t)return;Di.current=null;let Mn=Number(((ye=Mr.current)==null?void 0:ye.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),lt=Number(((De=Mr.current)==null?void 0:De.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),as=new Date().getTime()-((Ye=Hp.current)==null?void 0:Ye.getTime()),Jt=pe==="x"?Mn:lt,Ln=Math.abs(Jt)/as;if(Math.abs(Jt)>=s_e||Ln>.11){ca(Us.current),(Xt=m.onDismiss)==null||Xt.call(m,m),at(pe==="x"?Mn>0?"right":"left":lt>0?"down":"up"),vr(),Ni(!0),la(!1);return}os(!1),Ee(null)},onPointerMove:ye=>{var De,Ye,Xt,Mn;if(!Di.current||!_t||((De=window.getSelection())==null?void 0:De.toString().length)>0)return;let lt=ye.clientY-Di.current.y,as=ye.clientX-Di.current.x,Jt=(Ye=t.swipeDirections)!=null?Ye:o_e(de);!pe&&(Math.abs(as)>1||Math.abs(lt)>1)&&Ee(Math.abs(as)>Math.abs(lt)?"x":"y");let Ln={x:0,y:0};pe==="y"?(Jt.includes("top")||Jt.includes("bottom"))&&(Jt.includes("top")&&lt<0||Jt.includes("bottom")&&lt>0)&&(Ln.y=lt):pe==="x"&&(Jt.includes("left")||Jt.includes("right"))&&(Jt.includes("left")&&as<0||Jt.includes("right")&&as>0)&&(Ln.x=as),(Math.abs(Ln.x)>0||Math.abs(Ln.y)>0)&&la(!0),(Xt=Mr.current)==null||Xt.style.setProperty("--swipe-amount-x",`${Ln.x}px`),(Mn=Mr.current)==null||Mn.style.setProperty("--swipe-amount-y",`${Ln.y}px`)}},F0&&!m.jsx?H.createElement("button",{"aria-label":fe,"data-disabled":ha,"data-close-button":!0,onClick:ha||!_t?()=>{}:()=>{var ye;vr(),(ye=m.onDismiss)==null||ye.call(m,m)},className:Ur(V==null?void 0:V.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(i=W==null?void 0:W.close)!=null?i:Gve):null,m.jsx||g.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:H.createElement(H.Fragment,null,ze||m.icon||m.promise?H.createElement("div",{"data-icon":"",className:Ur(V==null?void 0:V.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||$s():null,m.type!=="loading"?m.icon||(W==null?void 0:W[ze])||Lve(ze):null):null,H.createElement("div",{"data-content":"",className:Ur(V==null?void 0:V.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},H.createElement("div",{"data-title":"",className:Ur(V==null?void 0:V.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},typeof m.title=="function"?m.title():m.title),m.description?H.createElement("div",{"data-description":"",className:Ur(N,Qp,V==null?void 0:V.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),g.isValidElement(m.cancel)?m.cancel:m.cancel&&Eg(m.cancel)?H.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||R,onClick:ye=>{var De,Ye;Eg(m.cancel)&&_t&&((Ye=(De=m.cancel).onClick)==null||Ye.call(De,ye),vr())},className:Ur(V==null?void 0:V.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,g.isValidElement(m.action)?m.action:m.action&&Eg(m.action)?H.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||O,onClick:ye=>{var De,Ye;Eg(m.action)&&((Ye=(De=m.action).onClick)==null||Ye.call(De,ye),!ye.defaultPrevented&&vr())},className:Ur(V==null?void 0:V.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function VO(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function l_e(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?t_e:e_e;function l(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=a:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(a)}),n}g.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:l,mobileOffset:u,theme:d="light",richColors:h,duration:p,style:m,visibleToasts:y=Zve,toastOptions:_,dir:b=VO(),gap:x=r_e,loadingIcon:E,icons:w,containerAriaLabel:I="Notifications",pauseWhenPageIsHidden:k}=t,[M,C]=H.useState([]),S=H.useMemo(()=>Array.from(new Set([r].concat(M.filter(re=>re.position).map(re=>re.position)))),[M,r]),[P,R]=H.useState([]),[O,D]=H.useState(!1),[N,Z]=H.useState(!1),[de,Y]=H.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ee=H.useRef(null),$=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=H.useRef(null),W=H.useRef(!1),fe=H.useCallback(re=>{C(pe=>{var Ee;return(Ee=pe.find(Be=>Be.id===re.id))!=null&&Ee.delete||Fn.dismiss(re.id),pe.filter(({id:Be})=>Be!==re.id)})},[]);return H.useEffect(()=>Fn.subscribe(re=>{if(re.dismiss){C(pe=>pe.map(Ee=>Ee.id===re.id?{...Ee,delete:!0}:Ee));return}setTimeout(()=>{gM.flushSync(()=>{C(pe=>{let Ee=pe.findIndex(Be=>Be.id===re.id);return Ee!==-1?[...pe.slice(0,Ee),{...pe[Ee],...re},...pe.slice(Ee+1)]:[re,...pe]})})})}),[]),H.useEffect(()=>{if(d!=="system"){Y(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Y("dark"):Y("light")),typeof window>"u")return;let re=window.matchMedia("(prefers-color-scheme: dark)");try{re.addEventListener("change",({matches:pe})=>{Y(pe?"dark":"light")})}catch{re.addListener(({matches:Ee})=>{try{Y(Ee?"dark":"light")}catch(Be){console.error(Be)}})}},[d]),H.useEffect(()=>{M.length<=1&&D(!1)},[M]),H.useEffect(()=>{let re=pe=>{var Ee,Be;s.every(at=>pe[at]||pe.code===at)&&(D(!0),(Ee=ee.current)==null||Ee.focus()),pe.code==="Escape"&&(document.activeElement===ee.current||(Be=ee.current)!=null&&Be.contains(document.activeElement))&&D(!1)};return document.addEventListener("keydown",re),()=>document.removeEventListener("keydown",re)},[s]),H.useEffect(()=>{if(ee.current)return()=>{V.current&&(V.current.focus({preventScroll:!0}),V.current=null,W.current=!1)}},[ee.current]),H.createElement("section",{ref:e,"aria-label":`${I} ${$}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},S.map((re,pe)=>{var Ee;let[Be,at]=re.split("-");return M.length?H.createElement("ol",{key:re,dir:b==="auto"?VO():b,tabIndex:-1,ref:ee,className:a,"data-sonner-toaster":!0,"data-theme":de,"data-y-position":Be,"data-lifted":O&&M.length>1&&!i,"data-x-position":at,style:{"--front-toast-height":`${((Ee=P[0])==null?void 0:Ee.height)||0}px`,"--width":`${n_e}px`,"--gap":`${x}px`,...m,...l_e(l,u)},onBlur:xe=>{W.current&&!xe.currentTarget.contains(xe.relatedTarget)&&(W.current=!1,V.current&&(V.current.focus({preventScroll:!0}),V.current=null))},onFocus:xe=>{xe.target instanceof HTMLElement&&xe.target.dataset.dismissible==="false"||W.current||(W.current=!0,V.current=xe.relatedTarget)},onMouseEnter:()=>D(!0),onMouseMove:()=>D(!0),onMouseLeave:()=>{N||D(!1)},onDragEnd:()=>D(!1),onPointerDown:xe=>{xe.target instanceof HTMLElement&&xe.target.dataset.dismissible==="false"||Z(!0)},onPointerUp:()=>Z(!1)},M.filter(xe=>!xe.position&&pe===0||xe.position===re).map((xe,jr)=>{var At,Tn;return H.createElement(a_e,{key:xe.id,icons:w,index:jr,toast:xe,defaultRichColors:h,duration:(At=_==null?void 0:_.duration)!=null?At:p,className:_==null?void 0:_.className,descriptionClassName:_==null?void 0:_.descriptionClassName,invert:n,visibleToasts:y,closeButton:(Tn=_==null?void 0:_.closeButton)!=null?Tn:o,interacting:N,position:re,style:_==null?void 0:_.style,unstyled:_==null?void 0:_.unstyled,classNames:_==null?void 0:_.classNames,cancelButtonStyle:_==null?void 0:_.cancelButtonStyle,actionButtonStyle:_==null?void 0:_.actionButtonStyle,removeToast:fe,toasts:M.filter(Jn=>Jn.position==xe.position),heights:P.filter(Jn=>Jn.position==xe.position),setHeights:R,expandByDefault:i,gap:x,loadingIcon:E,expanded:O,pauseWhenPageIsHidden:k,swipeDirections:t.swipeDirections})})):null}))});function c_e(){const t=Qe(),{currentUser:e}=Yt(),n=()=>{if(!e){Fe.error("Please sign in to create a group");return}t("/study-groups/create")},r=()=>{if(!e){Fe.error("Please sign in to join a group");return}t("/study-groups/join")};return c.jsxs("div",{className:"container py-8 space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Study Groups"}),c.jsx("p",{className:"text-gray-400",children:"Join a study group to collaborate with others"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("button",{onClick:n,className:"flex flex-col items-center justify-center p-8 bg-[#1F2937] rounded-2xl hover:bg-gray-800 transition-colors group",children:[c.jsx(Ho,{className:"w-12 h-12 mb-4 text-[#3B82F6] group-hover:scale-110 transition-transform"}),c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Create a Group"}),c.jsx("p",{className:"text-gray-400 text-center",children:"Start your own study group and invite others to join"})]}),c.jsxs("button",{onClick:r,className:"flex flex-col items-center justify-center p-8 bg-[#1F2937] rounded-2xl hover:bg-gray-800 transition-colors group",children:[c.jsx(Ho,{className:"w-12 h-12 mb-4 text-[#3B82F6] group-hover:scale-110 transition-transform"}),c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Join a Group"}),c.jsx("p",{className:"text-gray-400 text-center",children:"Join an existing study group using an invite code"})]})]}),c.jsxs("div",{className:"bg-[#1F2937] rounded-2xl p-12 text-center",children:[c.jsx("p",{className:"text-xl font-medium text-gray-200 mb-2",children:"No study groups yet"}),c.jsx("p",{className:"text-gray-400",children:"Create or join a group to study together!"})]})]})}const u_e=async(t,e,n)=>{const r=Fu(rn,"studyGroups"),s=sie(),o=(await Ip(Xn(rn,"users",n))).data(),a={id:"",name:t,description:e,createdBy:n,createdAt:Qc(),members:[{id:n,displayName:(o==null?void 0:o.displayName)||null,email:(o==null?void 0:o.email)||null,photoURL:(o==null?void 0:o.photoURL)||null}],inviteCode:s,isLive:!1,days:[],time:""},l=Xn(r);return a.id=l.id,await Pp(l,a),a},d_e=async(t,e)=>{const n=Fu(rn,"studyGroups"),r=LF(n,UY("inviteCode","==",t)),s=await GY(r);if(s.empty)throw new Error("Invalid invite code");const i=s.docs[0],o=i.data();if(o.members.some(d=>d.id===e))throw new Error("You are already a member of this group");const l=(await Ip(Xn(rn,"users",e))).data(),u={id:e,displayName:(l==null?void 0:l.displayName)||null,email:(l==null?void 0:l.email)||null,photoURL:(l==null?void 0:l.photoURL)||null};return await Rp(Xn(rn,"studyGroups",i.id),{members:WY(u)}),{...o,id:i.id,members:[...o.members,u]}},h_e=async(t,e)=>{const n=Xn(rn,"studyGroups",t),i=(await Ip(n)).data().members.find(o=>o.id===e);i&&await Rp(n,{members:HY(i)})},f_e=async(t,e,n)=>{const r=Xn(rn,"studyGroups",t);await Rp(r,{isLive:e,...n})};function p_e(){const t=Qe(),{currentUser:e}=Yt(),[n,r]=g.useState(!1),[s,i]=g.useState({name:"",description:""}),o=async a=>{if(a.preventDefault(),console.log("Creating group...",{currentUser:e,formData:s}),!e){Fe.error("You must be logged in to create a group");return}if(!s.name.trim()){Fe.error("Please enter a group name");return}try{r(!0);const l=await u_e(s.name.trim(),s.description.trim(),e.uid);console.log("Group created:",l),Fe.success("Study group created successfully!"),t(`/study-groups/${l.id}`)}catch(l){console.error("Error creating study group:",l),Fe.error("Failed to create study group. Please try again.")}finally{r(!1)}};return e?c.jsxs("div",{className:"container max-w-2xl py-8",children:[c.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Create Study Group"}),c.jsxs("form",{onSubmit:o,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Group Name"}),c.jsx(kt,{required:!0,value:s.name,onChange:a=>i(l=>({...l,name:a.target.value})),placeholder:"Enter group name",className:"w-full",maxLength:50})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Description"}),c.jsx(nu,{value:s.description,onChange:a=>i(l=>({...l,description:a.target.value})),placeholder:"Describe your study group...",className:"w-full h-32",maxLength:500})]}),c.jsx(te,{type:"submit",disabled:n||!s.name.trim(),className:"w-full bg-blue-500 hover:bg-blue-700",children:n?"Creating...":"Create Study Group"})]})]}):c.jsxs("div",{className:"container max-w-2xl py-8 text-center",children:[c.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Sign In Required"}),c.jsx("p",{children:"Please sign in to create a study group."})]})}function m_e(){const t=Qe(),{currentUser:e}=Yt(),[n,r]=g.useState(!1),[s,i]=g.useState(""),o=async a=>{if(a.preventDefault(),!!e)try{r(!0);const l=await d_e(s.toUpperCase(),e.uid);Fe.success("Successfully joined the study group!"),t(`/study-groups/${l.id}`)}catch(l){Fe.error("Failed to join study group"),console.error("Error joining group:",l)}finally{r(!1)}};return c.jsxs("div",{className:"container max-w-2xl py-8",children:[c.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Join Study Group"}),c.jsxs("form",{onSubmit:o,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Invite Code"}),c.jsx(kt,{required:!0,value:s,onChange:a=>i(a.target.value),placeholder:"Enter 6-digit code",className:"w-full uppercase",maxLength:6})]}),c.jsx(te,{type:"submit",disabled:n||s.length!==6,className:"w-full bg-blue-500 hover:bg-blue-700 text-white font-bold",children:n?"Joining...":"Join Group"})]})]})}let N6=!0,k6=!0;function ay(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function Ul(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,s=r.addEventListener;r.addEventListener=function(o,a){if(o!==e)return s.apply(this,arguments);const l=u=>{const d=n(u);d&&(a.handleEvent?a.handleEvent(d):a(d))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,l),s.apply(this,[o,l])};const i=r.removeEventListener;r.removeEventListener=function(o,a){if(o!==e||!this._eventMap||!this._eventMap[e])return i.apply(this,arguments);if(!this._eventMap[e].has(a))return i.apply(this,arguments);const l=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,i.apply(this,[o,l])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function g_e(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(N6=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function y_e(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(k6=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function O6(){if(typeof window=="object"){if(N6)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function PI(t,e){k6&&console.warn(t+" is deprecated, please use "+e+" instead.")}function v_e(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(s=>s.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=ay(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=ay(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=ay(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function UO(t){return Object.prototype.toString.call(t)==="[object Object]"}function D6(t){return UO(t)?Object.keys(t).reduce(function(e,n){const r=UO(t[n]),s=r?D6(t[n]):t[n],i=r&&!Object.keys(s).length;return s===void 0||i?e:Object.assign(e,{[n]:s})},{}):t}function yT(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?yT(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(s=>{yT(t,t.get(s),n)})}))}function $O(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",s=new Map;if(e===null)return s;const i=[];return t.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&i.push(o)}),i.forEach(o=>{t.forEach(a=>{a.type===r&&a.trackId===o.id&&yT(t,a,s)})}),s}const BO=O6;function j6(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const l={};return Object.keys(a).forEach(u=>{if(u==="require"||u==="advanced"||u==="mediaSource")return;const d=typeof a[u]=="object"?a[u]:{ideal:a[u]};d.exact!==void 0&&typeof d.exact=="number"&&(d.min=d.max=d.exact);const h=function(p,m){return p?p+m.charAt(0).toUpperCase()+m.slice(1):m==="deviceId"?"sourceId":m};if(d.ideal!==void 0){l.optional=l.optional||[];let p={};typeof d.ideal=="number"?(p[h("min",u)]=d.ideal,l.optional.push(p),p={},p[h("max",u)]=d.ideal,l.optional.push(p)):(p[h("",u)]=d.ideal,l.optional.push(p))}d.exact!==void 0&&typeof d.exact!="number"?(l.mandatory=l.mandatory||{},l.mandatory[h("",u)]=d.exact):["min","max"].forEach(p=>{d[p]!==void 0&&(l.mandatory=l.mandatory||{},l.mandatory[h(p,u)]=d[p])})}),a.advanced&&(l.optional=(l.optional||[]).concat(a.advanced)),l},s=function(a,l){if(e.version>=61)return l(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const u=function(d,h,p){h in d&&!(p in d)&&(d[p]=d[h],delete d[h])};a=JSON.parse(JSON.stringify(a)),u(a.audio,"autoGainControl","googAutoGainControl"),u(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let u=a.video.facingMode;u=u&&(typeof u=="object"?u:{ideal:u});const d=e.version<66;if(u&&(u.exact==="user"||u.exact==="environment"||u.ideal==="user"||u.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!d)){delete a.video.facingMode;let h;if(u.exact==="environment"||u.ideal==="environment"?h=["back","rear"]:(u.exact==="user"||u.ideal==="user")&&(h=["front"]),h)return n.mediaDevices.enumerateDevices().then(p=>{p=p.filter(y=>y.kind==="videoinput");let m=p.find(y=>h.some(_=>y.label.toLowerCase().includes(_)));return!m&&p.length&&h.includes("back")&&(m=p[p.length-1]),m&&(a.video.deviceId=u.exact?{exact:m.deviceId}:{ideal:m.deviceId}),a.video=r(a.video),BO("chrome: "+JSON.stringify(a)),l(a)})}a.video=r(a.video)}return BO("chrome: "+JSON.stringify(a)),l(a)},i=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(a,l,u){s(a,d=>{n.webkitGetUserMedia(d,l,h=>{u&&u(i(h))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(l){return s(l,u=>a(u).then(d=>{if(u.audio&&!d.getAudioTracks().length||u.video&&!d.getVideoTracks().length)throw d.getTracks().forEach(h=>{h.stop()}),new DOMException("","NotFoundError");return d},d=>Promise.reject(i(d))))}}}function M6(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function L6(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",s=>{let i;t.RTCPeerConnection.prototype.getReceivers?i=this.getReceivers().find(a=>a.track&&a.track.id===s.track.id):i={track:s.track};const o=new Event("track");o.track=s.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(s=>{let i;t.RTCPeerConnection.prototype.getReceivers?i=this.getReceivers().find(a=>a.track&&a.track.id===s.id):i={track:s};const o=new Event("track");o.track=s,o.receiver=i,o.transceiver={receiver:i},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Ul(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function F6(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(s,i){return{track:i,get dtmf(){return this._dtmf===void 0&&(i.kind==="audio"?this._dtmf=s.createDTMFSender(i):this._dtmf=null),this._dtmf},_pc:s}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const s=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,l){let u=s.apply(this,arguments);return u||(u=e(this,a),this._senders.push(u)),u};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){i.apply(this,arguments);const l=this._senders.indexOf(a);l!==-1&&this._senders.splice(l,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(i){this._senders=this._senders||[],n.apply(this,[i]),i.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(i){this._senders=this._senders||[],r.apply(this,[i]),i.getTracks().forEach(o=>{const a=this._senders.find(l=>l.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(s=>s._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function V6(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=r.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>$O(o,i.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const s=n.apply(this,[]);return s.forEach(i=>i._pc=this),s}),Ul(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(i=>$O(i,s.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let s,i,o;return this.getSenders().forEach(a=>{a.track===r&&(s?o=!0:s=a)}),this.getReceivers().forEach(a=>(a.track===r&&(i?o=!0:i=a),a.track===r)),o||s&&i?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function U6(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const l=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(l)===-1&&this._shimmedLocalStreams[a.id].push(l):this._shimmedLocalStreams[a.id]=[a,l],l};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(u=>{if(this.getSenders().find(h=>h.track===u))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const l=this.getSenders().filter(u=>a.indexOf(u)===-1);this._shimmedLocalStreams[o.id]=[o].concat(l)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const l=this._shimmedLocalStreams[a].indexOf(o);l!==-1&&this._shimmedLocalStreams[a].splice(l,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),s.apply(this,arguments)}}function $6(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return U6(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const d=n.apply(this);return this._reverseStreams=this._reverseStreams||{},d.map(h=>this._reverseStreams[h.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(d){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},d.getTracks().forEach(h=>{if(this.getSenders().find(m=>m.track===h))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[d.id]){const h=new t.MediaStream(d.getTracks());this._streams[d.id]=h,this._reverseStreams[h.id]=d,d=h}r.apply(this,[d])};const s=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(d){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[d.id]||d]),delete this._reverseStreams[this._streams[d.id]?this._streams[d.id].id:d.id],delete this._streams[d.id]},t.RTCPeerConnection.prototype.addTrack=function(d,h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const p=[].slice.call(arguments,1);if(p.length!==1||!p[0].getTracks().find(_=>_===d))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(_=>_.track===d))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const y=this._streams[h.id];if(y)y.addTrack(d),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const _=new t.MediaStream([d]);this._streams[h.id]=_,this._reverseStreams[_.id]=h,this.addStream(_)}return this.getSenders().find(_=>_.track===d)};function i(u,d){let h=d.sdp;return Object.keys(u._reverseStreams||[]).forEach(p=>{const m=u._reverseStreams[p],y=u._streams[m.id];h=h.replace(new RegExp(y.id,"g"),m.id)}),new RTCSessionDescription({type:d.type,sdp:h})}function o(u,d){let h=d.sdp;return Object.keys(u._reverseStreams||[]).forEach(p=>{const m=u._reverseStreams[p],y=u._streams[m.id];h=h.replace(new RegExp(m.id,"g"),y.id)}),new RTCSessionDescription({type:d.type,sdp:h})}["createOffer","createAnswer"].forEach(function(u){const d=t.RTCPeerConnection.prototype[u],h={[u](){const p=arguments;return arguments.length&&typeof arguments[0]=="function"?d.apply(this,[y=>{const _=i(this,y);p[0].apply(null,[_])},y=>{p[1]&&p[1].apply(null,y)},arguments[2]]):d.apply(this,arguments).then(y=>i(this,y))}};t.RTCPeerConnection.prototype[u]=h[u]});const a=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=o(this,arguments[0]),a.apply(this,arguments))};const l=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const u=l.get.apply(this);return u.type===""?u:i(this,u)}}),t.RTCPeerConnection.prototype.removeTrack=function(d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!d._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(d._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let p;Object.keys(this._streams).forEach(m=>{this._streams[m].getTracks().find(_=>d.track===_)&&(p=this._streams[m])}),p&&(p.getTracks().length===1?this.removeStream(this._reverseStreams[p.id]):p.removeTrack(d.track),this.dispatchEvent(new Event("negotiationneeded")))}}function vT(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],s={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=s[n]})}function B6(t,e){Ul(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const zO=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:B6,shimAddTrackRemoveTrack:$6,shimAddTrackRemoveTrackWithNative:U6,shimGetSendersWithDtmf:F6,shimGetUserMedia:j6,shimMediaStream:M6,shimOnTrack:L6,shimPeerConnection:vT,shimSenderReceiverGetStats:V6},Symbol.toStringTag,{value:"Module"}));function z6(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(s,i,o){PI("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(s).then(i,o)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const s=function(o,a,l){a in o&&!(l in o)&&(o[l]=o[a],delete o[a])},i=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),s(o.audio,"autoGainControl","mozAutoGainControl"),s(o.audio,"noiseSuppression","mozNoiseSuppression")),i(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const a=o.apply(this,arguments);return s(a,"mozAutoGainControl","autoGainControl"),s(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),s(a,"autoGainControl","mozAutoGainControl"),s(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function __e(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Promise.reject(s)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function G6(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function _T(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(s){const i=t.RTCPeerConnection.prototype[s],o={[s](){return arguments[0]=new(s==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};t.RTCPeerConnection.prototype[s]=o[s]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[i,o,a]=arguments;return r.apply(this,[i||null]).then(l=>{if(e.version<53&&!o)try{l.forEach(u=>{u.type=n[u.type]||u.type})}catch(u){if(u.name!=="TypeError")throw u;l.forEach((d,h)=>{l.set(h,Object.assign({},d,{type:n[d.type]||d.type}))})}return l}).then(o,a)}}function q6(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=e.apply(this,[]);return s.forEach(i=>i._pc=this),s});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=n.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function W6(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(s=>s._pc=this),r}),Ul(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function H6(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){PI("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function K6(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function Q6(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const s=r.length>0;s&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const i=e.apply(this,arguments);if(s){const{sender:o}=i,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return i})}function Y6(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function X6(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function J6(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const GO=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:Q6,shimCreateAnswer:J6,shimCreateOffer:X6,shimGetDisplayMedia:__e,shimGetParameters:Y6,shimGetUserMedia:z6,shimOnTrack:G6,shimPeerConnection:_T,shimRTCDataChannel:K6,shimReceiverGetStats:W6,shimRemoveStream:H6,shimSenderGetStats:q6},Symbol.toStringTag,{value:"Module"}));function Z6(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(s=>e.call(this,s,r)),r.getVideoTracks().forEach(s=>e.call(this,s,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...s){return s&&s.forEach(i=>{this._localStreams?this._localStreams.includes(i)||this._localStreams.push(i):this._localStreams=[i]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const s=n.getTracks();this.getSenders().forEach(i=>{s.includes(i.track)&&this.removeTrack(i)})})}}function ez(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(s=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(s))return;this._remoteStreams.push(s);const i=new Event("addstream");i.stream=s,this.dispatchEvent(i)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(i=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(i)>=0)return;r._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function tz(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,s=e.setLocalDescription,i=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(u,d){const h=arguments.length>=2?arguments[2]:arguments[0],p=n.apply(this,[h]);return d?(p.then(u,d),Promise.resolve()):p},e.createAnswer=function(u,d){const h=arguments.length>=2?arguments[2]:arguments[0],p=r.apply(this,[h]);return d?(p.then(u,d),Promise.resolve()):p};let a=function(l,u,d){const h=s.apply(this,[l]);return d?(h.then(u,d),Promise.resolve()):h};e.setLocalDescription=a,a=function(l,u,d){const h=i.apply(this,[l]);return d?(h.then(u,d),Promise.resolve()):h},e.setRemoteDescription=a,a=function(l,u,d){const h=o.apply(this,[l]);return d?(h.then(u,d),Promise.resolve()):h},e.addIceCandidate=a}function nz(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=s=>r(rz(s))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,s,i){e.mediaDevices.getUserMedia(r).then(s,i)}).bind(e))}function rz(t){return t&&t.video!==void 0?Object.assign({},t,{video:D6(t.video)}):t}function sz(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,s){if(r&&r.iceServers){const i=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];a.urls===void 0&&a.url?(PI("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,i.push(a)):i.push(r.iceServers[o])}r.iceServers=i}return new e(r,s)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function iz(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function oz(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveAudio===!0&&!s&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveVideo===!0&&!i&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function az(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const qO=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:az,shimCallbacksAPI:tz,shimConstraints:rz,shimCreateOfferLegacy:oz,shimGetUserMedia:nz,shimLocalStreamsAPI:Z6,shimRTCIceServerUrls:sz,shimRemoteStreamsAPI:ez,shimTrackEventTransceiver:iz},Symbol.toStringTag,{value:"Module"}));var lz={exports:{}};(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((s,i)=>(i>0?"m="+s:s).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(s=>s.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const s={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let i=8;i<r.length;i+=2)switch(r[i]){case"raddr":s.relatedAddress=r[i+1];break;case"rport":s.relatedPort=parseInt(r[i+1],10);break;case"tcptype":s.tcpType=r[i+1];break;case"ufrag":s.ufrag=r[i+1],s.usernameFragment=r[i+1];break;default:s[r[i]]===void 0&&(s[r[i]]=r[i+1]);break}return s},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const s=n.component;s==="rtp"?r.push(1):s==="rtcp"?r.push(2):r.push(s),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const i=n.type;return r.push("typ"),r.push(i),i!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const s={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),s.name=r[0],s.clockRate=parseInt(r[1],10),s.channels=r.length===3?parseInt(r[2],10):1,s.numChannels=s.channels,s},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const s=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(s!==1?"/"+s:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let s;const i=n.substring(n.indexOf(" ")+1).split(";");for(let o=0;o<i.length;o++)s=i[o].trim().split("="),r[s[0].trim()]=s[1];return r},e.writeFmtp=function(n){let r="",s=n.payloadType;if(n.preferredPayloadType!==void 0&&(s=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const i=[];Object.keys(n.parameters).forEach(o=>{n.parameters[o]!==void 0?i.push(o+"="+n.parameters[o]):i.push(o)}),r+="a=fmtp:"+s+" "+i.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",s=n.payloadType;return n.preferredPayloadType!==void 0&&(s=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(i=>{r+="a=rtcp-fb:"+s+" "+i.type+(i.parameter&&i.parameter.length?" "+i.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),s={ssrc:parseInt(n.substring(7,r),10)},i=n.indexOf(":",r);return i>-1?(s.attribute=n.substring(r+1,i),s.value=n.substring(i+1)):s.attribute=n.substring(r+1),s},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(s=>parseInt(s,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let s="a=setup:"+r+`\r
`;return n.fingerprints.forEach(i=>{s+="a=fingerprint:"+i.algorithm+" "+i.value+`\r
`}),s},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const s=e.matchPrefix(n+r,"a=ice-ufrag:")[0],i=e.matchPrefix(n+r,"a=ice-pwd:")[0];return s&&i?{usernameFragment:s.substring(12),password:i.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=e.splitLines(n)[0].split(" ");r.profile=i[2];for(let a=3;a<i.length;a++){const l=i[a],u=e.matchPrefix(n,"a=rtpmap:"+l+" ")[0];if(u){const d=e.parseRtpMap(u),h=e.matchPrefix(n,"a=fmtp:"+l+" ");switch(d.parameters=h.length?e.parseFmtp(h[0]):{},d.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+l+" ").map(e.parseRtcpFb),r.codecs.push(d),d.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(d.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(e.parseExtmap(a))});const o=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(a=>{o.forEach(l=>{a.rtcpFeedback.find(d=>d.type===l.type&&d.parameter===l.parameter)||a.rtcpFeedback.push(l)})}),r},e.writeRtpDescription=function(n,r){let s="";s+="m="+n+" ",s+=r.codecs.length>0?"9":"0",s+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",s+=r.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,s+=`c=IN IP4 0.0.0.0\r
`,s+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(o=>{s+=e.writeRtpMap(o),s+=e.writeFmtp(o),s+=e.writeRtcpFb(o)});let i=0;return r.codecs.forEach(o=>{o.maxptime>i&&(i=o.maxptime)}),i>0&&(s+="a=maxptime:"+i+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(o=>{s+=e.writeExtmap(o)}),s},e.parseRtpEncodingParameters=function(n){const r=[],s=e.parseRtpParameters(n),i=s.fecMechanisms.indexOf("RED")!==-1,o=s.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(n,"a=ssrc:").map(p=>e.parseSsrcMedia(p)).filter(p=>p.attribute==="cname"),l=a.length>0&&a[0].ssrc;let u;const d=e.matchPrefix(n,"a=ssrc-group:FID").map(p=>p.substring(17).split(" ").map(y=>parseInt(y,10)));d.length>0&&d[0].length>1&&d[0][0]===l&&(u=d[0][1]),s.codecs.forEach(p=>{if(p.name.toUpperCase()==="RTX"&&p.parameters.apt){let m={ssrc:l,codecPayloadType:parseInt(p.parameters.apt,10)};l&&u&&(m.rtx={ssrc:u}),r.push(m),i&&(m=JSON.parse(JSON.stringify(m)),m.fec={ssrc:l,mechanism:o?"red+ulpfec":"red"},r.push(m))}}),r.length===0&&l&&r.push({ssrc:l});let h=e.matchPrefix(n,"b=");return h.length&&(h[0].indexOf("b=TIAS:")===0?h=parseInt(h[0].substring(7),10):h[0].indexOf("b=AS:")===0?h=parseInt(h[0].substring(5),10)*1e3*.95-50*40*8:h=void 0,r.forEach(p=>{p.maxBitrate=h})),r},e.parseRtcpParameters=function(n){const r={},s=e.matchPrefix(n,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];s&&(r.cname=s.value,r.ssrc=s.ssrc);const i=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=i.length>0,r.compound=i.length===0;const o=e.matchPrefix(n,"a=rtcp-mux");return r.mux=o.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const s=e.matchPrefix(n,"a=msid:");if(s.length===1)return r=s[0].substring(7).split(" "),{stream:r[0],track:r[1]};const i=e.matchPrefix(n,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(i.length>0)return r=i[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),s=e.matchPrefix(n,"a=max-message-size:");let i;s.length>0&&(i=parseInt(s[0].substring(19),10)),isNaN(i)&&(i=65536);const o=e.matchPrefix(n,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:i};const a=e.matchPrefix(n,"a=sctpmap:");if(a.length>0){const l=a[0].substring(10).split(" ");return{port:parseInt(l[0],10),protocol:l[1],maxMessageSize:i}}},e.writeSctpDescription=function(n,r){let s=[];return n.protocol!=="DTLS/SCTP"?s=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:s=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&s.push("a=max-message-size:"+r.maxMessageSize+`\r
`),s.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,s){let i;const o=r!==void 0?r:2;return n?i=n:i=e.generateSessionId(),`v=0\r
o=`+(s||"thisisadapterortc")+" "+i+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const s=e.splitLines(n);for(let i=0;i<s.length;i++)switch(s[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return s[i].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const s=e.splitLines(n)[0].substring(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},e.parseOLine=function(n){const s=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let s=0;s<r.length;s++)if(r[s].length<2||r[s].charAt(1)!=="=")return!1;return!0},t.exports=e})(lz);var cz=lz.exports;const su=ST(cz),x_e=nD({__proto__:null,default:su},[cz]);function ly(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const s=new e(r),i=su.parseCandidate(r.candidate);for(const o in i)o in s||Object.defineProperty(s,o,{value:i[o]});return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,Ul(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function xT(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Ul(t,"icecandidate",e=>{if(e.candidate){const n=su.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function cy(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const l=su.splitSections(a.sdp);return l.shift(),l.some(u=>{const d=su.parseMLine(u);return d&&d.kind==="application"&&d.protocol.indexOf("SCTP")!==-1})},r=function(a){const l=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(l===null||l.length<2)return-1;const u=parseInt(l[1],10);return u!==u?-1:u},s=function(a){let l=65536;return e.browser==="firefox"&&(e.version<57?a===-1?l=16384:l=2147483637:e.version<60?l=e.version===57?65535:65536:l=2147483637),l},i=function(a,l){let u=65536;e.browser==="firefox"&&e.version===57&&(u=65535);const d=su.matchPrefix(a.sdp,"a=max-message-size:");return d.length>0?u=parseInt(d[0].substring(19),10):e.browser==="firefox"&&l!==-1&&(u=2147483637),u},o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:l}=this.getConfiguration();l==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const l=r(arguments[0]),u=s(l),d=i(arguments[0],l);let h;u===0&&d===0?h=Number.POSITIVE_INFINITY:u===0||d===0?h=Math.max(u,d):h=Math.min(u,d);const p={};Object.defineProperty(p,"maxMessageSize",{get(){return h}}),this._sctp=p}return o.apply(this,arguments)}}function uy(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,s){const i=r.send;r.send=function(){const a=arguments[0],l=a.length||a.size||a.byteLength;if(r.readyState==="open"&&s.sctp&&l>s.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+s.sctp.maxMessageSize+" bytes)");return i.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const s=n.apply(this,arguments);return e(s,this),s},Ul(t,"datachannel",r=>(e(r.channel,r.target),r))}function wT(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=s=>{const i=s.target;if(i._lastConnectionState!==i.connectionState){i._lastConnectionState=i.connectionState;const o=new Event("connectionstatechange",s);i.dispatchEvent(o)}return s},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function bT(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const i=s.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&s instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:s.type,sdp:i}):s.sdp=i}return n.apply(this,arguments)}}function dy(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function hy(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let s=arguments[0]||{};if(typeof s!="object"||s.type&&s.sdp)return n.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer";break}return s.sdp||s.type!=="offer"&&s.type!=="answer"?n.apply(this,[s]):(s.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>n.apply(this,[o]))})}const w_e=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:bT,shimAddIceCandidateNullOrEmpty:dy,shimConnectionState:wT,shimMaxMessageSize:cy,shimParameterlessSetLocalDescription:hy,shimRTCIceCandidate:ly,shimRTCIceCandidateRelayProtocol:xT,shimSendThrowTypeError:uy},Symbol.toStringTag,{value:"Module"}));function b_e({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=O6,r=v_e(t),s={browserDetails:r,commonShim:w_e,extractVersion:ay,disableLog:g_e,disableWarnings:y_e,sdp:x_e};switch(r.browser){case"chrome":if(!zO||!vT||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),s;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),s;n("adapter.js shimming chrome."),s.browserShim=zO,dy(t,r),hy(t),j6(t,r),M6(t),vT(t,r),L6(t),$6(t,r),F6(t),V6(t),B6(t,r),ly(t),xT(t),wT(t),cy(t,r),uy(t),bT(t,r);break;case"firefox":if(!GO||!_T||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),s;n("adapter.js shimming firefox."),s.browserShim=GO,dy(t,r),hy(t),z6(t,r),_T(t,r),G6(t),H6(t),q6(t),W6(t),K6(t),Q6(t),Y6(t),X6(t),J6(t),ly(t),wT(t),cy(t,r),uy(t);break;case"safari":if(!qO||!e.shimSafari)return n("Safari shim is not included in this adapter release."),s;n("adapter.js shimming safari."),s.browserShim=qO,dy(t,r),hy(t),sz(t),oz(t),tz(t),Z6(t),ez(t),iz(t),nz(t),az(t),ly(t),xT(t),cy(t,r),uy(t),bT(t,r);break;default:n("Unsupported browser!");break}return s}const WO=b_e({window:typeof window>"u"?void 0:window});function E_e({groupId:t}){const{currentUser:e}=Yt(),[n,r]=g.useState([]),[s,i]=g.useState(""),[o,a]=g.useState(!1),l=g.useRef(null),[u,d]=g.useState(null),h=()=>{var _;(_=l.current)==null||_.scrollIntoView({behavior:"smooth"})};g.useEffect(()=>{h()},[n]),g.useEffect(()=>{const _=Fu(rn,"studyGroups",t,"messages"),b=LF(_,$Y("timestamp","asc")),x=BF(b,E=>{try{const w=E.docs.map(I=>{const k=I.data();return{id:I.id,text:k.text||"",userId:k.userId||"",userName:k.userName||"Anonymous",timestamp:k.timestamp||Qc()}});r(w)}catch(w){console.error("Error parsing messages:",w),Fe.error("Error loading messages")}},E=>{console.error("Error fetching messages:",E),Fe.error("Error loading messages")});return()=>x()},[t]);const p=async _=>{if(_.preventDefault(),!(!s.trim()||!e))try{const b=Fu(rn,"studyGroups",t,"messages");await qY(b,{text:s,userId:e.uid,userName:e.displayName||"Anonymous",timestamp:Qc()}),i("")}catch(b){console.error("Error sending message:",b)}},m=window.isSecureContext||window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",y=async()=>{var _;try{if(o)u&&(u.getTracks().forEach(b=>{b.stop()}),d(null),a(!1),Fe.success("Microphone deactivated"));else{if(!m){console.error("Not in a secure context"),Fe.error("Microphone access requires HTTPS. Please use a secure connection.");return}if(!((_=navigator.mediaDevices)!=null&&_.getUserMedia)){console.error("getUserMedia not supported"),Fe.error("Your browser does not support microphone access");return}console.log("Attempting to access microphone..."),console.log("Browser:",WO.browserDetails.browser),console.log("Version:",WO.browserDetails.version);const b=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:{ideal:!0},noiseSuppression:{ideal:!0},autoGainControl:{ideal:!0}},video:!1});d(b),a(!0),Fe.success("Microphone activated")}}catch(b){console.error("Audio error:",b),b instanceof Error?b.name==="NotAllowedError"||b.name==="PermissionDeniedError"?Fe.error("Please allow microphone access in your browser settings"):b.name==="NotFoundError"||b.name==="DevicesNotFoundError"?Fe.error("No microphone found. Please check your device settings"):b.name==="NotReadableError"||b.name==="TrackStartError"?Fe.error("Cannot access microphone. It might be in use by another app"):b.name==="OverconstrainedError"?Fe.error("Microphone not compatible"):Fe.error("Could not access microphone. Please check your settings"):Fe.error("Could not access microphone")}};return c.jsxs(Se,{className:"flex flex-col h-[600px]",children:[c.jsx(np,{className:"flex-1 p-4",children:c.jsxs("div",{className:"space-y-4",children:[n.map(_=>c.jsxs("div",{className:`flex items-start gap-2 ${_.userId===(e==null?void 0:e.uid)?"flex-row-reverse":"flex-row"}`,children:[c.jsx($p,{className:"w-8 h-8",children:c.jsx(Bp,{children:_.userName[0]})}),c.jsxs("div",{className:`max-w-[70%] rounded-lg p-3 ${_.userId===(e==null?void 0:e.uid)?"bg-primary text-primary-foreground":"bg-muted"}`,children:[c.jsx("div",{className:"text-sm font-semibold mb-1",children:_.userId===(e==null?void 0:e.uid)?"You":_.userName}),c.jsx("div",{children:_.text})]})]},_.id)),c.jsx("div",{ref:l})]})}),c.jsx("div",{className:"p-4 border-t",children:c.jsxs("form",{onSubmit:p,className:"flex gap-2",children:[c.jsx(te,{type:"button",size:"icon",variant:o?"destructive":"default",onClick:y,children:o?c.jsx(n$,{className:"w-4 h-4"}):c.jsx(g0,{className:"w-4 h-4"})}),c.jsx(kt,{type:"text",value:s,onChange:_=>i(_.target.value),placeholder:"Type a message...",className:"flex-1"}),c.jsx(te,{type:"submit",size:"icon",children:c.jsx(y0,{className:"w-4 h-4"})})]})})]})}const T_e=()=>{var h;const{groupId:t}=j5(),e=Qe(),{currentUser:n}=Yt(),[r,s]=g.useState(null),[i,o]=g.useState(!0);g.useEffect(()=>{if(!t){Fe.error("Invalid group ID"),e("/dashboard");return}const p=BF(Xn(rn,"studyGroups",t),m=>{if(m.exists())try{const y=m.data();s({...y,id:m.id})}catch(y){console.error("Error parsing group data:",y),Fe.error("Error loading group data")}else Fe.error("Study group not found"),e("/dashboard");o(!1)},m=>{console.error("Error fetching group:",m),Fe.error("Error loading group"),o(!1),e("/dashboard")});return()=>p()},[t,e]);const a=async()=>{if(r)try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(r.inviteCode),Fe.success("Invite code copied to clipboard!");else{const p=document.createElement("textarea");p.value=r.inviteCode,document.body.appendChild(p),p.select();try{document.execCommand("copy"),Fe.success("Invite code copied to clipboard!")}catch(m){Fe.error("Unable to copy invite code. Please copy it manually."),console.error("Fallback clipboard copy failed:",m)}document.body.removeChild(p)}}catch(p){console.error("Clipboard error:",p),Fe.error("Unable to copy invite code. Please copy it manually.")}},l=async()=>{if(!(!r||!n))try{await h_e(r.id,n.uid),Fe.success("Left study group successfully"),e("/dashboard")}catch{Fe.error("Failed to leave group")}},u=async()=>{if(r)try{await f_e(r.id,!r.isLive),Fe.success(r.isLive?"Study session ended":"Study session started")}catch{Fe.error("Failed to update study session status")}};if(i)return c.jsxs("div",{className:"container py-8 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"animate-pulse h-8 w-48 bg-muted rounded"}),c.jsx("div",{className:"animate-pulse h-4 w-96 bg-muted rounded"})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"animate-pulse h-10 w-32 bg-muted rounded"}),c.jsx("div",{className:"animate-pulse h-10 w-32 bg-muted rounded"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[c.jsx(Se,{className:"p-6 h-[600px]",children:c.jsx(np,{className:"h-full",children:c.jsxs("div",{className:"animate-pulse space-y-4",children:[c.jsx("div",{className:"h-6 bg-muted rounded w-24"}),[...Array(5)].map((p,m)=>c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-muted"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("div",{className:"h-4 bg-muted rounded w-32"}),c.jsx("div",{className:"h-3 bg-muted rounded w-48"})]})]},m))]})})}),c.jsx("div",{className:"lg:col-span-3",children:c.jsx("div",{className:"animate-pulse h-[600px] bg-muted rounded"})})]})]});if(!r||!n)return c.jsx("div",{className:"container py-8",children:"Group not found"});const d=r.createdBy===n.uid;return c.jsxs("div",{className:"container py-8 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("h1",{className:"text-3xl font-bold",children:r.name}),r.isLive&&c.jsx(qn,{variant:"default",className:"bg-primary text-primary-foreground px-3 py-1",children:"Live Session"})]}),c.jsx("p",{className:"text-muted-foreground",children:r.description})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs(te,{variant:"outline",onClick:u,className:"gap-2",children:[r.isLive?c.jsx(n$,{className:"w-4 h-4"}):c.jsx(g0,{className:"w-4 h-4"}),r.isLive?"End Session":"Start Session"]}),c.jsxs(te,{onClick:a,className:"gap-2",children:[c.jsx(Ho,{className:"w-4 h-4"}),"Invite Members"]}),!d&&c.jsxs(te,{variant:"destructive",onClick:l,className:"gap-2",children:[c.jsx(ZU,{className:"w-4 h-4"}),"Leave Group"]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[c.jsx(Se,{className:"p-6 h-[600px]",children:c.jsxs(np,{className:"h-full",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx(Ho,{className:"w-5 h-5"}),c.jsx("h2",{className:"text-lg font-semibold",children:"Members"})]}),c.jsx("div",{className:"space-y-4",children:(h=r.members)==null?void 0:h.map(p=>{var m;return c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 text-primary flex items-center justify-center font-medium",children:((m=p.displayName)==null?void 0:m[0])||"A"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"font-medium truncate flex items-center gap-2",children:[p.displayName||"Anonymous",p.id===r.createdBy&&c.jsx(Sl,{className:"w-4 h-4 text-yellow-500"})]}),c.jsx("div",{className:"text-sm text-muted-foreground truncate",children:p.email})]})]},p.id)})})]})}),c.jsx("div",{className:"lg:col-span-3",children:c.jsx(E_e,{groupId:r.id})})]})]})},uz=[{id:"test-course",title:"Test Course",description:"This is a test course",duration:"1 hour",level:"Beginner",instructor:"Test Instructor",isPremium:!1,image:"https://images.unsplash.com/photo-1627398242454-45a1465c2479",videos:[{id:"test-1",title:"Test Video 1",description:"This is test video 1",videoUrl:"test",quiz:{questions:[{id:1,question:"Is this a test?",options:["Yes","No","Maybe","Not sure"],correctAnswer:0}]}}]},{id:"javascript-basics",title:"JavaScript Fundamentals",description:"Master the basics of JavaScript programming",duration:"4 hours",level:"Beginner",instructor:"John Smith",isPremium:!1,image:"https://images.unsplash.com/photo-1627398242454-45a1465c2479",videos:Array(4).fill(null).map((t,e)=>({id:`js-${e+1}`,title:`JavaScript Lesson ${e+1}`,description:"Learn essential JavaScript concepts",videoUrl:"video-url",quiz:{questions:[{id:1,question:"What is JavaScript?",options:["Programming Language","Database","Operating System","Web Browser"],correctAnswer:0}]}}))},{id:"python-programming",title:"Python Programming",description:"Learn Python from scratch",duration:"6 hours",level:"Beginner",instructor:"Sarah Johnson",isPremium:!0,image:"https://images.unsplash.com/photo-1526379879527-8559ecfcaec0",videos:Array(4).fill(null).map((t,e)=>({id:`python-${e+1}`,title:`Python Basics ${e+1}`,description:"Master Python fundamentals",videoUrl:"video-url",quiz:{questions:[{id:1,question:"What is Python?",options:["Programming Language","Snake","Game","Tool"],correctAnswer:0}]}}))},{id:"react-fundamentals",title:"React.js Essentials",description:"Build modern web apps with React",duration:"5 hours",level:"Intermediate",instructor:"Mike Wilson",isPremium:!0,image:"https://images.unsplash.com/photo-1633356122544-f134324a6cee",videos:Array(4).fill(null).map((t,e)=>({id:`react-${e+1}`,title:`React Basics ${e+1}`,description:"Learn React components and hooks",videoUrl:"video-url",quiz:{questions:[{id:1,question:"What is React?",options:["JS Library","Database","Programming Language","Server"],correctAnswer:0}]}}))},{id:"web-design",title:"Web Design Masterclass",description:"Create beautiful and responsive websites",duration:"8 hours",level:"Beginner",instructor:"Emma Davis",isPremium:!1,image:"https://images.unsplash.com/photo-1507238691740-187a5b1d37b8",videos:Array(4).fill(null).map((t,e)=>({id:`design-${e+1}`,title:`Design Principles ${e+1}`,description:"Master web design fundamentals",videoUrl:"video-url",quiz:{questions:[{id:1,question:"What is responsive design?",options:["Adapts to screen size","Fast loading","Uses images","Has colors"],correctAnswer:0}]}}))},{id:"data-science",title:"Data Science Basics",description:"Introduction to data analysis",duration:"10 hours",level:"Intermediate",instructor:"David Brown",isPremium:!0,image:"https://images.unsplash.com/photo-1551288049-bebda4e38f71",videos:Array(4).fill(null).map((t,e)=>({id:`data-${e+1}`,title:`Data Analysis ${e+1}`,description:"Learn data science concepts",videoUrl:"video-url",quiz:{questions:[{id:1,question:"What is data science?",options:["Analysis of data","Web design","Programming","Gaming"],correctAnswer:0}]}}))},{id:"mobile-dev",title:"Mobile App Development",description:"Build iOS and Android apps",duration:"12 hours",level:"Advanced",instructor:"Lisa Chen",isPremium:!0,image:"https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c",videos:Array(4).fill(null).map((t,e)=>({id:`mobile-${e+1}`,title:`Mobile Development ${e+1}`,description:"Create mobile applications",videoUrl:"video-url",quiz:{questions:[{id:1,question:"What is React Native?",options:["Mobile framework","Database","Programming Language","Server"],correctAnswer:0}]}}))},{id:"machine-learning",title:"Machine Learning",description:"Introduction to AI and ML",duration:"15 hours",level:"Advanced",instructor:"Alex Turner",isPremium:!0,image:"https://images.unsplash.com/photo-1515879218367-8466d910aaa4",videos:Array(4).fill(null).map((t,e)=>({id:`ml-${e+1}`,title:`ML Concepts ${e+1}`,description:"Learn machine learning basics",videoUrl:"video-url",quiz:{questions:[{id:1,question:"What is machine learning?",options:["AI subset","Database","Programming Language","Web design"],correctAnswer:0}]}}))},{id:"cybersecurity",title:"Cybersecurity Basics",description:"Learn network security",duration:"8 hours",level:"Intermediate",instructor:"Robert White",isPremium:!0,image:"https://images.unsplash.com/photo-1550751827-4bd374c3f58b",videos:Array(4).fill(null).map((t,e)=>({id:`security-${e+1}`,title:`Security Fundamentals ${e+1}`,description:"Master cybersecurity concepts",videoUrl:"video-url",quiz:{questions:[{id:1,question:"What is encryption?",options:["Data protection","Web design","Programming","Database"],correctAnswer:0}]}}))},{id:"game-development",title:"Game Development",description:"Create your own games",duration:"10 hours",level:"Intermediate",instructor:"Chris Anderson",isPremium:!1,image:"https://images.unsplash.com/photo-1556438064-2d7646166914",videos:Array(4).fill(null).map((t,e)=>({id:`game-${e+1}`,title:`Game Dev Basics ${e+1}`,description:"Learn game development",videoUrl:"video-url",quiz:{questions:[{id:1,question:"What is Unity?",options:["Game engine","Database","Programming Language","Web browser"],correctAnswer:0}]}}))},{id:"blockchain",title:"Blockchain Technology",description:"Understanding cryptocurrency",duration:"6 hours",level:"Advanced",instructor:"James Wilson",isPremium:!0,image:"https://images.unsplash.com/photo-1639762681485-074b7f938ba0",videos:Array(4).fill(null).map((t,e)=>({id:`blockchain-${e+1}`,title:`Blockchain Basics ${e+1}`,description:"Learn blockchain concepts",videoUrl:"video-url",quiz:{questions:[{id:1,question:"What is blockchain?",options:["Distributed ledger","Database","Programming Language","Web design"],correctAnswer:0}]}}))},{id:"cloud-computing",title:"Cloud Computing",description:"Master AWS and Azure",duration:"12 hours",level:"Intermediate",instructor:"Maria Garcia",isPremium:!0,image:"https://images.unsplash.com/photo-1451187580459-43490279c0fa",videos:Array(4).fill(null).map((t,e)=>({id:`cloud-${e+1}`,title:`Cloud Services ${e+1}`,description:"Learn cloud platforms",videoUrl:"video-url",quiz:{questions:[{id:1,question:"What is AWS?",options:["Cloud platform","Database","Programming Language","Web browser"],correctAnswer:0}]}}))},{id:"devops",title:"DevOps Engineering",description:"Learn CI/CD and automation",duration:"10 hours",level:"Advanced",instructor:"Tom Harris",isPremium:!0,image:"https://images.unsplash.com/photo-1461749280684-dccba630e2f6",videos:Array(4).fill(null).map((t,e)=>({id:`devops-${e+1}`,title:`DevOps Practices ${e+1}`,description:"Master DevOps tools",videoUrl:"video-url",quiz:{questions:[{id:1,question:"What is CI/CD?",options:["Continuous Integration","Database","Programming","Web design"],correctAnswer:0}]}}))},{id:"ui-ux-design",title:"UI/UX Design",description:"Create amazing user experiences",duration:"8 hours",level:"Beginner",instructor:"Sophie Lee",isPremium:!1,image:"https://images.unsplash.com/photo-1561070791-2526d30994b5",videos:Array(4).fill(null).map((t,e)=>({id:`design-${e+1}`,title:`UI/UX Principles ${e+1}`,description:"Learn design thinking",videoUrl:"video-url",quiz:{questions:[{id:1,question:"What is UX?",options:["User Experience","Programming","Database","Web browser"],correctAnswer:0}]}}))}];function S_e({course:t,isPremiumUser:e,onSubscribe:n}){const r=Qe(),s=()=>{t.isPremium&&!e?n():r(`/course/${t.id}`)};return c.jsxs(Se,{className:"overflow-hidden cursor-pointer transition-transform hover:scale-[1.02]",onClick:s,children:[c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:t.image,alt:t.title,className:"w-full h-48 object-cover"}),t.isPremium&&c.jsx("div",{className:"absolute top-4 right-4",children:c.jsx(qn,{className:"bg-gradient-to-r from-amber-500 to-amber-600",children:"Premium"})})]}),c.jsxs("div",{className:"p-4 space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold",children:t.title}),c.jsx("p",{className:"text-sm text-muted-foreground",children:t.description})]}),c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Up,{className:"h-4 w-4"}),t.duration]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Wae,{className:"h-4 w-4"}),t.level]})]}),t.isPremium&&!e&&c.jsx(ile,{className:"h-4 w-4 text-amber-500"})]}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:["By ",t.instructor]})]})]})}function C_e(){const[t,e]=g.useState(""),[n,r]=g.useState(!1),{userProfile:s}=Yt(),i=(s==null?void 0:s.isPremium)||!1,o=uz.filter(a=>a.title.toLowerCase().includes(t.toLowerCase())||a.description.toLowerCase().includes(t.toLowerCase())||a.instructor.toLowerCase().includes(t.toLowerCase()));return c.jsxs("div",{className:"container py-8 space-y-8",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"All Courses"}),c.jsx("p",{className:"text-muted-foreground",children:"Browse our collection of courses"})]}),c.jsxs(F$,{open:n,onOpenChange:r,children:[c.jsxs(te,{onClick:()=>r(!0),className:"bg-gradient-to-r from-amber-500 to-amber-600 text-white",children:[c.jsx(Sl,{className:"h-4 w-4 mr-2"}),"Get Premium Access"]}),c.jsxs(JC,{side:"right",className:"w-full sm:w-[540px] overflow-y-auto",children:[c.jsxs(ZC,{className:"mb-4",children:[c.jsx(eI,{children:"Choose Your Plan"}),c.jsx(tI,{children:"Select the plan that best fits your learning goals"})]}),c.jsx(B$,{})]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(fle,{className:"h-4 w-4 text-muted-foreground"}),c.jsx(kt,{placeholder:"Search courses...",value:t,onChange:a=>e(a.target.value),className:"max-w-sm"})]}),c.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:o.map(a=>c.jsx(S_e,{course:a,isPremiumUser:i,onSubscribe:()=>r(!0)},a.id))})]})}function I_e({videoUrl:t,onComplete:e}){const[n,r]=g.useState(0),[s,i]=g.useState(!1),o=g.useCallback(()=>{i(!1),e()},[e]);g.useEffect(()=>{let l=null;return s&&n<100&&(l=setInterval(()=>{r(u=>{const d=u+1;return d>=100?(l&&clearInterval(l),o(),100):d})},200)),()=>{l&&clearInterval(l)}},[s,o]);const a=()=>{i(!s)};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"aspect-video rounded-lg bg-black/90 flex items-center justify-center relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/20 via-pink-500/20 to-purple-500/20 animate-gradient"}),c.jsxs("div",{className:"relative z-10 text-center",children:[c.jsxs("div",{className:"text-4xl font-bold mb-2",children:[n,"%"]}),c.jsx(te,{size:"lg",onClick:a,className:"bg-white/10 hover:bg-white/20",children:s?c.jsx(r$,{className:"h-8 w-8"}):c.jsx(ep,{className:"h-8 w-8"})})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{value:n,className:"h-2"}),c.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[c.jsx("span",{children:"Progress"}),c.jsxs("span",{children:[n,"%"]})]})]})]})}function P_e({title:t,questions:e=[],onComplete:n}){const[r,s]=g.useState(0),[i,o]=g.useState({}),[a,l]=g.useState(!1);if(!e||e.length===0)return c.jsxs(Se,{className:"p-6 text-center",children:[c.jsx("h2",{className:"text-2xl font-bold mb-2",children:t}),c.jsx("p",{className:"text-muted-foreground",children:"No questions available for this quiz."})]});const u=e[r],d=b=>{a||o(x=>({...x,[u.id]:b}))},h=()=>{r<e.length-1&&s(b=>b+1)},p=()=>{r>0&&s(b=>b-1)},m=()=>{l(!0);const x=e.filter(E=>i[E.id]===E.correctAnswer).length/e.length*100;n(x)},y=(b,x)=>{if(!a)return null;const E=e.find(w=>w.id===b);return(E==null?void 0:E.correctAnswer)===x},_=Object.keys(i).length===e.length;return c.jsx(Se,{className:"p-6",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold",children:t}),c.jsxs("p",{className:"text-muted-foreground",children:["Question ",r+1," of ",e.length]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"font-medium",children:u.question}),c.jsx("div",{className:"space-y-2",children:u.options.map((b,x)=>{const E=y(u.id,x),w=i[u.id]===x;return c.jsx("button",{className:`w-full text-left p-4 rounded-lg border transition-colors
                    ${w?"border-primary bg-primary/10":"border-border hover:border-primary"}
                    ${a&&w?E?"border-green-500 bg-green-50 text-green-700":"border-red-500 bg-red-50 text-red-700":""}
                    ${a&&!w&&E?"border-green-500 bg-green-50/50 text-green-700":""}
                  `,onClick:()=>d(x),disabled:a,children:b},x)})})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx(te,{variant:"outline",onClick:p,disabled:r===0,children:"Previous"}),r===e.length-1?c.jsx(te,{onClick:m,disabled:!_||a,children:"Submit Quiz"}):c.jsx(te,{onClick:h,disabled:!i[u.id],children:"Next"})]}),a&&c.jsx("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:c.jsx("p",{className:"text-green-700 font-medium text-center",children:"Quiz completed! Your answers have been submitted."})})]})})}function dz(){var y;const{courseId:t}=j5(),e=Qe(),[n,r]=g.useState(0),[s,i]=g.useState(!1),[o,a]=g.useState([]),{userProfile:l}=Yt(),u=(l==null?void 0:l.isPremium)||!1,d=uz.find(_=>_.id===t);if(g.useEffect(()=>{d||e("/courses")},[d,e]),!d||!d.videos||d.videos.length===0)return null;const h=d.videos[n],p=()=>{i(!0)},m=_=>{_>=70&&(a(b=>b.includes(h.id)?b:[...b,h.id]),i(!1),n+1<d.videos.length&&r(n+1))};return c.jsx("div",{className:"container py-8",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[s?c.jsx(P_e,{title:`Quiz: ${h.title}`,questions:((y=h.quiz)==null?void 0:y.questions)||[],onComplete:m}):c.jsx(I_e,{videoUrl:h.videoUrl,onComplete:p}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h1",{className:"text-2xl font-bold",children:d.title}),c.jsx("p",{className:"text-muted-foreground",children:d.description}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(qn,{children:d.level}),c.jsx(qn,{variant:"outline",children:d.duration}),d.isPremium&&u&&c.jsx(qn,{className:"bg-gradient-to-r from-amber-500 to-amber-600",children:"Premium"})]})]})]}),c.jsxs(Se,{className:"p-4",children:[c.jsx("h2",{className:"font-semibold mb-4",children:"Course Content"}),c.jsx("div",{className:"space-y-2",children:d.videos.map((_,b)=>c.jsx(te,{variant:n===b?"default":"ghost",className:"w-full justify-start",onClick:()=>{r(b),i(!1)},children:c.jsxs("div",{className:"flex items-center gap-2",children:[o.includes(_.id)&&c.jsx(zC,{className:"h-4 w-4 text-green-500"}),c.jsxs("span",{children:[b+1,". ",_.title]})]})},_.id))})]})]})})}const R_e=Mp("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ET=g.forwardRef(({className:t,variant:e,...n},r)=>c.jsx("div",{ref:r,role:"alert",className:oe(R_e({variant:e}),t),...n}));ET.displayName="Alert";const A_e=g.forwardRef(({className:t,...e},n)=>c.jsx("h5",{ref:n,className:oe("mb-1 font-medium leading-none tracking-tight",t),...e}));A_e.displayName="AlertTitle";const TT=g.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:oe("text-sm [&_p]:leading-relaxed",t),...e}));TT.displayName="AlertDescription";const N_e=t=>[{question:`What is the main focus of ${t}?`,options:[`Understanding ${t} fundamentals`,`Advanced ${t} concepts`,`${t} in practice`,`${t} architecture`],correctAnswer:0,xp:50},{question:`Which of the following is NOT typically associated with ${t}?`,options:["Data Structures","Machine Learning","Web Development","Game Design"],correctAnswer:3,xp:50},{question:`What is a common use case for ${t}?`,options:["Building web applications","Data analysis","System automation","All of the above"],correctAnswer:3,xp:75},{question:`Which tool is most commonly used with ${t}?`,options:["Visual Studio Code","Command Line Interface","Web Browser","Database Management System"],correctAnswer:0,xp:50},{question:`What is the best practice when working with ${t}?`,options:["Writing documentation","Testing code","Version control","All of the above"],correctAnswer:3,xp:75},{question:`How does ${t} handle error management?`,options:["Try-catch blocks","Error logging","Error callbacks","All of the above"],correctAnswer:3,xp:50},{question:`What is the primary advantage of using ${t}?`,options:["Performance","Scalability","Ease of use","Security"],correctAnswer:1,xp:75},{question:`Which pattern is commonly used in ${t}?`,options:["MVC Pattern","Observer Pattern","Factory Pattern","Singleton Pattern"],correctAnswer:0,xp:50},{question:`What type of applications can be built with ${t}?`,options:["Web Applications","Mobile Apps","Desktop Software","All of the above"],correctAnswer:3,xp:75},{question:`What is the future trend for ${t}?`,options:["Cloud Integration","AI Integration","IoT Integration","All of the above"],correctAnswer:3,xp:100}];function k_e({videoUrl:t,title:e,chapterTitle:n,onComplete:r}){const s=Qe(),[i,o]=g.useState(!1),[a,l]=g.useState(0),[u,d]=g.useState(!1),[h,p]=g.useState(!1),[m,y]=g.useState(0),[_,b]=g.useState(0),[x,E]=g.useState(0),[w,I]=g.useState(!1),[k]=g.useState(()=>N_e(n)),[M,C]=g.useState(!1);g.useEffect(()=>{let P;return i&&a<100&&(P=setInterval(()=>{l(R=>{const O=R+1;return O>=100&&(o(!1),I(!0),clearInterval(P)),O})},300)),()=>clearInterval(P)},[i,a]);const S=P=>{const R=k[m];R.correctAnswer===P&&(b(_+1),E(x+R.xp)),m<k.length-1?y(m+1):C(!0)};return c.jsx("div",{className:"container mx-auto px-4 py-8",children:c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold mb-2",children:e}),c.jsx("h2",{className:"text-xl text-muted-foreground",children:n})]}),h?c.jsx(Se,{className:"p-6",children:M?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(Kt,{className:"h-16 w-16 text-yellow-500 mx-auto mb-4"}),c.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Quiz Complete!"}),c.jsxs("p",{className:"text-xl mb-4",children:["You scored ",_," out of ",k.length]}),c.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6",children:[c.jsx(tu,{className:"h-6 w-6 text-yellow-500"}),c.jsxs("span",{className:"text-2xl font-bold",children:[x," XP"]})]}),c.jsx(ET,{className:"mb-6",children:c.jsxs(TT,{children:["Great job! You've earned ",x," XP from this chapter."]})}),c.jsx(te,{size:"lg",onClick:()=>{r(),s(-1)},children:"Continue Learning"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Chapter Quiz"}),c.jsxs("p",{className:"text-muted-foreground",children:["Question ",m+1," of ",k.length]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Kt,{className:"h-5 w-5 text-yellow-500"}),c.jsxs("span",{className:"font-semibold",children:[x," XP"]})]})]}),c.jsx(kr,{value:m/k.length*100,className:"mt-4"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[c.jsx("p",{className:"text-lg font-medium",children:k[m].question}),c.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[c.jsx(tu,{className:"h-4 w-4 text-yellow-500"}),c.jsxs("span",{className:"text-sm text-muted-foreground",children:[k[m].xp," XP"]})]})]}),c.jsx("div",{className:"grid gap-3",children:k[m].options.map((P,R)=>c.jsx(te,{variant:"outline",className:"w-full justify-start text-left p-4",onClick:()=>S(R),children:P},R))})]})]})}):c.jsx(Se,{className:"overflow-hidden",children:c.jsxs("div",{className:"aspect-video bg-black relative flex items-center justify-center",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/20 to-black/60"}),!i&&c.jsx(te,{variant:"ghost",size:"icon",className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-20 rounded-full bg-white/10 hover:bg-white/20 text-white",onClick:()=>o(!0),children:c.jsx(ep,{className:"h-12 w-12"})}),c.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent p-4",children:[c.jsx(kr,{value:a,className:"mb-4"}),c.jsxs("div",{className:"flex items-center justify-between text-white",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(te,{variant:"ghost",size:"icon",className:"hover:bg-white/20",onClick:()=>l(Math.max(0,a-10)),children:c.jsx(mle,{className:"h-6 w-6"})}),c.jsx(te,{variant:"ghost",size:"icon",className:"hover:bg-white/20",onClick:()=>o(!i),children:i?c.jsx(r$,{className:"h-8 w-8"}):c.jsx(ep,{className:"h-8 w-8"})}),c.jsx(te,{variant:"ghost",size:"icon",className:"hover:bg-white/20",onClick:()=>l(Math.min(100,a+10)),children:c.jsx(gle,{className:"h-6 w-6"})}),c.jsxs("div",{className:"text-sm",children:[Math.floor(a),"% Complete"]})]}),c.jsx(te,{variant:"ghost",size:"icon",className:"hover:bg-white/20",onClick:()=>d(!u),children:u?c.jsx(wle,{className:"h-6 w-6"}):c.jsx(xle,{className:"h-6 w-6"})})]})]})]})}),w&&!h&&c.jsxs("div",{className:"mt-6",children:[c.jsx(ET,{className:"mb-4",children:c.jsx(TT,{children:"You've completed the video! Take the quiz to earn up to 650 XP."})}),c.jsx("div",{className:"flex justify-end",children:c.jsxs(te,{size:"lg",onClick:()=>p(!0),className:"bg-green-500 hover:bg-green-600",children:[c.jsx(Kt,{className:"mr-2 h-5 w-5"}),"Take Chapter Quiz"]})})]})]})})}function hz(){const t=Ai(),e=Qe(),{courseTitle:n,chapterTitle:r,videoUrl:s,quiz:i}=t.state||{courseTitle:"Course",chapterTitle:"Chapter",videoUrl:"",quiz:null},o=()=>{e(-1)};return c.jsx(k_e,{videoUrl:s,title:n,chapterTitle:r,onComplete:o,quiz:i})}var RI="Tabs",[O_e,l0e]=mr(RI,[h0]),fz=h0(),[D_e,AI]=O_e(RI),pz=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...u}=t,d=Lp(a),[h,p]=Ml({prop:r,onChange:s,defaultProp:i});return c.jsx(D_e,{scope:n,baseId:Do(),value:h,onValueChange:p,orientation:o,dir:d,activationMode:l,children:c.jsx(_e.div,{dir:d,"data-orientation":o,...u,ref:e})})});pz.displayName=RI;var mz="TabsList",gz=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=AI(mz,n),o=fz(n);return c.jsx(G3,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:c.jsx(_e.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});gz.displayName=mz;var yz="TabsTrigger",vz=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=AI(yz,n),a=fz(n),l=wz(o.baseId,r),u=bz(o.baseId,r),d=r===o.value;return c.jsx(q3,{asChild:!0,...a,focusable:!s,active:d,children:c.jsx(_e.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:e,onMouseDown:ae(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:ae(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:ae(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!s&&h&&o.onValueChange(r)})})})});vz.displayName=yz;var _z="TabsContent",xz=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,a=AI(_z,n),l=wz(a.baseId,r),u=bz(a.baseId,r),d=r===a.value,h=g.useRef(d);return g.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),c.jsx(Dn,{present:s||d,children:({present:p})=>c.jsx(_e.div,{"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:p&&i})})});xz.displayName=_z;function wz(t,e){return`${t}-trigger-${e}`}function bz(t,e){return`${t}-content-${e}`}var j_e=pz,Ez=gz,Tz=vz,Sz=xz;const M_e=j_e,Cz=g.forwardRef(({className:t,...e},n)=>c.jsx(Ez,{ref:n,className:oe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Cz.displayName=Ez.displayName;const fy=g.forwardRef(({className:t,...e},n)=>c.jsx(Tz,{ref:n,className:oe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));fy.displayName=Tz.displayName;const py=g.forwardRef(({className:t,...e},n)=>c.jsx(Sz,{ref:n,className:oe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));py.displayName=Sz.displayName;function Je({title:t,description:e,topics:n,chapters:r}){var x;const s=Qe(),[i,o]=g.useState(null),[a,l]=g.useState(!1),[u,d]=g.useState(null),[h,p]=g.useState(!1),m=r.filter(E=>E.completed).length,y=m/r.length*100,_=E=>{s("/courses/video",{state:{courseTitle:t,chapterTitle:E.title,videoUrl:E.videoUrl,quiz:E.quiz}})},b=E=>{d(E),l(!0)};return c.jsxs("div",{className:"container mx-auto px-4 py-8",children:[c.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h1",{className:"text-4xl font-bold mb-4",children:t}),c.jsx("p",{className:"text-muted-foreground mb-6",children:e}),c.jsxs("div",{className:"mb-8",children:[c.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Course Progress"}),c.jsx(kr,{value:y,className:"mb-2"}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:[m," of ",r.length," chapters completed"]})]}),c.jsxs("div",{className:"mb-8",children:[c.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"What You'll Learn"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map((E,w)=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Tl,{className:"h-5 w-5 text-primary"}),c.jsx("span",{children:E})]},w))})]})]}),c.jsx("div",{className:"w-full md:w-80",children:c.jsxs(Se,{className:"p-6",children:[c.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Quick Actions"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs(te,{className:"w-full",onClick:()=>s("/flashcards"),children:[c.jsx(js,{className:"mr-2 h-4 w-4"})," Practice Flashcards"]}),c.jsxs(te,{className:"w-full",onClick:()=>s("/quiz"),children:[c.jsx(Kt,{className:"mr-2 h-4 w-4"})," Take Quiz"]}),c.jsxs(te,{className:"w-full",onClick:()=>s("/ai"),children:[c.jsx(t$,{className:"mr-2 h-4 w-4"})," Ask AI Assistant"]})]})]})})]}),c.jsx(Vv,{open:!!i,onOpenChange:()=>o(null),children:c.jsxs(tp,{className:"max-w-4xl",children:[c.jsx(Uv,{children:c.jsx($v,{children:u==null?void 0:u.title})}),c.jsx("div",{className:"aspect-video bg-black relative",children:c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx(te,{variant:"ghost",size:"icon",className:"w-16 h-16",onClick:()=>p(!h),children:h?c.jsx(Yae,{className:"w-16 h-16 text-white"}):c.jsx(ep,{className:"w-16 h-16 text-white"})})})}),c.jsxs("div",{className:"flex justify-between mt-4",children:[c.jsx(te,{variant:"outline",onClick:()=>o(null),children:"Close"}),(u==null?void 0:u.quiz)&&c.jsx(te,{onClick:()=>b(u),children:"Take Chapter Quiz"})]})]})}),c.jsx(Vv,{open:a,onOpenChange:()=>l(!1),children:c.jsxs(tp,{children:[c.jsx(Uv,{children:c.jsxs($v,{children:["Chapter Quiz: ",u==null?void 0:u.title]})}),c.jsx("div",{className:"space-y-4",children:(x=u==null?void 0:u.quiz)==null?void 0:x.questions.map((E,w)=>c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"font-medium",children:E.question}),c.jsx("div",{className:"space-y-2",children:E.options.map((I,k)=>c.jsx(te,{variant:"outline",className:"w-full justify-start",onClick:()=>{E.correctAnswer},children:I},k))})]},w))})]})}),c.jsxs(M_e,{defaultValue:"chapters",className:"mt-12",children:[c.jsxs(Cz,{children:[c.jsx(fy,{value:"chapters",children:"Course Content"}),c.jsx(fy,{value:"resources",children:"Resources"}),c.jsx(fy,{value:"discussion",children:"Discussion"})]}),c.jsx(py,{value:"chapters",children:c.jsx("div",{className:"space-y-4",children:r.map((E,w)=>c.jsx(Se,{className:"p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:"font-semibold",children:E.title}),E.completed&&c.jsx(zC,{className:"h-4 w-4 text-green-500"})]}),c.jsx("p",{className:"text-sm text-muted-foreground",children:E.description}),c.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:E.duration})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(te,{variant:"outline",onClick:()=>_(E),children:[c.jsx(ep,{className:"h-4 w-4 mr-2"}),E.completed?"Review":"Start"]}),E.quiz&&c.jsxs(te,{variant:"secondary",onClick:()=>b(E),children:[c.jsx(Kt,{className:"h-4 w-4 mr-2"}),"Quiz"]})]})]})},w))})}),c.jsx(py,{value:"resources",children:c.jsxs(Se,{className:"p-6",children:[c.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Course Resources"}),c.jsxs("ul",{className:"space-y-2",children:[c.jsx("li",{children:" Course Slides"}),c.jsx("li",{children:" Practice Exercises"}),c.jsx("li",{children:" Useful Links"}),c.jsx("li",{children:" Additional Reading"})]})]})}),c.jsx(py,{value:"discussion",children:c.jsxs(Se,{className:"p-6",children:[c.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Course Discussion"}),c.jsx("p",{className:"text-muted-foreground",children:"Join the discussion with other students and instructors. Ask questions, share insights, and collaborate on projects."}),c.jsx(te,{className:"mt-4",children:"Join Discussion"})]})})]})]})}const L_e=[{path:"/courses/nodejs-backend",title:"Node.js Backend Development",description:"Learn to build scalable backend services with Node.js. Master Express.js, MongoDB, RESTful APIs, and more.",topics:["Express.js Framework","MongoDB & Mongoose","RESTful API Design","Authentication & Authorization","Error Handling","Testing & Debugging","Deployment & DevOps","Performance Optimization"],chapters:[{id:1,title:"Introduction to Node.js",description:"Learn the basics of Node.js and its ecosystem",duration:"45 minutes",videoUrl:"https://example.com/videos/nodejs-intro",completed:!1,quiz:{questions:[{question:"What is Node.js?",options:["A browser-based JavaScript runtime","A server-side JavaScript runtime","A database management system","A front-end framework"],correctAnswer:1}]}}]}],HO=()=>c.jsxs(V5,{children:[c.jsx(he,{index:!0,element:c.jsx(me,{children:c.jsx(C_e,{})})}),c.jsx(he,{path:":courseId",element:c.jsx(me,{children:c.jsx(dz,{})})}),c.jsx(he,{path:":courseId/chapter/:chapterId",element:c.jsx(me,{children:c.jsx(hz,{})})}),L_e.map(t=>c.jsx(he,{path:t.path.replace("/courses/",""),element:c.jsx(me,{children:c.jsx(Je,{title:t.title,description:t.description,topics:t.topics,chapters:t.chapters})})},t.path))]}),F_e=new Cie;function V_e(){const{currentUser:t,loading:e}=Yt();return e?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):t?c.jsx(mC,{to:"/dashboard",replace:!0}):c.jsx(pce,{})}function U_e(){return g.useEffect(()=>{document.documentElement.classList.add("dark")},[]),c.jsx(Pne,{children:c.jsx(Pie,{client:F_e,children:c.jsx(R5,{children:c.jsx(Ah,{children:c.jsxs("div",{className:"min-h-screen bg-[#060913]",children:[c.jsx(Gle,{}),c.jsx(Zle,{children:c.jsx("div",{className:"pt-16",children:c.jsxs(V5,{children:[c.jsx(he,{path:"/",element:c.jsx(V_e,{})}),c.jsx(he,{path:"/login",element:c.jsx(sce,{})}),c.jsx(he,{path:"/register",element:c.jsx(cce,{})}),c.jsx(he,{path:"/dashboard",element:c.jsx(me,{children:c.jsx(Rue,{})})}),c.jsx(he,{path:"/leaderboard",element:c.jsx(me,{children:c.jsx(Aue,{})})}),c.jsx(he,{path:"/profile",element:c.jsx(me,{children:c.jsx(kue,{})})}),c.jsx(he,{path:"/ai",element:c.jsx(me,{children:c.jsx(Oue,{})})}),c.jsx(he,{path:"/subscription",element:c.jsx(me,{children:c.jsx(que,{})})}),c.jsx(he,{path:"/subscription/success",element:c.jsx(me,{children:c.jsx(Oye,{})})}),c.jsx(he,{path:"/subscription/cancel",element:c.jsx(me,{children:c.jsx(Dye,{})})}),c.jsx(he,{path:"/flashcards",element:c.jsx(me,{children:c.jsx(tve,{})})}),c.jsx(he,{path:"/summary",element:c.jsx(me,{children:c.jsx(rve,{})})}),c.jsx(he,{path:"/quiz",element:c.jsx(me,{children:c.jsx(ive,{})})}),c.jsx(he,{path:"/mock-test",element:c.jsx(me,{children:c.jsx(Mve,{})})}),c.jsx(he,{path:"/courses",element:c.jsx(me,{children:c.jsx(HO,{})})}),c.jsx(he,{path:"/courses/nodejs-backend",element:c.jsx(me,{children:c.jsx(Je,{title:"Node.js Backend Development",description:"Learn to build scalable backend services with Node.js. Master Express.js, MongoDB, RESTful APIs, and more.",topics:["Express.js Framework","MongoDB & Mongoose","RESTful API Design","Authentication & Authorization","Error Handling","Testing & Debugging","Deployment & DevOps","Performance Optimization"],chapters:[{id:1,title:"Introduction to Node.js",description:"Learn the basics of Node.js and its ecosystem",duration:"45 minutes",videoUrl:"https://example.com/videos/nodejs-intro",completed:!1,quiz:{questions:[{question:"What is Node.js?",options:["A browser-based JavaScript runtime","A server-side JavaScript runtime","A database management system","A front-end framework"],correctAnswer:1},{question:"What is npm?",options:["Node Package Manager","New Project Manager","Node Process Monitor","Node Project Module"],correctAnswer:0}]}},{id:2,title:"Express.js Fundamentals",description:"Build web applications with Express.js",duration:"1 hour",videoUrl:"https://example.com/videos/expressjs",completed:!1,quiz:{questions:[{question:"What is middleware in Express.js?",options:["A database connection","A function that has access to request and response objects","A routing mechanism","A template engine"],correctAnswer:1}]}},{id:3,title:"Database Integration",description:"Work with MongoDB and Mongoose",duration:"1.5 hours",videoUrl:"https://example.com/videos/mongodb",completed:!1,quiz:{questions:[{question:"What is MongoDB?",options:["A SQL database","A NoSQL database","A file system","A caching system"],correctAnswer:1}]}},{id:4,title:"API Development",description:"Create RESTful APIs",duration:"2 hours",videoUrl:"https://example.com/videos/rest-api",completed:!1,quiz:{questions:[{question:"What is REST?",options:["A programming language","A database","An architectural style for APIs","A framework"],correctAnswer:2}]}}]})})}),c.jsx(he,{path:"/courses/machine-learning",element:c.jsx(me,{children:c.jsx(Je,{title:"Machine Learning Basics",description:"Get started with machine learning algorithms and concepts. Learn about data preprocessing, model training, and evaluation.",topics:["Data Preprocessing","Supervised Learning","Unsupervised Learning","Model Evaluation","Feature Engineering","Neural Networks","Deep Learning","Model Deployment"],chapters:[{id:1,title:"Introduction to ML",description:"Understanding machine learning concepts",duration:"1 hour",completed:!1,videoUrl:"https://example.com/ml-intro"},{id:2,title:"Data Preparation",description:"Learn data preprocessing techniques",duration:"1.5 hours",completed:!1,videoUrl:"https://example.com/data-prep"},{id:3,title:"Model Training",description:"Train and evaluate ML models",duration:"2 hours",completed:!1,videoUrl:"https://example.com/model-training"},{id:4,title:"Advanced Topics",description:"Deep learning and deployment",duration:"2.5 hours",completed:!1,videoUrl:"https://example.com/advanced-ml"}]})})}),c.jsx(he,{path:"/courses/aws-cloud",element:c.jsx(me,{children:c.jsx(Je,{title:"AWS Cloud Computing",description:"Master cloud computing with Amazon Web Services. Learn about EC2, S3, Lambda, and more.",topics:["AWS Fundamentals","EC2 & Virtual Machines","S3 Storage Solutions","Lambda Functions","Database Services","Networking & Security","Monitoring & Logging","Cost Management"],chapters:[{id:1,title:"AWS Basics",description:"Introduction to AWS services",duration:"1 hour",completed:!1,videoUrl:"https://example.com/aws-basics"},{id:2,title:"Compute Services",description:"Work with EC2 and Lambda",duration:"2 hours",completed:!1,videoUrl:"https://example.com/aws-compute"},{id:3,title:"Storage & Database",description:"Learn S3 and RDS",duration:"1.5 hours",completed:!1,videoUrl:"https://example.com/aws-storage"},{id:4,title:"DevOps on AWS",description:"CI/CD and deployment",duration:"2 hours",completed:!1,videoUrl:"https://example.com/aws-devops"}]})})}),c.jsx(he,{path:"/courses/mobile-dev",element:c.jsx(me,{children:c.jsx(Je,{title:"Mobile App Development",description:"Learn to build mobile apps with React Native, Flutter, or native iOS and Android development.",topics:["Mobile App Fundamentals","React Native Development","Flutter Development","Native iOS Development","Native Android Development","Mobile App Design","Mobile App Testing","Mobile App Deployment"],chapters:[{id:1,title:"Introduction to Mobile App Development",description:"Learn the basics of mobile app development",duration:"1 hour",completed:!1,videoUrl:"https://example.com/mobile-dev-intro"},{id:2,title:"React Native Fundamentals",description:"Build mobile apps with React Native",duration:"2 hours",completed:!1,videoUrl:"https://example.com/react-native"},{id:3,title:"Flutter Fundamentals",description:"Build mobile apps with Flutter",duration:"2 hours",completed:!1,videoUrl:"https://example.com/flutter"},{id:4,title:"Native Mobile App Development",description:"Build native mobile apps for iOS and Android",duration:"3 hours",completed:!1,videoUrl:"https://example.com/native-mobile-dev"}]})})}),c.jsx(he,{path:"/courses/devops",element:c.jsx(me,{children:c.jsx(Je,{title:"DevOps Essentials",description:"Learn the fundamentals of DevOps and how to implement it in your organization.",topics:["DevOps Fundamentals","Agile Development","Continuous Integration","Continuous Deployment","Continuous Monitoring","Infrastructure as Code","Containerization","Orchestration"],chapters:[{id:1,title:"Introduction to DevOps",description:"Learn the basics of DevOps",duration:"1 hour",completed:!1,videoUrl:"https://example.com/devops-intro"},{id:2,title:"Agile Development",description:"Learn Agile development methodologies",duration:"1.5 hours",completed:!1,videoUrl:"https://example.com/agile-dev"},{id:3,title:"CI/CD Pipelines",description:"Learn to implement CI/CD pipelines",duration:"2 hours",completed:!1,videoUrl:"https://example.com/cicd"},{id:4,title:"Infrastructure as Code",description:"Learn to manage infrastructure with code",duration:"2 hours",completed:!1,videoUrl:"https://example.com/iac"}]})})}),c.jsx(he,{path:"/courses/cyber-security",element:c.jsx(me,{children:c.jsx(Je,{title:"Cybersecurity Fundamentals",description:"Learn the basics of cybersecurity and how to protect your organization from cyber threats.",topics:["Cybersecurity Fundamentals","Network Security","Cloud Security","Endpoint Security","Application Security","Data Security","Compliance and Risk Management","Incident Response"],chapters:[{id:1,title:"Introduction to Cybersecurity",description:"Learn the basics of cybersecurity",duration:"1 hour",completed:!1,videoUrl:"https://example.com/cybersecurity-intro"},{id:2,title:"Network Security",description:"Learn to secure your network",duration:"1.5 hours",completed:!1,videoUrl:"https://example.com/network-security"},{id:3,title:"Cloud Security",description:"Learn to secure your cloud infrastructure",duration:"2 hours",completed:!1,videoUrl:"https://example.com/cloud-security"},{id:4,title:"Endpoint Security",description:"Learn to secure your endpoints",duration:"2 hours",completed:!1,videoUrl:"https://example.com/endpoint-security"}]})})}),c.jsx(he,{path:"/courses/blockchain",element:c.jsx(me,{children:c.jsx(Je,{title:"Blockchain Development",description:"Learn to build blockchain applications with Ethereum, Hyperledger, and more.",topics:["Blockchain Fundamentals","Ethereum Development","Hyperledger Development","Smart Contract Development","Blockchain Security","Blockchain Scalability","Blockchain Interoperability","Blockchain Use Cases"],chapters:[{id:1,title:"Introduction to Blockchain",description:"Learn the basics of blockchain",duration:"1 hour",completed:!1,videoUrl:"https://example.com/blockchain-intro"},{id:2,title:"Ethereum Fundamentals",description:"Build blockchain applications with Ethereum",duration:"2 hours",completed:!1,videoUrl:"https://example.com/ethereum"},{id:3,title:"Hyperledger Fundamentals",description:"Build blockchain applications with Hyperledger",duration:"2 hours",completed:!1,videoUrl:"https://example.com/hyperledger"},{id:4,title:"Smart Contract Development",description:"Learn to develop smart contracts",duration:"2.5 hours",completed:!1,videoUrl:"https://example.com/smart-contracts"}]})})}),c.jsx(he,{path:"/courses/data-structures",element:c.jsx(me,{children:c.jsx(Je,{title:"Data Structures & Algorithms",description:"Learn to implement data structures and algorithms in your programming language of choice.",topics:["Data Structures Fundamentals","Arrays","Linked Lists","Stacks","Queues","Trees","Graphs","Algorithms"],chapters:[{id:1,title:"Introduction to Data Structures",description:"Learn the basics of data structures",duration:"1 hour",completed:!1,videoUrl:"https://example.com/data-structures-intro"},{id:2,title:"Arrays and Linked Lists",description:"Learn to implement arrays and linked lists",duration:"1.5 hours",completed:!1,videoUrl:"https://example.com/arrays-linked-lists"},{id:3,title:"Trees and Graphs",description:"Explore tree and graph data structures",duration:"2 hours",completed:!1,videoUrl:"https://example.com/trees-graphs"},{id:4,title:"Sorting Algorithms",description:"Learn various sorting algorithms and their complexity",duration:"2.5 hours",completed:!1,videoUrl:"https://example.com/sorting-algorithms"}]})})}),c.jsx(he,{path:"/courses/flutter",element:c.jsx(me,{children:c.jsx(Je,{title:"Flutter Development",description:"Learn to build mobile apps with Flutter.",topics:["Flutter Fundamentals","Widget Development","Layout and Design","Navigation and Routing","State Management","API Integration","Testing and Debugging","Deployment"],chapters:[{id:1,title:"Introduction to Flutter",description:"Learn the basics of Flutter",duration:"1 hour",completed:!1,videoUrl:"https://example.com/flutter-intro"},{id:2,title:"Widget Development",description:"Learn to build custom widgets",duration:"1.5 hours",completed:!1,videoUrl:"https://example.com/flutter-widgets"},{id:3,title:"Layout and Design",description:"Learn to design and layout your app",duration:"2 hours",completed:!1,videoUrl:"https://example.com/flutter-layout"},{id:4,title:"Navigation and Routing",description:"Learn to navigate and route your app",duration:"2 hours",completed:!1,videoUrl:"https://example.com/flutter-navigation"}]})})}),c.jsx(he,{path:"/courses/sql-database",element:c.jsx(me,{children:c.jsx(Je,{title:"SQL & Database Design",description:"Learn to design and implement databases with SQL.",topics:["SQL Fundamentals","Database Design","Data Modeling","Data Normalization","Querying and Indexing","Database Security","Database Performance","Database Scalability"],chapters:[{id:1,title:"Introduction to SQL",description:"Learn the basics of SQL",videoUrl:"https://example.com/sql-intro",completed:!1,duration:"1 hour"},{id:2,title:"Database Design",description:"Learn to design databases",videoUrl:"https://example.com/database-design",completed:!1,duration:"1.5 hours"},{id:3,title:"Data Modeling",description:"Learn to model data",videoUrl:"https://example.com/data-modeling",completed:!1,duration:"2 hours"},{id:4,title:"Querying and Indexing",description:"Learn to query and index data",videoUrl:"https://example.com/querying-indexing",completed:!1,duration:"2 hours"}]})})}),c.jsx(he,{path:"/courses/web3",element:c.jsx(me,{children:c.jsx(Je,{title:"Web3 Development",description:"Learn to build decentralized applications with Web3 technologies.",topics:["Web3 Fundamentals","Blockchain Development","Smart Contract Development","Decentralized Finance","Non-Fungible Tokens","Decentralized Autonomous Organizations","Web3 Security","Web3 Scalability"],chapters:[{id:1,title:"Introduction to Web3",description:"Learn the basics of Web3",videoUrl:"https://example.com/web3-intro",completed:!1,duration:"1 hour"},{id:2,title:"Blockchain Development",description:"Learn to build blockchain applications",videoUrl:"https://example.com/blockchain-dev",completed:!1,duration:"2 hours"},{id:3,title:"Smart Contract Development",description:"Learn to develop smart contracts",videoUrl:"https://example.com/smart-contracts",completed:!1,duration:"2.5 hours"},{id:4,title:"Decentralized Finance",description:"Learn about decentralized finance",videoUrl:"https://example.com/decentralized-finance",completed:!1,duration:"2.5 hours"}]})})}),c.jsx(he,{path:"/courses/video",element:c.jsx(me,{children:c.jsx(hz,{})})}),c.jsx(he,{path:"/courses/web-development",element:c.jsx(me,{children:c.jsx(Je,{title:"Web Development Fundamentals",description:"Learn the basics of web development, including HTML, CSS, and JavaScript.",topics:["HTML Fundamentals","CSS Styling","JavaScript Basics","Responsive Design","Front-end Frameworks","Back-end Development","Database Integration","Web Security"],chapters:[{id:1,title:"Introduction to HTML",description:"Learn the basics of HTML structure and elements",videoUrl:"https://example.com/intro-html",completed:!1,duration:"1 hour"},{id:2,title:"CSS Styling",description:"Master CSS styling and layouts",videoUrl:"https://example.com/css-styling",completed:!1,duration:"1.5 hours"},{id:3,title:"JavaScript Basics",description:"Get started with JavaScript programming",videoUrl:"https://example.com/js-basics",completed:!1,duration:"2 hours"},{id:4,title:"Responsive Design",description:"Create responsive websites that work on all devices",videoUrl:"https://example.com/responsive",completed:!1,duration:"1.5 hours"}]})})}),c.jsx(he,{path:"/courses/data-structures-and-algorithms",element:c.jsx(me,{children:c.jsx(Je,{title:"Data Structures and Algorithms",description:"Master the fundamental data structures and algorithms in computer science.",topics:["Data Structures Fundamentals","Arrays","Linked Lists","Stacks","Queues","Trees","Graphs","Algorithms"],chapters:[{id:1,title:"Arrays and Strings",description:"Understanding arrays and string manipulation",videoUrl:"https://example.com/arrays",completed:!1,duration:"1 hour"},{id:2,title:"Linked Lists",description:"Learn about linked lists and their operations",videoUrl:"https://example.com/linked-lists",completed:!1,duration:"1.5 hours"},{id:3,title:"Trees and Graphs",description:"Explore tree and graph data structures",videoUrl:"https://example.com/trees",completed:!1,duration:"2 hours"},{id:4,title:"Sorting Algorithms",description:"Learn various sorting algorithms and their complexity",videoUrl:"https://example.com/sorting",completed:!1,duration:"2.5 hours"}]})})}),c.jsx(he,{path:"/courses/machine-learning-basics",element:c.jsx(me,{children:c.jsx(Je,{title:"Machine Learning Basics",description:"Introduction to machine learning concepts and algorithms.",topics:["Machine Learning Fundamentals","Supervised Learning","Unsupervised Learning","Model Evaluation","Feature Engineering","Neural Networks","Deep Learning","Model Deployment"],chapters:[{id:1,title:"Introduction to ML",description:"Basic concepts and types of machine learning",videoUrl:"https://example.com/intro-ml",completed:!1,duration:"1 hour"},{id:2,title:"Linear Regression",description:"Understanding linear regression and its applications",videoUrl:"https://example.com/linear-regression",completed:!1,duration:"1.5 hours"},{id:3,title:"Classification",description:"Learn about classification algorithms",videoUrl:"https://example.com/classification",completed:!1,duration:"2 hours"},{id:4,title:"Neural Networks",description:"Introduction to neural networks",videoUrl:"https://example.com/neural-networks",completed:!1,duration:"2.5 hours"}]})})}),c.jsx(he,{path:"/courses/system-design",element:c.jsx(me,{children:c.jsx(Je,{title:"System Design",description:"Learn how to design scalable systems and architectures.",topics:["System Design Fundamentals","Scalability","Performance","Reliability","Distributed Systems","Microservices","Load Balancing","Caching"],chapters:[{id:1,title:"System Design Basics",description:"Fundamental concepts of system design",videoUrl:"https://example.com/system-design-basics",completed:!1,duration:"1 hour"},{id:2,title:"Scalability",description:"Understanding scalability patterns",videoUrl:"https://example.com/scalability",completed:!1,duration:"1.5 hours"},{id:3,title:"Database Design",description:"Learn about database architecture and design",videoUrl:"https://example.com/database-design",completed:!1,duration:"2 hours"},{id:4,title:"Microservices",description:"Introduction to microservices architecture",videoUrl:"https://example.com/microservices",completed:!1,duration:"2.5 hours"}]})})}),c.jsx(he,{path:"/courses/cloud-computing",element:c.jsx(me,{children:c.jsx(Je,{title:"Cloud Computing",description:"Master cloud computing concepts and services.",topics:["Cloud Fundamentals","AWS Services","Azure Services","Cloud Security","Serverless","Containers","Cloud Storage","Cloud Networking"],chapters:[{id:1,title:"Cloud Fundamentals",description:"Basic concepts of cloud computing",videoUrl:"https://example.com/cloud-basics",completed:!1,duration:"1 hour"},{id:2,title:"AWS Services",description:"Overview of key AWS services",videoUrl:"https://example.com/aws-services",completed:!1,duration:"1.5 hours"},{id:3,title:"Cloud Security",description:"Understanding cloud security principles",videoUrl:"https://example.com/cloud-security",completed:!1,duration:"2 hours"},{id:4,title:"Serverless Computing",description:"Introduction to serverless architecture",videoUrl:"https://example.com/serverless",completed:!1,duration:"2.5 hours"}]})})}),c.jsx(he,{path:"/courses/devops",element:c.jsx(me,{children:c.jsx(Je,{title:"DevOps Practices",description:"Learn modern DevOps practices and tools.",topics:["DevOps Fundamentals","CI/CD","Containers","Infrastructure as Code","Monitoring","Automation","Version Control","Configuration Management"],chapters:[{id:1,title:"DevOps Introduction",description:"Understanding DevOps principles",videoUrl:"https://example.com/devops-intro",completed:!1,duration:"1 hour"},{id:2,title:"CI/CD",description:"Continuous Integration and Deployment",videoUrl:"https://example.com/cicd",completed:!1,duration:"1.5 hours"},{id:3,title:"Container Technologies",description:"Docker and container orchestration",videoUrl:"https://example.com/containers",completed:!1,duration:"2 hours"},{id:4,title:"Infrastructure as Code",description:"Learn about infrastructure automation",videoUrl:"https://example.com/iac",completed:!1,duration:"2.5 hours"}]})})}),c.jsx(he,{path:"/courses/mobile-development",element:c.jsx(me,{children:c.jsx(Je,{title:"Mobile App Development",description:"Build mobile applications for iOS and Android.",topics:["Mobile Development Basics","UI/UX Design","React Native","Native Development","App Testing","App Publishing","App Security","App Monetization"],chapters:[{id:1,title:"Mobile Development Basics",description:"Introduction to mobile app development",videoUrl:"https://example.com/mobile-basics",completed:!1,duration:"1 hour"},{id:2,title:"UI/UX Design",description:"Design principles for mobile apps",videoUrl:"https://example.com/mobile-design",completed:!1,duration:"1.5 hours"},{id:3,title:"React Native",description:"Cross-platform development with React Native",videoUrl:"https://example.com/react-native",completed:!1,duration:"2 hours"},{id:4,title:"App Publishing",description:"Publishing apps to app stores",videoUrl:"https://example.com/app-publishing",completed:!1,duration:"2.5 hours"}]})})}),c.jsx(he,{path:"/courses/cybersecurity",element:c.jsx(me,{children:c.jsx(Je,{title:"Cybersecurity Fundamentals",description:"Learn essential cybersecurity concepts and practices.",topics:["Security Fundamentals","Network Security","Web Security","Cryptography","Ethical Hacking","Security Tools","Incident Response","Security Compliance"],chapters:[{id:1,title:"Security Basics",description:"Fundamental security concepts",videoUrl:"https://example.com/security-basics",completed:!1,duration:"1 hour"},{id:2,title:"Network Security",description:"Understanding network security",videoUrl:"https://example.com/network-security",completed:!1,duration:"1.5 hours"},{id:3,title:"Web Security",description:"Web application security principles",videoUrl:"https://example.com/web-security",completed:!1,duration:"2 hours"},{id:4,title:"Ethical Hacking",description:"Introduction to ethical hacking",videoUrl:"https://example.com/ethical-hacking",completed:!1,duration:"2.5 hours"}]})})}),c.jsx(he,{path:"/courses/ui-ux-design",element:c.jsx(me,{children:c.jsx(Je,{title:"UI/UX Design",description:"Master the principles of user interface and experience design.",topics:["Design Fundamentals","User Research","Wireframing","Prototyping","Visual Design","Interaction Design","Usability Testing","Design Systems"],chapters:[{id:1,title:"Design Principles",description:"Learn fundamental design principles and theory",videoUrl:"https://example.com/design-principles",completed:!1,duration:"1 hour"},{id:2,title:"User Research",description:"Master user research and analysis techniques",videoUrl:"https://example.com/user-research",completed:!1,duration:"1.5 hours"},{id:3,title:"Prototyping",description:"Create interactive prototypes and wireframes",videoUrl:"https://example.com/prototyping",completed:!1,duration:"2 hours"},{id:4,title:"Design Systems",description:"Build and maintain design systems",videoUrl:"https://example.com/design-systems",completed:!1,duration:"2.5 hours"}]})})}),c.jsx(he,{path:"/courses/blockchain",element:c.jsx(me,{children:c.jsx(Je,{title:"Blockchain Development",description:"Learn to build decentralized applications and smart contracts.",topics:["Blockchain Basics","Smart Contracts","DApp Development","Web3","Solidity","Ethereum","NFTs","DeFi"],chapters:[{id:1,title:"Blockchain Fundamentals",description:"Understanding blockchain technology",videoUrl:"https://example.com/blockchain-basics",completed:!1,duration:"1 hour"},{id:2,title:"Smart Contracts",description:"Writing and deploying smart contracts",videoUrl:"https://example.com/smart-contracts",completed:!1,duration:"1.5 hours"},{id:3,title:"DApp Development",description:"Building decentralized applications",videoUrl:"https://example.com/dapp-dev",completed:!1,duration:"2 hours"},{id:4,title:"Web3 Integration",description:"Integrating Web3 with applications",videoUrl:"https://example.com/web3",completed:!1,duration:"2.5 hours"}]})})}),c.jsx(he,{path:"/courses/game-development",element:c.jsx(me,{children:c.jsx(Je,{title:"Game Development",description:"Create engaging games using modern game development frameworks.",topics:["Game Design","Unity","3D Graphics","Game Physics","Animation","Game AI","Sound Design","Multiplayer"],chapters:[{id:1,title:"Game Design Basics",description:"Learn game design principles",videoUrl:"https://example.com/game-design",completed:!1,duration:"1 hour"},{id:2,title:"Unity Fundamentals",description:"Getting started with Unity",videoUrl:"https://example.com/unity-basics",completed:!1,duration:"1.5 hours"},{id:3,title:"Game Physics",description:"Implementing game physics",videoUrl:"https://example.com/game-physics",completed:!1,duration:"2 hours"},{id:4,title:"Game AI",description:"Creating intelligent game characters",videoUrl:"https://example.com/game-ai",completed:!1,duration:"2.5 hours"}]})})}),c.jsx(he,{path:"/courses/data-science",element:c.jsx(me,{children:c.jsx(Je,{title:"Data Science",description:"Master data analysis, visualization, and statistical methods.",topics:["Data Analysis","Python","Statistics","Visualization","Pandas","NumPy","SQL","Big Data"],chapters:[{id:1,title:"Data Analysis Fundamentals",description:"Learn basic data analysis techniques",videoUrl:"https://example.com/data-analysis",completed:!1,duration:"1 hour"},{id:2,title:"Python for Data Science",description:"Using Python for data analysis",videoUrl:"https://example.com/python-data",completed:!1,duration:"1.5 hours"},{id:3,title:"Data Visualization",description:"Creating effective data visualizations",videoUrl:"https://example.com/data-viz",completed:!1,duration:"2 hours"},{id:4,title:"Statistical Analysis",description:"Applying statistical methods",videoUrl:"https://example.com/statistics",completed:!1,duration:"2.5 hours"}]})})}),c.jsx(he,{path:"/courses/artificial-intelligence",element:c.jsx(me,{children:c.jsx(Je,{title:"Artificial Intelligence",description:"Explore AI concepts, neural networks, and deep learning.",topics:["AI Fundamentals","Neural Networks","Deep Learning","Computer Vision","NLP","TensorFlow","PyTorch","AI Ethics"],chapters:[{id:1,title:"AI Fundamentals",description:"Understanding AI concepts",videoUrl:"https://example.com/ai-basics",completed:!1,duration:"1 hour"},{id:2,title:"Neural Networks",description:"Building neural networks",videoUrl:"https://example.com/neural-networks",completed:!1,duration:"1.5 hours"},{id:3,title:"Deep Learning",description:"Advanced deep learning concepts",videoUrl:"https://example.com/deep-learning",completed:!1,duration:"2 hours"},{id:4,title:"AI Applications",description:"Real-world AI applications",videoUrl:"https://example.com/ai-apps",completed:!1,duration:"2.5 hours"}]})})}),c.jsx(he,{path:"/courses/software-testing",element:c.jsx(me,{children:c.jsx(Je,{title:"Software Testing",description:"Learn modern testing methodologies and automation frameworks.",topics:["Testing Basics","Test Automation","Unit Testing","Integration Testing","E2E Testing","Performance Testing","Security Testing","CI/CD Testing"],chapters:[{id:1,title:"Testing Fundamentals",description:"Learn software testing basics",videoUrl:"https://example.com/testing-basics",completed:!1,duration:"1 hour"},{id:2,title:"Test Automation",description:"Automating software tests",videoUrl:"https://example.com/test-automation",completed:!1,duration:"1.5 hours"},{id:3,title:"Integration Testing",description:"Writing integration tests",videoUrl:"https://example.com/integration-testing",completed:!1,duration:"2 hours"},{id:4,title:"E2E Testing",description:"End-to-end testing strategies",videoUrl:"https://example.com/e2e-testing",completed:!1,duration:"2.5 hours"}]})})}),c.jsx(he,{path:"/courses/:courseId",element:c.jsx(dz,{})}),c.jsx(he,{path:"/courses/ai-development",element:c.jsx(me,{children:c.jsx(Je,{title:"AI Development",description:"Learn to build AI-powered applications and understand core AI concepts.",topics:["AI Fundamentals","Machine Learning Basics","Neural Networks","Deep Learning","Natural Language Processing","Computer Vision","Reinforcement Learning","AI Ethics"],chapters:[{id:1,title:"Introduction to AI Development",description:"Understanding core AI concepts and development principles",videoUrl:"https://example.com/ai-dev-intro",completed:!1,duration:"1 hour"},{id:2,title:"Building ML Models",description:"Learn to create and train machine learning models",videoUrl:"https://example.com/ml-models",completed:!1,duration:"2 hours"},{id:3,title:"Neural Networks & Deep Learning",description:"Implement neural networks and understand deep learning concepts",videoUrl:"https://example.com/neural-networks-deep",completed:!1,duration:"2.5 hours"},{id:4,title:"Advanced AI Applications",description:"Build practical AI applications with modern frameworks",videoUrl:"https://example.com/advanced-ai",completed:!1,duration:"2 hours"}]})})}),c.jsx(he,{path:"/courses/*",element:c.jsx(me,{children:c.jsx(HO,{})})}),c.jsx(he,{path:"/study-groups",element:c.jsx(me,{children:c.jsx(c_e,{})})}),c.jsx(he,{path:"/study-groups/create",element:c.jsx(me,{children:c.jsx(p_e,{})})}),c.jsx(he,{path:"/study-groups/join",element:c.jsx(me,{children:c.jsx(m_e,{})})}),c.jsx(he,{path:"/study-groups/:groupId",element:c.jsx(me,{children:c.jsx(T_e,{})})}),c.jsx(he,{path:"*",element:c.jsx(mC,{to:"/",replace:!0})})]})})}),c.jsx(Jle,{}),c.jsx(yB,{})]})})})})})}const $_e=yM(document.getElementById("root"));$_e.render(c.jsx(H.StrictMode,{children:c.jsx(R5,{children:c.jsx(U_e,{})})}));
//# sourceMappingURL=index-bDMOhK3H.js.map
